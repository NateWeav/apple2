!function(){function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return t}()({1:[function(t,e,n){"use strict";e.exports={majorVersionNumber:"3.x"}},{}],2:[function(t,e,n){"use strict";function i(t){t=t||{},o.call(this),this.id=a.getNewID(),this.executor=t.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=t("./sharedRAFExecutorInstance"),a=t("./sharedRAFEmitterIDGeneratorInstance");r=i.prototype=Object.create(o.prototype),r.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},r.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},r.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,t},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._subscribe=function(){return this.executor.subscribe(this)},r._unsubscribe=function(){return this.executor.unsubscribe(this)},r._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},r._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},e.exports=i},{"./sharedRAFEmitterIDGeneratorInstance":8,"./sharedRAFExecutorInstance":9,"@marcom/ac-event-emitter-micro":160}],3:[function(t,e,n){"use strict";function i(t){t=t||{},this._reset(),this.updatePhases(),this.eventEmitter=new o,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}var r,o=t("@marcom/ac-event-emitter-micro/EventEmitterMicro");r=i.prototype,r.frameRequestedPhase="requested",r.startPhase="start",r.runPhases=["update","external","draw"],r.endPhase="end",r.disabledPhase="disabled",r.beforePhaseEventPrefix="before:",r.afterPhaseEventPrefix="after:",r.subscribe=function(t,e){return this._totalSubscribeCount++,this._nextFrameSubscribers[t.id]||(e?this._nextFrameSubscribersOrder.unshift(t.id):this._nextFrameSubscribersOrder.push(t.id),this._nextFrameSubscribers[t.id]=t,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},r.subscribeImmediate=function(t,e){return this._totalSubscribeCount++,this._subscribers[t.id]||(e?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,t.id):this._subscribersOrder.unshift(t.id),this._subscribers[t.id]=t,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},r.unsubscribe=function(t){return!!this._nextFrameSubscribers[t.id]&&(this._nextFrameSubscribers[t.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.getSubscribeID=function(){return this._totalSubscribeCount+=1},r.destroy=function(){var t=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,t},r.useExternalAnimationFrame=function(t){if("boolean"==typeof t){var e=this._isUsingExternalAnimationFrame;return t&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||t||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=t,t?this._boundOnExternalAnimationFrame:e||!1}},r.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},r._cancel=function(){var t=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,t=!0),this._isRunning||this._reset(),t},r._onAnimationFrame=function(t){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=t-this.lastFrameTime,this.lastFrameTime=t,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=t,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},r._onExternalAnimationFrame=function(t){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(t)},r._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},e.exports=i},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":161}],4:[function(t,e,n){"use strict";var i=t("./SingleCallRAFEmitter"),r=function(t){this.phase=t,this.rafEmitter=new i,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=r.prototype;o.requestAnimationFrame=function(t,e){return e===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,t),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,t),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,t),this._nextFrameCallbacksLength+=2),this._currentFrameID},o.cancelAnimationFrame=function(t){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(t),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},o._onRAFExecuted=function(t){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](t.time,t);this._frameCallbacks.length=0,this._frameCallbackLength=0},o._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},o._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},o._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},o._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},o._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},o._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},o._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},e.exports=r},{"./SingleCallRAFEmitter":6}],5:[function(t,e,n){"use strict";var i=t("./RAFInterface"),r=function(){this.events={}},o=r.prototype;o.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].requestAnimationFrame},o.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].cancelAnimationFrame},e.exports=new r},{"./RAFInterface":4}],6:[function(t,e,n){"use strict";var i=t("./RAFEmitter"),r=function(t){i.call(this,t)},o=r.prototype=Object.create(i.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},e.exports=r},{"./RAFEmitter":2}],7:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.cancelAnimationFrame("update")},{"./RAFInterfaceController":5}],8:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r=t("../.release-info.js").majorVersionNumber,o=function(){this._currentID=0};o.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},e.exports=i.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",r,o)},{"../.release-info.js":1,"@marcom/ac-shared-instance":287}],9:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r=t("../.release-info.js").majorVersionNumber,o=t("./RAFExecutor");e.exports=i.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",r,o)},{"../.release-info.js":1,"./RAFExecutor":3,"@marcom/ac-shared-instance":287}],10:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("update")},{"./RAFInterfaceController":5}],11:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function D(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:D(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=t("./utils/vector3FromLatLon"),u=t("@marcom/ac-raf-emitter/update"),h=t("@marcom/ac-raf-emitter/cancelUpdate"),f=t("./controls/PointerControls"),d=t("./controls/OrientationControls"),p=t("@marcom/ac-event-emitter-micro/EventEmitterMicro"),m=t("@marcom/ac-easing/src/ac-easing/createBezier"),_=t("@marcom/ac-useragent"),y=t("./utils/simpleTimer"),g=t("./utils/inverseLongitude"),v=(t("./utils/normalizeLongitude"),t("./controls/ArrowControls")),b=t("./utils/map"),w=_.os.ios,E=80,x=1.25,S=_.browser.safari&&_.os.osx?"high-performance":"default",k={slow:80,fast:120},T=m(.25,.1,0,1),C=m(.1,.15,0,1),A=.001,P=.999,M=1600,O=1600,I=12,L=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.el=t.el,n._textureSrc=t.src,t.video&&(n._videoElement=t.video),n._maxLat=t.maxLat||E,n._pointerControls=new f({el:t.mouseTarget||n.el}),n.arrowControls=new v,n._easing=t.easing||T,n._sineEasing=t.sineEasing||C,n._mapMinValue=void 0!==t.mapMinValue?t.mapMinValue:A,n._mapMaxValue=t.mapMaxValue||P,n._rotationDuration=t.rotationDuration||M,w&&(n._orientationControls=new d),n._panVelocity=Object.assign({},t.panVelocity||k),n._overshootMultiplier=t.overshootMultiplier||x,n._oscillationDuration=t.ocillationDuration||O,n._oscillationDistance=t.ocillationDistance||I,n._bindMethods(),n._attach(),n.refreshSize(),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){this._onPlaying=this._onPlaying.bind(this)}},{key:"_attach",value:function(){this._distance=50;var t={lat:0,lon:0};this._cachedPos=t,this._pointerControls.position=t,this._orientationControls&&(this._orientationControls.position=t);var e=this.el.clientWidth,n=this.el.clientHeight,i=e/n;this._camera=new THREE.PerspectiveCamera(75,i,1,1100),this._camera.target=new THREE.Vector3(0,0,0),this._scene=new THREE.Scene,this._geometry=new THREE.SphereBufferGeometry(500,60,40),this._geometry.scale(-1,1,1),this._texture=this._createTexture(this._textureSrc),this._material=new THREE.MeshBasicMaterial({map:this._texture}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._scene.add(this._mesh),this._renderer=new THREE.WebGLRenderer({antialias:!1,powerPreference:S}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(e,n),this._renderer.domElement.classList.add("threesixty-renderer"),this.el.appendChild(this._renderer.domElement),this._animate=this._animate.bind(this),this._animateRAF=u(this._animate)}},{key:"_animate",value:function(){this._update(),this._animateRAF=u(this._animate)}},{key:"_update",value:function(t){var n=t;n||(n=this.arrowControls.isActive?this.arrowControls.position:this._pointerControls.isActive?this._pointerControls.position:this._orientationControls?this._orientationControls.position:this._cachedPos);var i=!1;if(this._cachedPos.lat!==n.lat||this._cachedPos.lon!==n.lon)i=!0;else if(!this._videoElement||this._videoElement.paused)return;var r=Math.max(-this._maxLat,Math.min(this._maxLat,n.lat)),o=THREE.Math.degToRad(90-r),s=THREE.Math.degToRad(n.lon),a=this._distance*Math.sin(o)*Math.cos(s),l=this._distance*Math.cos(o),c=this._distance*Math.sin(o)*Math.sin(s);this._camera.zoom=this._pointerControls.scale,this._camera.position.x=a,this._camera.position.y=l,this._camera.position.z=c,this._camera.lookAt(this._camera.target),this._camera.updateProjectionMatrix(),this._renderer.render(this._scene,this._camera);var u={lat:r,lon:n.lon,x:a,y:l,z:c};this._cachedPos={lat:u.lat,lon:u.lon,x:u.x,y:u.y,z:u.z},this._pointerControls.position=u,this.arrowControls.position=u,this._orientationControls&&(this._orientationControls.position=u),this._originQuaternion||(this._originQuaternion=(new THREE.Quaternion).copy(this._camera.quaternion)),i&&this.trigger(e.POSITION_CHANGE)}},{key:"_createTexture",value:function(t){if(t instanceof HTMLVideoElement){this._videoElement=t,this._videoElement.setAttribute("playsinline","playsinline"),this._videoElement.setAttribute("webkit-playsinline","webkit-playsinline"),this._videoElement.addEventListener("playing",this._onPlaying);var e=new THREE.VideoTexture(this._videoElement);return e.minFilter=THREE.LinearFilter,e.format=THREE.RGBFormat,e}if(t.endsWith(".mp4")||t.endsWith(".m3u8")||t.endsWith(".webm")){this._videoElement||(this._videoElement=document.createElement("video")),this._videoElement.src=t,this._videoElement.loop=!0,this._videoElement.muted=!0,this._videoElement.crossOrigin="anonymous",this._videoElement.setAttribute("webkit-playsinline","webkit-playsinline"),this._videoElement.setAttribute("playsinline","playsinline"),this._videoElement.load(),this._videoElement=this._videoElement,this._videoElement.addEventListener("playing",this._onPlaying);var n=new THREE.VideoTexture(this._videoElement);return n.minFilter=THREE.LinearFilter,n.format=THREE.RGBFormat,n}return this._orientationControls.enable(),(new THREE.TextureLoader).load(t)}},{key:"refreshSize",value:function(){this._onResize()}},{key:"setPos",value:function(t,e){this._pointerControls&&(this._pointerControls.position={lat:t,lon:e}),this._orientationControls&&(this._orientationControls.position={lat:t,lon:e}),this._update({lat:t,lon:e})}},{key:"_onResize",value:function(){var t=void 0,e=void 0;this._videoElement.parentElement?(t=this._videoElement.clientWidth,e=this._videoElement.clientHeight):(t=this.el.clientWidth,e=this.el.clientHeight),h(this._animateRAF),this._pointerControls.setViewerSize(t,e),this._camera.aspect=t/e,this._camera.updateProjectionMatrix(),this._renderer.setSize(t,e),this._renderer.render(this._scene,this._camera),this._animate()}},{key:"_onPlaying",value:function(){this._videoElement.removeEventListener("playing",this._onPlaying),this._orientationControls&&this._orientationControls.enable()}},{key:"play",value:function(){this._videoElement&&this._videoElement.play()}},{key:"pause",value:function(){this._videoElement&&!this._videoElement.paused&&this._videoElement.pause()}},{key:"sendMouseDown",value:function(t){this._pointerControls.sendMouseDown(t)}},{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"oscillateLongitude",value:function(){var t=this;this._pointerControls.cancelInertia(),this.arrowControls.cancelInertia();var n=new THREE.Vector2(this.position.lon,this.position.lat),i=this._oscillationDuration,r={time:i,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)};return this.trigger(e.ROTATION_START,r),new Promise(function(o,s){y(i,function(i){var o=Math.sin(Math.PI*t._sineEasing.getValue(i)),s=(new THREE.Vector2).copy(n);s.x=n.x-o*t._oscillationDistance;var a=c(s.y,s.x,t._distance);t.trigger(e.ROTATION_UPDATE,{t:i,easedVal:o,startPosition:r.startPosition,currentPosition:{lat:s.y,lon:s.x},targetPosition:r.targetPosition}),t._camera.position.copy(a),t._camera.lookAt(t._camera.target),t._camera.updateProjectionMatrix(),t._renderer.render(t._scene,t._camera)}).then(function(){t.trigger(e.ROTATION_COMPLETE,r),t.setPos(n.y,n.x),t._animate(),o()})})}},{key:"panToPosition",value:function(t){return this._respositionCameraToPosition(t)}},{key:"_respositionCameraToPosition",value:function(t){var n=this;if(this._pointerControls.cancelInertia(),this.arrowControls.cancelInertia(),t.lat===this.position.lat&&t.lon===this.position.lon)return this.trigger(e.ROTATION_START,{time:0,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)}),this.trigger(e.ROTATION_COMPLETE,{time:1,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)}),Promise.resolve();var i=new THREE.Vector2(this.position.lon,this.position.lat),r=new THREE.Vector2(g(t.lon),t.lat),o=new THREE.Vector2(t.lon,t.lat),s=i.distanceTo(o),a=i.distanceTo(r);a<s&&(s=a,o=r);var l=(s<120?this._panVelocity.slow:this._panVelocity.fast,(new THREE.Vector2).copy(i));h(this._animateRAF);var u=this._rotationDuration,f={time:u,startPosition:Object.assign({},this._cachedPos),targetPosition:Object.assign({},t)};return this.trigger(e.ROTATION_START,f),new Promise(function(r,s){y(u,function(t){var r=void 0;r=1===t?1:b(n._easing.getValue(t),0,1,n._mapMinValue,n._mapMaxValue);var s=l.lerpVectors(i,o,r),a=c(s.y,s.x,n._distance);n._camera.position.copy(a),n._camera.lookAt(n._camera.target),n._camera.updateProjectionMatrix(),n._renderer.render(n._scene,n._camera),n.trigger(e.ROTATION_UPDATE,{t:t,easedVal:r,startPosition:f.startPosition,currentPosition:{lat:s.y,lon:s.x},targetPosition:{lat:o.x,lon:o.y}})}).then(function(){n.trigger(e.ROTATION_COMPLETE,f),n.setPos(t.lat,t.lon),n._animate(),r()})})}},{key:"position",get:function(){return Object.assign({},this._cachedPos)}},{key:"isAtOrigin",get:function(){return Math.abs(this.position.lat)<=.5&&Math.abs(this.position.lon)<=.5}},{key:"mediaElement",get:function(){return this._videoElement}}]),e}(p);L.ROTATION_START="RotationStart",L.ROTATION_UPDATE="RotationUpdate",L.ROTATION_COMPLETE="RotationComplete",L.POSITION_CHANGE="360PositionChange",e.exports=L},{"./controls/ArrowControls":13,"./controls/OrientationControls":15,"./controls/PointerControls":16,"./utils/inverseLongitude":17,"./utils/map":18,"./utils/normalizeLongitude":19,"./utils/simpleTimer":20,"./utils/vector3FromLatLon":21,"@marcom/ac-easing/src/ac-easing/createBezier":129,"@marcom/ac-event-emitter-micro/EventEmitterMicro":161,"@marcom/ac-raf-emitter/cancelUpdate":7,"@marcom/ac-raf-emitter/update":10,"@marcom/ac-useragent":343}],12:[function(t,e,n){"use strict";e.exports=t("./AC360")},{"./AC360":11}],13:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function m(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:m(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=t("./InertialControls"),u=t("../utils/normalizeLongitude"),h=t("@marcom/ac-raf-emitter/update"),f=t("@marcom/ac-raf-emitter/cancelUpdate"),d={acceleration:{x:.6,y:.6},friction:{x:.95,y:.95},minVelocity:.1,maxVelocity:20},p=function(t){function e(t){i(this,e),t=Object.assign({},d,t);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._bindMethods(),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){this.leftArrowDown=this.leftArrowDown.bind(this),this.rightArrowDown=this.rightArrowDown.bind(this),this.downArrowDown=this.downArrowDown.bind(this),this.upArrowDown=this.upArrowDown.bind(this),this.leftArrowUp=this.leftArrowUp.bind(this),this.rightArrowUp=this.rightArrowUp.bind(this),this.downArrowUp=this.downArrowUp.bind(this),this.upArrowUp=this.upArrowUp.bind(this),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this)}},{key:"leftArrowDown",value:function(){Math.abs(this._velocity.x-this._horizontalIncrement)<this._maxVelocity?this._velocity.x-=this._horizontalIncrement:this._velocity.x=-this._maxVelocity,this._lon=u(this._lon+this._velocity.x),this._triggerInertia()}},{key:"rightArrowDown",value:function(){Math.abs(this._velocity.x+this._horizontalIncrement)<this._maxVelocity?this._velocity.x+=this._horizontalIncrement:this._velocity.x=this._maxVelocity,this._velocity.x+=this._horizontalIncrement,this._lon=u(this._lon+this._velocity.x),this._triggerInertia()}},{key:"upArrowDown",value:function(t){Math.abs(this._velocity.y-this._verticalIncrement)<this._maxVelocity?this._velocity.y-=this._verticalIncrement:this._velocity.y=-this._maxVelocity,this._lat=this._lat+this._velocity.y,this._triggerInertia()}},{key:"downArrowDown",value:function(){Math.abs(this._velocity.y+this._verticalIncrement)<this._maxVelocity?this._velocity.y+=this._verticalIncrement:this._velocity.y=this._maxVelocity,this._lat=this._lat+this._velocity.y,this._triggerInertia()}},{key:"leftArrowUp",value:function(){this._triggerInertia()}},{key:"rightArrowUp",value:function(){this._triggerInertia()}},{key:"upArrowUp",value:function(){this._triggerInertia()}},{key:"downArrowUp",value:function(){this._triggerInertia()}},{key:"_triggerInertia",value:function(){f(this._inertiaRaf),h(this._updateInertia)}},{key:"isActive",get:function(){return Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity}}]),e}(c);e.exports=p},{"../utils/normalizeLongitude":19,"./InertialControls":14,"@marcom/ac-raf-emitter/cancelUpdate":7,"@marcom/ac-raf-emitter/update":10}],14:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("@marcom/ac-raf-emitter/update"),s=t("@marcom/ac-raf-emitter/cancelUpdate"),a=t("../utils/normalizeLongitude"),l=.5,c=.1,u=5,h=20,f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._horizontalFriction=e.friction&&e.friction.x||l,this._verticalFriction=e.friction&&e.friction.x||l,this._horizontalIncrement=e.acceleration&&e.acceleration.x||c,this._verticalIncrement=e.acceleration&&e.acceleration.y||c,this._minVelocity=e.minVelocity||u,this._maxVelocity=e.maxVelocity||h,this._velocity={x:0,y:0},this._bindMethods()}return r(t,[{key:"_bindMethods",value:function(){this._updateInertia=this._updateInertia.bind(this)}},{key:"_updateInertia",value:function(){Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity?(this._velocity.x*=this._horizontalFriction,this._velocity.y*=this._verticalFriction,this._lon+=this._velocity.x*this._horizontalIncrement,this._lat+=this._velocity.y*this._verticalIncrement,this._inertiaRaf=o(this._updateInertia)):(this._velocity={x:0,y:0},s(this._inertiaRaf),this._inertiaComplete())}},{key:"cancelInertia",value:function(){this._velocity={x:0,y:0},s(this._inertiaRaf)}},{key:"_inertiaComplete",value:function(){}},{key:"position",set:function(t){this._lat=t.lat,this._lon=a(t.lon)},get:function(){return{lat:this._lat,lon:this._lon}}}]),t}();e.exports=f},{"../utils/normalizeLongitude":19,"@marcom/ac-raf-emitter/cancelUpdate":7,"@marcom/ac-raf-emitter/update":10}],15:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../utils/normalizeLongitude"),s=.02,a=function(){function t(e){i(this,t),this._bindMethods()}return r(t,[{key:"_bindMethods",value:function(){this._onOrientation=this._onOrientation.bind(this)}},{key:"_addEventListeners",value:function(){window.addEventListener("devicemotion",this._onOrientation,!0)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("devicemotion",this._onOrientation,!0)}},{key:"_onOrientation",value:function(t){window.matchMedia("(orientation: portrait)").matches?(this._lon=o(this._lon-t.rotationRate.beta*s),this._lat=this._lat-t.rotationRate.alpha*s):t.orientation||window.orientation===-90?(this._lon=o(this._lon+t.rotationRate.alpha*s),this._lat=this._lat-t.rotationRate.beta*s):(this._lon=o(this._lon-t.rotationRate.alpha*s),this._lat=this._lat+t.rotationRate.beta*s)}},{key:"disable",value:function(){
this._removeEventListeners()}},{key:"enable",value:function(){this._addEventListeners()}},{key:"destroy",value:function(){this._removeEventListeners()}},{key:"position",set:function(t){this._lat=t.lat,this._lon=o(t.lon)},get:function(){return{lat:this._lat,lon:this._lon}}}]),t}();e.exports=a},{"../utils/normalizeLongitude":19}],16:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:g(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=t("../utils/normalizeLongitude"),u=t("./InertialControls"),h=.1,f=.95,d=.5,p=135,m=90,_={acceleration:{x:h,y:h},friction:{x:f,y:f},minVelocity:d,maxVelocity:20},y=function(t){function e(t){i(this,e),t=Object.assign({},_,t);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.el=t.el,n._mouseDown=!1,n._scale=1,n._hasInertia=t.inertia!==!1||t.inertia,n._bindMethods(),n._addEventListeners(),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){this._onMouseMove=this._onMouseMove.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onClick=this._onClick.bind(this),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this)}},{key:"_addEventListeners",value:function(){this.el.addEventListener("mousedown",this._onMouseDown),this.el.addEventListener("touchstart",this._onMouseDown,{passive:!1}),this.el.addEventListener("click",this._onClick),this.el.addEventListener("touchmove",this._onTouchMove,{passive:!1})}},{key:"_removeEventListeners",value:function(){this.el.removeEventListener("mousedown",this._onMouseDown),this.el.removeEventListener("touchstart",this._onMouseDown),window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),this.el.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp)}},{key:"_onMouseUp",value:function(t){var e=this;window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp),this._mouseDown&&this._hasInertia&&Date.now()-this._mouseMoveTime<300&&this._updateInertia(),setTimeout(function(){e._mouseDown||(e._dragging=!1)},350),this._mouseDown=!1}},{key:"sendMouseDown",value:function(t){this._onMouseDown(t)}},{key:"_onClick",value:function(t){this._dragging||(this._velocity={x:0,y:0},this._mouseDown=!1,this._cachedPosition=t,document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp))}},{key:"_onMouseDown",value:function(t){this._mouseDownTime=Date.now();var e=t;if(t.touches){if(1!==t.touches.length)return;e=t.touches[0]}this._cachedPosition=t,window.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mouseup",this._onMouseUp),document.body.addEventListener("touchmove",this._onTouchMove,{passive:!1}),document.body.addEventListener("touchend",this._onMouseUp),this._mouseDown=!0,this._lastMouseX=e.clientX,this._lastMouseY=e.clientY,this._lastMouseDownLon=c(this._lon),this._lastMouseDownLat=this._lat}},{key:"_onTouchMove",value:function(t){t.cancelable&&t.preventDefault(),this._onMouseMove(t)}},{key:"_onMouseMove",value:function(t){if(this._mouseDown){this._dragging=!0;var e=t;if(t.touches&&(e=t.touches[0]),this._cachedPosition.clientX!==e.clientX||this._cachedPosition.clientY!==e.clientY){var n=this._lastMouseX-e.clientX,i=this._lastMouseY-e.clientY,r=n/this._viewerWidth,o=i/this._viewerHeight;if(this._cachedPosition){var s=this._cachedPosition.clientX-e.clientX,a=this._cachedPosition.clientY-e.clientY;this._velocity.x=Math.max(Math.min(s,this._maxVelocity),-this._maxVelocity),this._velocity.y=Math.max(Math.min(a,this._maxVelocity),-this._maxVelocity)}this._lon=c(r*p+this._lastMouseDownLon),this._lat=o*m+this._lastMouseDownLat,this._cachedPosition=e,this._mouseMoveTime=Date.now()}}}},{key:"setViewerSize",value:function(t,e){this._viewerWidth=t,this._viewerHeight=e}},{key:"destroy",value:function(){this._removeEventListeners()}},{key:"isActive",get:function(){return this._mouseDown||this._hasInertia&&(Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity)}},{key:"scale",get:function(){return this._scale}}]),e}(u);e.exports=y},{"../utils/normalizeLongitude":19,"./InertialControls":14}],17:[function(t,e,n){"use strict";var i=t("./normalizeLongitude");e.exports=function(t){var e=t;return Math.abs(e)>180?i(e):e>0?-360+e:360+e}},{"./normalizeLongitude":19}],18:[function(t,e,n){"use strict";e.exports=function(t,e,n,i,r){return i+(r-i)*(t-e)/(n-e)}},{}],19:[function(t,e,n){"use strict";e.exports=function(t){var e=t;return e>180?e=e%180-180:e<=-180&&(e=e%180+180),e}},{}],20:[function(t,e,n){"use strict";var i=t("@marcom/ac-raf-emitter/update");e.exports=function(t,e){var n=0;return new Promise(function(r){var o=performance.now(),s=function a(){var s=performance.now()-o,l=s/t;l>=1?(e(1),r()):(n=l,e(l),i(a))};i(s)})}},{"@marcom/ac-raf-emitter/update":10}],21:[function(t,e,n){"use strict";function i(t,e,n){var i=THREE.Math.degToRad(90-t),r=THREE.Math.degToRad(e),o=n*Math.sin(i)*Math.cos(r),s=n*Math.cos(i),a=n*Math.sin(i)*Math.sin(r);return new THREE.Vector3(o,s,a)}e.exports=i},{}],22:[function(t,e,n){"use strict";var i=t("./helpers/TabManager"),r=t("./helpers/hideSiblingElements"),o=t("./helpers/showSiblingElements"),s=function(t,e){e=e||{},this._tabbables=null,this._excludeHidden=e.excludeHidden,this._firstTabbableElement=e.firstFocusElement,this._lastTabbableElement=null,this._relatedTarget=null,this.el=t,this._handleOnFocus=this._handleOnFocus.bind(this)},a=s.prototype;a.start=function(){this.updateTabbables(),r(this.el,null,this._excludeHidden),this._firstTabbableElement?this.el.contains(document.activeElement)||this._firstTabbableElement.focus():console.warn("this._firstTabbableElement is null, CircularTab needs at least one tabbable element."),this._relatedTarget=document.activeElement,document.addEventListener("focus",this._handleOnFocus,!0)},a.stop=function(){o(this.el),document.removeEventListener("focus",this._handleOnFocus,!0)},a.updateTabbables=function(){this._tabbables=i.getTabbableElements(this.el,this._excludeHidden),this._firstTabbableElement=this._firstTabbableElement||this._tabbables[0],this._lastTabbableElement=this._tabbables[this._tabbables.length-1]},a._handleOnFocus=function(t){if(this.el.contains(t.target))this._relatedTarget=t.target;else{if(t.preventDefault(),this.updateTabbables(),this._relatedTarget===this._lastTabbableElement||null===this._relatedTarget)return this._firstTabbableElement.focus(),void(this._relatedTarget=this._firstTabbableElement);if(this._relatedTarget===this._firstTabbableElement)return this._lastTabbableElement.focus(),void(this._relatedTarget=this._lastTabbableElement)}},a.destroy=function(){this.stop(),this.el=null,this._tabbables=null,this._firstTabbableElement=null,this._lastTabbableElement=null,this._relatedTarget=null,this._handleOnFocus=null},e.exports=s},{"./helpers/TabManager":24,"./helpers/hideSiblingElements":26,"./helpers/showSiblingElements":30}],23:[function(t,e,n){"use strict";function i(){this._createElemnts(),this._bindEvents()}var r=i.prototype;r._bindEvents=function(){this._onResize=this._resize.bind(this)},r._createElemnts=function(){this.span=document.createElement("span");var t=this.span.style;t.visibility="hidden",t.position="absolute",t.top="0",t.bottom="0",t.zIndex="-1",this.span.innerHTML="&nbsp;",this.iframe=document.createElement("iframe");var e=this.iframe.style;e.position="absolute",e.top="0",e.left="0",e.width="100%",e.height="100%",this.span.appendChild(this.iframe),document.body.appendChild(this.span)},r.detect=function(t){this.originalSize=t||17,this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.currentSize>this.originalSize&&this._onResize(),this.isDetecting||(this.iframe.contentWindow.addEventListener("resize",this._onResize),this.isDetecting=!0)},r._resize=function(t){this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.originalSize<this.currentSize?document.documentElement.classList.add("text-zoom"):document.documentElement.classList.remove("text-zoom"),window.dispatchEvent(new Event("resize"))},r.remove=function(){this.isDetecting&&(this.iframe.contentWindow.removeEventListener("resize",this._onResize),this.isDetecting=!1)},r.destroy=function(){this.remove(),this.span&&this.span.parentElement&&this.span.parentElement.removeChild(this.span),this.span=null,this.iframe=null},e.exports=new i},{}],24:[function(t,e,n){"use strict";var i=t("./../maps/focusableElement"),r=function(){this.focusableSelectors=i.join(",")},o=r.prototype;o.isFocusableElement=function(t,e,n){if(e&&!this._isDisplayed(t))return!1;var r=t.nodeName.toLowerCase(),o=i.indexOf(r)>-1;return"a"===r||(o?!t.disabled:!t.contentEditable||(n=n||parseFloat(t.getAttribute("tabindex")),!isNaN(n)))},o.isTabbableElement=function(t,e){if(e&&!this._isDisplayed(t))return!1;var n=t.getAttribute("tabindex");return n=parseFloat(n),isNaN(n)?this.isFocusableElement(t,e,n):n>=0},o._isDisplayed=function(t){var e=t.getBoundingClientRect();return(0!==e.top||0!==e.left||0!==e.width||0!==e.height)&&"hidden"!==window.getComputedStyle(t).visibility},o.getTabbableElements=function(t,e){for(var n=t.querySelectorAll(this.focusableSelectors),i=n.length,r=[],o=0;o<i;o++)this.isTabbableElement(n[o],e)&&r.push(n[o]);return r},o.getFocusableElements=function(t,e){for(var n=t.querySelectorAll(this.focusableSelectors),i=n.length,r=[],o=0;o<i;o++)this.isFocusableElement(n[o],e)&&r.push(n[o]);return r},e.exports=new r},{"./../maps/focusableElement":32}],25:[function(t,e,n){"use strict";var i=t("./setAttributes"),r=t("./../maps/ariaMap"),o=t("./TabManager"),s="data-original-",a="tabindex",l=function(t,e){var n=t.getAttribute(s+e);n||(n=t.getAttribute(e)||"",i(t,s+e,n))};e.exports=function(t,e){if(o.isFocusableElement(t,e))l(t,a),i(t,a,-1);else for(var n=o.getTabbableElements(t,e),s=n.length;s--;)l(n[s],a),i(n[s],a,-1);l(t,r.HIDDEN),i(t,r.HIDDEN,!0)}},{"./../maps/ariaMap":31,"./TabManager":24,"./setAttributes":28}],26:[function(t,e,n){"use strict";var i=t("./hide");e.exports=function r(t,e,n){e=e||document.body;for(var o=t,s=t;o=o.previousElementSibling;)i(o,n);for(;s=s.nextElementSibling;)i(s,n);t.parentElement&&t.parentElement!==e&&r(t.parentElement)}},{"./hide":25}],27:[function(t,e,n){"use strict";var i=function(t,e){if("string"==typeof e)for(var n=e.split(/\s+/),i=0;i<n.length;i++)t.getAttribute(n[i])&&t.removeAttribute(n[i])},r=function(t,e){if(t.length)for(var n=0;n<t.length;n++)i(t[n],e);else i(t,e)};e.exports=r},{}],28:[function(t,e,n){"use strict";var i=function(t,e,n){t&&1===t.nodeType&&t.setAttribute(e,n)},r=function(t,e,n){if("string"!=typeof n&&(n=n.toString()),t)if(t.length)for(var r=0;r<t.length;r++)i(t[r],e,n);else i(t,e,n)};e.exports=r},{}],29:[function(t,e,n){"use strict";var i=t("./removeAttributes"),r=t("./setAttributes"),o=t("./../maps/ariaMap"),s="data-original-",a="tabindex",l=function(t,e){var n=t.getAttribute(s+e);"string"==typeof n&&(n.length?r(t,e,n):i(t,e),i(t,s+e))};e.exports=function(t){i(t,a+" "+o.HIDDEN),l(t,a),l(t,o.HIDDEN);for(var e=t.querySelectorAll("["+s+a+"]"),n=e.length;n--;)l(e[n],a)}},{"./../maps/ariaMap":31,"./removeAttributes":27,"./setAttributes":28}],30:[function(t,e,n){"use strict";var i=t("./show");e.exports=function r(t,e){e=e||document.body;for(var n=t,o=t;n=n.previousElementSibling;)i(n);for(;o=o.nextElementSibling;)i(o);t.parentElement&&t.parentElement!==e&&r(t.parentElement)}},{"./show":29}],31:[function(t,e,n){"use strict";e.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"}},{}],32:[function(t,e,n){"use strict";e.exports=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","*[tabindex]","*[contenteditable]"]},{}],33:[function(t,e,n){"use strict";var i=t("./request/factory"),r={complete:function(t,e){},error:function(t,e){},method:"GET",headers:{},success:function(t,e,n){},timeout:5e3},o=function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]},s={ajax:function(t,e){e=o({},r,e),"//"===t.substr(0,2)&&(t=window.location.protocol+t);var n=i(t);return n.open(e.method,t),n.setTransportHeaders(e.headers),n.setReadyStateChangeHandlers(e.complete,e.error,e.success),n.setTimeout(e.timeout,e.error,e.complete),n.send(e.data),n},get:function(t,e){return e.method="GET",s.ajax(t,e)},head:function(t,e){return e.method="HEAD",s.ajax(t,e)},post:function(t,e){return e.method="POST",s.ajax(t,e)}};e.exports=s},{"./request/factory":34}],34:[function(t,e,n){"use strict";var i=t("./xmlhttprequest"),r=t("./xdomainrequest"),o=/.*(?=:\/\/)/,s=/^.*:\/\/|\/.+$/g,a=window.XDomainRequest&&document.documentMode<10,l=function(t){if(!t.match(o))return!1;var e=t.replace(s,"");return e!==window.location.hostname};e.exports=function(t,e){var n=a&&l(t)?r:i;return new n}},{"./xdomainrequest":36,"./xmlhttprequest":37}],35:[function(t,e,n){"use strict";var i=function(){};i.create=function(){var t=function(){};return t.prototype=i.prototype,new t},i.prototype.open=function(t,e){t=t.toUpperCase(),this.xhr.open(t,e)},i.prototype.send=function(t){this.xhr.send(t)},i.prototype.setTimeout=function(t,e,n){this.xhr.ontimeout=function(){e(this.xhr,this.status),n(this.xhr,this.status)}.bind(this)},i.prototype.setTransportHeaders=function(t){for(var e in t)this.xhr.setRequestHeader(e,t[e])},e.exports=i},{}],36:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./request"),o=t("@marcom/ac-object/toQueryParameters"),s=function(){this.xhr=new XDomainRequest};s.prototype=r.create(),s.prototype.setReadyStateChangeHandlers=function(t,e,n){this.xhr.onerror=function(){e(this.xhr,this.status),t(this.xhr,this.status)}.bind(this),this.xhr.onload=function(){n(this.xhr.responseText,this.xhr.status,this.xhr),t(this.xhr,this.status)}.bind(this)},s.prototype.send=function(t){t&&"object"===("undefined"==typeof t?"undefined":i(t))&&(t=o(t)),this.xhr.send(t)},s.prototype.setTransportHeaders=function(t){},e.exports=s},{"./request":35,"@marcom/ac-object/toQueryParameters":241}],37:[function(t,e,n){"use strict";var i=t("./request"),r=function(){this.xhr=new XMLHttpRequest};r.prototype=i.create(),r.prototype.setReadyStateChangeHandlers=function(t,e,n){this.xhr.onreadystatechange=function(i){4===this.xhr.readyState&&(clearTimeout(this.timeout),this.xhr.status>=200&&this.xhr.status<300?(n(this.xhr.responseText,this.xhr.status,this.xhr),t(this.xhr,this.status)):(e(this.xhr,this.status),t(this.xhr,this.status)))}.bind(this)},e.exports=r},{"./request":35}],38:[function(t,e,n){"use strict";e.exports={log:t("./ac-console/log")}},{"./ac-console/log":39}],39:[function(t,e,n){"use strict";var i="f7c9180f-5c45-47b4-8de4-428015f096c0",r=!!function(){try{return window.localStorage.getItem(i)}catch(t){}}();e.exports=function(){window.console&&"undefined"!=typeof console.log&&r&&console.log.apply(console,Array.prototype.slice.call(arguments,0))}},{}],40:[function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("@marcom/ac-object/extend"),s=t("@marcom/ac-object/create"),a=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=t("@marcom/ac-dom-traversal/querySelectorAll"),c=t("@marcom/ac-dom-events/addEventListener"),u=t("@marcom/ac-dom-events/removeEventListener"),h=t("@marcom/ac-console");try{i=t("@marcom/ac-analytics")}catch(f){h.log(f.message)}var d={dataAttribute:"analytics-share",interactionEvents:["click"],autoEnable:!0},p=function(t){t=t||{},this.options=o(d,t),a.call(this),this.elements=[],this.eventObserver=null,this.publishShareClick=this.publishShareClick.bind(this),this.options.autoEnable&&this.enable()},m=a.prototype,_=p.prototype=s(m);_.enable=function(){return!!i&&(this._createObserver(),void this.bindEventListener())},_.disable=function(){return!!i&&void this.unbindEventListener()},_.bindEventListener=function(){var t=0;this.elements=this.populateElements(),t=this.elements.length;for(var e=0;e<t;e++)c(this.elements[e],"click",this.publishShareClick)},_.unbindEventListener=function(){for(var t=this.elements&&this.elements.length?this.elements.length:0,e=0;e<t;e++)u(this.elements[e],"click",this.publishShareClick)},_.populateElements=function(){return l("[data-"+this.options.dataAttribute+"]",this.options.context||document)},_.publishShareClick=function(t){var e=t.currentTarget,n=this.parseDataAttribute(e.getAttribute("data-"+this.options.dataAttribute));if("object"===("undefined"==typeof n?"undefined":r(n))){if(!n.title)return console.log("data-"+this.options.dataAttribute+" attribute must have a `title` property"),!1;this.trigger("click",n)}},_.parseDataAttribute=function(t){var e={};try{e=JSON.parse(t)}catch(n){console.log("data-"+this.options.dataAttribute+" must be a valid JSON string")}return e},_.destroy=function(){this.disable(),this.elements=[],this.eventObserver=null,this.publishShareClick=null,this.options=null},_._createObserver=function(){return!!(i&&i.observer&&i.observer.Event)&&void(this.eventObserver=new i.observer.Event(this,this.options))},e.exports=p},{"@marcom/ac-analytics":void 0,"@marcom/ac-console":38,"@marcom/ac-dom-events/addEventListener":85,"@marcom/ac-dom-events/removeEventListener":89,"@marcom/ac-dom-traversal/querySelectorAll":124,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-object/create":234,"@marcom/ac-object/extend":236}],41:[function(t,e,n){"use strict";var i=t("./../AnalyticsShare");e.exports=function(t){return new i(t)}},{"./../AnalyticsShare":40}],42:[function(t,e,n){"use strict";var i=function(){function t(t){for(var e=0;e<l.length;e++){var i=n[e]+t;if(void 0!==a.style[i])return i}}function e(t){for(var e=0;e<c.length;e++){var n=c[e]+t;if(void 0!==a.style[n])return n}}var n=["","-webkit-","-moz-","-o-","-ms-"],i={"animation-delay":"transitionend","-o-animation-delay":"oTransitionEnd","-moz-animation-delay":"transitionend","-webkit-animation-delay":"webkitTransitionEnd","-ms-animation-delay":"transitionend"},r={"animation-delay":"animationstart","-o-animation-delay":"oanimationstart","-moz-animation-delay":"animationstart","-webkit-animation-delay":"webkitAnimationStart","-ms-animation-delay":"MSAnimationStart"},o={"animation-delay":"animationiteration","-o-animation-delay":"oanimationiteration","-moz-animation-delay":"animationiteration","-webkit-animation-delay":"webkitAnimationIteration","-ms-animation-delay":"MSAnimationIteration"},s={"animation-delay":"animationend","-o-animation-delay":"oanimationend","-moz-animation-delay":"animationend","-webkit-animation-delay":"webkitAnimationEnd","-ms-animation-delay":"MSAnimationEnd"},a=document.createElement("_"),l=["","-webkit-","-moz-","-o-","-ms-"],c=["-webkit-","","-moz-","-o-","-ms-"];return{filter:e("filter"),transform:t("transform"),transformOrigin:t("transform-origin"),transition:t("transition"),transitionDelay:t("transition-delay"),transitionDuration:t("transition-duration"),transitionProperty:t("transition-property"),transitionTimingFunction:t("transition-timing-function"),transitionEnd:i[t("animation-delay")],animation:t("animation"),animationDelay:t("animation-delay"),animationDirection:t("animation-direction"),animationDuration:t("animation-duration"),animationFillMode:t("animation-fill-mode"),animationIterationCount:t("animation-iteration-count"),animationName:t("animation-name"),animationTimingFunction:t("animation-timing-function"),animationPlayState:t("animation-play-state"),animationStart:r[t("animation-delay")],animationIteration:o[t("animation-delay")],animationEnd:s[t("animation-delay")]}}();e.exports=i},{}],43:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.slice"),t("@marcom/ac-polyfills/Element/prototype.classList");var i=t("./className/add");e.exports=function(){var t,e=Array.prototype.slice.call(arguments),n=e.shift(e);if(n.classList&&n.classList.add)return void n.classList.add.apply(n.classList,e);for(t=0;t<e.length;t++)i(n,e[t])}},{"./className/add":44,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],44:[function(t,e,n){"use strict";var i=t("./contains");e.exports=function(t,e){i(t,e)||(t.className+=" "+e)}},{"./contains":45}],45:[function(t,e,n){"use strict";var i=t("./getTokenRegExp");e.exports=function(t,e){return i(e).test(t.className)}},{"./getTokenRegExp":46}],46:[function(t,e,n){"use strict";e.exports=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)")}},{}],47:[function(t,e,n){"use strict";var i=t("./contains"),r=t("./getTokenRegExp");e.exports=function(t,e){i(t,e)&&(t.className=t.className.replace(r(e),"$1").trim())}},{"./contains":45,"./getTokenRegExp":46}],48:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.slice"),t("@marcom/ac-polyfills/Element/prototype.classList");var i=t("./className/remove");e.exports=function(){var t,e=Array.prototype.slice.call(arguments),n=e.shift(e);if(n.classList&&n.classList.remove)return void n.classList.remove.apply(n.classList,e);for(t=0;t<e.length;t++)i(n,e[t])}},{"./className/remove":47,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],49:[function(t,e,n){"use strict";e.exports={EventEmitterMicro:t("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":50}],50:[function(t,e,n){"use strict";function i(){this._events={}}var r=i.prototype;r.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].unshift(e)},r.once=function(t,e){function n(r){i.off(t,n),void 0!==r?e(r):e()}var i=this;this.on(t,n)},r.off=function(t,e){if(this.has(t)){var n=this._events[t].indexOf(e);n!==-1&&this._events[t].splice(n,1)}},r.trigger=function(t,e){if(this.has(t))for(var n=this._events[t].length-1;n>=0;n--)void 0!==e?this._events[t][n](e):this._events[t][n]()},r.has=function(t){return t in this._events!=!1&&0!==this._events[t].length},r.destroy=function(){for(var t in this._events)this._events[t]=null;this._events=null},e.exports=i},{}],51:[function(t,e,n){"use strict";e.exports={Clip:t("./ac-clip/Clip")}},{"./ac-clip/Clip":52}],52:[function(t,e,n){"use strict";function i(t,e,n,r){r=r||{},this._options=r,this._isYoyo=r.yoyo,this._direction=1,this._timeScale=1,this._loop=r.loop||0,this._loopCount=0,this._target=t,this.duration(e),this._delay=1e3*(r.delay||0),this._remainingDelay=this._delay,this._progress=0,this._clock=r.clock||a,this._playing=!1,this._getTime=Date.now||function(){return(new Date).getTime()},this._propsTo=n||{},this._propsFrom=r.propsFrom||{},this._onStart=r.onStart||null,this._onUpdate=r.onUpdate||null,this._onDraw=r.onDraw||null,this._onComplete=r.onComplete||null;var o=r.ease||u;this._ease="function"==typeof o?new l(o):s(o),this._start=this._start.bind(this),this._update=this._update.bind(this),this._draw=this._draw.bind(this),this._isPrepared=!1,i._add(this),c.call(this)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t("@marcom/ac-polyfills/Array/isArray");var o=t("@marcom/ac-object/create"),s=t("@marcom/ac-easing").createPredefined,a=t("@marcom/ac-clock"),l=t("@marcom/ac-easing").Ease,c=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,u="ease",h=i.prototype=o(c.prototype);i.COMPLETE="complete",i.PAUSE="pause",i.PLAY="play",h.play=function(){return this._playing||(this._playing=!0,0===this._delay||0===this._remainingDelay?this._start():(this._isPrepared||(this._setDiff(),this._updateProps()),this._startTimeout=setTimeout(this._start,this._remainingDelay/this._timeScale),this._delayStart=this._getTime())),this},h.pause=function(){return this._playing&&(this._startTimeout&&(this._remainingDelay=this._getTime()-this._delayStart,clearTimeout(this._startTimeout)),this._stop(),this.trigger(i.PAUSE,this)),this},h.destroy=function(){return this.pause(),this._options=null,this._target=null,this._storeTarget=null,this._ease=null,this._clock=null,this._propsTo=null,this._propsFrom=null,this._storePropsTo=null,this._storePropsFrom=null,this._propsDiff=null,this._propsEase=null,this._onStart=null,this._onUpdate=null,this._onDraw=null,this._onComplete=null,i._remove(this),c.prototype.destroy.call(this),this},h.reset=function(){if(this._isPrepared)return this._stop(),this._resetLoop(this._target,this._storeTarget),this._direction=1,this._loop=this._options.loop||0,this._loopCount=0,this._propsFrom=this._storePropsFrom,this._propsTo=this._storePropsTo,this._progress=0,this._setStartTime(),this._onUpdate&&this._onUpdate.call(this,this),this._onDraw&&this._onDraw.call(this,this),this},h.playing=function(){return this._playing},h.target=function(){return this._target},h.duration=function(t){return void 0!==t&&(this._duration=t,this._durationMs=1e3*t/this._timeScale,this._playing&&this._setStartTime()),this._duration},h.timeScale=function(t){return void 0!==t&&(this._timeScale=t,this.duration(this._duration)),this._timeScale},h.currentTime=function(t){return void 0!==t?this.progress(t/this._duration)*this._duration:this.progress()*this._duration},h.progress=function(t){return void 0!==t&&(this._progress=Math.min(1,Math.max(0,t)),this._setStartTime(),this._isPrepared||this._setDiff(),this._playing&&1===t?(this._completeProps(),this._onUpdate&&this._onUpdate.call(this,this),this._onDraw&&this._onDraw.call(this,this),this._complete()):(this._updateProps(),this._onUpdate&&this._onUpdate.call(this,this),this._onDraw&&this._onDraw.call(this,this))),this._progress},h._resetLoop=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&null!==e[n]&&("object"===r(e[n])?this._resetLoop(t[n],e[n]):t[n]=e[n])},h._cloneObjects=function(){var t={},e={},n={};return this._cloneObjectsLoop(this._target,this._propsTo,this._propsFrom,t,e,n),{target:t,propsTo:e,propsFrom:n}},h._cloneObjectsLoop=function(t,e,n,i,o,s){var a,l;for(l in n)n.hasOwnProperty(l)&&void 0===e[l]&&void 0!==t[l]&&(i[l]=t[l],o[l]=t[l],s[l]=n[l]);for(l in e)t.hasOwnProperty(l)&&(a=r(t[l]),null!==t[l]&&"object"===a?(Array.isArray(t[l])?(i[l]=[],o[l]=[],s[l]=[]):(i[l]={},o[l]={},s[l]={}),this._cloneObjectsLoop(t[l],e[l]||{},n[l]||{},i[l],o[l],s[l])):null!==e[l]&&"number"===a&&(i[l]=t[l],o[l]=e[l],n&&void 0!==n[l]&&(s[l]=n[l])))},h._prepareProperties=function(){if(!this._isPrepared){var t=this._cloneObjects();this._storeTarget=t.target,this._propsTo=t.propsTo,this._storePropsTo=this._propsTo,this._propsFrom=t.propsFrom,this._storePropsFrom=this._propsFrom,this._isPrepared=!0}},h._setStartTime=function(){this._startTime=this._getTime()-this.progress()*this._durationMs},h._setDiff=function(){this._isPrepared||this._prepareProperties(),this._propsDiff={},this._setDiffLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff)},h._setDiffLoop=function(t,e,n,i){var o,s;for(s in t)t.hasOwnProperty(s)&&(o=r(t[s]),null!==t[s]&&"object"===o?(e[s]=e[s]||{},i[s]=i[s]||{},this._setDiffLoop(t[s],e[s],n[s],i[s])):"number"===o&&void 0!==n[s]?(void 0!==e[s]?n[s]=e[s]:e[s]=n[s],i[s]=t[s]-n[s]):(t[s]=null,e[s]=null))},h._start=function(){this._startTimeout=null,this._remainingDelay=0,this._setStartTime(),this._clock.on("update",this._update),this._clock.on("draw",this._draw),this._clock.isRunning()||this._clock.start(),this._setDiff(),this._playing=!0,this._running=!0,this._onStart&&this._onStart.call(this,this),this.trigger(i.PLAY,this)},h._stop=function(){this._playing=!1,this._running=!1,this._clock.off("update",this._update),this._clock.off("draw",this._draw)},h._updateProps=function(){var t;t=1===this._direction?this._ease.getValue(this._progress):1-this._ease.getValue(1-this._progress),this._updatePropsLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff,t)},h._updatePropsLoop=function(t,e,n,i,r){var o;for(o in t)t.hasOwnProperty(o)&&null!==t[o]&&("number"!=typeof t[o]?this._updatePropsLoop(t[o],e[o],n[o],i[o],r):n[o]=e[o]+i[o]*r)},h._completeProps=function(){this._completePropsLoop(this._propsTo,this._target)},h._completePropsLoop=function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&null!==t[n]&&("number"!=typeof t[n]?this._completePropsLoop(t[n],e[n]):e[n]=t[n])},h._complete=function(){this._isYoyo&&(this._loop>0&&this._loopCount<=this._loop||0===this._loop&&0===this._loopCount)?(this._propsFrom=1===this._direction?this._storePropsTo:this._storePropsFrom,this._propsTo=1===this._direction?this._storePropsFrom:this._storePropsTo,this._direction*=-1,this._direction===-1&&++this._loopCount,this.progress(0),this._start()):this._loopCount<this._loop?(++this._loopCount,this.progress(0),this._start()):(this.trigger(i.COMPLETE,this),this._onComplete&&this._onComplete.call(this,this),this._options&&this._options.destroyOnComplete&&this.destroy())},h._update=function(t){this._running&&(this._progress=(t.timeNow-this._startTime)/this._durationMs,this._progress>=1?(this._progress=1,this._running=!1,this._completeProps()):this._updateProps(),this._onUpdate&&this._onUpdate.call(this,this))},h._draw=function(t){this._onDraw&&this._onDraw.call(this,this),this._running||(this._stop(),1===this._progress&&this._complete())},i._instantiate=function(){return this._clips=[],
this},i._add=function(t){this._clips.push(t)},i._remove=function(t){var e=this._clips.indexOf(t);e>-1&&this._clips.splice(e,1)},i.getAll=function(t){if(void 0!==t){for(var e=[],n=this._clips.length;n--;)this._clips[n].target()===t&&e.push(this._clips[n]);return e}return Array.prototype.slice.call(this._clips)},i.destroyAll=function(t){var e=this.getAll(t);this._clips.length===e.length&&(this._clips=[]);for(var n=e.length;n--;)e[n].destroy();return e},i.to=function(t,e,n,r){return r=r||{},void 0===r.destroyOnComplete&&(r.destroyOnComplete=!0),new i(t,e,n,r).play()},i.from=function(t,e,n,r){return r=r||{},r.propsFrom=n,void 0===r.destroyOnComplete&&(r.destroyOnComplete=!0),new i(t,e,r.propsTo,r).play()},e.exports=i._instantiate()},{"@marcom/ac-clock":54,"@marcom/ac-easing":127,"@marcom/ac-event-emitter-micro":49,"@marcom/ac-object/create":234,"@marcom/ac-polyfills/Array/isArray":void 0}],53:[function(t,e,n){"use strict";e.exports=function(t){if("function"==typeof t.select){var e=!1;e=t.select(),e||t.setSelectionRange(0,t.value.length)}else{var n=document.createRange();n.selectNodeContents(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}}},{}],54:[function(t,e,n){"use strict";var i=t("./ac-clock/Clock"),r=t("./ac-clock/ThrottledClock"),o=t("./ac-clock/sharedClockInstance");o.Clock=i,o.ThrottledClock=r,e.exports=o},{"./ac-clock/Clock":55,"./ac-clock/ThrottledClock":56,"./ac-clock/sharedClockInstance":57}],55:[function(t,e,n){"use strict";function i(){o.call(this),this.lastFrameTime=null,this._animationFrame=null,this._active=!1,this._startTime=null,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._getTime=Date.now||function(){return(new Date).getTime()}}t("@marcom/ac-polyfills/Function/prototype.bind"),t("@marcom/ac-polyfills/requestAnimationFrame");var r,o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro;(new Date).getTime();r=i.prototype=new o(null),r.start=function(){this._active||this._tick()},r.stop=function(){this._active&&window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null,this.lastFrameTime=null,this._active=!1},r.destroy=function(){this.stop(),this.off();var t;for(t in this)this.hasOwnProperty(t)&&(this[t]=null)},r.isRunning=function(){return this._active},r._tick=function(){this._active||(this._active=!0),this._animationFrame=window.requestAnimationFrame(this._boundOnAnimationFrame)},r._onAnimationFrame=function(t){null===this.lastFrameTime&&(this.lastFrameTime=t);var e=t-this.lastFrameTime,n=0;if(e>=1e3&&(e=0),0!==e&&(n=1e3/e),this._firstFrame===!0&&(e=0,this._firstFrame=!1),0===n)this._firstFrame=!0;else{var i={time:t,delta:e,fps:n,naturalFps:n,timeNow:this._getTime()};this.trigger("update",i),this.trigger("draw",i)}this._animationFrame=null,this.lastFrameTime=t,this._active!==!1?this._tick():this.lastFrameTime=null},e.exports=i},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],56:[function(t,e,n){"use strict";function i(t,e){null!==t&&(s.call(this),e=e||{},this._fps=t||null,this._clock=e.clock||o,this._lastThrottledTime=null,this._clockEvent=null,this._boundOnClockDraw=this._onClockDraw.bind(this),this._boundOnClockUpdate=this._onClockUpdate.bind(this),this._clock.on("update",this._boundOnClockUpdate))}t("@marcom/ac-polyfills/requestAnimationFrame");var r,o=t("./sharedClockInstance"),s=t("@marcom/ac-event-emitter-micro").EventEmitterMicro;r=i.prototype=new s(null),r.setFps=function(t){return this._fps=t,this},r.getFps=function(){return this._fps},r.start=function(){return this._clock.start(),this},r.stop=function(){return this._clock.stop(),this},r.isRunning=function(){return this._clock.isRunning()},r.destroy=function(){this._clock.off("update",this._boundOnClockUpdate),this._clock.destroy.call(this)},r._onClockUpdate=function(t){null===this._lastThrottledTime&&(this._lastThrottledTime=this._clock.lastFrameTime);var e=t.time-this._lastThrottledTime;if(!this._fps)throw new TypeError("FPS is not defined.");Math.ceil(1e3/e)>=this._fps+2||(this._clockEvent=t,this._clockEvent.delta=e,this._clockEvent.fps=1e3/e,this._lastThrottledTime=this._clockEvent.time,this._clock.once("draw",this._boundOnClockDraw),this.trigger("update",this._clockEvent))},r._onClockDraw=function(){this.trigger("draw",this._clockEvent)},e.exports=i},{"./sharedClockInstance":57,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],57:[function(t,e,n){"use strict";var i=t("./Clock");e.exports=new i},{"./Clock":55}],58:[function(t,e,n){"use strict";var i=t("./ac-color/Color");i.decimalToHex=t("./ac-color/static/decimalToHex"),i.hexToDecimal=t("./ac-color/static/hexToDecimal"),i.hexToRgb=t("./ac-color/static/hexToRgb"),i.isColor=t("./ac-color/static/isColor"),i.isHex=t("./ac-color/static/isHex"),i.isRgb=t("./ac-color/static/isRgb"),i.isRgba=t("./ac-color/static/isRgba"),i.mixColors=t("./ac-color/static/mixColors"),i.rgbaToArray=t("./ac-color/static/rgbaToArray"),i.rgbToArray=t("./ac-color/static/rgbToArray"),i.rgbToDecimal=t("./ac-color/static/rgbToDecimal"),i.rgbToHex=t("./ac-color/static/rgbToHex"),i.rgbToHsl=t("./ac-color/static/rgbToHsl"),i.rgbToHsv=t("./ac-color/static/rgbToHsv"),i.rgbaToObject=t("./ac-color/static/rgbaToObject"),i.rgbToObject=t("./ac-color/static/rgbToObject"),i.shortToLongHex=t("./ac-color/static/shortToLongHex"),e.exports={Color:i}},{"./ac-color/Color":59,"./ac-color/static/decimalToHex":61,"./ac-color/static/hexToDecimal":62,"./ac-color/static/hexToRgb":63,"./ac-color/static/isColor":64,"./ac-color/static/isHex":65,"./ac-color/static/isRgb":66,"./ac-color/static/isRgba":67,"./ac-color/static/mixColors":68,"./ac-color/static/rgbToArray":69,"./ac-color/static/rgbToDecimal":70,"./ac-color/static/rgbToHex":71,"./ac-color/static/rgbToHsl":72,"./ac-color/static/rgbToHsv":73,"./ac-color/static/rgbToObject":74,"./ac-color/static/rgbaToArray":75,"./ac-color/static/rgbaToObject":76,"./ac-color/static/shortToLongHex":77}],59:[function(t,e,n){"use strict";function i(t){if(!s(t)&&!r.nameToRgbObject[t])throw new Error(t+" is not a supported color.");this._setColor(t)}var r=t("./helpers/cssColorNames"),o=t("./static/hexToRgb"),s=t("./static/isColor"),a=t("./static/isHex"),l=t("./static/isRgba"),c=t("./static/mixColors"),u=t("./static/rgbaToArray"),h=t("./static/rgbToArray"),f=t("./static/rgbToDecimal"),d=t("./static/rgbToHex"),p=t("./static/rgbaToObject"),m=t("./static/rgbToObject"),_=t("./static/shortToLongHex"),y=i.prototype;y._setColor=function(t){if(this._color={},a(t))this._color.hex=_(t),this._color.rgb={color:o(t)};else if(l(t)){this._color.rgba={color:t};var e=this.rgbaObject();this._color.rgb={color:"rgb("+e.r+", "+e.g+", "+e.b+")"}}else if(r.nameToRgbObject[t]){var n=r.nameToRgbObject[t];this._color.rgb={object:n,color:"rgb("+n.r+", "+n.g+", "+n.b+")"}}else this._color.rgb={color:t}},y.rgb=function(){return this._color.rgb.color},y.rgba=function(){if(void 0===this._color.rgba){var t=this.rgbObject();this._color.rgba={color:"rgba("+t.r+", "+t.g+", "+t.b+", 1)"}}return this._color.rgba.color},y.hex=function(){return void 0===this._color.hex&&(this._color.hex=d.apply(this,this.rgbArray())),this._color.hex},y.decimal=function(){return void 0===this._color.decimal&&(this._color.decimal=f(this.rgb())),this._color.decimal},y.cssName=function(){return r.rgbToName[this.rgb()]||null},y.rgbArray=function(){return void 0===this._color.rgb.array&&(this._color.rgb.array=h(this.rgb())),this._color.rgb.array},y.rgbaArray=function(){return void 0===this._color.rgba&&this.rgba(),void 0===this._color.rgba.array&&(this._color.rgba.array=u(this.rgba())),this._color.rgba.array},y.rgbObject=function(){return void 0===this._color.rgb.object&&(this._color.rgb.object=m(this.rgb())),this._color.rgb.object},y.rgbaObject=function(){return void 0===this._color.rgba&&this.rgba(),void 0===this._color.rgba.object&&(this._color.rgba.object=p(this.rgba())),this._color.rgba.object},y.getRed=function(){return this.rgbObject().r},y.getGreen=function(){return this.rgbObject().g},y.getBlue=function(){return this.rgbObject().b},y.getAlpha=function(){return void 0===this._color.rgba?1:this.rgbaObject().a},y.setRed=function(t){return t!==this.getRed()&&this._setColor("rgba("+t+", "+this.getGreen()+", "+this.getBlue()+", "+this.getAlpha()+")"),this.rgbObject().r},y.setGreen=function(t){return t!==this.getGreen()&&this._setColor("rgba("+this.getRed()+", "+t+", "+this.getBlue()+", "+this.getAlpha()+")"),this.rgbObject().g},y.setBlue=function(t){return t!==this.getBlue()&&this._setColor("rgba("+this.getRed()+", "+this.getGreen()+", "+t+", "+this.getAlpha()+")"),this.rgbObject().b},y.setAlpha=function(t){return t!==this.getAlpha()&&this._setColor("rgba("+this.getRed()+", "+this.getGreen()+", "+this.getBlue()+", "+t+")"),this.rgbaObject().a},y.mix=function(t,e){var n=m(c(this.rgb(),t,e));return this._setColor("rgba("+n.r+", "+n.g+", "+n.b+", "+this.getAlpha()+")"),this.rgb()},y.clone=function(){return new i(this.rgb())},e.exports=i},{"./helpers/cssColorNames":60,"./static/hexToRgb":63,"./static/isColor":64,"./static/isHex":65,"./static/isRgba":67,"./static/mixColors":68,"./static/rgbToArray":69,"./static/rgbToDecimal":70,"./static/rgbToHex":71,"./static/rgbToObject":74,"./static/rgbaToArray":75,"./static/rgbaToObject":76,"./static/shortToLongHex":77}],60:[function(t,e,n){"use strict";var i={"rgb(240, 248, 255)":"aliceblue","rgb(250, 235, 215)":"antiquewhite","rgb(0, 0, 0)":"black","rgb(0, 0, 255)":"blue","rgb(0, 255, 255)":"cyan","rgb(0, 0, 139)":"darkblue","rgb(0, 139, 139)":"darkcyan","rgb(0, 100, 0)":"darkgreen","rgb(0, 206, 209)":"darkturquoise","rgb(0, 191, 255)":"deepskyblue","rgb(0, 128, 0)":"green","rgb(0, 255, 0)":"lime","rgb(0, 0, 205)":"mediumblue","rgb(0, 250, 154)":"mediumspringgreen","rgb(0, 0, 128)":"navy","rgb(0, 255, 127)":"springgreen","rgb(0, 128, 128)":"teal","rgb(25, 25, 112)":"midnightblue","rgb(30, 144, 255)":"dodgerblue","rgb(32, 178, 170)":"lightseagreen","rgb(34, 139, 34)":"forestgreen","rgb(46, 139, 87)":"seagreen","rgb(47, 79, 79)":"darkslategray","rgb(50, 205, 50)":"limegreen","rgb(60, 179, 113)":"mediumseagreen","rgb(64, 224, 208)":"turquoise","rgb(65, 105, 225)":"royalblue","rgb(70, 130, 180)":"steelblue","rgb(72, 61, 139)":"darkslateblue","rgb(72, 209, 204)":"mediumturquoise","rgb(75, 0, 130)":"indigo","rgb(85, 107, 47)":"darkolivegreen","rgb(95, 158, 160)":"cadetblue","rgb(100, 149, 237)":"cornflowerblue","rgb(102, 205, 170)":"mediumaquamarine","rgb(105, 105, 105)":"dimgray","rgb(106, 90, 205)":"slateblue","rgb(107, 142, 35)":"olivedrab","rgb(112, 128, 144)":"slategray","rgb(119, 136, 153)":"lightslategray","rgb(123, 104, 238)":"mediumslateblue","rgb(124, 252, 0)":"lawngreen","rgb(127, 255, 212)":"aquamarine","rgb(127, 255, 0)":"chartreuse","rgb(128, 128, 128)":"gray","rgb(128, 0, 0)":"maroon","rgb(128, 128, 0)":"olive","rgb(128, 0, 128)":"purple","rgb(135, 206, 250)":"lightskyblue","rgb(135, 206, 235)":"skyblue","rgb(138, 43, 226)":"blueviolet","rgb(139, 0, 139)":"darkmagenta","rgb(139, 0, 0)":"darkred","rgb(139, 69, 19)":"saddlebrown","rgb(143, 188, 143)":"darkseagreen","rgb(144, 238, 144)":"lightgreen","rgb(147, 112, 219)":"mediumpurple","rgb(148, 0, 211)":"darkviolet","rgb(152, 251, 152)":"palegreen","rgb(153, 50, 204)":"darkorchid","rgb(154, 205, 50)":"yellowgreen","rgb(160, 82, 45)":"sienna","rgb(165, 42, 42)":"brown","rgb(169, 169, 169)":"darkgray","rgb(173, 255, 47)":"greenyellow","rgb(173, 216, 230)":"lightblue","rgb(175, 238, 238)":"paleturquoise","rgb(176, 196, 222)":"lightsteelblue","rgb(176, 224, 230)":"powderblue","rgb(178, 34, 34)":"firebrick","rgb(184, 134, 11)":"darkgoldenrod","rgb(186, 85, 211)":"mediumorchid","rgb(188, 143, 143)":"rosybrown","rgb(189, 183, 107)":"darkkhaki","rgb(192, 192, 192)":"silver","rgb(199, 21, 133)":"mediumvioletred","rgb(205, 92, 92)":"indianred","rgb(205, 133, 63)":"peru","rgb(210, 105, 30)":"chocolate","rgb(210, 180, 140)":"tan","rgb(211, 211, 211)":"lightgray","rgb(216, 191, 216)":"thistle","rgb(218, 165, 32)":"goldenrod","rgb(218, 112, 214)":"orchid","rgb(219, 112, 147)":"palevioletred","rgb(220, 20, 60)":"crimson","rgb(220, 220, 220)":"gainsboro","rgb(221, 160, 221)":"plum","rgb(222, 184, 135)":"burlywood","rgb(224, 255, 255)":"lightcyan","rgb(230, 230, 250)":"lavender","rgb(233, 150, 122)":"darksalmon","rgb(238, 232, 170)":"palegoldenrod","rgb(238, 130, 238)":"violet","rgb(240, 255, 255)":"azure","rgb(240, 255, 240)":"honeydew","rgb(240, 230, 140)":"khaki","rgb(240, 128, 128)":"lightcoral","rgb(244, 164, 96)":"sandybrown","rgb(245, 245, 220)":"beige","rgb(245, 255, 250)":"mintcream","rgb(245, 222, 179)":"wheat","rgb(245, 245, 245)":"whitesmoke","rgb(248, 248, 255)":"ghostwhite","rgb(250, 250, 210)":"lightgoldenrodyellow","rgb(250, 240, 230)":"linen","rgb(250, 128, 114)":"salmon","rgb(253, 245, 230)":"oldlace","rgb(255, 228, 196)":"bisque","rgb(255, 235, 205)":"blanchedalmond","rgb(255, 127, 80)":"coral","rgb(255, 248, 220)":"cornsilk","rgb(255, 140, 0)":"darkorange","rgb(255, 20, 147)":"deeppink","rgb(255, 250, 240)":"floralwhite","rgb(255, 215, 0)":"gold","rgb(255, 105, 180)":"hotpink","rgb(255, 255, 240)":"ivory","rgb(255, 240, 245)":"lavenderblush","rgb(255, 250, 205)":"lemonchiffon","rgb(255, 182, 193)":"lightpink","rgb(255, 160, 122)":"lightsalmon","rgb(255, 255, 224)":"lightyellow","rgb(255, 0, 255)":"magenta","rgb(255, 228, 225)":"mistyrose","rgb(255, 228, 181)":"moccasin","rgb(255, 222, 173)":"navajowhite","rgb(255, 165, 0)":"orange","rgb(255, 69, 0)":"orangered","rgb(255, 239, 213)":"papayawhip","rgb(255, 218, 185)":"peachpuff","rgb(255, 192, 203)":"pink","rgb(255, 0, 0)":"red","rgb(255, 245, 238)":"seashell","rgb(255, 250, 250)":"snow","rgb(255, 99, 71)":"tomato","rgb(255, 255, 255)":"white","rgb(255, 255, 0)":"yellow","rgb(102, 51, 153)":"rebeccapurple"},r={aqua:{r:0,g:255,b:255},aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},black:{r:0,g:0,b:0},blue:{r:0,g:0,b:255},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgreen:{r:0,g:100,b:0},darkturquoise:{r:0,g:206,b:209},deepskyblue:{r:0,g:191,b:255},green:{r:0,g:128,b:0},lime:{r:0,g:255,b:0},mediumblue:{r:0,g:0,b:205},mediumspringgreen:{r:0,g:250,b:154},navy:{r:0,g:0,b:128},springgreen:{r:0,g:255,b:127},teal:{r:0,g:128,b:128},midnightblue:{r:25,g:25,b:112},dodgerblue:{r:30,g:144,b:255},lightseagreen:{r:32,g:178,b:170},forestgreen:{r:34,g:139,b:34},seagreen:{r:46,g:139,b:87},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},limegreen:{r:50,g:205,b:50},mediumseagreen:{r:60,g:179,b:113},turquoise:{r:64,g:224,b:208},royalblue:{r:65,g:105,b:225},steelblue:{r:70,g:130,b:180},darkslateblue:{r:72,g:61,b:139},mediumturquoise:{r:72,g:209,b:204},indigo:{r:75,g:0,b:130},darkolivegreen:{r:85,g:107,b:47},cadetblue:{r:95,g:158,b:160},cornflowerblue:{r:100,g:149,b:237},mediumaquamarine:{r:102,g:205,b:170},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},slateblue:{r:106,g:90,b:205},olivedrab:{r:107,g:142,b:35},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},mediumslateblue:{r:123,g:104,b:238},lawngreen:{r:124,g:252,b:0},aquamarine:{r:127,g:255,b:212},chartreuse:{r:127,g:255,b:0},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},maroon:{r:128,g:0,b:0},olive:{r:128,g:128,b:0},purple:{r:128,g:0,b:128},lightskyblue:{r:135,g:206,b:250},skyblue:{r:135,g:206,b:235},blueviolet:{r:138,g:43,b:226},darkmagenta:{r:139,g:0,b:139},darkred:{r:139,g:0,b:0},saddlebrown:{r:139,g:69,b:19},darkseagreen:{r:143,g:188,b:143},lightgreen:{r:144,g:238,b:144},mediumpurple:{r:147,g:112,b:219},darkviolet:{r:148,g:0,b:211},palegreen:{r:152,g:251,b:152},darkorchid:{r:153,g:50,b:204},yellowgreen:{r:154,g:205,b:50},sienna:{r:160,g:82,b:45},brown:{r:165,g:42,b:42},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},greenyellow:{r:173,g:255,b:47},lightblue:{r:173,g:216,b:230},paleturquoise:{r:175,g:238,b:238},lightsteelblue:{r:176,g:196,b:222},powderblue:{r:176,g:224,b:230},firebrick:{r:178,g:34,b:34},darkgoldenrod:{r:184,g:134,b:11},mediumorchid:{r:186,g:85,b:211},rosybrown:{r:188,g:143,b:143},darkkhaki:{r:189,g:183,b:107},silver:{r:192,g:192,b:192},mediumvioletred:{r:199,g:21,b:133},indianred:{r:205,g:92,b:92},peru:{r:205,g:133,b:63},chocolate:{r:210,g:105,b:30},tan:{r:210,g:180,b:140},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},thistle:{r:216,g:191,b:216},goldenrod:{r:218,g:165,b:32},orchid:{r:218,g:112,b:214},palevioletred:{r:219,g:112,b:147},crimson:{r:220,g:20,b:60},gainsboro:{r:220,g:220,b:220},plum:{r:221,g:160,b:221},burlywood:{r:222,g:184,b:135},lightcyan:{r:224,g:255,b:255},lavender:{r:230,g:230,b:250},darksalmon:{r:233,g:150,b:122},palegoldenrod:{r:238,g:232,b:170},violet:{r:238,g:130,b:238},azure:{r:240,g:255,b:255},honeydew:{r:240,g:255,b:240},khaki:{r:240,g:230,b:140},lightcoral:{r:240,g:128,b:128},sandybrown:{r:244,g:164,b:96},beige:{r:245,g:245,b:220},mintcream:{r:245,g:255,b:250},wheat:{r:245,g:222,b:179},whitesmoke:{r:245,g:245,b:245},ghostwhite:{r:248,g:248,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},linen:{r:250,g:240,b:230},salmon:{r:250,g:128,b:114},oldlace:{r:253,g:245,b:230},bisque:{r:255,g:228,b:196},blanchedalmond:{r:255,g:235,b:205},coral:{r:255,g:127,b:80},cornsilk:{r:255,g:248,b:220},darkorange:{r:255,g:140,b:0},deeppink:{r:255,g:20,b:147},floralwhite:{r:255,g:250,b:240},fuchsia:{r:255,g:0,b:255},gold:{r:255,g:215,b:0},hotpink:{r:255,g:105,b:180},ivory:{r:255,g:255,b:240},lavenderblush:{r:255,g:240,b:245},lemonchiffon:{r:255,g:250,b:205},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightyellow:{r:255,g:255,b:224},magenta:{r:255,g:0,b:255},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},pink:{r:255,g:192,b:203},red:{r:255,g:0,b:0},seashell:{r:255,g:245,b:238},snow:{r:255,g:250,b:250},tomato:{r:255,g:99,b:71},white:{r:255,g:255,b:255},yellow:{r:255,g:255,b:0},rebeccapurple:{r:102,g:51,b:153}};e.exports={rgbToName:i,nameToRgbObject:r}},{}],61:[function(t,e,n){"use strict";e.exports=function(t){return"#"+t.toString(16)}},{}],62:[function(t,e,n){"use strict";e.exports=function(t){return parseInt(t.substr(1),16)}},{}],63:[function(t,e,n){"use strict";var i=t("./shortToLongHex");e.exports=function(t){t=i(t);var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?"rgb("+parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16)+")":null}},{"./shortToLongHex":77}],64:[function(t,e,n){"use strict";var i=t("./isRgb"),r=t("./isRgba"),o=t("./isHex");e.exports=function(t){return o(t)||i(t)||r(t)}},{"./isHex":65,"./isRgb":66,"./isRgba":67}],65:[function(t,e,n){"use strict";e.exports=function(t){var e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;return e.test(t)}},{}],66:[function(t,e,n){"use strict";e.exports=function(t){var e=/^rgb\(\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\s*\)$/;return null!==e.exec(t)}},{}],67:[function(t,e,n){"use strict";e.exports=function(t){var e=/^rgba\(\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*(0(\.\d+)?|1(\.0+)?)\s*\)$/;return null!==e.exec(t)}},{}],68:[function(t,e,n){"use strict";var i=t("./isHex"),r=t("./hexToRgb"),o=t("./rgbToObject");e.exports=function(t,e,n){t=i(t)?r(t):t,e=i(e)?r(e):e,t=o(t),e=o(e);var s=t.r+(e.r-t.r)*n,a=t.g+(e.g-t.g)*n,l=t.b+(e.b-t.b)*n;return"rgb("+Math.round(s)+", "+Math.round(a)+", "+Math.round(l)+")"}},{"./hexToRgb":63,"./isHex":65,"./rgbToObject":74}],69:[function(t,e,n){"use strict";var i=t("./rgbToObject");e.exports=function(t){var e=i(t);return[e.r,e.g,e.b]}},{"./rgbToObject":74}],70:[function(t,e,n){"use strict";var i=t("./hexToDecimal"),r=t("./rgbToArray"),o=t("./rgbToHex");e.exports=function(t){var e=o.apply(this,r(t));return i(e)}},{"./hexToDecimal":62,"./rgbToArray":69,"./rgbToHex":71}],71:[function(t,e,n){"use strict";e.exports=function(t,e,n){return"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)}},{}],72:[function(t,e,n){"use strict";e.exports=function(t,e,n){if(3!==arguments.length)return!1;t/=255,e/=255,n/=255;var i,r,o=Math.max(t,e,n),s=Math.min(t,e,n),a=o+s,l=o-s,c=a/2;if(o===s)i=r=0;else{switch(r=c>.5?l/(2-o-s):l/a,o){case t:i=(e-n)/l;break;case e:i=2+(n-t)/l;break;case n:i=4+(t-e)/l}i*=60,i<0&&(i+=360)}return[i,Math.round(100*r),Math.round(100*c)]}},{}],73:[function(t,e,n){"use strict";e.exports=function(t,e,n){if(3!==arguments.length)return!1;var i,r,o=t/255,s=e/255,a=n/255,l=Math.max(o,s,a),c=Math.min(o,s,a),u=l,h=l-c;if(r=0===l?0:h/l,l===c)i=0;else{switch(l){case o:i=(s-a)/h+(s<a?6:0);break;case s:i=(a-o)/h+2;break;case a:i=(o-s)/h+4}i/=6}return[Math.round(360*i),Math.round(100*r),Math.round(100*u)]}},{}],74:[function(t,e,n){"use strict";e.exports=function(t){var e=/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/,n=e.exec(t);return{r:Number(n[1]),g:Number(n[2]),b:Number(n[3])}}},{}],75:[function(t,e,n){"use strict";var i=t("./rgbaToObject");e.exports=function(t){var e=i(t);return[e.r,e.g,e.b,e.a]}},{"./rgbaToObject":76}],76:[function(t,e,n){"use strict";e.exports=function(t){var e=/rgba\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(0(\.\d+)?|1(\.0+)?)\s*\)/,n=e.exec(t);return{r:Number(n[1]),g:Number(n[2]),b:Number(n[3]),a:Number(n[4])}}},{}],77:[function(t,e,n){"use strict";e.exports=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return t=t.replace(e,function(t,e,n,i){return"#"+e+e+n+n+i+i})}},{}],78:[function(t,e,n){"use strict";e.exports=t("./internal/expose")("error")},{"./internal/expose":79}],79:[function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="f7c9180f-5c45-47b4-8de4-428015f096c0",s=window||self;try{i=!!s.localStorage.getItem(o)}catch(a){}e.exports=function(t){return function(){if(i&&"object"===r(window.console))return console[t].apply(console,Array.prototype.slice.call(arguments,0))}}},{}],80:[function(t,e,n){"use strict";e.exports=t("./internal/expose")("log")},{"./internal/expose":79}],81:[function(t,e,n){"use strict";e.exports=t("./internal/expose")("warn")},{"./internal/expose":79}],82:[function(t,e,n){"use strict";e.exports={DOMEmitter:t("./ac-dom-emitter/DOMEmitter")}},{"./ac-dom-emitter/DOMEmitter":83}],83:[function(t,e,n){"use strict";function i(t){null!==t&&(this.el=t,this._bindings={},this._delegateFuncs={},this._eventEmitter=new s)}var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=t("ac-event-emitter").EventEmitter,a=t("./DOMEmitterEvent"),l={addEventListener:t("@marcom/ac-dom-events/addEventListener"),removeEventListener:t("@marcom/ac-dom-events/removeEventListener"),dispatchEvent:t("@marcom/ac-dom-events/dispatchEvent")},c={querySelectorAll:t("@marcom/ac-dom-traversal/querySelectorAll"),matchesSelector:t("@marcom/ac-dom-traversal/matchesSelector")},u="dom-emitter";r=i.prototype,r.on=function(){return this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._on),this},r.once=function(){return this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._once),this},r.off=function(){return this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._off),this},r.has=function(t,e,n,i){var r,o;if("string"==typeof e?(r=e,o=n):(o=e,i=n),r){var s=this._getDelegateFuncBindingIdx(t,r,o,i,!0);return s>-1}return!(!this._eventEmitter||!this._eventEmitter.has.apply(this._eventEmitter,arguments))},r.trigger=function(t,e,n,i){t=this._parseEventNames(t),t=this._cleanStringData(t);var r,o,s,a=t.length;for("string"==typeof e?(r=this._cleanStringData(e),o=n):(o=e,i=n),s=0;s<a;s++)this._triggerDOMEvents(t[s],o,r);return this},r.emitterTrigger=function(t,e,n){if(!this._eventEmitter)return this;t=this._parseEventNames(t),t=this._cleanStringData(t),e=new a(e,this);var i,r=t.length;for(i=0;i<r;i++)this._eventEmitter.trigger(t[i],e,n);return this},r.propagateTo=function(t,e){return this._eventEmitter.propagateTo(t,e),this},r.stopPropagatingTo=function(t){return this._eventEmitter.stopPropagatingTo(t),this},r.stopImmediatePropagation=function(){return this._eventEmitter.stopImmediatePropagation(),this},r.destroy=function(){this._triggerInternalEvent("willdestroy"),this.off();var t;for(t in this)this.hasOwnProperty(t)&&(this[t]=null)},r._parseEventNames=function(t){return t?t.split(" "):[t]},r._onListenerEvent=function(t,e){var n=new a(e,this);this._eventEmitter.trigger(t,n,!1)},r._setListener=function(t){this._bindings[t]=this._onListenerEvent.bind(this,t),l.addEventListener(this.el,t,this._bindings[t])},r._removeListener=function(t){l.removeEventListener(this.el,t,this._bindings[t]),this._bindings[t]=null},r._triggerInternalEvent=function(t,e){this.emitterTrigger(u+":"+t,e)},r._normalizeArgumentsAndCall=function(t,e){var n={};if(0===t.length)return void e.call(this,n);if("string"==typeof t[0]||null===t[0])return t=this._cleanStringData(t),n.events=t[0],"string"==typeof t[1]?(n.delegateQuery=t[1],n.callback=t[2],n.context=t[3]):(n.callback=t[1],n.context=t[2]),void e.call(this,n);var i,r,o=":",s=t[0];for(i in s)s.hasOwnProperty(i)&&(n={},r=this._cleanStringData(i.split(o)),n.events=r[0],n.delegateQuery=r[1],n.callback=s[i],n.context=t[1],e.call(this,n))},r._registerDelegateFunc=function(t,e,n,i,r){var o=this._delegateFunc.bind(this,t,e,n,r);return this._delegateFuncs[e]=this._delegateFuncs[e]||{},this._delegateFuncs[e][t]=this._delegateFuncs[e][t]||[],this._delegateFuncs[e][t].push({func:i,context:r,delegateFunc:o}),o},r._cleanStringData=function(t){var e=!1;"string"==typeof t&&(t=[t],e=!0);var n,i,r,o=[],s=t.length;for(n=0;n<s;n++){if(i=t[n],"string"==typeof i){if(""===i||" "===i)continue;for(r=i.length;" "===i[0];)i=i.slice(1,r),r--;for(;" "===i[r-1];)i=i.slice(0,r-1),r--}o.push(i)}return e?o[0]:o},r._unregisterDelegateFunc=function(t,e,n,i){if(this._delegateFuncs[e]&&this._delegateFuncs[e][t]){var r,o=this._getDelegateFuncBindingIdx(t,e,n,i);return o>-1&&(r=this._delegateFuncs[e][t][o].delegateFunc,this._delegateFuncs[e][t].splice(o,1),0===this._delegateFuncs[e][t].length&&(this._delegateFuncs[e][t]=null)),r}},r._unregisterDelegateFuncs=function(t,e){if(this._delegateFuncs[e]&&(null===t||this._delegateFuncs[e][t]))if(null!==t)this._unbindDelegateFunc(t,e);else{var n;for(n in this._delegateFuncs[e])this._delegateFuncs[e].hasOwnProperty(n)&&this._unbindDelegateFunc(n,e)}},r._unbindDelegateFunc=function(t,e){for(var n,i,r=0;this._delegateFuncs[e][t]&&this._delegateFuncs[e][t][r];)n=this._delegateFuncs[e][t][r],i=this._delegateFuncs[e][t][r].length,this._off({events:t,delegateQuery:e,callback:n.func,context:n.context}),this._delegateFuncs[e][t]&&i===this._delegateFuncs[e][t].length&&r++;n=i=null},r._unregisterDelegateFuncsByEvent=function(t){var e;for(e in this._delegateFuncs)this._delegateFuncs.hasOwnProperty(e)&&this._unregisterDelegateFuncs(t,e)},r._delegateFunc=function(t,e,n,i,r){if(this._targetHasDelegateAncestor(r.target,e)){var s=Array.prototype.slice.call(arguments,0),a=s.slice(4,s.length);i=i||window,"object"===o(r.detail)&&(a[0]=r.detail),n.apply(i,a)}},r._targetHasDelegateAncestor=function(t,e){for(var n=t;n&&n!==this.el&&n!==document.documentElement;){if(c.matchesSelector(n,e))return!0;n=n.parentNode}return!1},r._on=function(t){var e=t.events,n=t.callback,i=t.delegateQuery,r=t.context,o=t.unboundCallback||n;e=this._parseEventNames(e),e.forEach(function(t,e,n,i,r){this.has(r)||this._setListener(r),"string"==typeof i&&(t=this._registerDelegateFunc(r,i,t,e,n)),this._triggerInternalEvent("willon",{evt:r,callback:t,context:n,delegateQuery:i}),this._eventEmitter.on(r,t,n),this._triggerInternalEvent("didon",{evt:r,callback:t,context:n,delegateQuery:i})}.bind(this,n,o,r,i)),e=n=o=i=r=null},r._off=function(t){var e=t.events,n=t.callback,i=t.delegateQuery,r=t.context,o=t.unboundCallback||n;if("undefined"!=typeof e)e=this._parseEventNames(e),e.forEach(function(t,e,n,i,r){if("string"!=typeof i||"function"!=typeof e||(t=this._unregisterDelegateFunc(r,i,e,n)))return"string"==typeof i&&"undefined"==typeof t?void this._unregisterDelegateFuncs(r,i):void("string"==typeof r&&"undefined"==typeof t&&(this._unregisterDelegateFuncsByEvent(r),"string"==typeof i)||(this._triggerInternalEvent("willoff",{evt:r,callback:t,context:n,delegateQuery:i}),this._eventEmitter.off(r,t,n),this._triggerInternalEvent("didoff",{evt:r,callback:t,context:n,delegateQuery:i}),this.has(r)||this._removeListener(r)))}.bind(this,n,o,r,i)),e=n=o=i=r=null;else{this._eventEmitter.off();var s;for(s in this._bindings)this._bindings.hasOwnProperty(s)&&this._removeListener(s);for(s in this._delegateFuncs)this._delegateFuncs.hasOwnProperty(s)&&(this._delegateFuncs[s]=null)}},r._once=function(t){var e=t.events,n=t.callback,i=t.delegateQuery,r=t.context;e=this._parseEventNames(e),e.forEach(function(t,e,n,i){return"string"==typeof n?this._handleDelegateOnce(i,t,e,n):(this.has(i)||this._setListener(i),this._triggerInternalEvent("willonce",{evt:i,callback:t,context:e,delegateQuery:n}),this._eventEmitter.once.call(this,i,t,e),void this._triggerInternalEvent("didonce",{evt:i,callback:t,context:e,delegateQuery:n}))}.bind(this,n,r,i)),e=n=i=r=null},r._handleDelegateOnce=function(t,e,n,i){return this._triggerInternalEvent("willonce",{evt:t,callback:e,context:n,delegateQuery:i}),this._on({events:t,context:n,delegateQuery:i,callback:this._getDelegateOnceCallback.bind(this,t,e,n,i),unboundCallback:e}),this._triggerInternalEvent("didonce",{evt:t,callback:e,context:n,delegateQuery:i}),this},r._getDelegateOnceCallback=function(t,e,n,i){var r=Array.prototype.slice.call(arguments,0),o=r.slice(4,r.length);e.apply(n,o),this._off({events:t,delegateQuery:i,callback:e,context:n})},r._getDelegateFuncBindingIdx=function(t,e,n,i,r){var o=-1;if(this._delegateFuncs[e]&&this._delegateFuncs[e][t]){var s,a,l=this._delegateFuncs[e][t].length;for(s=0;s<l;s++)if(a=this._delegateFuncs[e][t][s],r&&"undefined"==typeof n&&(n=a.func),a.func===n&&a.context===i){o=s;break}}return o},r._triggerDOMEvents=function(t,e,n){var i=[this.el];n&&(i=c.querySelectorAll(n,this.el));var r,o=i.length;for(r=0;r<o;r++)l.dispatchEvent(i[r],t,{bubbles:!0,cancelable:!0,detail:e})},e.exports=i},{"./DOMEmitterEvent":84,"@marcom/ac-dom-events/addEventListener":85,"@marcom/ac-dom-events/dispatchEvent":86,"@marcom/ac-dom-events/removeEventListener":89,"@marcom/ac-dom-traversal/matchesSelector":123,"@marcom/ac-dom-traversal/querySelectorAll":124,"ac-event-emitter":514}],84:[function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={preventDefault:t("@marcom/ac-dom-events/preventDefault"),stopPropagation:t("@marcom/ac-dom-events/stopPropagation"),target:t("@marcom/ac-dom-events/target")},s=function(t,e){this._domEmitter=e,this.originalEvent=t||{},this._originalTarget=o.target(this.originalEvent),this.target=this._originalTarget||this._domEmitter.el,this.currentTarget=this._domEmitter.el,this.timeStamp=this.originalEvent.timeStamp||Date.now(),this._isDOMEvent(this.originalEvent)?"object"===r(this.originalEvent.detail)&&(this.data=this.originalEvent.detail):t&&(this.data=this.originalEvent,this.originalEvent={})};i=s.prototype,i.preventDefault=function(){o.preventDefault(this.originalEvent)},i.stopPropagation=function(){o.stopPropagation(this.originalEvent)},i.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),
this._domEmitter.stopImmediatePropagation()},i._isDOMEvent=function(t){return!!(this._originalTarget||"undefined"!==document.createEvent&&"undefined"!=typeof CustomEvent&&t instanceof CustomEvent)},e.exports=s},{"@marcom/ac-dom-events/preventDefault":88,"@marcom/ac-dom-events/stopPropagation":92,"@marcom/ac-dom-events/target":93}],85:[function(t,e,n){"use strict";var i=t("./utils/addEventListener"),r=t("./shared/getEventType");e.exports=function(t,e,n,o){return e=r(t,e),i(t,e,n,o)}},{"./shared/getEventType":90,"./utils/addEventListener":94}],86:[function(t,e,n){"use strict";var i=t("./utils/dispatchEvent"),r=t("./shared/getEventType");e.exports=function(t,e,n){return e=r(t,e),i(t,e,n)}},{"./shared/getEventType":90,"./utils/dispatchEvent":95}],87:[function(t,e,n){"use strict";e.exports={addEventListener:t("./addEventListener"),dispatchEvent:t("./dispatchEvent"),preventDefault:t("./preventDefault"),removeEventListener:t("./removeEventListener"),stop:t("./stop"),stopPropagation:t("./stopPropagation"),target:t("./target")}},{"./addEventListener":85,"./dispatchEvent":86,"./preventDefault":88,"./removeEventListener":89,"./stop":91,"./stopPropagation":92,"./target":93}],88:[function(t,e,n){"use strict";e.exports=function(t){t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1}},{}],89:[function(t,e,n){"use strict";var i=t("./utils/removeEventListener"),r=t("./shared/getEventType");e.exports=function(t,e,n,o){return e=r(t,e),i(t,e,n,o)}},{"./shared/getEventType":90,"./utils/removeEventListener":96}],90:[function(t,e,n){"use strict";var i=t("@marcom/ac-prefixer/getEventType");e.exports=function(t,e){var n,r;return n="tagName"in t?t.tagName:t===window?"window":"document",r=i(e,n),r?r:e}},{"@marcom/ac-prefixer/getEventType":246}],91:[function(t,e,n){"use strict";var i=t("./stopPropagation"),r=t("./preventDefault");e.exports=function(t){t=t||window.event,i(t),r(t),t.stopped=!0,t.returnValue=!1}},{"./preventDefault":88,"./stopPropagation":92}],92:[function(t,e,n){"use strict";e.exports=function(t){t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}},{}],93:[function(t,e,n){"use strict";e.exports=function(t){return t=t||window.event,"undefined"!=typeof t.target?t.target:t.srcElement}},{}],94:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){return t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n),t}},{}],95:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/CustomEvent"),e.exports=function(t,e,n){var i;return t.dispatchEvent?(i=n?new CustomEvent(e,n):new CustomEvent(e),t.dispatchEvent(i)):(i=document.createEventObject(),n&&"detail"in n&&(i.detail=n.detail),t.fireEvent("on"+e,i)),t}},{"@marcom/ac-polyfills/CustomEvent":void 0}],96:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){return t.removeEventListener?t.removeEventListener(e,n,!!i):t.detachEvent("on"+e,n),t}},{}],97:[function(t,e,n){"use strict";e.exports=function(t,e){var n;return e?(n=t.getBoundingClientRect(),{width:n.width,height:n.height}):{width:t.offsetWidth,height:t.offsetHeight}}},{}],98:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./getScrollX"),o=t("./getScrollY");e.exports=function(t,e){var n,s,a,l;if(e)return n=t.getBoundingClientRect(),s=r(),a=o(),{top:n.top+a,right:n.right+s,bottom:n.bottom+a,left:n.left+s};for(l=i(t,e),n={top:t.offsetTop,left:t.offsetLeft,width:l.width,height:l.height};t=t.offsetParent;)n.top+=t.offsetTop,n.left+=t.offsetLeft;return{top:n.top,right:n.left+n.width,bottom:n.top+n.height,left:n.left}}},{"./getDimensions":97,"./getScrollX":101,"./getScrollY":102}],99:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./getPixelsInViewport");e.exports=function(t,e){var n=r(t,e),o=i(t,e).height;return n/o}},{"./getDimensions":97,"./getPixelsInViewport":100}],100:[function(t,e,n){"use strict";var i=t("./getViewportPosition");e.exports=function(t,e){var n,r=window.innerHeight,o=i(t,e);return o.top>=r||o.bottom<=0?0:(n=o.bottom-o.top,o.top<0&&(n+=o.top),o.bottom>r&&(n-=o.bottom-r),n)}},{"./getViewportPosition":103}],101:[function(t,e,n){"use strict";e.exports=function(t){return t=t||window,t===window?window.scrollX||window.pageXOffset:t.scrollLeft}},{}],102:[function(t,e,n){"use strict";e.exports=function(t){return t=t||window,t===window?window.scrollY||window.pageYOffset:t.scrollTop}},{}],103:[function(t,e,n){"use strict";var i=t("./getPagePosition"),r=t("./getScrollX"),o=t("./getScrollY");e.exports=function(t,e){var n,s,a;return e?(n=t.getBoundingClientRect(),{top:n.top,right:n.right,bottom:n.bottom,left:n.left}):(n=i(t),s=r(),a=o(),{top:n.top-a,right:n.right-s,bottom:n.bottom-a,left:n.left-s})}},{"./getPagePosition":98,"./getScrollX":101,"./getScrollY":102}],104:[function(t,e,n){"use strict";var i=t("./getPixelsInViewport"),r=t("./getPercentInViewport");e.exports=function(t,e,n){var o;return n=n||0,"string"==typeof n&&"px"===n.slice(-2)?(n=parseInt(n,10),o=i(t,e)):o=r(t,e),o>0&&o>=n}},{"./getPercentInViewport":99,"./getPixelsInViewport":100}],105:[function(t,e,n){"use strict";e.exports=8},{}],106:[function(t,e,n){"use strict";e.exports=11},{}],107:[function(t,e,n){"use strict";e.exports=9},{}],108:[function(t,e,n){"use strict";e.exports=1},{}],109:[function(t,e,n){"use strict";e.exports=3},{}],110:[function(t,e,n){"use strict";var i=t("../isNode");e.exports=function(t,e){return!!i(t)&&("number"==typeof e?t.nodeType===e:e.indexOf(t.nodeType)!==-1)}},{"../isNode":114}],111:[function(t,e,n){"use strict";var i=t("./isNodeType"),r=t("../COMMENT_NODE"),o=t("../DOCUMENT_FRAGMENT_NODE"),s=t("../ELEMENT_NODE"),a=t("../TEXT_NODE"),l=[s,a,r,o],c=" must be an Element, TextNode, Comment, or Document Fragment",u=[s,a,r],h=" must be an Element, TextNode, or Comment",f=[s,o],d=" must be an Element, or Document Fragment",p=" must have a parentNode";e.exports={parentNode:function(t,e,n,r){if(r=r||"target",(t||e)&&!i(t,f))throw new TypeError(n+": "+r+d)},childNode:function(t,e,n,r){if(r=r||"target",(t||e)&&!i(t,u))throw new TypeError(n+": "+r+h)},insertNode:function(t,e,n,r){if(r=r||"node",(t||e)&&!i(t,l))throw new TypeError(n+": "+r+c)},hasParentNode:function(t,e,n){if(n=n||"target",!t.parentNode)throw new TypeError(e+": "+n+p)}}},{"../COMMENT_NODE":105,"../DOCUMENT_FRAGMENT_NODE":106,"../ELEMENT_NODE":108,"../TEXT_NODE":109,"./isNodeType":110}],112:[function(t,e,n){"use strict";var i=t("./internal/isNodeType"),r=t("./DOCUMENT_FRAGMENT_NODE");e.exports=function(t){return i(t,r)}},{"./DOCUMENT_FRAGMENT_NODE":106,"./internal/isNodeType":110}],113:[function(t,e,n){"use strict";var i=t("./internal/isNodeType"),r=t("./ELEMENT_NODE");e.exports=function(t){return i(t,r)}},{"./ELEMENT_NODE":108,"./internal/isNodeType":110}],114:[function(t,e,n){"use strict";e.exports=function(t){return!(!t||!t.nodeType)}},{}],115:[function(t,e,n){"use strict";var i=t("./internal/validate");e.exports=function(t){return i.childNode(t,!0,"remove"),t.parentNode?t.parentNode.removeChild(t):t}},{"./internal/validate":111}],116:[function(t,e,n){"use strict";e.exports={getStyle:t("./getStyle"),setStyle:t("./setStyle")}},{"./getStyle":117,"./setStyle":119}],117:[function(t,e,n){"use strict";var i=t("@marcom/ac-prefixer/getStyleProperty"),r=t("@marcom/ac-prefixer/stripPrefixes");e.exports=function(){var t,e,n,o,s=Array.prototype.slice.call(arguments),a=s.shift(s),l=window.getComputedStyle(a),c={};for("string"!=typeof s[0]&&(s=s[0]),o=0;o<s.length;o++)t=s[o],e=i(t),e?(t=r(e),n=l[e],n&&"auto"!==n||(n=null),n&&(n=r(n))):n=null,c[t]=n;return c}},{"@marcom/ac-prefixer/getStyleProperty":248,"@marcom/ac-prefixer/stripPrefixes":256}],118:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports=function(t){var e,n,r;if(!t&&0!==t)return"";if(Array.isArray(t))return t+"";if("object"===("undefined"==typeof t?"undefined":i(t))){for(e="",n=Object.keys(t),r=0;r<n.length;r++)e+=n[r]+"("+t[n[r]]+") ";return e.trim()}return t}},{}],119:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("@marcom/ac-prefixer/getStyleCSS"),o=t("@marcom/ac-prefixer/getStyleProperty"),s=t("./internal/normalizeValue");e.exports=function(t,e){var n,a,l,c,u,h="";if("object"!==("undefined"==typeof e?"undefined":i(e)))throw new TypeError("setStyle: styles must be an Object");for(a in e)c=s(e[a]),c||0===c?(n=r(a,c),n!==!1&&(h+=" "+n)):(l=o(a),"removeAttribute"in t.style?t.style.removeAttribute(l):t.style[l]="");return h.length&&(u=t.style.cssText,";"!==u.charAt(u.length-1)&&(u+=";"),u+=h,t.style.cssText=u),t}},{"./internal/normalizeValue":118,"@marcom/ac-prefixer/getStyleCSS":247,"@marcom/ac-prefixer/getStyleProperty":248}],120:[function(t,e,n){"use strict";var i=t("@marcom/ac-dom-nodes/isElement"),r=t("./matchesSelector"),o=t("./internal/validate");e.exports=function(t,e,n,s){var a=[];if(o.childNode(t,!0,"ancestors"),o.selector(e,!1,"ancestors"),n&&i(t)&&(!e||r(t,e))&&a.push(t),s=s||document.body,t!==s)for(;(t=t.parentNode)&&i(t)&&(e&&!r(t,e)||a.push(t),t!==s););return a}},{"./internal/validate":122,"./matchesSelector":123,"@marcom/ac-dom-nodes/isElement":113}],121:[function(t,e,n){"use strict";e.exports=window.Element?function(t){return t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector}(Element.prototype):null},{}],122:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.indexOf");var i=t("@marcom/ac-dom-nodes/isNode"),r=t("@marcom/ac-dom-nodes/COMMENT_NODE"),o=t("@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE"),s=t("@marcom/ac-dom-nodes/DOCUMENT_NODE"),a=t("@marcom/ac-dom-nodes/ELEMENT_NODE"),l=t("@marcom/ac-dom-nodes/TEXT_NODE"),c=function(t,e){return!!i(t)&&("number"==typeof e?t.nodeType===e:e.indexOf(t.nodeType)!==-1)},u=[a,s,o],h=" must be an Element, Document, or Document Fragment",f=[a,l,r],d=" must be an Element, TextNode, or Comment",p=" must be a string";e.exports={parentNode:function(t,e,n,i){if(i=i||"node",(t||e)&&!c(t,u))throw new TypeError(n+": "+i+h)},childNode:function(t,e,n,i){if(i=i||"node",(t||e)&&!c(t,f))throw new TypeError(n+": "+i+d)},selector:function(t,e,n,i){if(i=i||"selector",(t||e)&&"string"!=typeof t)throw new TypeError(n+": "+i+p)}}},{"@marcom/ac-dom-nodes/COMMENT_NODE":105,"@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE":106,"@marcom/ac-dom-nodes/DOCUMENT_NODE":107,"@marcom/ac-dom-nodes/ELEMENT_NODE":108,"@marcom/ac-dom-nodes/TEXT_NODE":109,"@marcom/ac-dom-nodes/isNode":114,"@marcom/ac-polyfills/Array/prototype.indexOf":void 0}],123:[function(t,e,n){"use strict";var i=t("@marcom/ac-dom-nodes/isElement"),r=t("./internal/validate"),o=t("./internal/nativeMatches"),s=t("./shims/matchesSelector");e.exports=function(t,e){return r.selector(e,!0,"matchesSelector"),!!i(t)&&(o?o.call(t,e):s(t,e))}},{"./internal/nativeMatches":121,"./internal/validate":122,"./shims/matchesSelector":125,"@marcom/ac-dom-nodes/isElement":113}],124:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.slice");var i=t("./internal/validate"),r=t("./shims/querySelectorAll"),o="querySelectorAll"in document;e.exports=function(t,e){return e=e||document,i.parentNode(e,!0,"querySelectorAll","context"),i.selector(t,!0,"querySelectorAll"),o?Array.prototype.slice.call(e.querySelectorAll(t)):r(t,e)}},{"./internal/validate":122,"./shims/querySelectorAll":126,"@marcom/ac-polyfills/Array/prototype.slice":void 0}],125:[function(t,e,n){"use strict";var i=t("../querySelectorAll");e.exports=function(t,e){var n,r=t.parentNode||document,o=i(e,r);for(n=0;n<o.length;n++)if(o[n]===t)return!0;return!1}},{"../querySelectorAll":124}],126:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.indexOf");var i=t("@marcom/ac-dom-nodes/isElement"),r=t("@marcom/ac-dom-nodes/isDocumentFragment"),o=t("@marcom/ac-dom-nodes/remove"),s="_ac_qsa_",a=function(t,e){var n;if(e===document)return!0;for(n=t;(n=n.parentNode)&&i(n);)if(n===e)return!0;return!1},l=function(t){"recalc"in t?t.recalc(!1):document.recalc(!1),window.scrollBy(0,0)};e.exports=function(t,e){var n,i=document.createElement("style"),c=s+(Math.random()+"").slice(-6),u=[];for(e=e||document,document[c]=[],r(e)?e.appendChild(i):document.documentElement.firstChild.appendChild(i),i.styleSheet.cssText="*{display:recalc;}"+t+'{ac-qsa:expression(document["'+c+'"] && document["'+c+'"].push(this));}',l(e);document[c].length;)n=document[c].shift(),n.style.removeAttribute("ac-qsa"),u.indexOf(n)===-1&&a(n,e)&&u.push(n);return document[c]=null,o(i),l(e),u}},{"@marcom/ac-dom-nodes/isDocumentFragment":112,"@marcom/ac-dom-nodes/isElement":113,"@marcom/ac-dom-nodes/remove":115,"@marcom/ac-polyfills/Array/prototype.indexOf":void 0}],127:[function(t,e,n){"use strict";e.exports={createBezier:t("./ac-easing/createBezier"),createPredefined:t("./ac-easing/createPredefined"),createStep:t("./ac-easing/createStep"),Ease:t("./ac-easing/Ease")}},{"./ac-easing/Ease":128,"./ac-easing/createBezier":129,"./ac-easing/createPredefined":130,"./ac-easing/createStep":131}],128:[function(t,e,n){"use strict";function i(t,e){if("function"!=typeof t)throw new TypeError(r);this.easingFunction=t,this.cssString=e||null}var r="Ease expects an easing function.",o=i.prototype;o.getValue=function(t){return this.easingFunction(t,0,1,1)},e.exports=i},{}],129:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.every");var i=t("./Ease"),r=t("./helpers/KeySpline"),o="Bezier curve expects exactly four (4) numbers. Given: ";e.exports=function(t,e,n,s){var a=Array.prototype.slice.call(arguments),l=a.every(function(t){return"number"==typeof t});if(4!==a.length||!l)throw new TypeError(o+a);var c=new r(t,e,n,s),u=function(t,e,n,i){return c.get(t/i)*n+e},h="cubic-bezier("+a.join(", ")+")";return new i(u,h)}},{"./Ease":128,"./helpers/KeySpline":132,"@marcom/ac-polyfills/Array/prototype.every":void 0}],130:[function(t,e,n){"use strict";var i=t("./createStep"),r=t("./helpers/cssAliases"),o=t("./helpers/easingFunctions"),s=t("./Ease"),a='Easing function "%TYPE%" not recognized among the following: '+Object.keys(o).join(", ");e.exports=function(t){var e;if("step-start"===t)return i(1,"start");if("step-end"===t)return i(1,"end");if(e=o[t],!e)throw new Error(a.replace("%TYPE%",t));return new s(e,r[t])}},{"./Ease":128,"./createStep":131,"./helpers/cssAliases":133,"./helpers/easingFunctions":134}],131:[function(t,e,n){"use strict";var i=t("./Ease"),r="Step function expects a numeric value greater than zero. Given: ",o='Step function direction must be either "start" or "end" (default). Given: ';e.exports=function(t,e){if(e=e||"end","number"!=typeof t||t<1)throw new TypeError(r+t);if("start"!==e&&"end"!==e)throw new TypeError(o+e);var n=function(n,i,r,o){var s=r/t,a=Math["start"===e?"floor":"ceil"](n/o*t);return i+s*a},s="steps("+t+", "+e+")";return new i(n,s)}},{"./Ease":128}],132:[function(t,e,n){"use strict";function i(t,e,n,i){function r(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function s(t){return 3*t}function a(t,e,n){return((r(e,n)*t+o(e,n))*t+s(e))*t}function l(t,e,n){return 3*r(e,n)*t*t+2*o(e,n)*t+s(e)}function c(e){for(var i=e,r=0;r<4;++r){var o=l(i,t,n);if(0===o)return i;var s=a(i,t,n)-e;i-=s/o}return i}this.get=function(r){return t===e&&n===i?r:a(c(r),e,i)}}e.exports=i},{}],133:[function(t,e,n){"use strict";var i={linear:"cubic-bezier(0, 0, 1, 1)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)","ease-in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","ease-out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","ease-in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","ease-out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","ease-in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","ease-in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","ease-out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","ease-in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","ease-in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","ease-out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","ease-in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"};i.easeIn=i["ease-in"],i.easeOut=i["ease-out"],i.easeInOut=i["ease-in-out"],i.easeInCubic=i["ease-in-cubic"],i.easeOutCubic=i["ease-out-cubic"],i.easeInOutCubic=i["ease-in-out-cubic"],i.easeInQuad=i["ease-in-quad"],i.easeOutQuad=i["ease-out-quad"],i.easeInOutQuad=i["ease-in-out-quad"],i.easeInQuart=i["ease-in-quart"],i.easeOutQuart=i["ease-out-quart"],i.easeInOutQuart=i["ease-in-out-quart"],i.easeInQuint=i["ease-in-quint"],i.easeOutQuint=i["ease-out-quint"],i.easeInOutQuint=i["ease-in-out-quint"],i.easeInSine=i["ease-in-sine"],i.easeOutSine=i["ease-out-sine"],i.easeInOutSine=i["ease-in-out-sine"],i.easeInExpo=i["ease-in-expo"],i.easeOutExpo=i["ease-out-expo"],i.easeInOutExpo=i["ease-in-out-expo"],i.easeInCirc=i["ease-in-circ"],i.easeOutCirc=i["ease-out-circ"],i.easeInOutCirc=i["ease-in-out-circ"],i.easeInBack=i["ease-in-back"],i.easeOutBack=i["ease-out-back"],i.easeInOutBack=i["ease-in-out-back"],e.exports=i},{}],134:[function(t,e,n){"use strict";var i=t("../createBezier"),r=i(.25,.1,.25,1).easingFunction,o=i(.42,0,1,1).easingFunction,s=i(0,0,.58,1).easingFunction,a=i(.42,0,.58,1).easingFunction,l=function(t,e,n,i){return n*t/i+e},c=function(t,e,n,i){return n*(t/=i)*t+e},u=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},h=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},f=function(t,e,n,i){return n*(t/=i)*t*t+e},d=function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},p=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},m=function(t,e,n,i){return n*(t/=i)*t*t*t+e},_=function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},y=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},g=function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},v=function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},b=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},w=function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},E=function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},x=function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},S=function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},k=function(t,e,n,i){return t===i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},T=function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},C=function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},A=function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},P=function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},M=function(t,e,n,i){var r=1.70158,o=0,s=n;return 0===t?e:1===(t/=i)?e+n:(o||(o=.3*i),s<Math.abs(n)?(s=n,r=o/4):r=o/(2*Math.PI)*Math.asin(n/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/o))+e)},O=function(t,e,n,i){var r=1.70158,o=0,s=n;return 0===t?e:1===(t/=i)?e+n:(o||(o=.3*i),s<Math.abs(n)?(s=n,r=o/4):r=o/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*t)*Math.sin((t*i-r)*(2*Math.PI)/o)+n+e)},I=function(t,e,n,i){var r=1.70158,o=0,s=n;return 0===t?e:2===(t/=i/2)?e+n:(o||(o=i*(.3*1.5)),s<Math.abs(n)?(s=n,r=o/4):r=o/(2*Math.PI)*Math.asin(n/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*i-r)*(2*Math.PI)/o)*.5+n+e)},L=function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},D=function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},R=function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*(((r*=1.525)+1)*t-r))+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},F=function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},N=function(t,e,n,i){return n-F(i-t,0,n,i)+e},j=function(t,e,n,i){return t<i/2?.5*N(2*t,0,n,i)+e:.5*F(2*t-i,0,n,i)+.5*n+e};e.exports={linear:l,ease:r,easeIn:o,"ease-in":o,easeOut:s,"ease-out":s,easeInOut:a,"ease-in-out":a,easeInCubic:f,"ease-in-cubic":f,easeOutCubic:d,"ease-out-cubic":d,easeInOutCubic:p,"ease-in-out-cubic":p,easeInQuad:c,"ease-in-quad":c,easeOutQuad:u,"ease-out-quad":u,easeInOutQuad:h,"ease-in-out-quad":h,easeInQuart:m,"ease-in-quart":m,easeOutQuart:_,"ease-out-quart":_,easeInOutQuart:y,"ease-in-out-quart":y,easeInQuint:g,"ease-in-quint":g,easeOutQuint:v,"ease-out-quint":v,easeInOutQuint:b,"ease-in-out-quint":b,easeInSine:w,"ease-in-sine":w,easeOutSine:E,"ease-out-sine":E,easeInOutSine:x,"ease-in-out-sine":x,easeInExpo:S,"ease-in-expo":S,easeOutExpo:k,"ease-out-expo":k,easeInOutExpo:T,"ease-in-out-expo":T,easeInCirc:C,"ease-in-circ":C,easeOutCirc:A,"ease-out-circ":A,easeInOutCirc:P,"ease-in-out-circ":P,easeInBack:L,"ease-in-back":L,easeOutBack:D,"ease-out-back":D,easeInOutBack:R,"ease-in-out-back":R,easeInElastic:M,"ease-in-elastic":M,easeOutElastic:O,"ease-out-elastic":O,easeInOutElastic:I,"ease-in-out-elastic":I,easeInBounce:N,"ease-in-bounce":N,easeOutBounce:F,"ease-out-bounce":F,easeInOutBounce:j,"ease-in-out-bounce":j}},{"../createBezier":129}],135:[function(t,e,n){"use strict";var i=t("./utils/getBoundingClientRect");e.exports=function(t,e){var n;return e?(n=i(t),{width:n.width,height:n.height}):{width:t.offsetWidth,height:t.offsetHeight}}},{"./utils/getBoundingClientRect":136}],136:[function(t,e,n){"use strict";e.exports=function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}},{}],137:[function(t,e,n){"use strict";function i(t,e,n,i){return t.nodeType?void 0===r||i&&i.inlineStyles?new a(t,e,n,i):new l(t,e,n,i):new s(t,e,n,i)}t("./helpers/Float32Array");var r=t("./helpers/transitionEnd"),o=t("@marcom/ac-clip").Clip,s=t("./clips/ClipEasing"),a=t("./clips/ClipInlineCss"),l=t("./clips/ClipTransitionCss");for(var c in o)"function"==typeof o[c]&&"_"!==c.substr(0,1)&&(i[c]=o[c].bind(o));i.to=function(t,e,n,r){return r=r||{},void 0===r.destroyOnComplete&&(r.destroyOnComplete=!0),new i(t,e,n,r).play()},i.from=function(t,e,n,r){return r=r||{},r.propsFrom=n,void 0===r.destroyOnComplete&&(r.destroyOnComplete=!0),new i(t,e,r.propsTo,r).play()},e.exports=i},{"./clips/ClipEasing":140,"./clips/ClipInlineCss":141,"./clips/ClipTransitionCss":142,"./helpers/Float32Array":145,"./helpers/transitionEnd":154,"@marcom/ac-clip":51}],138:[function(t,e,n){"use strict";e.exports=t("./timeline/Timeline")},{"./timeline/Timeline":156}],139:[function(t,e,n){"use strict";e.exports={Clip:t("./Clip"),Timeline:t("./Timeline")}},{"./Clip":137,"./Timeline":138}],140:[function(t,e,n){"use strict";function i(t,e,n,i){i&&a(i.ease)&&(i.ease=l.create(i.ease).toEasingFunction()),i=i||{},this._propsEase=i.propsEase||{},c.call(this,t,e,n,i)}var r=t("@marcom/ac-object/clone"),o=t("@marcom/ac-object/create"),s=t("@marcom/ac-easing").createPredefined,a=t("../helpers/isCssCubicBezierString"),l=t("../helpers/BezierCurveCssManager"),c=t("@marcom/ac-clip").Clip,u=t("@marcom/ac-easing").Ease,h=c.prototype,f=i.prototype=o(h);f.reset=function(){var t=h.reset.call(this);if(this._clips)for(var e=this._clips.length;e--;)this._clips[e].reset();return t},f.destroy=function(){if(this._clips){for(var t=this._clips.length;t--;)this._clips[t].destroy();this._clips=null}return this._eases=null,this._storeOnUpdate=null,h.destroy.call(this)},f._prepareProperties=function(){var t,e,n=0,i={},o={},f={};if(this._propsEase){for(t in this._propsTo)this._propsTo.hasOwnProperty(t)&&(e=this._propsEase[t],a(e)&&(e=l.create(e).toEasingFunction()),void 0===e?(void 0===i[this._ease]&&(i[this._ease]={},o[this._ease]={},f[this._ease]=this._ease.easingFunction,n++),i[this._ease][t]=this._propsTo[t],o[this._ease][t]=this._propsFrom[t]):"function"==typeof e?(i[n]={},o[n]={},i[n][t]=this._propsTo[t],o[n][t]=this._propsFrom[t],f[n]=e,n++):(void 0===i[e]&&(i[e]={},o[e]={},f[e]=e,n++),i[e][t]=this._propsTo[t],o[e][t]=this._propsFrom[t]));if(n>1){var d=r(this._options||{},!0),p=.001*this._duration;this._storeOnUpdate=this._onUpdate,this._onUpdate=this._onUpdateClips,d.onStart=null,d.onUpdate=null,d.onDraw=null,d.onComplete=null,this._clips=[];for(e in i)i.hasOwnProperty(e)&&(d.ease=f[e],d.propsFrom=o[e],this._clips.push(new c(this._target,p,i[e],d)));e="linear",this._propsTo={},this._propsFrom={}}else for(t in f)f.hasOwnProperty(t)&&(e=f[t]);void 0!==e&&(this._ease="function"==typeof e?new u(e):s(e))}return h._prepareProperties.call(this)},f._onUpdateClips=function(t){for(var e=1===this._direction?t.progress():1-t.progress(),n=this._clips.length;n--;)this._clips[n].progress(e);"function"==typeof this._storeOnUpdate&&this._storeOnUpdate.call(this,this)},e.exports=i},{"../helpers/BezierCurveCssManager":144,"../helpers/isCssCubicBezierString":150,"@marcom/ac-clip":51,"@marcom/ac-easing":127,"@marcom/ac-object/clone":233,"@marcom/ac-object/create":234}],141:[function(t,e,n){"use strict";function i(t,e,n,i){i=i||{},this._el=t,this._storeOnStart=i.onStart||null,this._storeOnDraw=i.onDraw||null,this._storeOnComplete=i.onComplete||null,i.onStart=this._onStart,i.onDraw=this._onDraw,i.onComplete=this._onComplete,u.call(this,{},e,n,i)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("@marcom/ac-dom-styles/setStyle"),s=t("../helpers/convertToStyleObject"),a=t("../helpers/convertToTransitionableObjects"),l=t("@marcom/ac-object/create"),c=t("../helpers/removeTransitions"),u=t("./ClipEasing"),h=u.prototype,f=i.prototype=l(h);f.play=function(){var t=h.play.call(this);return 0!==this._remainingDelay&&o(this._el,s(this._target)),t},f.reset=function(){var t=h.reset.call(this);return o(this._el,s(this._target)),t},f.destroy=function(){return this._el=null,this._completeStyles=null,this._storeOnStart=null,this._storeOnDraw=null,this._storeOnComplete=null,h.destroy.call(this)},f.target=function(){return this._el},f._prepareProperties=function(){var t=a(this._el,this._propsTo,this._propsFrom);this._target=t.target,this._propsFrom=t.propsFrom,this._propsTo=t.propsTo,c(this._el,this._target);var e=this._isYoyo?this._propsFrom:this._propsTo;if(this._completeStyles=s(e),void 0!==this._options.removeStylesOnComplete){var n,i=this._options.removeStylesOnComplete;if("boolean"==typeof i&&i)for(n in this._completeStyles)this._completeStyles.hasOwnProperty(n)&&(this._completeStyles[n]=null);else if("object"===("undefined"==typeof i?"undefined":r(i))&&i.length)for(var o=i.length;o--;)n=i[o],this._completeStyles.hasOwnProperty(n)&&(this._completeStyles[n]=null)}return h._prepareProperties.call(this)},f._onStart=function(t){this.playing()&&1===this._direction&&0===this._delay&&o(this._el,s(this._propsFrom)),"function"==typeof this._storeOnStart&&this._storeOnStart.call(this,this)},f._onDraw=function(t){o(this._el,s(this._target)),"function"==typeof this._storeOnDraw&&this._storeOnDraw.call(this,this)},f._onComplete=function(t){o(this._el,this._completeStyles),"function"==typeof this._storeOnComplete&&this._storeOnComplete.call(this,this)},e.exports=i},{"../helpers/convertToStyleObject":147,"../helpers/convertToTransitionableObjects":148,"../helpers/removeTransitions":151,"./ClipEasing":140,"@marcom/ac-dom-styles/setStyle":119,"@marcom/ac-object/create":234}],142:[function(t,e,n){"use strict";function i(t,e,n,i){if(i=i||{},this._el=t,this._storeEase=i.ease,"function"==typeof this._storeEase)throw new Error(E);this._storeOnStart=i.onStart||null,this._storeOnComplete=i.onComplete||null,i.onStart=this._onStart.bind(this),i.onComplete=this._onComplete.bind(this),this._stylesTo=c(n,!0),this._stylesFrom=i.propsFrom?c(i.propsFrom,!0):{},this._propsEase=i.propsEase?c(i.propsEase,!0):{},f(i.ease)&&(i.ease=_.create(i.ease).toEasingFunction()),y.call(this,{},e,{},i),this._propsFrom={}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("@marcom/ac-dom-styles/setStyle"),s=t("@marcom/ac-dom-styles/getStyle"),a=t("../helpers/convertToStyleObject"),l=t("../helpers/convertToTransitionableObjects"),c=t("@marcom/ac-object/clone"),u=t("@marcom/ac-object/create"),h=t("@marcom/ac-easing").createPredefined,f=t("../helpers/isCssCubicBezierString"),d=t("../helpers/removeTransitions"),p=t("../helpers/transitionEnd"),m=t("../helpers/waitAnimationFrames"),_=t("../helpers/BezierCurveCssManager"),y=t("@marcom/ac-clip").Clip,g=t("./ClipEasing"),v=t("@marcom/ac-page-visibility").PageVisibilityManager,b="ease",w="%EASE% is not a supported predefined ease when transitioning with Elements and CSS transition. If you need to use %EASE% then pass the inlineStyle:true option.",E="Function eases are not supported when using CSS transitions with Elements. Either use a cubic-bezier string (e.g. 'cubic-bezier(0, 0, 1, 1)' or pass the inlineStyle option as `true` to render styles each frame instead of using CSS transitions.",x=y.prototype,S=i.prototype=u(x);S.play=function(){var t=x.play.call(this);return 1===this._direction&&0===this.progress()&&0!==this._remainingDelay&&this._applyStyles(0,a(this._stylesFrom)),t},S.reset=function(){var t=x.reset.call(this);return this._stylesClip.reset(),this._applyStyles(0,a(this._styles)),t},S.destroy=function(){return v.off("changed",this._onVisibilityChanged),this._removeTransitionListener(),this.off("pause",this._onPaused),this._onPaused(),this._stylesClip.destroy(),this._stylesClip=null,this._el=null,this._propsArray=null,this._styles=null,this._stylesFrom=null,this._stylesTo=null,this._completeStyles=null,this._storeOnStart=null,this._storeOnComplete=null,this._onTransitionEnded=null,x.destroy.call(this)},S.target=function(){return this._el},S.duration=function(t){var e=x.duration.call(this,t);return void 0===t?e:(this.playing()&&this.progress(this._progress),e)},S.progress=function(t){var e=x.progress.call(this,t);return void 0===t?e:(t=1===this._direction?t:1-t,this._stylesClip.progress(t),this._applyStyles(0,a(this._styles)),this.playing()&&(this._isWaitingForStylesToBeApplied=!0,m(this._setStylesAfterWaiting,2)),e)},S._prepareProperties=function(){var t=l(this._el,this._stylesTo,this._stylesFrom);this._styles=t.target,this._stylesTo=t.propsTo,this._stylesFrom=t.propsFrom;var e=this._storeEase||b;this._eases={},this._propsArray=[];var n;this._styleCompleteTo=a(this._stylesTo),this._styleCompleteFrom=a(this._stylesFrom),this._propsEaseKeys={};var i;for(i in this._stylesTo)this._stylesTo.hasOwnProperty(i)&&(this._propsArray[this._propsArray.length]=i,void 0===this._propsEase[i]?(void 0===this._eases[e]&&(n=this._convertEase(e),this._eases[e]=n.css),this._propsEaseKeys[i]=e):void 0===this._eases[this._propsEase[i]]?(n=this._convertEase(this._propsEase[i]),this._eases[this._propsEase[i]]=n.css,this._propsEaseKeys[i]=this._propsEase[i],this._propsEase[i]=n.js):f(this._propsEase[i])&&(this._propsEaseKeys[i]=this._propsEase[i],this._propsEase[i]=this._eases[this._propsEase[i]][1].toEasingFunction()));
if(this._onPaused=this._onPaused.bind(this),this.on("pause",this._onPaused),this._setOtherTransitions(),this._currentTransitionStyles=this._otherTransitions,this._completeStyles=a(this._isYoyo?this._stylesFrom:this._stylesTo),void 0!==this._options.removeStylesOnComplete){var o=this._options.removeStylesOnComplete;if("boolean"==typeof o&&o)for(i in this._stylesTo)this._completeStyles[i]=null;else if("object"===("undefined"==typeof o?"undefined":r(o))&&o.length)for(var s=o.length;s--;)this._completeStyles[o[s]]=null}return this._onTransitionEnded=this._onTransitionEnded.bind(this),this._setStylesAfterWaiting=this._setStylesAfterWaiting.bind(this),this._onVisibilityChanged=this._onVisibilityChanged.bind(this),v.on(v.CHANGED,this._onVisibilityChanged),this._stylesClip=new g(this._styles,1,this._stylesTo,{ease:this._options.ease,propsFrom:this._stylesFrom,propsEase:this._options.propsEase}),y._remove(this._stylesClip),x._prepareProperties.call(this)},S._convertEase=function(t){if("function"==typeof t)throw new Error(E);var e,n;if(f(t))e=_.create(t),n=e.toEasingFunction();else{var i=h(t);if(null===i.cssString)throw new Error(w.replace(/%EASE%/g,t));e=_.create(i.cssString),n=t}return{css:{1:e,"-1":e.reversed()},js:n}},S._complete=function(){!this._isWaitingForStylesToBeApplied&&!this._isTransitionEnded&&this._isListeningForTransitionEnd||1!==this.progress()||(this._isWaitingForStylesToBeApplied=!1,x._complete.call(this))},S._onTransitionEnded=function(){this._isTransitionEnded=!0,this._complete()},S._addTransitionListener=function(){!this._isListeningForTransitionEnd&&this._el&&this._onTransitionEnded&&(this._isListeningForTransitionEnd=!0,this._isTransitionEnded=!1,this._el.addEventListener(p,this._onTransitionEnded))},S._removeTransitionListener=function(){this._isListeningForTransitionEnd&&this._el&&this._onTransitionEnded&&(this._isListeningForTransitionEnd=!1,this._isTransitionEnded=!1,this._el.removeEventListener(p,this._onTransitionEnded))},S._applyStyles=function(t,e){if(t>0){var n,i="",r={};for(n in this._eases)this._eases.hasOwnProperty(n)&&(r[n]=this._eases[n][this._direction].splitAt(this.progress()).toCSSString());for(n in this._stylesTo)this._stylesTo.hasOwnProperty(n)&&(i+=n+" "+t+"ms "+r[this._propsEaseKeys[n]]+" 0ms, ");this._currentTransitionStyles=i.substr(0,i.length-2),this._doStylesMatchCurrentStyles(e)?this._removeTransitionListener():this._addTransitionListener()}else this._currentTransitionStyles="",this._removeTransitionListener();e.transition=this._getOtherClipTransitionStyles()+this._currentTransitionStyles,o(this._el,e)},S._doStylesMatchCurrentStyles=function(t){var e,n=s.apply(this,[this._el].concat([this._propsArray]));for(e in t)if(t.hasOwnProperty(e)&&n.hasOwnProperty(e)&&t[e]!==n[e])return!1;return!0},S._setStylesAfterWaiting=function(){if(this._isWaitingForStylesToBeApplied=!1,this.playing()){var t=this._durationMs*(1-this.progress()),e=this._direction>0?this._styleCompleteTo:this._styleCompleteFrom;this._applyStyles(t,e)}},S._setOtherTransitions=function(){d(this._el,this._stylesTo);for(var t=y.getAll(this._el),e=t.length;e--;)if(t[e]!==this&&t[e].playing()&&t[e]._otherTransitions&&t[e]._otherTransitions.length)return void(this._otherTransitions=t[e]._otherTransitions);this._otherTransitions=s(this._el,"transition").transition,null!==this._otherTransitions&&"all 0s ease 0s"!==this._otherTransitions||(this._otherTransitions="")},S._getTransitionStyles=function(){var t=this._getOtherClipTransitionStyles();return this._otherTransitions.length?t+=this._otherTransitions:t.length&&(t=t.substr(0,t.length-2)),t},S._getOtherClipTransitionStyles=function(){for(var t="",e=y.getAll(this._el),n=e.length;n--;)e[n]!==this&&e[n].playing()&&e[n]._currentTransitionStyles&&e[n]._currentTransitionStyles.length&&(t+=e[n]._currentTransitionStyles+", ");return t},S._onVisibilityChanged=function(t){if(this.playing()&&!t.isHidden){this._update({timeNow:this._getTime()});var e=this.progress();e<1&&this.progress(e)}},S._onPaused=function(t){var e=s.apply(this,[this._el].concat([this._propsArray]));e.transition=this._getTransitionStyles(),this._removeTransitionListener(),o(this._el,e)},S._onStart=function(t){var e=1===this._direction&&0===this.progress()&&0===this._delay?2:0;e&&(this._isWaitingForStylesToBeApplied=!0,this._applyStyles(0,this._styleCompleteFrom)),m(this._setStylesAfterWaiting,e),"function"==typeof this._storeOnStart&&this._storeOnStart.call(this,this)},S._onComplete=function(t){this._removeTransitionListener(),this._completeStyles.transition=this._getTransitionStyles(),o(this._el,this._completeStyles),"function"==typeof this._storeOnComplete&&this._storeOnComplete.call(this,this)},e.exports=i},{"../helpers/BezierCurveCssManager":144,"../helpers/convertToStyleObject":147,"../helpers/convertToTransitionableObjects":148,"../helpers/isCssCubicBezierString":150,"../helpers/removeTransitions":151,"../helpers/transitionEnd":154,"../helpers/waitAnimationFrames":155,"./ClipEasing":140,"@marcom/ac-clip":51,"@marcom/ac-dom-styles/getStyle":117,"@marcom/ac-dom-styles/setStyle":119,"@marcom/ac-easing":127,"@marcom/ac-object/clone":233,"@marcom/ac-object/create":234,"@marcom/ac-page-visibility":242}],143:[function(t,e,n){"use strict";function i(t,e){this.manager=e,this.p1={x:t[0],y:t[1]},this.p2={x:t[2],y:t[3]},this._isLinear=this.p1.x===this.p1.y&&this.p2.x===this.p2.y,this._cacheSplits={}}var r=t("@marcom/ac-easing").createBezier,o=i.prototype;o.splitAt=function(t){if(this._isLinear)return this;if(t=Math.round(40*t)/40,0===t)return this;if(void 0!==this._cacheSplits[t])return this._cacheSplits[t];for(var e=[this.p1.x,this.p2.x],n=[this.p1.y,this.p2.y],i=0,r=t,o=0,s=1,a=this._getStartX(t,e);r!==a&&i<1e3;)r<a?s=t:o=t,t=o+.5*(s-o),a=this._getStartX(t,e),++i;var l=this._splitBezier(t,e,n),c=this._normalize(l),u=this.manager.create(c);return this._cacheSplits[r]=u,u},o.reversed=function(){var t=this.toArray();return this.manager.create([.5-(t[2]-.5),.5-(t[3]-.5),.5-(t[0]-.5),.5-(t[1]-.5)])},o.toArray=function(){return[this.p1.x,this.p1.y,this.p2.x,this.p2.y]},o.toCSSString=function(){return"cubic-bezier("+this.p1.x+", "+this.p1.y+", "+this.p2.x+", "+this.p2.y+")"},o.toEasingFunction=function(){return r.apply(this,this.toArray()).easingFunction},o._getStartX=function(t,e){var n=t-1,i=t*t,r=n*n,o=i*t;return o-3*i*n*e[1]+3*t*r*e[0]},o._splitBezier=function(t,e,n){var i=t-1,r=t*t,o=i*i,s=r*t;return[s-3*r*i*e[1]+3*t*o*e[0],s-3*r*i*n[1]+3*t*o*n[0],r-2*t*i*e[1]+o*e[0],r-2*t*i*n[1]+o*n[0],t-i*e[1],t-i*n[1]]},o._normalize=function(t){return[(t[2]-t[0])/(1-t[0]),(t[3]-t[1])/(1-t[1]),(t[4]-t[0])/(1-t[0]),(t[5]-t[1])/(1-t[1])]},e.exports=i},{"@marcom/ac-easing":127}],144:[function(t,e,n){"use strict";function i(){this._instances={}}var r=t("./BezierCurveCss"),o=i.prototype;o.create=function(t){var e;if(e="string"==typeof t?t.replace(/ /g,""):"cubic-bezier("+t.join(",")+")",void 0===this._instances[e]){if("string"==typeof t){t=t.match(/\d*\.?\d+/g);for(var n=t.length;n--;)t[n]=Number(t[n])}this._instances[e]=new r(t,this)}return this._instances[e]},e.exports=new i},{"./BezierCurveCss":143}],145:[function(t,e,n){"use strict";"undefined"==typeof window.Float32Array&&(window.Float32Array=function(){})},{}],146:[function(t,e,n){"use strict";function i(t,e,n){this._transform=t;var i,r,s;for(s in n)n.hasOwnProperty(s)&&"function"==typeof this._transform[s]&&(i=o(n[s]),r="%"===i.unit?this._convertPercentToPixelValue(s,i.value,e):i.value,this._transform[s].call(this._transform,r))}var r=t("@marcom/ac-dom-metrics/getDimensions"),o=t("./splitUnits"),s={translateX:"width",translateY:"height"},a=i.prototype;a._convertPercentToPixelValue=function(t,e,n){t=s[t];var i=r(n);return i[t]?(e*=.01,i[t]*e):e},a.toArray=function(){return this._transform.toArray()},a.toCSSString=function(){return this._transform.toCSSString()},e.exports=i},{"./splitUnits":152,"@marcom/ac-dom-metrics/getDimensions":135}],147:[function(t,e,n){"use strict";e.exports=function(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&null!==t[n]&&(t[n].isColor?t[n].isRgb?i[n]="rgb("+Math.round(t[n].r)+", "+Math.round(t[n].g)+", "+Math.round(t[n].b)+")":t[n].isRgba&&(i[n]="rgba("+Math.round(t[n].r)+", "+Math.round(t[n].g)+", "+Math.round(t[n].b)+", "+t[n].a+")"):"transform"===n?(e=6===t[n].length?"matrix":"matrix3d",i[n]=e+"("+t[n].join(",")+")"):t[n].unit?i[n]=t[n].value+t[n].unit:i[n]=t[n].value);return i}},{}],148:[function(t,e,n){"use strict";var i=t("@marcom/ac-dom-styles/getStyle"),r=t("@marcom/ac-object/clone"),o=t("./splitUnits"),s=t("./toCamCase"),a=t("@marcom/ac-color").Color,l=t("@marcom/ac-feature/cssPropertyAvailable"),c=t("@marcom/ac-transform").Transform,u=t("./TransformMatrix"),h=function(t){return a.isRgba(t)?(t=new a(t).rgbaObject(),t.isRgba=!0):(t=new a(t).rgbObject(),t.isRgb=!0),t.isColor=!0,t},f=function(t){t.isRgb&&(t.isRgb=!1,t.isRgba=!0,t.a=1)},d=function(t,e,n){(t.isRgba||e.isRgba||n.isRgba)&&(f(t),f(e),f(n))},p=function(t){return[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]},m=function(t,e,n){16!==t.transform.length&&16!==e.transform.length&&16!==n.transform.length||(6===t.transform.length&&(t.transform=p(t.transform)),6===e.transform.length&&(e.transform=p(e.transform)),6===n.transform.length&&(n.transform=p(n.transform)))};e.exports=function(t,e,n){var f={};e=r(e,!0),n=r(n,!0);var p,_,y,g,v,b=l("transform");for(v in e)e.hasOwnProperty(v)&&null!==e[v]&&("transform"===v?(b&&(_=new c,p=i(t,"transform").transform||"none",_.setMatrixValue(p),y=new u(new c,t,e[v])),y&&y.toCSSString()!==_.toCSSString()?(g=new u(n[v]?new c:_.clone(),t,n[v]),f[v]=_.toArray(),e[v]=y.toArray(),n[v]=g.toArray()):(f[v]=null,e[v]=null)):(p=i(t,v)[s(v)]||n[v],a.isColor(p)?(f[v]=h(p),n[v]=void 0!==n[v]?h(n[v]):r(f[v],!0),e[v]=h(e[v])):(f[v]=o(p),n[v]=void 0!==n[v]?o(n[v]):r(f[v],!0),e[v]=o(e[v]))));for(v in n)!n.hasOwnProperty(v)||null===n[v]||void 0!==e[v]&&null!==e[v]||("transform"===v?(b&&(_=new c,_.setMatrixValue(getComputedStyle(t).transform||getComputedStyle(t).webkitTransform||"none"),g=new u(new c,t,n[v])),g&&g.toCSSString()!==_.toCSSString()?(y=new u(_.clone()),f[v]=_.toArray(),e[v]=y.toArray(),n[v]=g.toArray()):(f[v]=null,e[v]=null,n[v]=null)):(p=i(t,v)[s(v)],a.isColor(p)?(f[v]=h(p),e[v]=r(f[v],!0),n[v]=h(n[v])):(f[v]=o(p),n[v]=o(n[v]),e[v]=r(f[v],!0)))),f[v]&&f[v].isColor&&d(f[v],n[v],e[v]);return f.transform&&m(f,n,e),{target:f,propsTo:e,propsFrom:n}}},{"./TransformMatrix":146,"./splitUnits":152,"./toCamCase":153,"@marcom/ac-color":58,"@marcom/ac-dom-styles/getStyle":117,"@marcom/ac-feature/cssPropertyAvailable":164,"@marcom/ac-object/clone":233,"@marcom/ac-transform":335}],149:[function(t,e,n){"use strict";e.exports=function(t){if(t.transitionProperty){for(var e="",n=t.transitionProperty.split(", "),i=t.transitionDuration.split(", "),r=t.transitionTimingFunction.replace(/\d+[,]+[\s]/gi,function(t){return t.substr(0,t.length-1)}).split(", "),o=t.transitionDelay.split(", "),s=n.length;s--;)e+=n[s]+" "+i[s]+" "+r[s]+" "+o[s]+", ";return e.substr(0,e.length-2)}return!1}},{}],150:[function(t,e,n){"use strict";e.exports=function(t){return"string"==typeof t&&"cubic-bezier("===t.substr(0,13)}},{}],151:[function(t,e,n){"use strict";var i=t("@marcom/ac-dom-styles/setStyle"),r=t("@marcom/ac-dom-styles/getStyle"),o=t("./getShorthandTransition");e.exports=function(t,e){var n=r(t,"transition","transition-property","transition-duration","transition-timing-function","transition-delay");if(n=n.transition||o(n),n&&n.length){n=n.split(",");for(var s,a=0,l=n.length;l--;)s=n[l].trim().split(" ")[0],void 0!==e[s]&&(n.splice(l,1),++a);a&&(0===n.length&&(n=["all"]),i(t,{transition:n.join(",").trim()}))}}},{"./getShorthandTransition":149,"@marcom/ac-dom-styles/getStyle":117,"@marcom/ac-dom-styles/setStyle":119}],152:[function(t,e,n){"use strict";e.exports=function(t){if(t=String(t),t.indexOf(" ")>-1)throw new Error("Shorthand CSS is not supported. Please use longhand CSS only.");var e=/(\d*\.?\d*)(.*)/,n=1;t&&"-"===t.substr(0,1)&&(t=t.substr(1),n=-1);var i=String(t).match(e);return{value:Number(i[1])*n,unit:i[2]}}},{}],153:[function(t,e,n){"use strict";e.exports=function(t){var e=function(t,e,n,i){return 0===n&&"moz"!==i.substr(1,3)?e:e.toUpperCase()};return t.replace(/-(\w)/g,e)}},{}],154:[function(t,e,n){"use strict";var i;e.exports=function(){if(i)return i;var t,e=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return i=n[t]}()},{}],155:[function(t,e,n){"use strict";var i=t("@marcom/ac-page-visibility").PageVisibilityManager;e.exports=function(t,e){if(e){var n=function(t){i.isHidden?setTimeout(t,16):window.requestAnimationFrame(t)},r=0,o=function s(){r===e?t.call(this):(++r,n(s))};o()}else t.call(this)}},{"@marcom/ac-page-visibility":242}],156:[function(t,e,n){"use strict";function i(t){t=t||{},t.ease=t.ease||"linear",t.destroyOnComplete=!1,this.options=t,o.call(this,{t:0},0,{t:1},t),this._itemList=new l}var r=t("@marcom/ac-object/create"),o=t("@marcom/ac-clip").Clip,s=t("./TimelineClip"),a=t("./TimelineCallback"),l=t("./TimelineItemList"),c=o.prototype,u=i.prototype=r(c);i.prototype.constructor=i,u._update=function(t){c._update.call(this,t),this._render()},u.progress=function(t){return c.progress.call(this,t),void 0!==t&&this._render(),this._progress},u._render=function(){if(0!==this._itemList.length)for(var t=this._target.t*this._duration,e=this._itemList.head,n=e;n;){n=e.next;var i=t-e.position;e.currentTime(i),e=n}},u.addClip=function(t,e){e=void 0===e?this.duration():e;var n=t._delay/1e3;this._itemList.append(new s(t,e+n)),this._updateDuration()},u.addCallback=function(t,e){e=void 0===e?this.duration():e,this._itemList.append(new a(t,e)),this._updateDuration()},u.remove=function(t){var e=this._itemList.getItem(t);e&&(this._itemList.remove(e),this._updateDuration())},u._updateDuration=function(){var t=this._itemList.head,e=t.position+t.duration();this._itemList.forEach(function(n){var i=n.position+n.duration();i>=e&&(t=n,e=i)}),this.duration(e)},u.destroy=function(){for(var t=this._itemList.head;t;){var e=t;t=e.next,this._itemList.remove(e)}return this._duration=0,c.destroy.call(this)},e.exports=i},{"./TimelineCallback":157,"./TimelineClip":158,"./TimelineItemList":159,"@marcom/ac-clip":51,"@marcom/ac-object/create":234}],157:[function(t,e,n){"use strict";function i(t,e){this.callback=t,this._delay=0,this.position=e,this._hasTriggered=!1,this.prev=null,this.next=null}var r=i.prototype;r.duration=function(){return 0},r.currentTime=function(t){return t>=0&&!this._hasTriggered&&(this.callback(),this._hasTriggered=!0),t<0&&this._hasTriggered&&(this.callback(),this._hasTriggered=!1),0},e.exports=i},{}],158:[function(t,e,n){"use strict";function i(t,e){this.clip=t,this.position=e,this.duration=this.clip.duration.bind(this.clip),this.lastProgress=-1,this.prev=null,this.next=null}var r=i.prototype;r.currentTime=function(t){var e=Math.min(1,Math.max(0,t/this.clip._duration));return e!==e&&(e=1),this.lastProgress===e?this.lastProgress:(0!==this.lastProgress&&0!==e&&this.lastProgress!==-1||this.clip._storeOnStart&&this.clip._storeOnStart(this.clip),this.clip._playing=e*this.clip._duration===this.clip._duration,this.lastProgress=this.clip.progress(e),this.lastProgress)},r.destroy=function(){this.clip.destroy(),this.prev=null,this.next=null,this.duration=null},e.exports=i},{}],159:[function(t,e,n){"use strict";var i=t("./TimelineClip"),r=t("./TimelineCallback"),o=function(){this.head=null,this.tail=null,this.length=0},s=o.prototype;s.append=function(t){t.prev=null,t.next=null,this.tail?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t,this.length++},s.remove=function(t){t===this.head?this.head=this.head.next:t===this.tail&&(this.tail=this.tail.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.next=t.prev=null,null===this.head&&(this.tail=null),this.length--},s.getItem=function(t){for(var e=this.head;e;){var n=e;if(n instanceof i&&n.clip===t||n instanceof r&&n.callback===t)return n;e=n.next}return null},s.forEach=function(t){for(var e=0,n=this.head;n;){var i=n;t(i,e,this.length),n=i.next}},s.destroy=function(){for(;this.head;){var t=this.head;this.remove(t),t.destroy()}},e.exports=o},{"./TimelineCallback":157,"./TimelineClip":158}],160:[function(t,e,n){"use strict";e.exports={EventEmitterMicro:t("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":161}],161:[function(t,e,n){"use strict";function i(){this._events={}}var r=i.prototype;r.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].unshift(e)},r.once=function(t,e){function n(r){i.off(t,n),void 0!==r?e(r):e()}var i=this;this.on(t,n)},r.off=function(t,e){if(this.has(t)){if(1===arguments.length)return this._events[t]=null,void delete this._events[t];var n=this._events[t].indexOf(e);n!==-1&&this._events[t].splice(n,1)}},r.trigger=function(t,e){if(this.has(t))for(var n=this._events[t].length-1;n>=0;n--)void 0!==e?this._events[t][n](e):this._events[t][n]()},r.has=function(t){return t in this._events!=!1&&0!==this._events[t].length},r.destroy=function(){for(var t in this._events)this._events[t]=null;this._events=null},e.exports=i},{}],162:[function(t,e,n){"use strict";e.exports.EventEmitter=t("./ac-event-emitter/EventEmitter")},{"./ac-event-emitter/EventEmitter":163}],163:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="EventEmitter:propagation",o=function(t){t&&(this.context=t)},s=o.prototype,a=function(){return this.hasOwnProperty("_events")||"object"===i(this._events)||(this._events={}),this._events},l=function(t,e){var n=t[0],r=t[1],o=t[2];if("string"!=typeof n&&"object"!==("undefined"==typeof n?"undefined":i(n))||null===n||Array.isArray(n))throw new TypeError("Expecting event name to be a string or object.");if("string"==typeof n&&!r)throw new Error("Expecting a callback function to be provided.");if(r&&"function"!=typeof r){if("object"!==("undefined"==typeof n?"undefined":i(n))||"object"!==("undefined"==typeof r?"undefined":i(r)))throw new TypeError("Expecting callback to be a function.");o=r}if("object"===("undefined"==typeof n?"undefined":i(n)))for(var s in n)e.call(this,s,n[s],o);"string"==typeof n&&(n=n.split(" "),n.forEach(function(t){e.call(this,t,r,o)},this))},c=function(t,e){var n,i,r;if(n=a.call(this)[t],n&&0!==n.length)for(n=n.slice(),this._stoppedImmediatePropagation=!1,i=0,r=n.length;i<r&&(!this._stoppedImmediatePropagation&&!e(n[i],i));i++);},u=function(t,e,n){var i=-1;c.call(this,e,function(t,e){if(t.callback===n)return i=e,!0}),i!==-1&&t[e].splice(i,1)};s.on=function(){var t=a.call(this);return l.call(this,arguments,function(e,n,i){t[e]=t[e]||(t[e]=[]),t[e].push({callback:n,context:i})}),this},s.once=function(){return l.call(this,arguments,function(t,e,n){var i=function r(i){e.call(n||this,i),this.off(t,r)};this.on(t,i,this)}),this},s.off=function(t,e){var n=a.call(this);if(0===arguments.length)this._events={};else if(!t||"string"!=typeof t&&"object"!==("undefined"==typeof t?"undefined":i(t))||Array.isArray(t))throw new TypeError("Expecting event name to be a string or object.");if("object"===("undefined"==typeof t?"undefined":i(t)))for(var r in t)u.call(this,n,r,t[r]);if("string"==typeof t){var o=t.split(" ");1===o.length?e?u.call(this,n,t,e):n[t]=[]:o.forEach(function(t){n[t]=[]})}return this},s.trigger=function(t,e,n){if(!t)throw new Error("trigger method requires an event name");if("string"!=typeof t)throw new TypeError("Expecting event names to be a string.");if(n&&"boolean"!=typeof n)throw new TypeError("Expecting doNotPropagate to be a boolean.");return t=t.split(" "),t.forEach(function(t){c.call(this,t,function(t){t.callback.call(t.context||this.context||this,e)}.bind(this)),n||c.call(this,r,function(n){var i=t;n.prefix&&(i=n.prefix+i),n.emitter.trigger(i,e)})},this),this},s.propagateTo=function(t,e){var n=a.call(this);n[r]||(this._events[r]=[]),n[r].push({emitter:t,prefix:e})},s.stopPropagatingTo=function(t){var e=a.call(this);if(!t)return void(e[r]=[]);var n,i=e[r],o=i.length;for(n=0;n<o;n++)if(i[n].emitter===t){i.splice(n,1);break}},s.stopImmediatePropagation=function(){this._stoppedImmediatePropagation=!0},s.has=function(t,e,n){var i=a.call(this),r=i[t];if(0===arguments.length)return Object.keys(i);if(!r)return!1;if(!e)return r.length>0;for(var o=0,s=r.length;o<s;o++){var l=r[o];if(n&&e&&l.context===n&&l.callback===e)return!0;if(e&&!n&&l.callback===e)return!0}return!1},e.exports=o},{}],164:[function(t,e,n){"use strict";function i(t,e){return"undefined"!=typeof e?!!r(t,e):!!o(t)}var r=t("@marcom/ac-prefixer/getStyleValue"),o=t("@marcom/ac-prefixer/getStyleProperty"),s=t("@marcom/ac-function/memoize");e.exports=s(i),e.exports.original=i},{"@marcom/ac-function/memoize":192,"@marcom/ac-prefixer/getStyleProperty":248,"@marcom/ac-prefixer/getStyleValue":249}],165:[function(t,e,n){"use strict";e.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],166:[function(t,e,n){"use strict";function i(){var t=s.getWindow();return!o()&&!t.orientation||r.windows}var r=t("@marcom/useragent-detect").os,o=t("./touchAvailable").original,s=t("./helpers/globals"),a=t("@marcom/ac-function/once");e.exports=a(i),e.exports.original=i},{"./helpers/globals":165,"./touchAvailable":171,"@marcom/ac-function/once":193,"@marcom/useragent-detect":501}],167:[function(t,e,n){"use strict";function i(){return!r()&&!o()}var r=t("./isDesktop").original,o=t("./isTablet").original,s=t("@marcom/ac-function/once");e.exports=s(i),e.exports.original=i},{"./isDesktop":166,"./isTablet":169,"@marcom/ac-function/once":193}],168:[function(t,e,n){"use strict";var i=t("./helpers/globals");e.exports=function(){var t=i.getWindow();return"devicePixelRatio"in t&&t.devicePixelRatio>=1.5}},{"./helpers/globals":165}],169:[function(t,e,n){"use strict";function i(){var t=o.getWindow(),e=t.screen.width;return t.orientation&&t.screen.height<e&&(e=t.screen.height),!r()&&e>=a}var r=t("./isDesktop").original,o=t("./helpers/globals"),s=t("@marcom/ac-function/once"),a=600;e.exports=s(i),e.exports.original=i},{"./helpers/globals":165,"./isDesktop":166,"@marcom/ac-function/once":193}],170:[function(t,e,n){"use strict";function i(){var t=r.getWindow(),e=t.matchMedia("(prefers-reduced-motion)");return!(!e||!e.matches)}var r=t("./helpers/globals");e.exports=i},{"./helpers/globals":165}],171:[function(t,e,n){"use strict";function i(){var t=r.getWindow(),e=r.getDocument(),n=r.getNavigator();return!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch||n.maxTouchPoints>0||n.msMaxTouchPoints>0)}var r=t("./helpers/globals"),o=t("@marcom/ac-function/once");e.exports=o(i),e.exports.original=i},{"./helpers/globals":165,"@marcom/ac-function/once":193}],172:[function(t,e,n){"use strict";var i;e.exports={create:function(){return i||(i=t("./factory/createFilms")),i.apply(this,arguments)}}},{"./factory/createFilms":177}],173:[function(t,e,n){"use strict";function i(t,e,n){this.player=t,this.sources={},this.currentStubPlayer=null,this.playerType="",this.videoType="",this.options=e,n&&this._bindAnchors(n)}var r;try{r=t("@marcom/ac-analytics")}catch(o){}var s=t("@marcom/ac-useragent").browser,a=s.ie||s.edge,l=t("@marcom/ac-video/event-emitter-shim/EventEmitterShim"),c=function(t,e,n){if(n){var i=function(){e.apply(n,arguments)};l.prototype.once.apply(this,[t,i])}else l.prototype.once.apply(this,arguments)},u=i.prototype;u._bindAnchors=function(t){for(var e=0,n=t.length;e<n;e++)this._bindAnchorForAnalytics(t[e])},u.activate=function(){this._onPlay=this._onPlay.bind(this),this._onEnded=this._onEnded.bind(this),this._onTimeupdate=this._onTimeupdate.bind(this),this._onTexttrackshow=this._onTexttrackshow.bind(this),this._onLoadStart=this._onLoadStart.bind(this),this.setCurrentStubPlayer=this.setCurrentStubPlayer.bind(this),this._onPlayPromiseResolved=this._onPlayPromiseResolved.bind(this),a?this.player.on("playing",this._onPlay):this.player.on("play",this._onPlay),this.player.on("ended",this._onEnded),this.player.on("loadstart",this._onLoadStart),this.player.on("timeupdate",this._onTimeupdate),this.player.on("texttrackshow",this._onTexttrackshow),this.player.on("PlayPromiseResolved",this._onPlayPromiseResolved),this.player.on("durationchange",this.setCurrentStubPlayer)},u.deactivate=function(){a?this.player.off("playing",this._onPlay):this.player.off("play",this._onPlay),this.player.off("ended",this._onEnded),this.player.off("timeupdate",this._onTimeupdate),this.player.off("texttrackshow",this._onTexttrackshow),this.player.off("durationchange",this.setCurrentStubPlayer),this.player.off("PlayPromiseResolved",this._onPlayPromiseResolved)},u._bindAnchorForAnalytics=function(t){var e,n;if(t){if(this.sources[t.id])return;e=this._createStubPlayer(t),n=t.getAttribute("data-"+this.options.dataAttribute),n||(e.videoId=t.id),this.sources[t.id]={stubPlayer:e,observer:this._createObserver(e)}}},u.addSourceObject=u._bindAnchorForAnalytics,u.setCurrentStubPlayer=function(){var t,e=this.player.el,n=e.getAttribute("data-"+this.options.dataAttribute),i=this._getCurrentSourceObject(n);i&&i.stubPlayer&&(this.currentStubPlayer=i.stubPlayer,this.playerType="html5",t=this.player.getCurrentSrc(),t&&t.attributes&&t.attributes.src&&(this.videoType=t.attributes.src.value.split(".").pop()))},u.destroy=function(){this.deactivate(),this.player=null,this.sources=null,this.currentStubPlayer=null,this.options=null},u._onPlay=function(){this.setCurrentStubPlayer(),this._started||(this._proxyEvent("play"),this._started=!0)},u._onPlayPromiseResolved=function(){this.setCurrentStubPlayer(),this._proxyEvent("PlayPromiseResolved")},u._onLoadStart=function(){this._started=!1},u._onEnded=function(){this._started=!1,this._proxyEvent("ended")},u._onTimeupdate=function(){this._proxyEvent("timeupdate"),this._started&&0===this.player.getCurrentTime()&&this.player.getPaused()&&(this._started=!1)},u._onTexttrackshow=function(){this._proxyEvent("captions-enabled")},u._getSourceObjectBySrcObjId=function(t){return this.sources[t]||null},u._getCurrentSourceObject=function(t){var e;return t&&(e=this._getSourceObjectBySrcObjId(t)),e},u._createStubPlayer=function(t){var e=new l;return e.once=c,e.el=t,e.VERSION=this.player.VERSION,e},u._getEventData=function(){return{currentTime:this.player.getCurrentTime(),playerType:this.playerType||"html5",videoType:this.videoType||null}},u._createObserver=function(t){var e;return r&&r.observer&&r.observer.Video&&(e=new r.observer.Video(t,{dataAttribute:this.options.dataAttribute})),e},u._proxyEvent=function(t){this.currentStubPlayer&&this.currentStubPlayer.trigger(t,this._getEventData())},e.exports=i},{"@marcom/ac-analytics":void 0,"@marcom/ac-useragent":343,"@marcom/ac-video/event-emitter-shim/EventEmitterShim":349}],174:[function(t,e,n){"use strict";var i=t("../windowload/windowLoad"),r=t("../touchclick/TouchClick"),o=t("@marcom/ac-useragent"),s=o.os.ios||o.os.android;e.exports=function(t,e,n,o){var a=r.create(t);a.on("click",function(){e(t)}),t.addEventListener("TriggerAnchor",function(){e(t)}),o&&t.id&&o.createRoute(t.id,function(){i(function(){e(t,!s)})})}},{"../touchclick/TouchClick":183,"../windowload/windowLoad":184,"@marcom/ac-useragent":343}],175:[function(t,e,n){"use strict";var i=t("@marcom/ac-router").Router,r=t("@marcom/ac-video/player/factory/createShareablePlayer"),o=t("@marcom/ac-video/optimizeVideoUrl"),s=t("@marcom/ac-useragent"),a=t("./bindAnchor"),l=t("./createClickHandler"),c=t("./createModalLink"),u=t("./createHandheldModalLink"),h=t("./createInlineLink"),f="data-films-options",d=t("@marcom/ac-feature/isHandheld")(),p=s.os.ios,m={controls:!0,urlOptimizer:o};e.exports=function(t,e){e=e||{},e=Object.assign({},m,e);var n;t.forEach(function(t){if(t.hasAttribute(f)){var n=JSON.parse(t.getAttribute(f));n.closeOnEnd!==!1||e.closeOnEnd||(e.closeOnEnd=!1)}}),e.maxWidth||(e.maxWidth=1280);var o,s=r(e);n=new i({hashChange:!0,pushState:!1}),o=!e.modal||d&&p&&!e.threesixty?e.modal?u(s,document.body,e):h(s,e):c(s,e);var _=o.play.bind(o),y=function(e){for(var n=0,i=t.length;n<i;n++)t[n].id!==e&&t[n]!==e||_(t[n].href)},g=l({player:s,playHandler:_,attr:"data-"+e.dataAttribute});return t.forEach(function(t){a(t,g,_,n)}),n.start(),{play:y,player:s,modalVideo:o.modal}}},{"./bindAnchor":174,"./createClickHandler":176,"./createHandheldModalLink":178,"./createInlineLink":179,"./createModalLink":180,"@marcom/ac-feature/isHandheld":167,"@marcom/ac-router":276,"@marcom/ac-useragent":343,"@marcom/ac-video/optimizeVideoUrl":350,"@marcom/ac-video/player/factory/createShareablePlayer":356}],176:[function(t,e,n){"use strict";var i="data-films-options",r="data-films-modal-label",o="Video Player";e.exports=function(t){return function(e,n){var s,a=e.getAttribute(i);s=a?JSON.parse(a):null,s&&s.endState&&s.endState.items.forEach(function(t){if(t.url&&0===t.url.indexOf("#")){var e=document.querySelector(t.url);t.onclick=function(){e.dispatchEvent(new CustomEvent("TriggerAnchor"))}}}),s&&s.poster?t.player.setPoster(s.poster):t.player.setPoster(null);var l=e.getAttribute(r)||s&&s.modalLabel||t.player.options.modalLabel||o;t.player.el.setAttribute(t.attr,e.getAttribute(t.attr)||e.id),t.playHandler(e.href,s,n,l)}}},{}],177:[function(t,e,n){"use strict";var i=t("./bindAnchors"),r=t("../analytics/AnalyticsTranslator"),o={dataAttribute:"analytics-video-id",analytics:!0};e.exports=function(t,e){e=e||{},e=Object.assign({},o,e);var n=i(t,e);if(e.analytics){var s=new r(n.player,e,t);s.activate()}return n}},{"../analytics/AnalyticsTranslator":173,"./bindAnchors":175}],178:[function(t,e,n){"use strict";var i="ac-films-handheld-player",r="player-fullscreen";e.exports=function(t,e,n){t.el.classList.add(i);var o=function(e,n){var i=function(){t.getPaused()||t.pause(),t.el.classList.remove(r)};t.el.classList.add(r),t.once("ended",i),t.once("exitfullscreen",i),t.load(e),n!==!1&&t.play()};return e.appendChild(t.el),{play:o,player:t}}},{}],179:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e.targetElement,i=function(e,n){t.load(e,null,0,n),t.play()};return e.playHandler=i,n&&n.appendChild(t.el),{play:i,player:t}}},{}],180:[function(t,e,n){"use strict";var i=t("@marcom/ac-modal").createFullViewportModal,r=t("@marcom/ac-useragent"),o=r.os.ios||r.os.android,s="ac-films-modal-mobile",a=t("./link/ModalLink"),l="ac-modal-video";e.exports=function(t,e){e=e||{};var n=document.createElement("div");n.classList.add("ac-player-container"),o&&n.classList.add(s),n.appendChild(t.el);var r=i(n);r.modalElement.classList.add(l);var c=new a({player:t,modal:r,closeOnEnd:e.closeOnEnd});return c}},{"./link/ModalLink":181,"@marcom/ac-modal":228,"@marcom/ac-useragent":343}],181:[function(t,e,n){"use strict";var i="-tft-",r=/_([0-9]+)x([0-9]+)/,o="ac-video-cinematic-aspect-ratio",s="ac-video-square-aspect-ratio",a="ac-video-vertical-aspect-ratio",l="ac-video-19x9-aspect-ratio",c="ac-video-9x19-aspect-ratio",u="ac-modal-video-pip",h="pictureinpicture:change",f="has-modal",d=t("../../resize/ResizeHandler"),p=t("@marcom/ac-video/utils/urlOptimizer/19X9AssetSizes"),m=function(t,e){return t.find(function(t){return t.width===e.width&&(t.height=e.height)||t.width===e.height&&(t.height=e.width)})},_=function(t){this.modal=t.modal,this.player=t.player,this._resizeHandler=new d({player:this.player,modal:this.modal}),this._closeOnEnd=void 0===t.closeOnEnd||t.closeOnEnd,this._ended=!1,this._pauseTime=0,this._playing=!1,this._initialize()},y=_.prototype;y._initialize=function(){this._bindMethods(),this.player.on("ended",this._onEnded),this.player.on("pause",this._onPaused),this.modal.on("open",this._onOpen),this.player.supportsPictureInPicture()&&this.player.on(h,this._onPipModeChanged)},y._bindMethods=function(){this._onEnded=this._onEnded.bind(this),
this._onPipModeChanged=this._onPipModeChanged.bind(this),this._onPaused=this._onPaused.bind(this),this._onModalWillClose=this._onModalWillClose.bind(this),this._onOpen=this._onOpen.bind(this)},y._onOpen=function(){this.player.refreshSize()},y._onPaused=function(){this._pauseTime=Date.now()},y._onEnded=function(){this._ended=!0,!this.player.isPictureInPicture()&&this._closeOnEnd?this.modal.close():this.player.isPictureInPicture()&&(this.player.setPictureInPicture(!1),this.modal.modalElement.classList.remove(u),this._closeOnEnd||(this.modal.open(),this._bindWillClose()))},y._onPipModeChanged=function(){this._ended||(this.player.isPictureInPicture()&&this._isModalOpen()?(this._unBindWillClose(),this.modal.modalElement.classList.add(u),this.modal.close()):this._isModalOpen()||(this.modal.modalElement.classList.remove(u),!this._pauseTime||Date.now()-this._pauseTime>400?(this._bindWillClose(),this.modal.open()):this._resetVideo()))},y._resetVideo=function(){this.player.pause(),this.player.setCurrentTime(0)},y._onModalWillClose=function(){this._unBindWillClose(),this._resetVideo(),this.player.setPictureInPicture(!1),this.modal.modalElement.classList.remove(u)},y._clearAspectRatio=function(){this.player.el.parentElement.classList.remove(o),this.player.el.parentElement.classList.remove(s),this.player.el.parentElement.classList.remove(a),this.player.el.parentElement.classList.remove(l),this.player.el.parentElement.classList.remove(c)},y._set19X9Mode=function(){this.player.el.parentElement.classList.add(l)},y._set9X19Mode=function(){this.player.el.parentElement.classList.add(c)},y._setCinematicMode=function(){this.player.el.parentElement.classList.add(o)},y._setSquareVideo=function(){this.player.el.parentElement.classList.add(s)},y._setVerticalVideo=function(){this.player.el.parentElement.classList.add(a)},y._resetPiPVideo=function(){var t=this.player.getVisibleTextTracks();t.forEach(function(t){t.mode="hidden"}),this._resetVideo(),t.forEach(function(t){t.mode="showing"})},y.play=function(t,e,n,o){if(this._ended=!1,this._clearAspectRatio(),t.match(i))this._setCinematicMode();else if(r.test(t)){var s=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);m(p,{width:s,height:a})?a>s?this._set9X19Mode(!0):this._set19X9Mode(!0):a>s?this._setVerticalVideo(!0):a===s&&this._setSquareVideo(!0)}this.modal.modalElement.setAttribute("aria-label",o),this.player.load(t,null,0,Object.assign({},e,{maxWidth:window.innerWidth})),this.player.isPictureInPicture()?this._resetPiPVideo():(this.modal.open(),this._bindWillClose()),n!==!1&&this.player.play()},y._bindWillClose=function(){this.modal.on("willclose",this._onModalWillClose)},y._unBindWillClose=function(){this.modal.off("willclose",this._onModalWillClose)},y._isModalOpen=function(){return document.documentElement.classList.contains(f)},y.destroy=function(){this.player.off("ended",this._onEnded),this.player.off("paused",this._onPaused),this.player.off(h,this._onPipModeChanged),this._unBindWillClose(),this._resizeHandler.destroy(),this.modal.destroy(),this.player.destroy()},e.exports=_},{"../../resize/ResizeHandler":182,"@marcom/ac-video/utils/urlOptimizer/19X9AssetSizes":415}],182:[function(t,e,n){"use strict";function i(t){this._modal=t.modal,this._player=t.player,this._mediaElement=t.player.getMediaElement(),this._posterEl=this._player.el.querySelector(".ac-video-poster img"),this._playerContainer=this._player.el.parentElement,this._bindMethods(),this._addEventListeners(),this._calcAspectRatio()}var r=/_([0-9]+)x([0-9]+)/,o=t("@marcom/ac-useragent"),s=o.os.ios||o.os.android,a=i.prototype;a._bindMethods=function(){this._onLoadStart=this._onLoadStart.bind(this),this._onResize=this._onResize.bind(this),this._fullScreenChange=this._fullScreenChange.bind(this),this._calcAspectRatio=this._calcAspectRatio.bind(this),this._addResizeListeners=this._addResizeListeners.bind(this),this._removeResizeListeners=this._removeResizeListeners.bind(this),this._onModalOpen=this._onModalOpen.bind(this)},a._addEventListeners=function(){this._posterEl&&this._posterEl.addEventListener("load",this._calcAspectRatio),this._modal.on("willopen",this._addResizeListeners),this._modal.on("open",this._onModalOpen),this._modal.on("close",this._removeResizeListeners)},a._onModalOpen=function(){this._loadStarted&&(this._onResize(),this._player.el.style.display="",this._player.el.style.opacity="")},a._addResizeListeners=function(){this._player.el.style.display="block",this._player.el.style.opacity=0,window.addEventListener("resize",this._onResize),window.addEventListener("orientationchange",this._onResize),this._player.on("loadstart",this._onLoadStart),this._player.on("loadeddata",this._calcAspectRatio),this._player.on("fullscreen:change",this._fullScreenChange),this._player.on("fullscreen:willenter",this._fullScreenChange),this._calcAspectRatio()},a._removeResizeListeners=function(){this._onResize(),window.removeEventListener("resize",this._onResize),window.removeEventListener("orientationchange",this._onResize),this._player.off("loadstart",this._onLoadStart),this._player.off("loadeddata",this._calcAspectRatio),this._player.off("fullscreen:change",this._fullScreenChange)},a._removeEventListeners=function(){this._removeResizeListeners(),this._modal.off("willopen",this._addResizeListeners),this._modal.off("open",this._onModalOpen),this._modal.off("close",this._removeResizeListeners),this._posterEl&&this._posterEl.removeEventListener("load",this._calcAspectRatio)},a._onLoadStart=function(){this._loadStarted=!1,requestAnimationFrame(function(){this._loadStarted=!0,this._onModalOpen()}.bind(this)),this._calcAspectRatio()},a._calcAspectRatio=function(){this._aspectRatio=this._player.getMediaWidth()/this._player.getMediaHeight(),(isNaN(this._aspectRatio)||this._aspectRatio<=0)&&this._mediaElement.src&&r.test(this._mediaElement.src)&&(this._aspectRatio=parseInt(RegExp.$1,10)/parseInt(RegExp.$2,10)),(isNaN(this._aspectRatio)||this._aspectRatio<=0)&&this._posterEl&&(this._aspectRatio=this._posterEl.naturalWidth/this._posterEl.naturalHeight),this._onResize()},a._fullScreenChange=function(t){return t&&"enter"===t.type?void setTimeout(function(){this._isFullScreen=!0,this._onResize()}.bind(this),60):(this._isFullScreen=this._player.isFullscreen(),void this._onResize())},a.destroy=function(){this._removeEventListeners()},a._onResize=function(){var t=this._aspectRatio;if(isNaN(t))return this._mediaElement.style.width="",void(this._mediaElement.style.height="");var e=window.innerWidth,n=window.innerHeight,i=e/n;if(this._mediaElement.readyState<1){var r=parseInt(getComputedStyle(this._playerContainer).maxWidth.replace("px","")),o=r/t,a=s?parseInt(getComputedStyle(this._player.el).maxHeight.replace("px","")):o;(o>n||a&&o>a)&&(r=(a||n)*t,o=Math.min(r/t,n)),(r>e||r>o*t)&&(o=Math.min(e/t,n),r=o*t),this._mediaElement.style.width=r+"px",this._mediaElement.style.height=Math.min(o,n)+"px"}else this._mediaElement.style.width="",this._mediaElement.style.height="";i>t&&!this._isFullScreen?this._playerContainer.parentElement.classList.add("center-horizontal"):this._playerContainer.parentElement.classList.remove("center-horizontal"),this._player.refreshSize()},e.exports=i},{"@marcom/ac-useragent":343}],183:[function(t,e,n){"use strict";function i(t){t=t||{},this.el=t.el,this._onTouchStart=this._onTouchStart.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onClick=this._onClick.bind(this),this._touchStart=!1,r.call(this),this.activate()}var r=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=t("@marcom/ac-feature/touchAvailable")(),s=i.prototype=Object.create(r.prototype);s._broadcastClick=function(t){this.trigger("click",{originalEvent:t})},s._onClick=function(t){t.stopPropagation(),t.preventDefault(),o||this._broadcastClick(t)},s._onTouchStart=function(){this._touchStart=!0},s._onTouchEnd=function(t){this._touchStart===!0&&(t.stopPropagation(),t.preventDefault(),this._broadcastClick(t)),this._touchStart=!1},s._onTouchMove=function(){this._touchStart=!1},s.activate=function(){o&&(this.el.addEventListener("touchstart",this._onTouchStart),this.el.addEventListener("touchmove",this._onTouchMove),this.el.addEventListener("touchend",this._onTouchEnd)),this.el.addEventListener("click",this._onClick)},s.deactivate=function(){this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove),this.el.removeEventListener("touchend",this._onTouchEnd),this.el.removeEventListener("click",this._onClick)},i.create=function(t,e){return e=e||{},new i({el:t})},e.exports=i},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-feature/touchAvailable":171}],184:[function(t,e,n){"use strict";function i(t){r?t():window.addEventListener("load",t)}var r=!1;window.addEventListener("load",function(){r=!0}),e.exports=i},{}],185:[function(t,e,n){"use strict";e.exports=t("./fullscreen")},{"./fullscreen":191}],186:[function(t,e,n){"use strict";e.exports={STANDARD:"standard",IOS:"ios"}},{}],187:[function(t,e,n){"use strict";function i(t){h.trigger(c.ENTERFULLSCREEN,t)}function r(t){h.trigger(c.EXITFULLSCREEN,t)}function o(t){h.fullscreenElement()?i(t):r(t)}function s(){a(document,"fullscreenchange",o)}var a=t("@marcom/ac-dom-events/addEventListener"),l=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=t("./../events/types"),u=t("./../consts/modes"),h=new l;s(),h.fullscreenEnabled=function(t){var e=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;return!!e},h.fullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement},h.exitFullscreen=function(t){var e;"function"==typeof document.exitFullscreen?e="exitFullscreen":"function"==typeof document.webkitExitFullscreen?e="webkitExitFullscreen":"function"==typeof document.webkitCancelFullScreen?e="webkitCancelFullScreen":"function"==typeof document.mozCancelFullScreen?e="mozCancelFullScreen":"function"==typeof document.msExitFullscreen&&(e="msExitFullscreen"),"function"==typeof document[e]&&document[e].call(document)},h.requestFullscreen=function(t){var e;"function"==typeof t.requestFullscreen?e="requestFullscreen":"function"==typeof t.webkitRequestFullscreen?e="webkitRequestFullscreen":"function"==typeof t.webkitRequestFullScreen?e="webkitRequestFullScreen":"function"==typeof t.mozRequestFullScreen?e="mozRequestFullScreen":"function"==typeof t.msRequestFullscreen&&(e="msRequestFullscreen"),"function"==typeof t[e]&&t[e].call(t)},h.mode=u.STANDARD,e.exports=h},{"./../consts/modes":186,"./../events/types":190,"@marcom/ac-dom-events/addEventListener":85,"@marcom/ac-event-emitter-micro":160}],188:[function(t,e,n){"use strict";var i=t("./ios"),r=t("./desktop");e.exports={create:function(){var t=r;return"webkitEnterFullscreen"in document.createElement("video")&&!("webkitRequestFullScreen"in document.createElement("div"))&&(t=i),t}}},{"./desktop":187,"./ios":189}],189:[function(t,e,n){"use strict";function i(){a(document,"webkitbeginfullscreen",r,!0),a(document,"webkitendfullscreen",o,!0)}function r(t){h.trigger(c.ENTERFULLSCREEN,t)}function o(t){s=void 0,h.trigger(c.EXITFULLSCREEN,t)}var s,a=t("@marcom/ac-dom-events/addEventListener"),l=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=t("./../events/types"),u=t("./../consts/modes");i();var h=new l;h.fullscreenEnabled=function(t){return!!t.webkitSupportsFullscreen},h.fullscreenElement=function(){return s},h.exitFullscreen=function(t){t&&"function"==typeof t.webkitExitFullscreen&&t.webkitExitFullscreen()},h.requestFullscreen=function(t){"function"==typeof t.webkitEnterFullscreen&&t.webkitEnterFullscreen()},h.mode=u.IOS,e.exports=h},{"./../consts/modes":186,"./../events/types":190,"@marcom/ac-dom-events/addEventListener":85,"@marcom/ac-event-emitter-micro":160}],190:[function(t,e,n){"use strict";e.exports={ENTERFULLSCREEN:"enterfullscreen",EXITFULLSCREEN:"exitfullscreen"}},{}],191:[function(t,e,n){"use strict";function i(){throw new Error(o)}var r=(t("@marcom/ac-event-emitter-micro").EventEmitterMicro,t("./delegate/factory")),o="Error: Element missing. ac-fullscreen requires an element to be specified",s=r.create(),a={};a.requestFullscreen=function(t){return t||i(),s.requestFullscreen(t)},a.fullscreenEnabled=function(t){return t||i(),s.fullscreenEnabled(t)},a.fullscreenElement=function(){return s.fullscreenElement()},a.exitFullscreen=function(t){return t||i(),s.exitFullscreen(t)},a.getMode=function(){return s.mode},a.on=function(){return s.on.apply(s,arguments)},a.off=function(){return s.off.apply(s,arguments)},a.once=function(){return s.once.apply(s,arguments)},e.exports=a},{"./delegate/factory":188,"@marcom/ac-event-emitter-micro":160}],192:[function(t,e,n){"use strict";var i=function(){var t,e="";for(t=0;t<arguments.length;t++)t>0&&(e+=","),e+=arguments[t];return e};e.exports=function(t,e){e=e||i;var n=function r(){var n=arguments,i=e.apply(this,n);return i in r.cache||(r.cache[i]=t.apply(this,n)),r.cache[i]};return n.cache={},n}},{}],193:[function(t,e,n){"use strict";e.exports=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}}},{}],194:[function(t,e,n){"use strict";e.exports=function(t,e){var n=null;return function(){null===n&&(t.apply(this,arguments),n=setTimeout(function(){n=null},e))}}},{}],195:[function(t,e,n){"use strict";function i(t){t=t||{},this._wrapAround=t.wrapAround||!1,this._itemType=t.itemType||s,this._items=[],this._itemsIdLookup={},this._itemChanged=!1,this.showNext=this.showNext.bind(this),this.showPrevious=this.showPrevious.bind(this),this._update=this._update.bind(this),this._updateItems=this._updateItems.bind(this),o.call(this),t.startAt&&this._startAt(t.startAt),i._add(this,t.analyticsOptions)}var r=t("./singletons/analyticsManager"),o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=t("./Item");i.FADE="fade",i.FADE_SELECTOR="[data-ac-gallery-fade]",i.SLIDE="slide",i.SLIDE_SELECTOR="[data-ac-gallery-slide]",i.UPDATE="update",i.UPDATE_COMPLETE="update:complete";var a=o.prototype,l=i.prototype=Object.create(a);l.addItem=function(t,e){if(t.nodeType)t=new this._itemType(t);else if(this._items.indexOf(t)>-1)return t;return"number"==typeof e?this._items.splice(e,0,t):this._items.push(t),1===this._items.length?(t.show(),this._setCurrentItem(t)):(t.hide(),this.getNextItem()===t&&this._setNextItem(t),this.getPreviousItem()===t&&this._setPreviousItem(t)),null!==t.getElementId()&&(this._itemsIdLookup[t.getElementId()]=t),t.on(s.SELECTED,this._update),t},l.removeItem=function(t,e){e=e||{},"number"==typeof t&&(t=this._items[t]);var n=this._items.indexOf(t);if(n>-1){var i=this.getNextItem(),r=this.getPreviousItem();this._items.splice(n,1),t.off(s.SELECTED,this._update),i===t&&this._setNextItem(this.getNextItem()),r===t&&this._setPreviousItem(this.getPreviousItem())}return t===this._currentItem&&this._items.length&&e.setCurrentItem!==!1&&(this._update({item:this._items[0]}),this._setLastItem(null)),e.destroyItem&&t.getElement()&&t.destroy(),t},l.show=function(t,e){return"number"==typeof t?t=this._items[t]:"string"==typeof t&&(t=this._itemsIdLookup[t]),t&&(e=e||{},this._update({item:t,interactionEvent:e.interactionEvent})),t||null},l.showNext=function(t){var e=this.getNextItem();return e&&this.show(e,t),e},l.showPrevious=function(t){var e=this.getPreviousItem();return e&&this.show(e,t),e},l.isInView=function(){return this._currentItem&&this._currentItem.isInView()},l.getTotalItems=function(){return this._items.length},l.getItems=function(){return this._items},l.getItem=function(t){return"number"==typeof t?this.getItemAt(t):"string"==typeof t?this.getItemById(t):void 0},l.getItemAt=function(t){return this._items[t]||null},l.getItemById=function(t){return this._itemsIdLookup[t]||null},l.getItemIndex=function(t){return this._items.indexOf(t)},l.getCurrentItem=function(){return this._currentItem||null},l.getLastItem=function(){return this._lastItem||null},l.getNextItem=function(){var t,e=this._items.indexOf(this._currentItem);return e<this._items.length-1?t=this._items[e+1]:this._wrapAround&&(t=this._items[0]),t||null},l.getPreviousItem=function(){var t,e=this._items.indexOf(this._currentItem);return e>0?t=this._items[e-1]:this._wrapAround&&(t=this._items[this._items.length-1]),t||null},l.getId=function(){return this._id},l.destroy=function(t){if(t=t||{},void 0===t.destroyItems&&(t.destroyItems=!0),this._setCurrentItem(null),t.destroyItems)for(var e;this._items.length;)e=this._items[0],e.off(s.SELECTED,this._update),this.removeItem(e,{destroyItem:!0,setCurrentItem:!1});return this._items=null,this._itemsIdLookup=null,i._remove(this),a.destroy.call(this)},l._startAt=function(t){var e=this._items[t];e&&this._currentItem!==e&&(this._currentItem.hide(),this._setCurrentItem(e),this._currentItem.show(),this.trigger(i.UPDATE,this._items))},l._setCurrentItem=function(t){this._currentItem&&this._currentItem.getElement()&&this._currentItem!==t&&(this._currentItem.getElement().classList.remove(s.CSS_CURRENT_ITEM),this._setLastItem(this._currentItem)),this._currentItem=t,this._currentItem&&this._currentItem.getElement()&&(this._currentItem.getElement().classList.add(s.CSS_CURRENT_ITEM),this._setNextItem(this.getNextItem()),this._setPreviousItem(this.getPreviousItem()))},l._setLastItem=function(t){this._lastItem&&this._lastItem.getElement()&&this._lastItem!==t&&this._lastItem.getElement().classList.remove(s.CSS_LAST_ITEM),this._lastItem=t,this._lastItem&&this._lastItem.getElement()&&this._lastItem.getElement().classList.add(s.CSS_LAST_ITEM)},l._setNextItem=function(t){this._nextItem&&this._nextItem.getElement()&&this._nextItem!==t&&this._nextItem.getElement().classList.remove(s.CSS_NEXT_ITEM),this._nextItem=t,this._nextItem&&this._nextItem.getElement()&&this._nextItem.getElement().classList.add(s.CSS_NEXT_ITEM)},l._setPreviousItem=function(t){this._previousItem&&this._previousItem.getElement()&&this._previousItem!==t&&this._previousItem.getElement().classList.remove(s.CSS_PREVIOUS_ITEM),this._previousItem=t,this._previousItem&&this._previousItem.getElement()&&this._previousItem.getElement().classList.add(s.CSS_PREVIOUS_ITEM)},l._updateItems=function(t){t.outgoing[0]&&t.outgoing[0].hide(),t.incoming[0].show(),this._itemChanged&&(this.trigger(i.UPDATE_COMPLETE,t),this._itemChanged=!1)},l._update=function(t){var e=this._currentItem!==t.item;e&&this._setCurrentItem(t.item);var n={incoming:[t.item],outgoing:this._lastItem?[this._lastItem]:[],interactionEvent:t.interactionEvent||null};e&&(this.trigger(i.UPDATE,n),this._itemChanged=!0),this._updateItems(n)},i._instantiate=function(){return this._galleries=[],this._idCounter=0,this},i._add=function(t,e){this._galleries.push(t),t._id=++this._idCounter,r.add(t,e)},i._remove=function(t){var e=this._galleries.indexOf(t);e>-1&&(this._galleries.splice(e,1),r.remove(t))},i.getAll=function(){return Array.prototype.slice.call(this._galleries)},i.getAllInView=function(){for(var t=[],e=this._galleries.length;e--;)this._galleries[e].isInView()&&t.push(this._galleries[e]);return t},i.destroyAll=function(){for(var t=this._galleries.length;t--;)this._galleries[t].destroy();this._galleries=[]},e.exports=i._instantiate()},{"./Item":196,"./singletons/analyticsManager":208,"@marcom/ac-event-emitter-micro":160}],196:[function(t,e,n){"use strict";function i(t,e){this._el=t,e=e||{},this._triggerKeys=[],this._triggerEls={},this._isShown=!1,this._isACaption=void 0!==e.isACaption&&e.isACaption,this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this),this._onTriggered=this._onTriggered.bind(this),this._isACaption||this._el.setAttribute("role","tabpanel"),l.call(this)}t("@marcom/ac-polyfills/Array/from");var r=t("@marcom/ac-dom-metrics/isInViewport"),o=t("@marcom/ac-dom-metrics/getPercentInViewport"),s=t("@marcom/ac-accessibility/helpers/TabManager"),a=t("@marcom/ac-keyboard/keyMap"),l=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=t("@marcom/ac-keyboard"),u="current";i.CSS_CURRENT_ITEM="ac-gallery-currentitem",i.CSS_LAST_ITEM="ac-gallery-lastitem",i.CSS_NEXT_ITEM="ac-gallery-nextitem",i.CSS_PREVIOUS_ITEM="ac-gallery-previousitem",i.SELECTED="selected",i.SHOW="show",i.HIDE="hide";var h=i.prototype=Object.create(l.prototype);h.show=function(){this._isShown=!0,this._addCurrentClassToTriggers(),this._setTabIndexOnFocusableItems(null),this._el.removeAttribute("aria-hidden"),this.trigger(i.SHOW,this)},h.hide=function(){this._isShown=!1,this._removeCurrentClassFromTriggers(),this._setTabIndexOnFocusableItems("-1"),this._el.setAttribute("aria-hidden","true"),this.trigger(i.HIDE,this)},h.addElementTrigger=function(t,e){e=e||"click",void 0===this._triggerEls[e]&&(this._triggerEls[e]=[]);var n=this._triggerEls[e].indexOf(t);if(n<0){t.setAttribute("role","tab"),t.setAttribute("tabindex","0");var i=this.getElementId();i&&t.setAttribute("aria-controls",i),i=t.getAttribute("id"),i&&null===this._el.getAttribute("aria-labelledby")&&this._el.setAttribute("aria-labelledby",i),t.addEventListener(e,this._onTriggered),this._triggerEls[e].push(t),this._isShown?(t.setAttribute("aria-selected","true"),t.classList.add(u)):t.setAttribute("aria-selected","false")}},h.removeElementTrigger=function(t,e){if(e=e||"click",void 0!==this._triggerEls[e]){var n=this._triggerEls[e].indexOf(t);n>-1&&this._cleanElementTrigger(t,e),0===this._triggerEls[e].length&&(this._triggerEls[e]=void 0)}},h.addKeyTrigger=function(t){if("string"==typeof t&&(t=a[t.toUpperCase()]),"number"==typeof t){var e=this._triggerKeys.indexOf(t);e<0&&(c.onDown(t,this._onKeyboardInteraction),this._triggerKeys.push(t))}},h.removeKeyTrigger=function(t){if("string"==typeof t&&(t=a[t.toUpperCase()]),"number"==typeof t){var e=this._triggerKeys.indexOf(t);e>-1&&(c.offDown(t,this._onKeyboardInteraction),this._triggerKeys.splice(e,1))}},h.removeAllTriggers=function(){for(var t,e=this._triggerKeys.length;e--;)t=this._triggerKeys[e],c.offDown(t,this._onKeyboardInteraction);this._triggerKeys=[];var n,i;for(i in this._triggerEls)for(e=this._triggerEls[i].length;e--;)n=this._triggerEls[i][e],this._cleanElementTrigger(n,i);this._triggerEls={}},h.isInView=function(){return!!this._el&&r(this._el)},h.percentageInView=function(){return this._el?o(this._el):0},h.getElement=function(){return this._el},h.getElementId=function(){return void 0!==this._elId?this._elId:(this._elId=this._el.getAttribute("id")||null,this._elId)},h.destroy=function(){this._isShown&&(this._isShown=null,this._el.classList.remove(i.CSS_CURRENT_ITEM,i.CSS_LAST_ITEM,i.CSS_NEXT_ITEM,i.CSS_PREVIOUS_ITEM),this._removeCurrentClassFromTriggers()),this.removeAllTriggers(),this._setTabIndexOnFocusableItems(null),this._el.removeAttribute("aria-hidden"),this._el.removeAttribute("role"),this._el.removeAttribute("aria-labelledby"),this._isACaption=null,this._triggerKeys=null,this._triggerEls=null,this._el=null},h._addCurrentClassToTriggers=function(){var t,e,n;for(e in this._triggerEls)for(n=this._triggerEls[e].length;n--;)t=this._triggerEls[e][n],t.setAttribute("aria-selected","true"),t.classList.add(u)},h._removeCurrentClassFromTriggers=function(){var t,e,n;for(e in this._triggerEls)for(n=this._triggerEls[e].length;n--;)t=this._triggerEls[e][n],t.setAttribute("aria-selected","false"),t.classList.remove(u)},h._cleanElementTrigger=function(t,e){t.removeAttribute("aria-selected"),t.removeAttribute("role"),t.removeAttribute("tabindex"),t.removeAttribute("aria-controls"),t.removeEventListener(e,this._onTriggered),this._isShown&&t.classList.remove(u)},h._onKeyboardInteraction=function(t){this.isInView()&&this._onTriggered(t)},h._setTabIndexOnFocusableItems=function(t){var e=null===t,n=[];this._currentTabbableEls=this._currentTabbableEls||s.getTabbableElements(this._el),e||(n=s.getTabbableElements(this._el),this._currentTabbableEls=n);for(var i=this._currentTabbableEls.length;i--;)e?this._currentTabbableEls[i].removeAttribute("tabindex"):this._currentTabbableEls[i].setAttribute("tabindex",t)},h._onTriggered=function(t){t.preventDefault(),this.trigger(i.SELECTED,{item:this,interactionEvent:t})},e.exports=i},{"@marcom/ac-accessibility/helpers/TabManager":24,"@marcom/ac-dom-metrics/getPercentInViewport":99,"@marcom/ac-dom-metrics/isInViewport":104,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-keyboard":218,"@marcom/ac-keyboard/keyMap":220,"@marcom/ac-polyfills/Array/from":void 0}],197:[function(t,e,n){"use strict";var i=t("./helpers/extendProto"),r=t("./Gallery"),o=t("./auto/AutoGallery"),s=t("./fade/FadeGallery"),a=t("./fade/FadeItem"),l=t("./slide/SlideGallery"),c=t("./slide/SlideItem"),u=t("./Item");r.create=t("./factories/create"),r.autoCreate=t("./factories/autoCreate"),r.extend=i,o.extend=i,s.extend=i,a.extend=i,l.extend=i,c.extend=i,u.extend=i,e.exports={Gallery:r,AutoGallery:o,FadeGallery:s,FadeGalleryItem:a,SlideGallery:l,SlideGalleryItem:c,Item:u,TabNav:t("./navigation/TabNav")}},{"./Gallery":195,"./Item":196,"./auto/AutoGallery":199,"./factories/autoCreate":200,"./factories/create":201,"./fade/FadeGallery":202,"./fade/FadeItem":203,"./helpers/extendProto":204,"./navigation/TabNav":207,"./slide/SlideGallery":209,"./slide/SlideItem":210}],198:[function(t,e,n){"use strict";function i(){this._observers={}}var r;try{r=t("ac-analytics").observer.Gallery}catch(o){}var s="data-analytics-gallery-id",a=i.prototype;a.add=function(t,e){var n=t.getId();if(r&&!this._observers[n]){e=e||{},e.galleryName||(e.galleryName=this._getAnalyticsId(t,e.dataAttribute)||n),e.beforeUpdateEvent||(e.beforeUpdateEvent="update"),e.afterUpdateEvent||(e.afterUpdateEvent="update:complete");var i=new r(t,e);i.gallery&&(this._observers[n]=i)}},a.remove=function(t){var e=t.getId();r&&this._observers[e]&&("function"==typeof this._observers[e].destroy&&this._observers[e].destroy(),this._observers[e]=null)},a._getAnalyticsId=function(t,e){if("function"==typeof t.getElement){e=e||s;var n=t.getElement();return n.getAttribute(e)||n.getAttribute("id")}return null},e.exports=i},{"ac-analytics":void 0}],199:[function(t,e,n){"use strict";function i(t,e){if(e=e||{},!t||1!==t.nodeType)throw new Error(v);if(this._el=t,c.call(this,e),this._itemHeights=[],this._itemHeightsLookup={},this._tabNavDuration=e.tabNavDuration,this._tabNavPaddles=e.tabNavPaddles!==!1,this._isRightToLeft=void 0===e.rightToLeft?"rtl"===window.getComputedStyle(t).direction:e.rightToLeft,this._keyboardThrottleDelay=1e3*(void 0===e.keyboardThrottleDelay?y:e.keyboardThrottleDelay),this._resizeContainer=!!e.resizeContainer,this._setUpContainerAutoResize(e.resizeContainerOnUpdate),this._createTabNav(),this._addPaddleNav(e.addPaddleNav),this._isACaptionsGallery=""===t.getAttribute("data-ac-gallery-captions"),this._addItems(e.itemSelector||_),this._wrapAround||this._updatePaddleNavState(),e.enableArrowKeys!==!1&&(this._enableArrowKeys=!0,this._addKeyboardListener()),e.updateOnWindowResize!==!1&&(this._onWindowResize=this._onWindowResize.bind(this),window.addEventListener("resize",this._onWindowResize)),this._componentsContainer=document.getElementById(e.container),e.startAt&&this._startAt(e.startAt),this.stopAutoPlay=this.stopAutoPlay.bind(this),e.autoPlay){if(!this._componentsContainer)throw new Error(b);var n="number"==typeof e.autoPlay?e.autoPlay:p;this.startAutoPlay(n)}if(e.deeplink!==!1){var i=this._getDeeplinkedItem();i&&i!==this._currentItem&&this.show(i)}if(this._containerResizeDuration!==!1){var r=this._itemHeightsLookup[this._currentItem.getElementId()];r&&this._setElHeight(r)}this._tabNav&&this._tabNav.start(),this._setUpSwiping(e.touch&&a(),e.desktopSwipe),this._componentsContainer&&this._componentsContainer.setAttribute("tabIndex",-1);var o=t.getAttribute("data-related-gallery");if(o&&(this._captionsContainer=document.querySelector(o)),e.enableCaptions){if(!this._captionsContainer)throw new Error(w);this._captionsOptions=!!e.captionsOptions&&e.captionsOptions,this.enableCaptions()}}t("@marcom/ac-polyfills/Array/from");var r=t("@marcom/ac-keyboard/keyMap"),o=t("./../helpers/inputHasFocus"),s=t("@marcom/ac-function/throttle"),a=t("@marcom/ac-feature/touchAvailable"),l=t("@marcom/ac-browser-prefixed"),c=t("./../Gallery"),u=t("@marcom/ac-keyboard"),h=t("@marcom/ac-pointer-tracker").PointerTracker,f=t("./../navigation/TabNav"),d="disabled",p=3,m=.5,_="[data-ac-gallery-item]",y=.12,g=t("../templates/paddlenav.js"),v="No element supplied.",b='Container element needed when autoPlay is on. Use the "container" option when you instantiate your gallery.',w='Captions datatag needed when enableCaptions is on. Use the "data-related-gallery" tag (with an ID of the related captions container) on your gallery container to automatically use captions.';i.RESIZED="resized",i.UPDATE=c.UPDATE,i.UPDATE_COMPLETE=c.UPDATE_COMPLETE;var E=c.prototype,x=i.prototype=Object.create(E);x.addItem=function(t,e){if(t.nodeType){var n=this._isACaptionsGallery;t=new this._itemType(t,{isACaption:n})}else if(this._items.indexOf(t)>-1)return t;return this._resizeContainer&&this._storeItemHeight(t,this._containerResizeDuration===!1),this._addItemTriggers(t),E.addItem.call(this,t,e)},x.removeItem=function(t,e){if(this._resizeContainer)for(var n=this._itemHeights.length;n--;)this._itemHeights[n].item===t&&(this._itemHeights.splice(n,1),0===n&&this._itemHeights.length&&this._setElHeight(this._itemHeights[0].height));return E.removeItem.call(this,t,e)},x.startAutoPlay=function(t,e){if(e=e||{},this._isAutoPlaying=!0,this._autoPlayDelay=1e3*(t||p),this._cancelAutoPlayOnInteraction=void 0===e.cancelOnInteraction||e.cancelOnInteraction,clearTimeout(this._autoPlayTimeoutId),this._autoPlayTimeoutId=setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay),this._cancelAutoPlayOnInteraction&&this.on(c.UPDATE,this.stopAutoPlay),!this._componentsContainer)throw new Error(b);this._componentsContainer.addEventListener("focus",this.stopAutoPlay,!0),this._componentsContainer.addEventListener("touchend",this.stopAutoPlay,!0),this._componentsContainer.addEventListener("click",this.stopAutoPlay,!0)},x.stopAutoPlay=function(){this._isAutoPlaying=!1,clearTimeout(this._autoPlayTimeoutId),this._cancelAutoPlayOnInteraction&&this.off(c.UPDATE,this.stopAutoPlay),this._componentsContainer&&(this._componentsContainer.removeEventListener("focus",this.stopAutoPlay,!0),this._componentsContainer.removeEventListener("touchend",this.stopAutoPlay,!0),this._componentsContainer.removeEventListener("click",this.stopAutoPlay,!0))},x.getElement=function(){return this._el},x.getTabNav=function(){return this._tabNav||null},x.resize=function(t,e){if(this._resizeContainer){this._itemHeights=[];for(var n=this._items.length;n--;)this._storeItemHeight(this._items[n],!1);this._containerResizeDuration!==!1?this._setElHeight(this._itemHeightsLookup[this._currentItem.getElementId()]):this._setElHeight(this._itemHeights[0].height)}this._tabNav&&this._tabNav.resize(),this.trigger(i.RESIZED,this)},x.enableKeyboard=function(){this._enableArrowKeys||(this._enableArrowKeys=!0,this._addKeyboardListener())},x.disableKeyboard=function(){this._enableArrowKeys&&(this._enableArrowKeys=!1,u.offDown(r.ARROW_RIGHT,this._rightArrowFunc),u.offDown(r.ARROW_LEFT,this._leftArrowFunc))},x.enableTouch=function(){this._touchSwipe||this._setUpSwiping(!0,!1)},x.disableTouch=function(){this._touchSwipe&&(this._touchSwipe.off(h.END,this._onSwipeEnd),this._touchSwipe.destroy(),this._touchSwipe=null)},x.enableDesktopSwipe=function(){this._clickSwipe||this._setUpSwiping(!1,!0)},x.disableDesktopSwipe=function(){this._clickSwipe&&(this._clickSwipe.off(h.END,this._onSwipeEnd),this._clickSwipe.destroy(),this._clickSwipe=null)},x.enableCaptions=function(){this._galleryWithCaptions||this._initCaptionsGallery(this._captionsContainer,this._captionsOptions)},x.disableCaptions=function(){this._galleryWithCaptions&&this._galleryWithCaptions.destroy()},x.destroy=function(t){this._isAutoPlaying&&this.stopAutoPlay(),this._componentsContainer&&(this._componentsContainer.removeEventListener("focus",this.stopAutoPlay,!0),
this._componentsContainer.removeEventListener("touchend",this.stopAutoPlay,!0),this._componentsContainer.removeEventListener("click",this.stopAutoPlay,!0)),this._resizeContainer&&(this._el.style.height=null,this._el.style[l.transition]=null),this._enableArrowKeys&&(u.offDown(r.ARROW_RIGHT,this._rightArrowFunc),u.offDown(r.ARROW_LEFT,this._leftArrowFunc));var e;if(this._previousButtons){for(e=this._previousButtons.length;e--;)this._previousButtons[e].removeEventListener("click",this._onPaddlePrevious);this._setPaddleDisabledState(this._previousButtons,!1)}if(this._nextButtons){for(e=this._nextButtons.length;e--;)this._nextButtons[e].removeEventListener("click",this._onPaddleNext);this._setPaddleDisabledState(this._nextButtons,!1)}return this._dynamicPaddleNav&&this._el.removeChild(this._dynamicPaddleNav),this._hasPaddleNavStateHandler&&this.off(c.UPDATE,this._updatePaddleNavState),this.disableTouch(),this.disableDesktopSwipe(),this.disableCaptions(),this._tabNav&&(this._tabNav.destroy(),this._tabNav=null),window.removeEventListener("resize",this._onWindowResize),this._el=null,this._itemHeights=null,this._itemHeightsLookup=null,this._resizeContainer=null,this._isRightToLeft=null,this._enableArrowKeys=null,this._previousButtons=null,this._onPaddlePrevious=null,this._nextButtons=null,this._onPaddleNext=null,this._isACaptionsGallery=null,this._componentsContainer=null,this._galleryWithCaptions=null,this._captionsContainer=null,this._captionsOptions=null,E.destroy.call(this,t)},x._getDeeplinkedItem=function(){for(var t,e=window.location.hash.substr(1),n=this._items.length;n--;)if(t=this._items[n],e===t.getElementId())return t;return null},x._addItems=function(t){var e,n=this._el.querySelectorAll(t),i=0,r=n.length,o=this._isACaptionsGallery;for(i;i<r;i++)e=new this._itemType(n[i],{isACaption:o}),this.addItem(e),this._addItemTriggers(e)},x._createTabNav=function(){var t=this._getElementId(),e='[data-ac-gallery-tabnav="'+t+'"]',n=document.querySelector(e);n&&(this._tabNav=new f(n,this,{duration:this._tabNavDuration,usePaddles:this._tabNavPaddles}))},x._addItemTriggers=function(t,e){var n=Array.from(document.querySelectorAll('[data-ac-gallery-trigger="'+t.getElementId()+'"]'));e&&e.length&&(n=n.concat(e));var i=0,r=n.length;for(i;i<r;i++)t.addElementTrigger(n[i]),this._tabNav&&this._tabNav.addTrigger(n[i],t)},x._addPaddleNav=function(t){var e,n=this._getElementId();if(t){var i="string"==typeof t?t:g;i=i.replace(/%ID%/g,this._getElementId()),this._dynamicPaddleNav=document.createElement("div"),this._dynamicPaddleNav.innerHTML=i,this._el.insertBefore(this._dynamicPaddleNav,this._el.firstChild)}this._previousButtons=document.querySelectorAll('[data-ac-gallery-previous-trigger="'+n+'"]'),this._nextButtons=document.querySelectorAll('[data-ac-gallery-next-trigger="'+n+'"]');var r=this._el.getAttribute("aria-label")||"";if(r.length&&(r="("+r+")"),this._onPaddlePrevious=this._onPaddleInteraction.bind(null,this.showPrevious),e=this._previousButtons.length){var o=this._el.getAttribute("data-ac-gallery-previouslabel");for(o&&r.length&&(this._isRightToLeft?o=r+" "+o:o+=" "+r);e--;)o&&null===this._previousButtons[e].getAttribute("aria-label")&&this._previousButtons[e].setAttribute("aria-label",o),this._previousButtons[e].addEventListener("click",this._onPaddlePrevious)}if(this._onPaddleNext=this._onPaddleInteraction.bind(null,this.showNext),e=this._nextButtons.length){var s=this._el.getAttribute("data-ac-gallery-nextlabel");for(s&&r.length&&(this._isRightToLeft?s=r+" "+s:s+=" "+r);e--;)s&&null===this._nextButtons[e].getAttribute("aria-label")&&this._nextButtons[e].setAttribute("aria-label",s),this._nextButtons[e].addEventListener("click",this._onPaddleNext)}(this._nextButtons.length||this._previousButtons.length)&&(this._hasPaddleNavStateHandler=!0,this._updatePaddleNavState=this._updatePaddleNavState.bind(this),this.on(c.UPDATE,this._updatePaddleNavState))},x._onPaddleInteraction=function(t,e){e.preventDefault(),t.call(null,{interactionEvent:e})},x._updatePaddleNavState=function(){if(this._wrapAround)this._setPaddleDisabledState(this._previousButtons,!1),this._setPaddleDisabledState(this._nextButtons,!1);else{var t=this._items.indexOf(this._currentItem);0===t&&this._previousButtons.length?(this._setPaddleDisabledState(this._previousButtons,!0),this._setPaddleDisabledState(this._nextButtons,!1)):t===this._items.length-1&&this._nextButtons.length?(this._setPaddleDisabledState(this._nextButtons,!0),this._setPaddleDisabledState(this._previousButtons,!1)):(this._setPaddleDisabledState(this._previousButtons,!1),this._setPaddleDisabledState(this._nextButtons,!1))}},x._setPaddleDisabledState=function(t,e){for(var n=t.length;n--;)t[n].disabled=e,e?t[n].classList.add(d):t[n].classList.remove(d)},x._addKeyboardListener=function(){if(this._enableArrowKeys){this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this);var t,e;this._isRightToLeft?(t=this.showPrevious,e=this.showNext):(t=this.showNext,e=this.showPrevious),this._rightArrowFunc=s(this._onKeyboardInteraction.bind(null,t),this._keyboardThrottleDelay),this._leftArrowFunc=s(this._onKeyboardInteraction.bind(null,e),this._keyboardThrottleDelay),u.onDown(r.ARROW_RIGHT,this._rightArrowFunc),u.onDown(r.ARROW_LEFT,this._leftArrowFunc)}},x._onKeyboardInteraction=function(t,e){if(this.isInView()&&!o()){var n=c.getAllInView();if(n.length>1&&(n.sort(function(t,e){return t=t._enableArrowKeys?t.getCurrentItem().percentageInView():0,e=e._enableArrowKeys?e.getCurrentItem().percentageInView():0,e-t}),this!==n[0]))return;t.call(null,{interactionEvent:e})}},x._setUpSwiping=function(t,e){this._onSwipeEnd=this._onSwipeEnd.bind(this),t&&(this._touchSwipe=new h(this._el,h.TOUCH_EVENTS),this._touchSwipe.on(h.END,this._onSwipeEnd)),e&&(this._clickSwipe=new h(this._el,h.MOUSE_EVENTS),this._clickSwipe.on(h.END,this._onSwipeEnd))},x._onSwipeEnd=function(t){var e,n,i=t.interactionEvent,r="touchend"!==i.type||"touchstart"!==i.type||"touchmove"!==i.type;r&&(n={type:"touchmove",target:i.target,srcElement:i.srcElement});var o={interactionEvent:n||i};return t.swipe===h.SWIPE_RIGHT?e=this._isRightToLeft?this.showNext:this.showPrevious:t.swipe===h.SWIPE_LEFT&&(e=this._isRightToLeft?this.showPrevious:this.showNext),e?e.call(this,o):(i=null,null)},x._getElementId=function(){return void 0===this._elementId&&(this._elementId=this._el.getAttribute("id")),this._elementId},x._setUpContainerAutoResize=function(t){"number"==typeof t?this._containerResizeDuration=t:t?this._containerResizeDuration=m:this._containerResizeDuration=!1,this._containerResizeDuration!==!1&&(this._resizeContainer=!0,this._updateContainerSize=this._updateContainerSize.bind(this),this.on(c.UPDATE,this._updateContainerSize))},x._updateContainerSize=function(t){var e=this._itemHeightsLookup[t.incoming[0].getElementId()];e&&this._setElHeight(e,this._containerResizeDuration)},x._storeItemHeight=function(t,e){this._itemHeights.push({item:t,height:t.getElement().scrollHeight}),this._itemHeightsLookup[t.getElementId()]=t.getElement().scrollHeight,this._itemHeights.sort(function(t,e){return e.height-t.height}),e&&this._itemHeights[0].item===t&&this._setElHeight(t.getElement().scrollHeight)},x._setElHeight=function(t,e){null!==e&&"number"==typeof e&&(this._el.style[l.transition]="height "+e+"s"),this._el.style.height=t+"px"},x._initCaptionsGallery=function(t,e){t&&(this._galleryWithCaptions=c.create(t,"fade",e?e:{crossFade:!0}),this._enableArrowKeys&&(this._galleryWithCaptions._enableArrowKeys=!1),this.on(c.UPDATE,function(t){var e=this.getItemIndex(t.incoming[0]);this._galleryWithCaptions.show(e)}.bind(this)))},x._onAutoPlayToNextItem=function(){if(this._isAutoPlaying)if(!document.hidden&&this._currentItem.isInView()){this._cancelAutoPlayOnInteraction&&this.off(c.UPDATE,this.stopAutoPlay);var t=this.showNext();null!==t&&(this._cancelAutoPlayOnInteraction&&this.on(c.UPDATE,this.stopAutoPlay),clearTimeout(this._autoPlayTimeoutId),this._autoPlayTimeoutId=setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay))}else clearTimeout(this._autoPlayTimeoutId),this._autoPlayTimeoutId=setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay)},x._onWindowResize=function(t){window.requestAnimationFrame(function(){this._el&&this.resize()}.bind(this))},e.exports=i},{"../templates/paddlenav.js":212,"./../Gallery":195,"./../helpers/inputHasFocus":206,"./../navigation/TabNav":207,"@marcom/ac-browser-prefixed":42,"@marcom/ac-feature/touchAvailable":171,"@marcom/ac-function/throttle":194,"@marcom/ac-keyboard":218,"@marcom/ac-keyboard/keyMap":220,"@marcom/ac-pointer-tracker":244,"@marcom/ac-polyfills/Array/from":void 0}],200:[function(t,e,n){"use strict";var i=t("./create"),r=t("./../Gallery");e.exports=function(t){t=t||{};var e,n,o=t.context||document.body;for(e=o.querySelectorAll(r.SLIDE_SELECTOR),n=e.length;n--;)i(e[n],r.SLIDE,t);for(e=o.querySelectorAll(r.FADE_SELECTOR),n=e.length;n--;)i(e[n],r.FADE,t);return r.getAll()}},{"./../Gallery":195,"./create":201}],201:[function(t,e,n){"use strict";var i=t("./../fade/FadeGallery"),r=t("./../Gallery"),o=t("./../slide/SlideGallery"),s="%TYPE% is not a supported gallery type and el has no gallery data attribute.",a=r.FADE_SELECTOR.replace(/\[|\]/g,""),l=r.SLIDE_SELECTOR.replace(/\[|\]/g,"");e.exports=function(t,e,n){var c;if("string"==typeof e&&(e===r.SLIDE?c=o:e===r.FADE&&(c=i)),void 0===c&&(null!==t.getAttribute(l)?c=o:null!==t.getAttribute(a)&&(c=i)),void 0===c)throw new Error(s.replace(/%TYPE%/g,e));return new c(t,n)}},{"./../Gallery":195,"./../fade/FadeGallery":202,"./../slide/SlideGallery":209}],202:[function(t,e,n){"use strict";function i(t,e){if(e=Object.assign({},e),e.itemType=e.itemType||r,this._fadeDuration=void 0!==e.duration?e.duration:s,e.tabNavDuration=void 0!==e.tabNavDuration?e.tabNavDuration:this._fadeDuration,this._crossFade=e.crossFade,this._zIndexBase=e.startZIndex||1,this._ease=e.ease,e.resizeContainerOnUpdate===!0&&(e.resizeContainerOnUpdate=this._fadeDuration),this._onItemShowComplete=this._onItemShowComplete.bind(this),o.call(this,t,e),e.startZIndex)for(var n,i=this._items.length;i--;)n=this._items[i],n.getElement().style.zIndex=this._zIndexBase;this._currentItem&&this._currentItem.fadeIn(0,this._ease,this._zIndexBase+l)}t("@marcom/ac-polyfills/Object/assign");var r=t("./FadeItem"),o=t("./../auto/AutoGallery"),s=.5,a=1,l=2;i.RESIZED=o.RESIZED,i.UPDATE=o.UPDATE,i.UPDATE_COMPLETE=o.UPDATE_COMPLETE;var c=o.prototype,u=i.prototype=Object.create(c);u.addItem=function(t,e){t.nodeType&&(t=new this._itemType(t));var n=c.addItem.call(this,t,e);return t!==this._currentItem?t.fadeOut():t.fadeIn(0),n},u.destroy=function(t){var e=c.destroy.call(this,t);return this._fadeDuration=null,this._crossFade=null,this._zIndexBase=null,this._ease=null,this._onItemShowComplete=null,e},u._startAt=function(t){var e=this._items[t];e&&this._currentItem!==e&&(this._currentItem.fadeOut(0),this._currentItem.hide(),this._setCurrentItem(e),this._currentItem.show(),this._currentItem.fadeIn(0),this.trigger(i.UPDATE,this._items))},u._onItemShowComplete=function(t){return t&&t.target()!==this._currentItem.getElement()?void(this._currentItem.isFading()||(this._prepareForTransition(),this._currentItem.fadeIn(this._fadeDuration,this._ease,this._zIndexBase+l,this._onItemShowComplete))):(this._prepareForTransition(!0),this._currentItem.getElement().style.zIndex=this._zIndexBase,void(this._incomingOutgoingItems&&this.trigger(i.UPDATE_COMPLETE,this._incomingOutgoingItems)))},u._updateItems=function(t){if(this._itemChanged){if(this._crossFade){this._prepareForTransition();var e=function(){this.trigger(i.UPDATE_COMPLETE,t),this._itemChanged=!1}.bind(this);t.outgoing[0].fadeOut(.99*this._fadeDuration,this._ease),t.incoming[0].fadeIn(this._fadeDuration,this._ease,this._zIndexBase+l,e)}else this._incomingOutgoingItems=t,t.outgoing[0].isFading()||(this._prepareForTransition(),t.incoming[0].fadeIn(this._fadeDuration,this._ease,this._zIndexBase+l,this._onItemShowComplete));t.outgoing[0].hide(),t.incoming[0].show()}},u._prepareForTransition=function(t){for(var e,n=this._items.length;n--;)e=this._items[n],e!==this._currentItem&&(t&&e.fadeOut(),e.getElement().style.zIndex=this._zIndexBase);this._lastItem._el.style.zIndex=this._zIndexBase+a},e.exports=i},{"./../auto/AutoGallery":199,"./FadeItem":203,"@marcom/ac-polyfills/Object/assign":void 0}],203:[function(t,e,n){"use strict";function i(t,e){a.call(this,t,e),t.style.position="absolute"}var r=t("@marcom/ac-solar/fade"),o=t("@marcom/ac-solar/fadeIn"),s=t("@marcom/ac-solar/fadeOut"),a=t("./../Item");i.SELECTED=a.SELECTED,i.SHOW=a.SHOW,i.HIDE=a.HIDE;var l=a.prototype,c=i.prototype=Object.create(l);c.fadeIn=function(t,e,n,i){this._el.style.zIndex=n||1,t?(this._destroyCurrentClip(),this._clip=r(this._el,0,1,t,{ease:e,onComplete:i})):o(this._el,0)},c.fadeOut=function(t,e){t?(this._destroyCurrentClip(),this._clip=s(this._el,t,{ease:e})):s(this._el,0)},c.isFading=function(){return!(!this._clip||!this._clip.playing())},c.destroy=function(){this._el.style.position=null,this._el.style.opacity=null,this._el.style.zIndex=null,l.destroy.call(this),this._destroyCurrentClip(),this._clip=null},c._destroyCurrentClip=function(){this._clip&&this._clip._el&&this._clip.destroy()},e.exports=i},{"./../Item":196,"@marcom/ac-solar/fade":328,"@marcom/ac-solar/fadeIn":329,"@marcom/ac-solar/fadeOut":330}],204:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Object/assign"),e.exports=function(t){var e=this,n=function(){e.apply(this,arguments)},i=Object.create(this.prototype);return n.prototype=Object.assign(i,t),Object.assign(n,this),n}},{"@marcom/ac-polyfills/Object/assign":void 0}],205:[function(t,e,n){"use strict";e.exports=function(t,e){var n=window.getComputedStyle(t),i=e?t.clientWidth:t.scrollWidth;return Math.round(i+parseFloat(n.marginRight)+parseFloat(n.marginLeft))}},{}],206:[function(t,e,n){"use strict";e.exports=function(){var t=["input","select","textarea"];return t.indexOf(document.activeElement.nodeName.toLowerCase())>-1}},{}],207:[function(t,e,n){"use strict";function i(t,e,n){n=n||{},this._el=t,this._gallery=e,this._triggers={},this._ordered=[],n.scrollDuration="undefined"==typeof n.duration?l:n.duration,this.tabnav=new o(t,n),s.call(this)}var r=t("@marcom/ac-dom-traversal/ancestors"),o=t("@marcom/ac-tabnav"),s=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=t("./../Gallery"),l=.5,c=s.prototype,u=i.prototype=Object.create(c);u.start=function(){this._onWindowLoad=this._onWindowLoad.bind(this),this._onGalleryUpdated=this._onGalleryUpdated.bind(this),this._gallery.on(a.UPDATE,this._onGalleryUpdated),this.resize(),window.addEventListener("load",this._onWindowLoad)},u.addTrigger=function(t,e){if(void 0===this._triggers[e.getElementId()]){var n=r(t);if(n.indexOf(this._el)>-1){var i={el:t};this._triggers[e.getElementId()]=i,this._ordered.push(i)}}},u.resize=function(){var t;this._ordered.length&&this.tabnav._wrapper.scrollWidth>this.tabnav.el.scrollWidth&&(t=this._triggers[this._gallery.getCurrentItem().getElementId()],t&&this.tabnav.centerItem(t.el))},u.destroy=function(){return this._gallery.off(a.UPDATE,this._onGalleryUpdated),window.removeEventListener("load",this._onWindowLoad),this._el=null,this._gallery=null,this._triggers=null,this._ordered=null,this._clip=null,c.destroy.call(this)},u._onWindowLoad=function(){window.removeEventListener("load",this._onWindowLoad),this.resize()},u._onGalleryUpdated=function(t){var e=this._triggers[t.incoming[0].getElementId()];e&&this.tabnav.centerItem(e.el)},e.exports=i},{"./../Gallery":195,"@marcom/ac-dom-traversal/ancestors":120,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-tabnav":334}],208:[function(t,e,n){"use strict";var i=t("./../analytics/AnalyticsManager");e.exports=new i},{"./../analytics/AnalyticsManager":198}],209:[function(t,e,n){"use strict";function i(t,e){e=Object.assign({},e),e.itemType=e.itemType||c,this._itemsPerSlide=e.itemsPerSlide||1;var n=e.deeplink!==!1;if(e.deeplink=!1,this._slideDuration=void 0!==e.duration?e.duration:f,e.tabNavDuration=void 0!==e.tabNavDuration?e.tabNavDuration:this._slideDuration,this._itemCenterPoint=void 0!==e.itemCenterPoint?e.itemCenterPoint:h,this._edgePullResistance=e.edgePullResistance?e.edgePullResistance:d,this._useClientWidthForItemWidth=e.useItemClientWidth||!1,this._slideOptions={ease:e.ease},e.resizeContainerOnUpdate===!0&&(e.resizeContainerOnUpdate=this._slideDuration),e.touch=e.touch!==!1,this._originalWrapAround=e.wrapAround||!1,a.call(this,t,e),n){var i=this._getDeeplinkedItem();i&&this._currentItem!==i&&(this._currentItem.hide(),this._setCurrentItem(i),this._currentItem.show())}this._positionItems=this._positionItems.bind(this),this._createContainer(),0!==this._items.length&&this._positionItems(),this._isInstantiated=!0}t("@marcom/ac-polyfills/Array/from"),t("@marcom/ac-polyfills/Object/assign");var r=t("./../helpers/getElementFullWidth"),o=t("@marcom/ac-solar/moveX"),s=t("@marcom/ac-browser-prefixed"),a=t("./../auto/AutoGallery"),l=t("@marcom/ac-pointer-tracker").PointerTracker,c=t("./SlideItem"),u=t("./SlideItemWrapper"),h=.5,f=.5,d=!0;i.RESIZED=a.RESIZED,i.UPDATE=a.UPDATE,i.UPDATE_COMPLETE=a.UPDATE_COMPLETE;var p=a.prototype,m=i.prototype=Object.create(p);m.addItem=function(t,e){t.nodeType&&(t=new this._itemType(t));var n=p.addItem.call(this,t,e);return void 0!==this._containerEl&&(this._addItemToContainer(t),this._positionItems()),this._updateWrapAround(),n},m.removeItem=function(t,e){if(this._containerEl&&t.getElement().parentElement===this._containerEl){var n=t.getOriginalParentElement();n?n.appendChild(t.getElement()):"function"==typeof t.removeItems&&(t.removeItems(),e.destroyItem=!0);var i=p.removeItem.call(this,t,e);return this._currentItem&&this._positionItems(this._currentItem),this._updateWrapAround(),i}return p.removeItem.call(this,t,e)},m.resize=function(){return this._positionItems(),this._snapToPosition(this._currentItem.position()),p.resize.call(this)},m.destroy=function(t){this._destroyCurrentClip(),this._clip=null;for(var e=this._items.length;e--;)this._items[e].off(c.CENTER_POINT_CHANGED,this._positionItems);this._touchSwipe&&(this._touchSwipe.off(l.START,this._onSwipeStart),this._touchSwipe.off(l.UPDATE,this._onSwipeUpdate)),this._clickSwipe&&(this._clickSwipe.off(l.START,this._onSwipeStart),this._clickSwipe.off(l.UPDATE,this._onSwipeUpdate));var n=this._el,i=p.destroy.call(this,t);return n.removeChild(this._containerEl),this._containerEl=null,this._slideDuration=null,this._itemCenterPoint=null,this._positionItems=null,this._slideOptions=null,i},m._addItems=function(t){if(this._itemsPerSlide>1){var e,n,i,r=this._el.querySelectorAll(t),o=0,s=0,a=r.length;for(s;s<a;s++)0===o&&(e=new u(this._useClientWidthForItemWidth)),e.addItem(r[s]),i=r[s].getAttribute("id"),i&&(n=Array.from(document.querySelectorAll("[data-ac-gallery-trigger="+i+"]")),this._addItemTriggers(e,n)),++o!==this._itemsPerSlide&&s!==a-1||(o=0,e.resize(),this.addItem(e))}else p._addItems.call(this,t)},m._createContainer=function(){this._containerEl=document.createElement("div"),this._containerEl.classList.add("ac-gallery-slidecontainer"),this._containerEl.style.position="absolute",this._containerEl.style.top="0",this._containerEl.style.left="0",this._containerEl.style.width="100%",this._containerEl.style.height="100%",this._el.appendChild(this._containerEl);var t=0,e=this._items.length;for(t;t<e;t++)this._addItemToContainer(this._items[t])},m._addItemToContainer=function(t){this._containerEl.appendChild(t.getElement()),this._resizeContainer&&this._itemsPerSlide>1&&this._storeItemHeight(t,this._containerResizeDuration===!1),t.on(c.CENTER_POINT_CHANGED,this._positionItems)},m._positionItems=function(t){t=t||this._currentItem;var e=this._items;this._wrapAround&&(e=this._shuffleItems());var n,i,o,s,a,l=this._getActualPositionX()-t.position()||0,c=parseInt(window.getComputedStyle(this._el).width,10),u=0,h=0,f=e.length;for(h;h<f;h++)n=e[h],n.resize(),i=n.getElement(),i.style.left=u+"px",o=r(i,this._useClientWidthForItemWidth),s=c-o,a=n.centerPoint&&null!==n.centerPoint()?n.centerPoint():this._itemCenterPoint,n.position(u*-1+s*a),this._isRightToLeft?u-=o:u+=o;u=t.position()+l,this._snapToPosition(u)},m._getActualPositionX=function(){var t=window.getComputedStyle(this._containerEl)[s.transform];if(t===this._transformStyles&&void 0!==this._actualPositionX)return this._actualPositionX;this._transformStyles=t;var e=this._transformStyles.split(",");return this._actualPositionX=e[4]||this._currentItem.position(),1*this._actualPositionX},m._snapToPosition=function(t){this._destroyCurrentClip(),this._positionX=t,this._containerEl.style[s.transition]="transform 0s, left 0s",o(this._containerEl,t,0,this._slideOptions)},m._slideToPosition=function(t,e,n){this._positionX=t,this._clip=o(this._containerEl,t,e,{ease:this._slideOptions.ease,onComplete:n})},m._setUpSwiping=function(t,e){var n=p._setUpSwiping.call(this,t,e);return this._onSwipeStart=this._onSwipeStart.bind(this),this._onSwipeUpdate=this._onSwipeUpdate.bind(this),this._touchSwipe&&(this._touchSwipe.on(l.START,this._onSwipeStart),this._touchSwipe.on(l.UPDATE,this._onSwipeUpdate)),this._clickSwipe&&(this._clickSwipe.on(l.START,this._onSwipeStart),this._clickSwipe.on(l.UPDATE,this._onSwipeUpdate)),n},m._onSwipeStart=function(t){this._clip&&this._clip.playing()&&(this._destroyCurrentClip(),this._positionX=this._getActualPositionX())},m._onSwipeUpdate=function(t){this._destroyCurrentClip();var e=this.getItems().slice(-1)[0].position(),n=this._positionX>0||this._positionX<e,i=t.diffX;this._edgePullResistance&&!this._wrapAround&&n&&(i*=.5),this._snapToPosition(this._positionX-i)},m._onSwipeEnd=function(t){var e=p._onSwipeEnd.call(this,t);return null===e&&(e=this.show(this._currentItem,{interactionEvent:t.interactionEvent})),e},m._shuffleItems=function(){var t=2===this._items.length&&!this._isAutoPlaying;if(t)return this._items.slice();var e,n,i,r=this._items.length,o=this._items.indexOf(this._currentItem),s=Math.floor(.5*r);if(o<s){e=s-o;var a=r-e;return n=this._items.slice(a),i=this._items.slice(0,a),n.concat(i)}return o>s?(e=o-s,n=this._items.slice(0,e),i=this._items.slice(e),i.concat(n)):this._items},m._storeItemHeight=function(t,e){var n;if(this._itemsPerSlide>1){for(var i=[],r=0;r<t.getElement().children.length;r++)i.push(t.getElement().children[r].scrollHeight);n=Math.max.apply(null,i)}else n=t.getElement().scrollHeight;n&&(this._itemHeights.push({item:t,height:n}),this._itemHeightsLookup[t.getElementId()]=n,this._itemHeights.sort(function(t,e){return e.height-t.height}),e&&this._itemHeights[0].item===t&&this._setElHeight(n))},m._updateItems=function(t){if(this._destroyCurrentClip(),this._wrapAround&&this._positionItems(t.outgoing[0]),this.getItemIndex(t.outgoing[0])>-1){var e=this._itemChanged?function(){this.trigger(i.UPDATE_COMPLETE,t),this._itemChanged=!1}.bind(this):null,n=this._slideDuration;this._slideToPosition(t.incoming[0].position(),n,e),t.incoming[0]!==t.outgoing[0]&&(t.incoming[0].show(),t.outgoing[0].hide())}else this._slideToPosition(this._currentItem.position(),this._slideDuration),t.incoming[0].show(),this._itemChanged&&(this.trigger(i.UPDATE_COMPLETE,t),this._itemChanged=!1)},m._updateWrapAround=function(){this._items.length<=2?this._wrapAround=!1:this._originalWrapAround&&(this._wrapAround=this._originalWrapAround),this._isInstantiated&&(this._previousButtons||this._nextButtons)&&this._updatePaddleNavState()},m._destroyCurrentClip=function(){this._clip&&this._clip.playing()&&this._clip.destroy()},e.exports=i},{"./../auto/AutoGallery":199,"./../helpers/getElementFullWidth":205,"./SlideItem":210,"./SlideItemWrapper":211,"@marcom/ac-browser-prefixed":42,"@marcom/ac-pointer-tracker":244,"@marcom/ac-polyfills/Array/from":void 0,"@marcom/ac-polyfills/Object/assign":void 0,"@marcom/ac-solar/moveX":332}],210:[function(t,e,n){"use strict";function i(t,e){o.call(this,t,e),t.style.position="absolute",t.style[r.transform]="translateZ(0)",this._parentElement=t.parentElement}var r=t("@marcom/ac-browser-prefixed"),o=t("./../Item");i.CENTER_POINT_CHANGED="centerpointchanged",i.SELECTED=o.SELECTED,i.SHOW=o.SHOW,i.HIDE=o.HIDE;var s=o.prototype,a=i.prototype=Object.create(s);a.position=function(t){return void 0!==t&&(this._position=t),this._position||0},a.centerPoint=function(t){return void 0!==t&&(this._centerPoint=t,this.trigger(i.CENTER_POINT_CHANGED)),void 0!==this._centerPoint?this._centerPoint:null},a.getOriginalParentElement=function(){return this._parentElement},a.resize=function(){},a.destroy=function(){this._el.style.position=null,this._el.style.left=null,this._el.style[r.transform]=null,s.destroy.call(this)},e.exports=i},{"./../Item":196,"@marcom/ac-browser-prefixed":42}],211:[function(t,e,n){"use strict";function i(t){o.call(this,document.createElement("div")),this._useClientWidthForItemWidth=t,this._items=[],this._currentWidth=0,this._el.classList.add(s)}t("@marcom/ac-polyfills/Array/from");var r=t("./../helpers/getElementFullWidth"),o=t("./SlideItem"),s="ac-gallery-slideitemwrapper",a=o.prototype,l=i.prototype=Object.create(a);l.addItem=function(t){this._items.push({el:t,parentElement:t.parentElement}),this._el.appendChild(t);var e=t.getAttribute("id");if(e){var n=this._el.getAttribute("id")||"",i=n.length?"-":"";n+=i+e,this._el.setAttribute("id",n)}},l.removeItems=function(){var t,e,n=0,i=this._items.length;for(n;n<i;n++)t=this._items[n].el,t.style.position=null,t.style.left=null,e=this._items[n].parentElement,e&&e.appendChild(t)},l.resize=function(){this._currentWidth=0;var t,e=0,n=this._items.length,i="rtl"===document.dir?"right":"left";for(e;e<n;e++)t=this._items[e].el,t.style.position="absolute",t.style[i]=this._currentWidth+"px",this._currentWidth+=r(t,this._useClientWidthForItemWidth);this._el.style.width=this._currentWidth+"px"},l.destroy=function(){this.removeItems(),this._items=null,this._currentWidth=null;var t=this._el.parentElement;t&&t.removeChild(this._el),a.destroy.call(this)},e.exports=i},{"./../helpers/getElementFullWidth":205,"./SlideItem":210,"@marcom/ac-polyfills/Array/from":void 0}],212:[function(t,e,n){"use strict";var i="";i+='<div class="paddlenav" data-analytics-gallery-interaction-type="paddlenav">',i+="<ul>",i+='<li><button class="paddlenav-arrow paddlenav-arrow-previous" data-ac-gallery-previous-trigger="%ID%"></button></li>',i+='<li><button class="paddlenav-arrow paddlenav-arrow-next" data-ac-gallery-next-trigger="%ID%"></button></li>',i+="</ul>",i+="</div>",e.exports=i},{}],213:[function(t,e,n){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-i(t)}function o(t){var e,n,r,o,s,a=t.length;o=i(t),s=new h(3*a/4-o),n=o>0?a-4:a;var l=0;for(e=0;e<n;e+=4)r=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;return 2===o?(r=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,s[l++]=255&r):1===o&&(r=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r),s}function s(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function a(t,e,n){for(var i,r=[],o=e;o<n;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),r.push(s(i));return r.join("")}function l(t){for(var e,n=t.length,i=n%3,r="",o=[],s=16383,l=0,u=n-i;l<u;l+=s)o.push(a(t,l,l+s>u?u:l+s));return 1===i?(e=t[n-1],r+=c[e>>2],r+=c[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=c[e>>10],r+=c[e>>4&63],r+=c[e<<2&63],r+="="),o.push(r),o.join("")}n.byteLength=r,n.toByteArray=o,n.fromByteArray=l;for(var c=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)c[d]=f[d],u[f.charCodeAt(d)]=d;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],214:[function(t,e,n){(function(e){"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=s.prototype):(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return a(this,t,e,n)}function a(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,n,i):"string"==typeof e?h(t,e,n):p(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e,n,i){return l(e),e<=0?o(t,e):void 0!==n?"string"==typeof i?o(t,e).fill(n,i):o(t,e).fill(n):o(t,e)}function u(t,e){if(l(e),t=o(t,e<0?0:0|m(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|y(e,n);t=o(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function f(t,e){var n=e.length<0?0:0|m(e.length);t=o(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),s.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=s.prototype):t=f(t,e),t}function p(t,e){if(s.isBuffer(e)){var n=0|m(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Q(e.length)?o(t,0):f(t,e);if("Buffer"===e.type&&$(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),s.alloc(+t)}function y(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(i)return W(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function b(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=s.from(e,i)),s.isBuffer(e))return 0===e.length?-1:w(t,e,n,i,r);if("number"==typeof e)return e=255&e,
s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,i,r){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,l=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}var c;if(r){var u=-1;for(c=n;c<a;c++)if(o(t,c)===o(e,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===l)return u*s}else u!==-1&&(c-=c-u),u=-1}else for(n+l>a&&(n=a-l),c=n;c>=0;c--){for(var h=!0,f=0;f<l;f++)if(o(t,c+f)!==o(e,f)){h=!1;break}if(h)return c}return-1}function E(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function x(t,e,n,i){return X(W(e,t.length-n),t,n,i)}function S(t,e,n,i){return X(K(e),t,n,i)}function k(t,e,n,i){return S(t,e,n,i)}function T(t,e,n,i){return X(Y(e),t,n,i)}function C(t,e,n,i){return X(G(e,t.length-n),t,n,i)}function A(t,e,n){return 0===e&&n===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=n){var l,c,u,h;switch(a){case 1:o<128&&(s=o);break;case 2:l=t[r+1],128===(192&l)&&(h=(31&o)<<6|63&l,h>127&&(s=h));break;case 3:l=t[r+1],c=t[r+2],128===(192&l)&&128===(192&c)&&(h=(15&o)<<12|(63&l)<<6|63&c,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:l=t[r+1],c=t[r+2],u=t[r+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(h=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return M(i)}function M(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function I(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function L(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=q(t[o]);return r}function D(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,n,i,r,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function N(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function j(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function B(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,i,r){return r||B(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,n,i,23,4),n+4}function V(t,e,n,i,r){return r||B(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,n,i,52,8),n+8}function z(t){if(t=H(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],s=0;s<i;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function G(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function Y(t){return Z.toByteArray(z(t))}function X(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function Q(t){return t!==t}var Z=t("base64-js"),J=t("ieee754"),$=t("isarray");n.Buffer=s,n.SlowBuffer=_,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=r(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return a(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return c(null,t,e,n)},s.allocUnsafe=function(t){return u(null,t)},s.allocUnsafeSlow=function(t){return u(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!$(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=s.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):g.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,i,r){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,a=n-e,l=Math.min(o,a),c=this.slice(i,r),u=t.slice(e,n),h=0;h<l;++h)if(c[h]!==u[h]){o=c[h],a=u[h];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},s.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},s.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(s.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=s.prototype;else{var r=e-t;i=new s(r,(void 0));for(var o=0;o<r;++o)i[o]=this[o+t]}return i},s.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},s.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},s.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},s.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),J.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),J.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),J.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),J.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;F(this,t,e,n,r,0)}var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;F(this,t,e,n,r,0)}var o=n-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);F(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);F(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return V(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return V(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},s.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:W(new s(t,i).toString()),l=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%l]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":213,ieee754:215,isarray:216}],215:[function(t,e,n){"use strict";n.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+t[e+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,i),o-=c}return(d?-1:1)*s*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+h>=1?f/l:f*Math.pow(2,1-h),e*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*m}},{}],216:[function(t,e,n){"use strict";var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],217:[function(t,e,n){"use strict";function i(t){this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=t||document,o(this._context,c,this._DOMKeyDown,!0),o(this._context,u,this._DOMKeyUp,!0),r.call(this)}var r=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=t("@marcom/ac-dom-events/utils/addEventListener"),s=t("@marcom/ac-dom-events/utils/removeEventListener"),a=t("@marcom/ac-object/create"),l=t("./internal/KeyEvent"),c="keydown",u="keyup",h=i.prototype=a(r.prototype);h.onDown=function(t,e){return this.on(c+":"+t,e)},h.onceDown=function(t,e){return this.once(c+":"+t,e)},h.offDown=function(t,e){return this.off(c+":"+t,e)},h.onUp=function(t,e){return this.on(u+":"+t,e)},h.onceUp=function(t,e){return this.once(u+":"+t,e)},h.offUp=function(t,e){return this.off(u+":"+t,e)},h.isDown=function(t){return t+="",this._keysDown[t]||!1},h.isUp=function(t){return!this.isDown(t)},h.destroy=function(){return s(this._context,c,this._DOMKeyDown,!0),s(this._context,u,this._DOMKeyUp,!0),this._keysDown=null,this._context=null,r.prototype.destroy.call(this),this},h._DOMKeyDown=function(t){var e=this._normalizeKeyboardEvent(t),n=e.keyCode+="";this._trackKeyDown(n),this.trigger(c+":"+n,e)},h._DOMKeyUp=function(t){var e=this._normalizeKeyboardEvent(t),n=e.keyCode+="";this._trackKeyUp(n),this.trigger(u+":"+n,e)},h._normalizeKeyboardEvent=function(t){return new l(t)},h._trackKeyUp=function(t){this._keysDown[t]&&(this._keysDown[t]=!1)},h._trackKeyDown=function(t){this._keysDown[t]||(this._keysDown[t]=!0)},e.exports=i},{"./internal/KeyEvent":219,"@marcom/ac-dom-events/utils/addEventListener":94,"@marcom/ac-dom-events/utils/removeEventListener":96,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-object/create":234}],218:[function(t,e,n){"use strict";var i=t("./Keyboard");e.exports=new i},{"./Keyboard":217}],219:[function(t,e,n){"use strict";function i(t){this.originalEvent=t;var e;for(e in t)r.indexOf(e)===-1&&"function"!=typeof t[e]&&(this[e]=t[e]);this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}var r=["keyLocation"];i.prototype={preventDefault:function(){return"function"!=typeof this.originalEvent.preventDefault?void(this.originalEvent.returnValue=!1):this.originalEvent.preventDefault()},stopPropagation:function(){return this.originalEvent.stopPropagation()}},e.exports=i},{}],220:[function(t,e,n){"use strict";e.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],221:[function(t,e,n){"use strict";e.exports=function(t){var e;if(t=t||window,t===window){if(e=window.pageXOffset)return e;t=document.documentElement||document.body.parentNode||document.body}return t.scrollLeft}},{}],222:[function(t,e,n){"use strict";e.exports=function(t){var e;if(t=t||window,t===window){if(e=window.pageYOffset)return e;t=document.documentElement||document.body.parentNode||document.body}return t.scrollTop}},{}],223:[function(t,e,n){"use strict";e.exports={Modal:t("./ac-modal-basic/Modal"),Renderer:t("./ac-modal-basic/Renderer"),classNames:t("./ac-modal-basic/classNames"),dataAttributes:t("./ac-modal-basic/dataAttributes")}},{"./ac-modal-basic/Modal":224,"./ac-modal-basic/Renderer":225,"./ac-modal-basic/classNames":226,"./ac-modal-basic/dataAttributes":227}],224:[function(t,e,n){"use strict";function i(t,e){c.call(this),this.options=s.defaults(h,t),this.renderer=new u(e),this.opened=!1,this._keysToClose=[l.ESCAPE],this._attachedKeysToClose=[],this.close=this.close.bind(this)}var r={addEventListener:t("@marcom/ac-dom-events/addEventListener"),removeEventListener:t("@marcom/ac-dom-events/removeEventListener"),target:t("@marcom/ac-dom-events/target")},o={getScrollX:t("@marcom/ac-dom-metrics/getScrollX"),getScrollY:t("@marcom/ac-dom-metrics/getScrollY")},s={create:t("@marcom/ac-object/create"),defaults:t("@marcom/ac-object/defaults")},a=t("@marcom/ac-keyboard"),l=t("@marcom/ac-keyboard/keyMap"),c=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=t("./Renderer"),h={retainScrollPosition:!1},f=i.prototype=s.create(c.prototype);f.open=function(){this.options.retainScrollPosition&&this._saveScrollPosition(),this.opened||(this._attachEvents(),this.trigger("willopen"),this.renderer.open(),this.opened=!0,this.trigger("open"))},f.close=function(t){var e,n;if(this.opened){if(t&&"click"===t.type&&(e=r.target(t),n=this.renderer.options.dataAttributes.close,!e.hasAttribute(n)))return;this.trigger("willclose"),this._removeEvents(),this.renderer.close(),this.options.retainScrollPosition&&this._restoreScrollPosition(),this.opened=!1,this.trigger("close")}},f.render=function(){this.renderer.render()},f.appendContent=function(t,e){this.renderer.appendContent(t,e)},f.removeContent=function(t){this.renderer.removeContent(t)},f.destroy=function(){this._removeEvents(),this.renderer.destroy();for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},f.addKeyToClose=function(t){var e=this._keysToClose.indexOf(t);e===-1&&(this._keysToClose.push(t),this._bindKeyToClose(t))},f.removeKeyToClose=function(t){var e=this._keysToClose.indexOf(t);e!==-1&&this._keysToClose.splice(e,1),this._releaseKeyToClose(t)},f._bindKeyToClose=function(t){var e=this._attachedKeysToClose.indexOf(t);e===-1&&(a.onUp(t,this.close),this._attachedKeysToClose.push(t))},f._releaseKeyToClose=function(t){var e=this._attachedKeysToClose.indexOf(t);e!==-1&&(a.offUp(t,this.close),this._attachedKeysToClose.splice(e,1))},f._removeEvents=function(){this.renderer.modalElement&&r.removeEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._releaseKeyToClose,this)},f._attachEvents=function(){this.renderer.modalElement&&r.addEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._bindKeyToClose,this)},f._restoreScrollPosition=function(){window.scrollTo(this._scrollX||0,this._scrollY||0)},f._saveScrollPosition=function(){this._scrollX=o.getScrollX(),this._scrollY=o.getScrollY()},e.exports=i},{"./Renderer":225,"@marcom/ac-dom-events/addEventListener":85,"@marcom/ac-dom-events/removeEventListener":89,"@marcom/ac-dom-events/target":93,"@marcom/ac-dom-metrics/getScrollX":221,"@marcom/ac-dom-metrics/getScrollY":222,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-keyboard":218,"@marcom/ac-keyboard/keyMap":220,"@marcom/ac-object/create":234,"@marcom/ac-object/defaults":235}],225:[function(t,e,n){"use strict";var i={add:t("@marcom/ac-classlist/add"),remove:t("@marcom/ac-classlist/remove")},r={defaults:t("@marcom/ac-object/defaults")},o={remove:t("@marcom/ac-dom-nodes/remove"),isElement:t("@marcom/ac-dom-nodes/isElement")},s=t("./classNames"),a=t("./dataAttributes"),l={modalElement:null,contentElement:null,closeButton:null,classNames:s,dataAttributes:a},c=function(t){t=t||{},this.options=r.defaults(l,t),this.options.classNames=r.defaults(l.classNames,t.classNames),this.options.dataAttributes=r.defaults(l.dataAttributes,t.dataAttributes),this.modalElement=this.options.modalElement,this.contentElement=this.options.contentElement,this.closeButton=this.options.closeButton},u=c.prototype;u.render=function(){return o.isElement(this.modalElement)||(this.modalElement=this.renderModalElement(this.options.classNames.modalElement)),o.isElement(this.contentElement)||(this.contentElement=this.renderContentElement(this.options.classNames.contentElement)),this.closeButton!==!1&&(o.isElement(this.closeButton)||(this.closeButton=this.renderCloseButton(this.options.classNames.closeButton)),this.modalElement.appendChild(this.closeButton)),this.modalElement.appendChild(this.contentElement),document.body.appendChild(this.modalElement),this.modalElement},u.renderCloseButton=function(t){var e;return t=t||this.options.classNames.closeButton,e=this._renderElement("button",t),e.setAttribute(this.options.dataAttributes.close,""),e},u.renderModalElement=function(t){return t=t||this.options.classNames.modalElement,this._renderElement("div",t)},u.renderContentElement=function(t){return t=t||this.options.classNames.contentElement,this._renderElement("div",t)},u.appendContent=function(t,e){o.isElement(t)&&(void 0===arguments[1]?this.contentElement.appendChild(t):o.isElement(e)&&e.appendChild(t))},u.removeContent=function(t){t?this.modalElement.contains(t)&&o.remove(t):this._emptyContent()},u.open=function(){var t=[document.documentElement].concat(this.options.classNames.documentElement),e=[this.modalElement].concat(this.options.classNames.modalOpen);i.add.apply(null,t),i.add.apply(null,e)},u.close=function(){var t=[document.documentElement].concat(this.options.classNames.documentElement),e=[this.modalElement].concat(this.options.classNames.modalOpen);i.remove.apply(null,t),i.remove.apply(null,e)},u.destroy=function(){var t=[document.documentElement].concat(this.options.classNames.documentElement);this.modalElement&&document.body.contains(this.modalElement)&&(this.close(),document.body.removeChild(this.modalElement)),i.remove.apply(null,t);for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)},u._renderElement=function(t,e){var n=document.createElement(t),r=[n];return e&&(r=r.concat(e)),i.add.apply(null,r),n},u._emptyContent=function(){this.contentElement.innerHTML=""},e.exports=c},{"./classNames":226,"./dataAttributes":227,"@marcom/ac-classlist/add":43,"@marcom/ac-classlist/remove":48,"@marcom/ac-dom-nodes/isElement":113,"@marcom/ac-dom-nodes/remove":115,"@marcom/ac-object/defaults":235}],226:[function(t,e,n){"use strict";e.exports={modalElement:"modal",modalOpen:"modal-open",documentElement:"has-modal",contentElement:"modal-content",closeButton:"modal-close"}},{}],227:[function(t,e,n){"use strict";e.exports={close:"data-modal-close"}},{}],228:[function(t,e,n){"use strict";e.exports={Modal:t("./ac-modal/Modal"),createStandardModal:t("./ac-modal/factory/createStandardModal"),createFullViewportModal:t("./ac-modal/factory/createFullViewportModal")}},{"./ac-modal/Modal":229,"./ac-modal/factory/createFullViewportModal":230,"./ac-modal/factory/createStandardModal":231}],229:[function(t,e,n){"use strict";function i(t){o.call(this),this.options=t||{},this._modal=new r(t,this.options.renderer),this.opened=!1,this._render(),this.closeButton=this._modal.renderer.closeButton,this.modalElement=this._modal.renderer.modalElement,this.contentElement=this._modal.renderer.contentElement,this.modalElement.setAttribute("role","dialog"),this.closeButton.setAttribute("aria-label","Close"),this._circularTab=new s(this.modalElement),this._onWillOpen=this._onWillOpen.bind(this),this._onOpen=this._onOpen.bind(this),this._onWillClose=this._onWillClose.bind(this),this._onClose=this._onClose.bind(this),this._bindEvents()}var r=t("@marcom/ac-modal-basic").Modal,o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=t("@marcom/ac-accessibility/CircularTab"),a=i.prototype=Object.create(o.prototype);a.open=function(){this._modal.open(),this.opened=this._modal.opened},a.close=function(){this._modal.close()},a.appendContent=function(t){this._modal.appendContent(t)},a.removeContent=function(t){this._modal.removeContent(t)},a.destroy=function(){this._releaseEvents(),this._modal.destroy(),this._removeModalFocus(),this._circularTab.destroy(),this._focusObj=null;for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},a.addKeyToClose=function(t){this._modal.addKeyToClose(t)},a.removeKeyToClose=function(t){this._modal.removeKeyToClose(t)},a._render=function(){this._modal.render(),this._modal.renderer.modalElement.setAttribute("aria-hidden","true")},a._bindEvents=function(){this._modal.on("willopen",this._onWillOpen),this._modal.on("open",this._onOpen),this._modal.on("willclose",this._onWillClose),this._modal.on("close",this._onClose)},a._releaseEvents=function(){this._modal.off("willopen",this._onWillOpen),this._modal.off("open",this._onOpen),this._modal.off("willclose",this._onWillClose),this._modal.off("close",this._onClose)},a._onWillOpen=function(){this.trigger("willopen")},a._onOpen=function(){this.opened=this._modal.opened,this._giveModalFocus(),this.trigger("open")},a._onWillClose=function(){this.trigger("willclose"),this._removeModalFocus()},a._onClose=function(){this.opened=this._modal.opened,this.trigger("close")},a._giveModalFocus=function(){this.modalElement.removeAttribute("aria-hidden"),this._activeElement=document.activeElement,this.closeButton.focus(),this._circularTab.start()},a._removeModalFocus=function(){this._circularTab.stop(),this.modalElement.setAttribute("aria-hidden","true"),this._activeElement&&(this._activeElement.focus(),this._activeElement=null)},e.exports=i},{"@marcom/ac-accessibility/CircularTab":22,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-modal-basic":223}],230:[function(t,e,n){"use strict";function i(t){var e=new r(s);return t&&e.appendContent(t),e}var r=t("../Modal"),o=t("@marcom/ac-modal-basic").classNames,s={retainScrollPosition:!0,renderer:{classNames:{documentElement:[o.documentElement].concat("has-modal-full-viewport"),modalElement:[o.modalElement].concat("modal-full-viewport")}}};e.exports=i},{"../Modal":229,"@marcom/ac-modal-basic":223}],231:[function(t,e,n){"use strict";function i(t){var e=new r(l);t&&e.appendContent(t);var n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),c=document.createElement("div");return a.add(n,"content-table"),a.add(i,"content-cell"),a.add(o,"content-wrapper"),a.add(c,"content-padding","large-8","medium-10"),e.modalElement.setAttribute(s.close,""),o.setAttribute(s.close,""),i.setAttribute(s.close,""),n.appendChild(i),i.appendChild(o),o.appendChild(c),e.modalElement.appendChild(n),c.appendChild(e.contentElement),c.appendChild(e.closeButton),e}var r=t("../Modal"),o=t("@marcom/ac-modal-basic").classNames,s=t("@marcom/ac-modal-basic").dataAttributes,a={add:t("@marcom/ac-classlist/add")},l={renderer:{classNames:{documentElement:[o.documentElement].concat("has-modal-standard"),modalElement:[o.modalElement].concat("modal-standard")}}};e.exports=i},{"../Modal":229,"@marcom/ac-classlist/add":43,"@marcom/ac-modal-basic":223}],232:[function(t,e,n){"use strict";e.exports={clone:t("./clone"),create:t("./create"),defaults:t("./defaults"),extend:t("./extend"),getPrototypeOf:t("./getPrototypeOf"),isDate:t("./isDate"),isEmpty:t("./isEmpty"),isRegExp:t("./isRegExp"),
toQueryParameters:t("./toQueryParameters")}},{"./clone":233,"./create":234,"./defaults":235,"./extend":236,"./getPrototypeOf":237,"./isDate":238,"./isEmpty":239,"./isRegExp":240,"./toQueryParameters":241}],233:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t("@marcom/ac-polyfills/Array/isArray");var r=t("./extend"),o=Object.prototype.hasOwnProperty,s=function a(t,e){var n;for(n in e)o.call(e,n)&&(null===e[n]?t[n]=null:"object"===i(e[n])?(t[n]=Array.isArray(e[n])?[]:{},a(t[n],e[n])):t[n]=e[n]);return t};e.exports=function(t,e){return e?s({},t):r({},t)}},{"./extend":236,"@marcom/ac-polyfills/Array/isArray":void 0}],234:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){};e.exports=function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(null===t||"object"!==("undefined"==typeof t?"undefined":i(t)))throw new TypeError("Object prototype may only be an Object.");return"function"==typeof Object.create?Object.create(t):(r.prototype=t,new r)}},{}],235:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./extend");e.exports=function(t,e){if("object"!==("undefined"==typeof t?"undefined":i(t)))throw new TypeError("defaults: must provide a defaults object");if(e=e||{},"object"!==("undefined"==typeof e?"undefined":i(e)))throw new TypeError("defaults: options must be a typeof object");return r({},t,e)}},{"./extend":236}],236:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.forEach");var i=Object.prototype.hasOwnProperty;e.exports=function(){var t,e;return t=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),e=t.shift(),t.forEach(function(t){if(null!=t)for(var n in t)i.call(t,n)&&(e[n]=t[n])}),e}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],237:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.prototype.hasOwnProperty;e.exports=function(t){if(Object.getPrototypeOf)return Object.getPrototypeOf(t);if("object"!==("undefined"==typeof t?"undefined":i(t)))throw new Error("Requested prototype of a value that is not an object.");if("object"===i(this.__proto__))return t.__proto__;var e,n=t.constructor;if(r.call(t,"constructor")){if(e=n,!delete t.constructor)return null;n=t.constructor,t.constructor=e}return n?n.prototype:null}},{}],238:[function(t,e,n){"use strict";e.exports=function(t){return"[object Date]"===Object.prototype.toString.call(t)}},{}],239:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.prototype.hasOwnProperty;e.exports=function(t){var e;if("object"!==("undefined"==typeof t?"undefined":i(t)))throw new TypeError("ac-base.Object.isEmpty : Invalid parameter - expected object");for(e in t)if(r.call(t,e))return!1;return!0}},{}],240:[function(t,e,n){"use strict";e.exports=function(t){return!!window.RegExp&&t instanceof RegExp}},{}],241:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("@marcom/ac-url/joinSearchParams");e.exports=function(t){if("object"!==("undefined"==typeof t?"undefined":i(t)))throw new TypeError("toQueryParameters error: argument is not an object");return r(t,!1)}},{"@marcom/ac-url/joinSearchParams":340}],242:[function(t,e,n){"use strict";e.exports={PageVisibilityManager:t("./ac-page-visibility/PageVisibilityManager")}},{"./ac-page-visibility/PageVisibilityManager":243}],243:[function(t,e,n){"use strict";function i(){if("undefined"!=typeof document.addEventListener){var t;"undefined"!=typeof document.hidden?(this._hidden="hidden",t="visibilitychange"):"undefined"!=typeof document.mozHidden?(this._hidden="mozHidden",t="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this._hidden="msHidden",t="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this._hidden="webkitHidden",t="webkitvisibilitychange"),"undefined"==typeof document[this._hidden]?this.isHidden=!1:this.isHidden=document[this._hidden],t&&document.addEventListener(t,this._handleVisibilityChange.bind(this),!1),o.call(this)}}var r=t("@marcom/ac-object/create"),o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=i.prototype=r(o.prototype);s.CHANGED="changed",s._handleVisibilityChange=function(t){this.isHidden=document[this._hidden],this.trigger(this.CHANGED,{isHidden:this.isHidden})},e.exports=new i},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-object/create":234}],244:[function(t,e,n){"use strict";e.exports={PointerTracker:t("./ac-pointer-tracker/PointerTracker")}},{"./ac-pointer-tracker/PointerTracker":245}],245:[function(t,e,n){"use strict";function i(t,e,n){this._el=t,n=n||{},this._lockVertical=n.lockVertical!==!1,this._swipeThreshold=n.swipeThreshold||i.DEFAULT_SWIPE_THRESHOLD,this._pointerEvents=e||{},this._trackHover=n.trackHover,this._trackHover?(this._pointerEvents.down=this._pointerEvents.down||i.MOUSE_EVENTS.over,this._pointerEvents.up=this._pointerEvents.up||i.MOUSE_EVENTS.out):(this._pointerEvents.down=this._pointerEvents.down||(a?i.TOUCH_EVENTS.down:i.MOUSE_EVENTS.down),this._pointerEvents.up=this._pointerEvents.up||(a?i.TOUCH_EVENTS.up:i.MOUSE_EVENTS.up)),this._pointerEvents.out=this._pointerEvents.out||(a?i.TOUCH_EVENTS.out:i.MOUSE_EVENTS.out),this._pointerEvents.move=this._pointerEvents.move||(a?i.TOUCH_EVENTS.move:i.MOUSE_EVENTS.move),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseMove=this._onMouseMove.bind(this),l.call(this),this._el.addEventListener(this._pointerEvents.down,this._onMouseDown,s),this._setCursorStyle("grab")}var r=t("@marcom/useragent-detect"),o=r.os.android,s=!r.browser.ie&&{passive:!1},a=t("@marcom/ac-feature/touchAvailable")(),l=t("@marcom/ac-event-emitter-micro").EventEmitterMicro;i.START="start",i.END="end",i.UPDATE="update",i.SWIPE_RIGHT="swiperight",i.SWIPE_LEFT="swipeleft",i.DEFAULT_SWIPE_THRESHOLD=o?2:8,i.TOUCH_EVENTS={down:"touchstart",up:"touchend",out:"mouseout",move:"touchmove"},i.MOUSE_EVENTS={down:"mousedown",up:"mouseup",out:"mouseout",move:"mousemove",over:"mouseover"};var c=l.prototype,u=i.prototype=Object.create(c);u.destroy=function(){return this._isDragging&&this._onMouseUp(),this._el.removeEventListener(this._pointerEvents.down,this._onMouseDown),this._setCursorStyle(null),this._el=null,this._pointerEvents=null,this._lockVertical=null,this._swipeThreshold=null,this._checkForTouchScrollY=null,this._isDragging=null,this._currentX=null,this._currentY=null,this._velocityX=null,this._velocityY=null,this._lastX=null,this._lastY=null,c.destroy.call(this)},u._onMouseDown=function(t){if(!this._isDragging){this._isDragging=!0,this._setCursorStyle("grabbing"),this._el.removeEventListener(this._pointerEvents.down,this._onMouseDown),document.body.addEventListener(this._pointerEvents.up,this._onMouseUp,s),document.addEventListener(this._pointerEvents.out,this._onMouseOut,s),document.body.addEventListener(this._pointerEvents.move,this._onMouseMove,s),this._checkForTouchScrollY=this._lockVertical&&!(!t.touches||!t.touches[0]),this._checkForTouchScrollY&&(this._lastY=this._getTouchY(t));var e=this._storeAndGetValues(t);this._velocityX=e.diffX=0,this._velocityY=e.diffY=0,this.trigger(i.START,e)}},u._onMouseUp=function(t){if(this._isDragging){this._isDragging=!1,this._setCursorStyle("grab"),this._el.addEventListener(this._pointerEvents.down,this._onMouseDown,s),document.body.removeEventListener(this._pointerEvents.up,this._onMouseUp),document.removeEventListener(this._pointerEvents.out,this._onMouseOut),document.body.removeEventListener(this._pointerEvents.move,this._onMouseMove);var e;this._checkForTouchScrollY||this._trackHover?e=null:this._velocityX>this._swipeThreshold?e=i.SWIPE_LEFT:this._velocityX*-1>this._swipeThreshold&&(e=i.SWIPE_RIGHT);var n=this._storeAndGetValues(t);n.swipe=e,this.trigger(i.END,n),e&&!this._trackHover&&this.trigger(e,n)}},u._onMouseOut=function(t){t=t?t:window.event;var e=t.relatedTarget||t.toElement;e&&"HTML"!==e.nodeName||this._onMouseUp(t)},u._onMouseMove=function(t){return this._checkForTouchScrollY&&this._isVerticalTouchMove(t)?void this._onMouseUp(t):(t.preventDefault(),void this.trigger(i.UPDATE,this._storeAndGetValues(t)))},u._storeAndGetValues=function(t){if(void 0===t)return{};this._currentX=this._getPointerX(t),this._currentY=this._getPointerY(t),this._velocityX=this._lastX-this._currentX,this._velocityY=this._lastY-this._currentY;var e={x:this._currentX,y:this._currentY,lastX:this._lastX,lastY:this._lastY,diffX:this._velocityX,diffY:this._velocityY,interactionEvent:t};return this._lastX=this._currentX,this._lastY=this._currentY,e},u._getPointerX=function(t){return t.pageX?t.pageX:t.touches&&t.touches[0]?t.touches[0].pageX:t.clientX?t.clientX:0},u._getPointerY=function(t){return t.pageY?t.pageY:t.touches&&t.touches[0]?t.touches[0].pageY:t.clientY?t.clientY:0},u._getTouchX=function(t){return t.touches&&t.touches[0]?t.touches[0].pageX:0},u._getTouchY=function(t){return t.touches&&t.touches[0]?t.touches[0].pageY:0},u._isVerticalTouchMove=function(t){var e=this._getTouchX(t),n=this._getTouchY(t),i=Math.abs(e-this._lastX),r=Math.abs(n-this._lastY);return this._checkForTouchScrollY=i<r,this._checkForTouchScrollY},u._setCursorStyle=function(t){this._el.style.cursor=t},e.exports=i},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-feature/touchAvailable":171,"@marcom/useragent-detect":501}],246:[function(t,e,n){"use strict";var i=t("./utils/eventTypeAvailable"),r=t("./shared/camelCasedEventTypes"),o=t("./shared/windowFallbackEventTypes"),s=t("./shared/prefixHelper"),a={};e.exports=function l(t,e){var n,c,u;if(e=e||"div",t=t.toLowerCase(),e in a||(a[e]={}),c=a[e],t in c)return c[t];if(i(t,e))return c[t]=t;if(t in r)for(u=0;u<r[t].length;u++)if(n=r[t][u],i(n.toLowerCase(),e))return c[t]=n;for(u=0;u<s.evt.length;u++)if(n=s.evt[u]+t,i(n,e))return s.reduce(u),c[t]=n;return"window"!==e&&o.indexOf(t)?c[t]=l(t,"window"):c[t]=!1}},{"./shared/camelCasedEventTypes":250,"./shared/prefixHelper":252,"./shared/windowFallbackEventTypes":255,"./utils/eventTypeAvailable":257}],247:[function(t,e,n){"use strict";var i=t("./shared/stylePropertyCache"),r=t("./getStyleProperty"),o=t("./getStyleValue");e.exports=function(t,e){var n;if(t=r(t),!t)return!1;if(n=i[t].css,"undefined"!=typeof e){if(e=o(t,e),e===!1)return!1;n+=":"+e+";"}return n}},{"./getStyleProperty":248,"./getStyleValue":249,"./shared/stylePropertyCache":253}],248:[function(t,e,n){"use strict";var i=t("./shared/stylePropertyCache"),r=t("./shared/getStyleTestElement"),o=t("./utils/toCSS"),s=t("./utils/toDOM"),a=t("./shared/prefixHelper"),l=function(t,e){var n=o(t),r=e!==!1&&o(e);return i[t]=i[e]=i[n]=i[r]={dom:e,css:r},e};e.exports=function(t){var e,n,o,c;if(t+="",t in i)return i[t].dom;for(o=r(),t=s(t),n=t.charAt(0).toUpperCase()+t.substring(1),e="filter"===t?["WebkitFilter","filter"]:(t+" "+a.dom.join(n+" ")+n).split(" "),c=0;c<e.length;c++)if("undefined"!=typeof o.style[e[c]])return 0!==c&&a.reduce(c-1),l(t,e[c]);return l(t,!1)}},{"./shared/getStyleTestElement":251,"./shared/prefixHelper":252,"./shared/stylePropertyCache":253,"./utils/toCSS":258,"./utils/toDOM":259}],249:[function(t,e,n){"use strict";var i=t("./getStyleProperty"),r=t("./shared/styleValueAvailable"),o=t("./shared/prefixHelper"),s=t("./shared/stylePropertyCache"),a={},l=/(\([^\)]+\))/gi,c=/([^ ,;\(]+(\([^\)]+\))?)/gi;e.exports=function(t,e){var n;return e+="",!!(t=i(t))&&(r(t,e)?e:(n=s[t].css,e=e.replace(c,function(e){var i,s,c,u;if("#"===e[0]||!isNaN(e[0]))return e;if(s=e.replace(l,""),c=n+":"+s,c in a)return a[c]===!1?"":e.replace(s,a[c]);for(i=o.css.map(function(t){return t+e}),i=[e].concat(i),u=0;u<i.length;u++)if(r(t,i[u]))return 0!==u&&o.reduce(u-1),a[c]=i[u].replace(l,""),i[u];return a[c]=!1,""}),e=e.trim(),""!==e&&e))}},{"./getStyleProperty":248,"./shared/prefixHelper":252,"./shared/stylePropertyCache":253,"./shared/styleValueAvailable":254}],250:[function(t,e,n){"use strict";e.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},{}],251:[function(t,e,n){"use strict";var i;e.exports=function(){return i?(i.style.cssText="",i.removeAttribute("style")):i=document.createElement("_"),i},e.exports.resetElement=function(){i=null}},{}],252:[function(t,e,n){"use strict";var i=["-webkit-","-moz-","-ms-"],r=["Webkit","Moz","ms"],o=["webkit","moz","ms"],s=function(){this.initialize()},a=s.prototype;a.initialize=function(){this.reduced=!1,this.css=i,this.dom=r,this.evt=o},a.reduce=function(t){this.reduced||(this.reduced=!0,this.css=[this.css[t]],this.dom=[this.dom[t]],this.evt=[this.evt[t]])},e.exports=new s},{}],253:[function(t,e,n){"use strict";e.exports={}},{}],254:[function(t,e,n){"use strict";var i,r,o=t("./stylePropertyCache"),s=t("./getStyleTestElement"),a=!1,l=function(){var t;if(!a){a=!0,i="CSS"in window&&"supports"in window.CSS,r=!1,t=s();try{t.style.width="invalid"}catch(e){r=!0}}};e.exports=function(t,e){var n,a;if(l(),i)return t=o[t].css,CSS.supports(t,e);if(a=s(),n=a.style[t],r)try{a.style[t]=e}catch(c){return!1}else a.style[t]=e;return a.style[t]&&a.style[t]!==n},e.exports.resetFlags=function(){a=!1}},{"./getStyleTestElement":251,"./stylePropertyCache":253}],255:[function(t,e,n){"use strict";e.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],256:[function(t,e,n){"use strict";var i=/(-webkit-|-moz-|-ms-)|^(webkit|moz|ms)/gi;e.exports=function(t){return t=String.prototype.replace.call(t,i,""),t.charAt(0).toLowerCase()+t.substring(1)}},{}],257:[function(t,e,n){"use strict";var i={window:window,document:document};e.exports=function(t,e){var n;return t="on"+t,e in i||(i[e]=document.createElement(e)),n=i[e],t in n||"setAttribute"in n&&(n.setAttribute(t,"return;"),"function"==typeof n[t])}},{}],258:[function(t,e,n){"use strict";var i=/^(webkit|moz|ms)/gi;e.exports=function(t){return"cssfloat"===t.toLowerCase()?"float":(i.test(t)&&(t="-"+t),t.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase())}},{}],259:[function(t,e,n){"use strict";var i=/-([a-z])/g;e.exports=function(t){return"float"===t.toLowerCase()?"cssFloat":(t=t.replace(i,function(t,e){return e.toUpperCase()}),"Ms"===t.substr(0,2)&&(t="ms"+t.substring(2)),t)}},{}],260:[function(t,e,n){"use strict";function i(t){s.call(this),this.options=r(c,t),this.loadingOptions=null,this.els=[],this.loadingQueue=null,this._queueItems=[],this._queueItemsObj={},this._loadOrder=[],this._timeout=null,this._didCallLoad=!1}var r=t("@marcom/ac-object/defaults"),o=t("@marcom/ac-queue").LiveQueue,s=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=t("@marcom/ac-raf-emitter/update"),l=t("@marcom/ac-raf-emitter/draw"),c={container:document.body,includeContainer:!1},u={loadingPoolSize:8,timeout:null,imageDataAttribute:"data-progressive-image",imageAnimate:!0,imageAnimateClass:"progressive-image-animated"};i.Events={ImageLoad:"image-load",Complete:"complete"};var h=i.prototype=Object.create(s.prototype);h.load=function(t){this._didCallLoad||(this._didCallLoad=!0,this.loadingOptions=r(u,t),this.loadingQueue=new o(this.loadingOptions.loadingPoolSize),this.els=Array.from(this._getProgressiveImageElements()),this.options.includeContainer&&this.options.container.hasAttribute(this._getProgressiveImageDataAttribute())&&this.els.unshift(this.options.container),l(function(){var t,e,n=this.els.length;for(t=0;t<n;t++)e={queueItem:this.loadingQueue.enqueue(this._loadNextItem.bind(this,t),t),el:this.els[t],id:t},this._queueItems.push(e),this._queueItemsObj[t]=e,this.loadingOptions.imageAnimate&&this.els[t].classList.add(this.loadingOptions.imageAnimateClass);a(function(){this.loadingQueue.start(),"number"==typeof this.loadingOptions.timeout&&(this._timeout=setTimeout(this.cancel.bind(this),this.loadingOptions.timeout))}.bind(this))}.bind(this)))},h.setVisible=function(t){return new Promise(function(e,n){l(function(){t.removeAttribute(this._getProgressiveImageDataAttribute()),e(),t=null}.bind(this))}.bind(this))},h.cancel=function(){if(this.els){var t,e=this.els.length;for(t=0;t<e;t++)this.setVisible(this.els[t]),this.loadingOptions.imageAnimate&&l(function(){this.els[t].setAttribute("data-progressive-image-loaded","")}.bind(this,t))}this._handleLoadingComplete()},h.destroy=function(){this.cancel(),this.off(),s.prototype.destroy.call(this)},h._loadNextItem=function(t){return new Promise(function(t,e,n){var i=this._queueItemsObj[t];this._loadAndSetVisible(i.el).then(function(){var t=this._queueItems.indexOf(i);this._queueItems.splice(t,1),this._queueItemsObj[i.id]=null,e(),this._handleImageLoad(i.el),i=e=null,1===this.loadingQueue.count()&&this._handleLoadingComplete()}.bind(this))}.bind(this,t))},h._loadAndSetVisible=function(t){return new Promise(function(e,n){this.setVisible(t).then(function(){this._getBackgroundImageSrc(t).then(function(n){this._loadImage(n).then(e),t=null}.bind(this))}.bind(this))}.bind(this))},h._getBackgroundImageSrc=function(t){return new Promise(function(e,n){a(function(){var n=t.currentStyle;return n||(n=window.getComputedStyle(t,!1)),t=null,0===n.backgroundImage.indexOf("url(")?void e(n.backgroundImage.slice(4,-1).replace(/"/g,"")):void e(null)}.bind(this))}.bind(this))},h._getProgressiveImageDataAttribute=function(){return this.loadingOptions.imageDataAttribute},h._getProgressiveImageCSSQuery=function(){return"["+this._getProgressiveImageDataAttribute()+"]"},h._getProgressiveImageElements=function(){return this.options.container.querySelectorAll(this._getProgressiveImageCSSQuery())||[]},h._loadImage=function(t){return new Promise(this._loadImagePromiseFunc.bind(this,t))},h._loadImagePromiseFunc=function(t,e,n){function i(){this.removeEventListener("load",i),e(this),e=null}if(!t)return void e(null);var r=new Image;r.addEventListener("load",i),r.src=t},h._clearTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},h._handleImageLoad=function(t){l(function(){this.trigger(i.Events.ImageLoad,t),this.loadingOptions.imageAnimate&&t.setAttribute("data-progressive-image-loaded",""),t=null}.bind(this))},h._handleLoadingComplete=function(){this.loadingQueue.stop(),this._clearTimeout(),this.trigger(i.Events.Complete)},e.exports=i},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-object/defaults":235,"@marcom/ac-queue":261,"@marcom/ac-raf-emitter/draw":272,"@marcom/ac-raf-emitter/update":273}],261:[function(t,e,n){"use strict";e.exports={Queue:t("./ac-queue/Queue"),QueueItem:t("./ac-queue/QueueItem"),LiveQueue:t("./ac-queue/LiveQueue")}},{"./ac-queue/LiveQueue":262,"./ac-queue/Queue":263,"./ac-queue/QueueItem":264}],262:[function(t,e,n){"use strict";function i(t){this._queue=new r,this._maxProcesses=t||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}t("@marcom/ac-polyfills/Promise"),t("@marcom/ac-polyfills/requestAnimationFrame"),t("@marcom/ac-polyfills/Function/prototype.bind");var r=t("./Queue"),o=t("./QueueItem"),s=i.prototype;s.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},s.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},s.stop=function(){this.pause(),this.clear()},s.enqueue=function(t,e){if("function"!=typeof t)throw new Error("LiveQueue can only enqueue functions");void 0===e&&(e=r.PRIORITY_DEFAULT);var n=new o(t,e);return this.enqueueQueueItem(n)},s.enqueueQueueItem=function(t){return this._queue.enqueueQueueItem(t),this._isRunning&&0===this._rafId&&this.start(),t},s.dequeueQueueItem=function(t){return this._queue.dequeueQueueItem(t)},s.clear=function(){this._queue=new r},s.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},s.count=function(){return this._queue.count()+this.pending()},s.pending=function(){return this._maxProcesses-this._availableSlots},s.isEmpty=function(){return 0===this.count()},s._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!==this._availableSlots)){var t=this._queue.dequeue(),e=t.data();this._isPromise(e)&&(this._retainSlot(),e.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},s._retainSlot=function(){this._availableSlots--},s._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},s._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},s._isPromise=function(t){return!(!t||"function"!=typeof t.then)},e.exports=i},{"./Queue":263,"./QueueItem":264,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Promise":void 0,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],263:[function(t,e,n){"use strict";function i(){this._items=[]}var r=t("./QueueItem"),o=i.prototype;o.enqueue=function(t,e){void 0===e&&(e=i.PRIORITY_DEFAULT);var n=new r(t,e);return this.enqueueQueueItem(n)},o.enqueueQueueItem=function(t){return this._items.indexOf(t)===-1&&this._items.push(t),t},o.dequeue=function(){this._heapSort();var t=this._items.length-1,e=this._items[0];return this._items[0]=this._items[t],this._items.pop(),e},o.dequeueQueueItem=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1),t},o.peek=function(){return 0==this.count()?null:(this._heapSort(),this._items[0])},o.isEmpty=function(){return 0===this._items.length},o.count=function(){return this._items.length},o.toString=function(){for(var t=["Queue total items: "+this.count()+"\n"],e=0;e<this.count();++e)t.push(this._items[e].toString()+"\n");return t.join("")},o._heapSort=function(){for(var t=0,e=this._items.length-1;e>=0;e--)for(var n=e;n>0;){t++;var i=Math.floor((n-1)/2);if(this._items[n].compareTo(this._items[i])>=0)break;var r=this._items[n];this._items[n]=this._items[i],this._items[i]=r,n=i}},i.PRIORITY_LOW=10,i.PRIORITY_DEFAULT=5,i.PRIORITY_HIGH=1,e.exports=i},{"./QueueItem":264}],264:[function(t,e,n){"use strict";function i(t,e){this.priority=e,this.data=t,this.insertionOrder=r++}var r=0,o=i.prototype;o.compareTo=function(t){return this.priority<t.priority?-1:this.priority>t.priority?1:this.insertionOrder<t.insertionOrder?-1:1},o.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},e.exports=i},{}],265:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",o="1.0.3",s=function(){this._currentID=0};s.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},e.exports=i.share(r,o,s)},{"@marcom/ac-shared-instance":287}],266:[function(t,e,n){"use strict";function i(t){t=t||{},o.call(this),this.id=a.getNewID(),this.executor=t.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=t("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),a=t("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");r=i.prototype=Object.create(o.prototype),r.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},r.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},r.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,t},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._subscribe=function(){return this.executor.subscribe(this)},r._unsubscribe=function(){return this.executor.unsubscribe(this)},r._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},r._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},e.exports=i},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":265,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":275}],267:[function(t,e,n){"use strict";var i=t("./SingleCallRAFEmitter"),r=function(t){this.rafEmitter=new i,this.rafEmitter.on(t,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=r.prototype;o.requestAnimationFrame=function(t){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,t),this._nextFrameCallbacksLength+=2,this._currentFrameID},o.cancelAnimationFrame=function(t){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(t),this._cancelFrameIdx!==-1&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},o._onRAFExecuted=function(t){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](t.time,t)},e.exports=r},{"./SingleCallRAFEmitter":269}],268:[function(t,e,n){"use strict";var i=t("./RAFInterface"),r=function(){this.events={}},o=r.prototype;o.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].requestAnimationFrame},o.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].cancelAnimationFrame},e.exports=new r},{"./RAFInterface":267}],269:[function(t,e,n){"use strict";var i=t("./RAFEmitter"),r=function(t){i.call(this,t)},o=r.prototype=Object.create(i.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},e.exports=r},{"./RAFEmitter":266}],270:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.cancelAnimationFrame("draw")},{"./RAFInterfaceController":268}],271:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.cancelAnimationFrame("update")},{"./RAFInterfaceController":268}],272:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("draw")},{"./RAFInterfaceController":268}],273:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("update")},{"./RAFInterfaceController":268}],274:[function(t,e,n){"use strict";function i(t){t=t||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}t("@marcom/ac-polyfills/performance/now");var r;r=i.prototype,r.subscribe=function(t,e){return this._totalSubscribeCount++,this._nextFrameSubscribers[t.id]||(e?this._nextFrameSubscribersOrder.unshift(t.id):this._nextFrameSubscribersOrder.push(t.id),this._nextFrameSubscribers[t.id]=t,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},r.unsubscribe=function(t){return!!this._nextFrameSubscribers[t.id]&&(this._nextFrameSubscribers[t.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.trigger=function(t,e){var n;for(n=0;n<this._subscriberArrayLength;n++)null!==this._subscribers[this._subscribersOrder[n]]&&this._subscribers[this._subscribersOrder[n]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[n]].trigger(t,e)},r.destroy=function(){var t=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,t},r.useExternalAnimationFrame=function(t){if("boolean"==typeof t){var e=this._isUsingExternalAnimationFrame;return t&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||t||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=t,t?this._boundOnExternalAnimationFrame:e||!1}},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},r._cancel=function(){var t=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,t=!0),this._isRunning||this._reset(),t},r._onSubscribersAnimationFrameStart=function(t){var e;for(e=0;e<this._subscriberArrayLength;e++)null!==this._subscribers[this._subscribersOrder[e]]&&this._subscribers[this._subscribersOrder[e]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[e]]._onAnimationFrameStart(t)},r._onSubscribersAnimationFrameEnd=function(t){var e;for(e=0;e<this._subscriberArrayLength;e++)null!==this._subscribers[this._subscribersOrder[e]]&&this._subscribers[this._subscribersOrder[e]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[e]]._onAnimationFrameEnd(t)},r._onAnimationFrame=function(t){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=t-this.lastFrameTime,this.lastFrameTime=t,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=t,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),
this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},r._onExternalAnimationFrame=function(t){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(t)},r._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},e.exports=i},{"@marcom/ac-polyfills/performance/now":void 0}],275:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-executor:sharedRAFExecutorInstance",o="2.0.1",s=t("./RAFExecutor");e.exports=i.share(r,o,s)},{"./RAFExecutor":274,"@marcom/ac-shared-instance":287}],276:[function(t,e,n){"use strict";e.exports={Router:t("./ac-router/Router"),History:t("./ac-router/History"),Routes:t("@marcom/ac-routes").Routes,Route:t("@marcom/ac-routes").Route}},{"./ac-router/History":277,"./ac-router/Router":278,"@marcom/ac-routes":279}],277:[function(t,e,n){"use strict";function i(t){t=t||{},this.history=window.history,this.rootStripper=/^\/+|\/+$/g,this.root=t.root||"/",this.root=("/"+this.root+"/").replace(this.rootStripper,"/");var e="boolean"!=typeof t.resolveInitialHash||t.resolveInitialHash;this._pushState="boolean"!=typeof t.pushState||t.pushState,this._hashChange=t.hashChange||!1,this._setUpdateVars(e),t.autoStart&&this.start()}var r=t("@marcom/ac-object").create,o=t("@marcom/ac-dom-events"),s=t("@marcom/ac-event-emitter").EventEmitter,a=i.prototype=r(s.prototype);a._isRoot=function(t){return("/"+t+"/").replace(this.rootStripper,"/")===this.root},a._isPushStateSupported=function(){return this.history&&this.history.pushState},a._isHashChangeSupported=function(){return"onhashchange"in window},a._setUpdateVars=function(t){if(this._pushState&&this._isPushStateSupported())t&&this._hashChange&&window.location.href.indexOf("#")!==-1&&this.history.pushState({},document.title,window.location.href.replace("#","")),this._hashChange=!1;else{if(t&&this._pushState&&this._hashChange&&window.location.href.indexOf("#")<0){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname,window.location.origin+=window.location.port?":"+window.location.port:"");var e=window.location.href.substr(window.location.origin.length+this.root.length);if(e.length)return void(window.location=window.location.origin+this.root+"#"+e)}this._hashChange&&!this._isHashChangeSupported()&&(this._interval=50,this._iframe=document.createElement('<iframe src="javascript:0" tabindex="-1" style="display:none;">'),this._iframe=document.body.appendChild(this._iframe).contentWindow,this._iframe.document.open().close()),this._pushState=!1}},a._checkUrl=function(){var t=this._iframe.location.hash.substr(1);0===t.length&&(t="/"),this.fragment()!==t&&(window.location.hash="#"+t,this._ignoreHashChange=!1,this._handleHashChange())},a._handlePopState=function(t){this.trigger("popstate",{fragment:this.fragment()})},a._handleHashChange=function(t){return this._ignoreHashChange?void(this._ignoreHashChange=!1):void this.trigger("popstate",{fragment:this.fragment()})},a.canUpdate=function(){return this._pushState||this._hashChange},a.start=function(){return this.started||!this._pushState&&!this._hashChange||(this.started=!0,this._pushState?(this._handlePopState=this._handlePopState.bind(this),o.addEventListener(window,"popstate",this._handlePopState)):this._hashChange&&(this._isHashChangeSupported()?(this._handleHashChange=this._handleHashChange.bind(this),o.addEventListener(window,"hashchange",this._handleHashChange)):(this._iframe.location.hash=this.fragment(),this._checkUrl=this._checkUrl.bind(this),this._checkUrlInterval=setInterval(this._checkUrl,this._interval)))),this.started||!1},a.stop=function(){this.started&&(this.started=!1,this._pushState?o.removeEventListener(window,"popstate",this._handlePopState):this._hashChange&&(this._isHashChangeSupported()?o.removeEventListener(window,"hashchange",this._handleHashChange):this._checkUrlInterval&&(clearInterval(this._checkUrlInterval),this._checkUrlInterval=null)))},a.navigate=function(t,e){if(!this.started||!this.canUpdate())return!1;e=e||{};var n=((this._isRoot(t)?"":this.root)+t).replace(/([^:])(\/\/)/g,"$1/");return this._pushState?this.history.pushState(e,document.title,n):this._hashChange&&(this._ignoreHashChange=!0,window.location.hash="#"+t,this._isHashChangeSupported()||(this._iframe.document.open().close(),this._iframe.location.hash="#"+t)),!0},a.fragment=function(){var t="";return this._pushState?t=window.location.pathname.substr(this.root.length):this._hashChange&&(t=window.location.hash.substr(1)),""===t?"/":t},e.exports=i},{"@marcom/ac-dom-events":87,"@marcom/ac-event-emitter":162,"@marcom/ac-object":232}],278:[function(t,e,n){"use strict";function i(t){t=t||{},this._intercept=t.intercept||"[data-route]",this._interceptAttribute=t.attribute||"href",this._handleTrigger=this._handleTrigger.bind(this),this.intercept(this._intercept),this.history=t.history||new s({root:t.root,autoStart:t.autoStart,pushState:t.pushState,hashChange:t.hashChange,resolveInitialHash:t.resolveInitialHash}),a.call(this,t.routes),t.autoStart&&(this.history.started||this.history.start(),this.start())}var r=t("@marcom/ac-object").create,o=t("@marcom/ac-dom-emitter").DOMEmitter,s=t("./History"),a=(t("@marcom/ac-routes").Route,t("@marcom/ac-routes").Routes),l=i.prototype=r(a.prototype);l._handleTrigger=function(t){if(this.started){var e=t.target.getAttribute(this._interceptAttribute);e&&(/^(http|https):\/\/+/.exec(e)&&"href"===this._interceptAttribute&&(e=e.substr(e.indexOf(this.history.root)+this.history.root.length)||"/"),this.navigate(e)&&t.preventDefault())}},l._handlePopstate=function(t){this.navigate(t.fragment,!0)},l.start=function(){this.started||(this.started=!0,this.history.start(),this._handlePopstate=this._handlePopstate.bind(this),this.history.on("popstate",this._handlePopstate),this.navigate(this.history.fragment(),!0))},l.stop=function(){this.started&&(this.started=!1,this.history.stop(),this.history.off("popstate",this._handlePopstate))},l.navigate=function(t,e){return this.history.fragment()!==t||e?!(t&&!e&&!this.history.navigate(t))&&(this.match(t),!0):this.history.canUpdate()},l.intercept=function(t,e){var n=new o(e||document.body);n.on("click",t,this._handleTrigger)},e.exports=i},{"./History":277,"@marcom/ac-dom-emitter":82,"@marcom/ac-object":232,"@marcom/ac-routes":279}],279:[function(t,e,n){"use strict";e.exports={Routes:t("./ac-routes/Routes"),Route:t("./ac-routes/Route")}},{"./ac-routes/Route":280,"./ac-routes/Routes":281}],280:[function(t,e,n){"use strict";function i(t,e,n,i,r){if(this.path=t,this.callback=e,this.context=n,this.greedy=i||!1,this.priority=r||0,"number"!=typeof this.priority)throw new Error("Priority must be a Number.");this.identifierPattern="([a-zA-Z0-9\\-\\_]+)",this.tokensRe=new RegExp(":"+this.identifierPattern,"g"),this.matcher=this._createRouteMatcher(t)}var r=i.prototype;r._createRouteMatcher=function(t){if(t&&t.exec)return{pattern:t};if("/"===t)return{pattern:/^\/$/};if("string"!=typeof t)throw new Error("path must be either a string or regex");var e=this._extractRouteTokens(t),n=t.replace(this.tokensRe,this.identifierPattern),i=new RegExp(n,"g");return{pattern:i,routeTokens:e}},r._extractRouteTokens=function(t){var e=t.replace(this.tokensRe,":"+this.identifierPattern),n=new RegExp(e,"g"),i=n.exec(t);return i=i&&i.length>1?i.slice(1):null},r.match=function(t){this.matcher.pattern.lastIndex=0;var e=this.matcher.pattern.exec(t);if(e){var n=e.length?e.slice(1):[],i=this.callback;if(i&&"function"==typeof i)return i.apply(this.context||this,n),!0}return!1},e.exports=i},{}],281:[function(t,e,n){"use strict";function i(t){this._routes={},t&&this.addRoutes(t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("./Route"),s=i.prototype;s._getIndex=function(t,e,n){if(void 0!==this._routes[t])for(var i=this._routes[t].length;--i>-1;)if(this._routes[t][i].callback===e&&this._routes[t][i].context===n)return i;return-1},s.match=function(t){var e,n;for(e in this._routes)for(n=this._routes[e].length;--n>-1&&(!this._routes[e][n].match(t)||!this._routes[e][n].greedy););},s.add=function(t){if(void 0===this._routes[t.path])this._routes[t.path]=[t];else if(!this.get(t.path,t.callback,t.context)){var e,n=this._routes[t.path].length;if(n>0)for(e=0;e<n;++e)if(this._routes[t.path][e].priority>t.priority)return this._routes[t.path].splice(e,0,t),t;this._routes[t.path].push(t)}return t},s.remove=function(t){var e=this._getIndex(t.path,t.callback,t.context);return e>-1&&(this._routes[t.path].splice(e,1),t)},s.get=function(t,e,n){var i=this._getIndex(t,e,n);return i>-1&&this._routes[t][i]},s.createRoute=function(t,e,n,i,r){var s=new o(t,e,n,i,r);return this.add(s),s},s.addRoutes=function(t){if(!(t instanceof Array))throw new Error("routes must be an Array.");var e,n,i=t.length;for(e=0;e<i;++e)n=t[e],n&&"object"===("undefined"==typeof n?"undefined":r(n))&&this.add(n)},s.removeRoutes=function(t){if(!(t instanceof Array))throw new Error("routes must be an Array.");var e,n,i=t.length;for(e=0;e<i;++e)n=t[e],n&&"object"===("undefined"==typeof n?"undefined":r(n))&&this.remove(n)},s.getRoutes=function(t){return void 0===this._routes[t]?[]:this._routes[t]},e.exports=i},{"./Route":280}],282:[function(t,e,n){arguments[4][135][0].apply(n,arguments)},{"./utils/getBoundingClientRect":284,dup:135}],283:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./utils/getBoundingClientRect");e.exports=function(t,e){var n,o,s;return e?(n=r(t),t.offsetParent&&(o=r(t.offsetParent),n.top-=o.top,n.left-=o.left)):(s=i(t,e),n={top:t.offsetTop,left:t.offsetLeft,width:s.width,height:s.height}),{top:n.top,right:n.left+n.width,bottom:n.top+n.height,left:n.left}}},{"./getDimensions":282,"./utils/getBoundingClientRect":284}],284:[function(t,e,n){arguments[4][136][0].apply(n,arguments)},{dup:136}],285:[function(t,e,n){"use strict";function i(t,e){this.el=t,this._options=e||{},this._wrapper=this.el.querySelector(this._options.itemsSelector),this._items=Array.prototype.slice.call(this.el.querySelectorAll(this._options.itemSelector)),this.lastCenteredItem=this._items[0],this._isRightToLeft="rtl"===window.getComputedStyle(t).direction,this._inlineStart=this._isRightToLeft?"right":"left",this._inlineEnd=this._isRightToLeft?"left":"right",this._scrollType=this._scrollDirection(),this._usePaddles=void 0===this._options.usePaddles?a():this._options.usePaddles,this.centerItem=this.centerItem.bind(this),this._onScrollClipUpdate=this._onScrollClipUpdate.bind(this),this._init()}var r=t("@marcom/ac-dom-metrics/getDimensions"),o=t("@marcom/ac-dom-metrics/getPosition"),s=t("@marcom/ac-clip").Clip,a=t("@marcom/ac-feature/touchAvailable"),l=i.prototype;l._init=function(){this._usePaddles&&this._setupPaddles()},l.centerItem=function(t,e){this.lastCenteredItem=t;var n=r(this.el).width,i=.5*n,s=o(t).left,a=r(t).width,l=s+.5*a,c=Math.round(l-i);return e?void(this.el.scrollLeft=this._setNormalizedScroll(c)):(this._destroyCurrentClip(),this._isRightToLeft&&(c*=-1),void this._smoothScrollTo(c))},l._getPaddles=function(){var t=this._isRightToLeft?this._options.rightPaddleSelector:this._options.leftPaddleSelector,e=this._isRightToLeft?this._options.leftPaddleSelector:this._options.rightPaddleSelector;return{start:this.el.querySelector(t),end:this.el.querySelector(e)}},l._setupPaddles=function(){this.el.classList.add("with-paddles"),this._paddles=this._getPaddles(),this._children=this._wrapper.children,this._childCount=this._wrapper.children.length,this._onScrollClipComplete=this._onScrollClipComplete.bind(this),this._onPaddleStartClick=this._onPaddleStartClick.bind(this),this._paddles.start.addEventListener("click",this._onPaddleStartClick),this._onPaddleEndClick=this._onPaddleEndClick.bind(this),this._paddles.end.addEventListener("click",this._onPaddleEndClick),this._onScroll=this._onScroll.bind(this),this._wrapper.addEventListener("scroll",this._onScroll),this._updateElementMetrics=this._updateElementMetrics.bind(this),window.addEventListener("resize",this._updateElementMetrics),window.addEventListener("orientationchange",this._updateElementMetrics),this._updateElementMetrics()},l._updateElementMetrics=function(){this._wrapperWidth=this._wrapper.offsetWidth,this._contentWidth=this._wrapper.scrollWidth,this._contentWidth<=this._wrapperWidth&&(this._destroyCurrentClip(),0!==this._wrapper.scrollLeft&&(this._wrapper.scrollLeft=0)),this._scrollStart=this._wrapper.scrollLeft,this._usePaddles&&(this._paddleWidth=this._paddles.start.offsetWidth,this._updatePaddleDisplay())},l._onScroll=function(){this._lockPaddles||(this._scrollStart=this._wrapper.scrollLeft,this._updatePaddleDisplay())},l._updatePaddleDisplay=function(){var t=this._getNormalizedScroll(this._scrollStart)+this._wrapperWidth,e=1;this._paddles.start.disabled=this._getNormalizedScroll(this._scrollStart)<=e,this._paddles.end.disabled=t>=this._contentWidth-e},l._onPaddleStartClick=function(t){this._smoothScrollTo(this._getPaddleStartScrollDestination())},l._getPaddleStartScrollDestination=function(){var t,e,n=this._getNormalizedScroll(this._scrollStart);for(e=this._childCount-1;e>0;e--)if(t=this._normalizePosition(o(this._children[e])),t[this._inlineStart]<n)return t[this._inlineEnd]-this._wrapperWidth;return 0},l._onPaddleEndClick=function(t){this._smoothScrollTo(this._getPaddleEndScrollDestination())},l._getPaddleEndScrollDestination=function(){var t,e,n=this._getNormalizedScroll(this._scrollStart)+this._wrapperWidth;for(e=0;e<this._childCount;e++)if(t=this._normalizePosition(o(this._children[e])),t[this._inlineEnd]>n)return t[this._inlineStart];return this._contentWidth},l._getBoundedScrollX=function(t){var e=this._contentWidth-this._wrapperWidth;return Math.max(Math.min(t,e),0)},l._smoothScrollTo=function(t){if(this._updateElementMetrics(),!this._lockPaddles&&t!==this._scrollStart){var e={scrollLeft:this._wrapper.scrollLeft},n={scrollLeft:this._setNormalizedScroll(t)},i={ease:this._options.scrollEasing,onUpdate:this._onScrollClipUpdate};this._usePaddles&&(this._lockPaddles=!0,i.onComplete=this._onScrollClipComplete),this._clip=s.to(e,this._options.scrollDuration,n,i)}},l._onScrollClipUpdate=function(t){this._scrollStart=this._wrapper.scrollLeft=Math.round(t.target().scrollLeft)},l._onScrollClipComplete=function(){this._updatePaddleDisplay(),this._lockPaddles=!1},l._scrollDirection=function(){var t="reverse",e=document.createElement("div");return e.style.cssText="width:2px; height:1px; position:absolute; top:-1000px; overflow:scroll; font-size: 14px;",e.style.direction="rtl",e.innerHTML="test",document.body.appendChild(e),e.scrollLeft>0?t="default":(e.scrollLeft=1,0===e.scrollLeft&&(t="negative")),document.body.removeChild(e),t},l._getNormalizedScroll=function(t){if(!this._isRightToLeft)return t;var e=Math.abs(t);return"default"===this._scrollType&&(e=this._contentWidth-this._wrapperWidth-e),e},l._setNormalizedScroll=function(t){var e=this._getBoundedScrollX(t);return this._isRightToLeft&&"reverse"!==this._scrollType?"negative"===this._scrollType?-e:-(e-this._contentWidth+this._wrapperWidth):e},l._normalizePosition=function(t){return this._isRightToLeft?{top:t.top,right:this._wrapperWidth-t.right+this._paddleWidth,bottom:t.bottom,left:this._wrapperWidth-t.left+this._paddleWidth}:{top:t.top,right:t.right-this._paddleWidth,bottom:t.bottom,left:t.left-this._paddleWidth}},l._destroyCurrentClip=function(){this._clip&&this._clip.playing()&&(this._clip.destroy(),this._lockPaddles=!1)},l._destroyPaddles=function(){this._paddles.start.removeEventListener("click",this._onPaddleStartClick),this._paddles.end.removeEventListener("click",this._onPaddleEndClick),this._wrapper.removeEventListener("scroll",this._onScroll),this._paddles=null},l.destroy=function(){this._items=null,this._destroyCurrentClip(),this._destroyPaddles(),window.removeEventListener("resize",this._updateElementMetrics),window.removeEventListener("orientationchange",this._updateElementMetrics)},e.exports=i},{"@marcom/ac-clip":51,"@marcom/ac-dom-metrics/getDimensions":282,"@marcom/ac-dom-metrics/getPosition":283,"@marcom/ac-feature/touchAvailable":171}],286:[function(t,e,n){"use strict";var i=t("./ScrollContainer");e.exports={ScrollContainer:i}},{"./ScrollContainer":285}],287:[function(t,e,n){"use strict";e.exports={SharedInstance:t("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":288}],288:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=window,o="AC",s="SharedInstance",a=r[o],l=function(){var t={};return{get:function(e,n){var i=null;return t[e]&&t[e][n]&&(i=t[e][n]),i},set:function(e,n,i){return t[e]||(t[e]={}),"function"==typeof i?t[e][n]=new i:t[e][n]=i,t[e][n]},share:function(t,e,n){var i=this.get(t,e);return i||(i=this.set(t,e,n)),i},remove:function(e,n){var r="undefined"==typeof n?"undefined":i(n);if("string"===r||"number"===r){if(!t[e]||!t[e][n])return;return void(t[e][n]=null)}t[e]&&(t[e]=null)}}}();a||(a=r[o]={}),a[s]||(a[s]=l),e.exports=a[s]},{}],289:[function(t,e,n){"use strict";e.exports={getContentDimensions:t("./getContentDimensions"),getDimensions:t("./getDimensions"),getPagePosition:t("./getPagePosition"),getPercentInViewport:t("./getPercentInViewport"),getPixelsInViewport:t("./getPixelsInViewport"),getPosition:t("./getPosition"),getScrollX:t("./getScrollX"),getScrollY:t("./getScrollY"),getViewportPosition:t("./getViewportPosition"),isInViewport:t("./isInViewport")}},{"./getContentDimensions":290,"./getDimensions":291,"./getPagePosition":292,"./getPercentInViewport":293,"./getPixelsInViewport":294,"./getPosition":295,"./getScrollX":296,"./getScrollY":297,"./getViewportPosition":298,"./isInViewport":299}],290:[function(t,e,n){"use strict";var i=t("./utils/getBoundingClientRect");e.exports=function(t,e){var n=1;return e&&(n=i(t).width/t.offsetWidth),{width:t.scrollWidth*n,height:t.scrollHeight*n}}},{"./utils/getBoundingClientRect":300}],291:[function(t,e,n){arguments[4][135][0].apply(n,arguments)},{"./utils/getBoundingClientRect":300,dup:135}],292:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./utils/getBoundingClientRect"),o=t("./getScrollX"),s=t("./getScrollY");e.exports=function(t,e){var n,a,l,c;if(e)return n=r(t),a=o(),l=s(),{top:n.top+l,right:n.right+a,bottom:n.bottom+l,left:n.left+a};for(c=i(t,e),n={top:t.offsetTop,left:t.offsetLeft,width:c.width,height:c.height};t=t.offsetParent;)n.top+=t.offsetTop,n.left+=t.offsetLeft;return{top:n.top,right:n.left+n.width,bottom:n.top+n.height,left:n.left}}},{"./getDimensions":291,"./getScrollX":296,"./getScrollY":297,"./utils/getBoundingClientRect":300}],293:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./getPixelsInViewport");e.exports=function(t,e){var n=r(t,e),o=i(t,e).height;return n/o}},{"./getDimensions":291,"./getPixelsInViewport":294}],294:[function(t,e,n){"use strict";var i=t("./getViewportPosition");e.exports=function(t,e){var n,r=document.documentElement.clientHeight,o=i(t,e);return o.top>=r||o.bottom<=0?0:(n=o.bottom-o.top,o.top<0&&(n+=o.top),o.bottom>r&&(n-=o.bottom-r),n)}},{"./getViewportPosition":298}],295:[function(t,e,n){arguments[4][283][0].apply(n,arguments)},{"./getDimensions":291,"./utils/getBoundingClientRect":300,dup:283}],296:[function(t,e,n){arguments[4][221][0].apply(n,arguments)},{dup:221}],297:[function(t,e,n){arguments[4][222][0].apply(n,arguments)},{dup:222}],298:[function(t,e,n){"use strict";var i=t("./getPagePosition"),r=t("./utils/getBoundingClientRect"),o=t("./getScrollX"),s=t("./getScrollY");e.exports=function(t,e){var n,a,l;return e?(n=r(t),{top:n.top,right:n.right,bottom:n.bottom,left:n.left}):(n=i(t),a=o(),l=s(),{top:n.top-l,right:n.right-a,bottom:n.bottom-l,left:n.left-a})}},{"./getPagePosition":292,"./getScrollX":296,"./getScrollY":297,"./utils/getBoundingClientRect":300}],299:[function(t,e,n){"use strict";var i=t("./getPixelsInViewport"),r=t("./getPercentInViewport");e.exports=function(t,e,n){var o;return n=n||0,"string"==typeof n&&"px"===n.slice(-2)?(n=parseInt(n,10),o=i(t,e)):o=r(t,e),o>0&&o>=n}},{"./getPercentInViewport":293,"./getPixelsInViewport":294}],300:[function(t,e,n){arguments[4][136][0].apply(n,arguments)},{dup:136}],301:[function(t,e,n){"use strict";var i=t("@marcom/ac-event-emitter-micro"),r=t("@marcom/ac-dom-metrics"),o=t("@marcom/ac-keyboard/Keyboard"),s={num:37,string:"ArrowLeft"},a={num:38,string:"ArrowUp"},l={num:39,string:"ArrowRight"},c={num:40,string:"ArrowDown"},u=[s,l,c,l],h=function(t){if(t.which)return t.which;for(var e=t.key?t.key:t.code,n=0,i=u.length;n<i;n++)if(u[n].string===e)return u[n].num;return-1},f={min:0,max:1,step:1,value:0,orientation:"horizontal",renderedPosition:!1,template:'<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-thumb"></div>\n</div>',keyboardMaxStepPercentage:.05,keyboardStepMultiplier:1.25,containerClass:"ac-slider-container",grabbedClass:"ac-slider-grabbed"},d=Object.keys(f),p=function(t,e){this.options=Object.assign({},f,e),this.model=Object.create(this.options),this.el=t;var n=void 0!==this.options.keyboardContext?this.options.keyboardContext:this.el;null!==n&&(this._keyboard=new o(n),this._keyDown={}),t.classList.add(this.model.containerClass),t.innerHTML=this.model.template,i.EventEmitterMicro.call(this),this._initialize()};p.prototype=Object.create(i.EventEmitterMicro.prototype);var m=p.prototype;m._addGrabClass=function(){this.el.classList.add(this.model.grabbedClass)},m._removeGrabClass=function(){this.el.classList.remove(this.model.grabbedClass)},m._addEventListeners=function(){this._addEventListener(this.el,"mousedown",this._onMouseDown),this._addEventListener(this.el,"touchstart",this._onTouchStart),this._addEventListener(this.el,"mouseover",this._onMouseOver),this._addEventListener(this.el,"mouseleave",this._onMouseLeave),this._keyboard&&("horizontal"===this.model.orientation?(this._keyboard.onDown(l.num,this.stepUp),this._keyboard.onDown(s.num,this.stepDown)):(this._keyboard.onDown(c.num,this.stepDown),this._keyboard.onDown(a.num,this.stepUp)))},m._addEventListener=function(t,e,n){t.addEventListener(e,n)},m._bindMethods=function(){this._addGrabClass=this._addGrabClass.bind(this),this._removeGrabClass=this._removeGrabClass.bind(this),this.stepDown=this.stepDown.bind(this),this.stepUp=this.stepUp.bind(this),this._triggerRelease=this._triggerRelease.bind(this),this._preventDefault=this._preventDefault.bind(this),this._onMouseDown=this._bindMethod(this._onMouseDown,this),this._onTouchStart=this._bindMethod(this._onTouchStart,this),this._onMouseOver=this._bindMethod(this._onMouseOver,this),this._onMouseLeave=this._bindMethod(this._onMouseLeave,this),this._onTouchEnd=this._bindMethod(this._onTouchEnd,this),this._onMouseUp=this._bindMethod(this._onMouseUp,this),this._onMouseMove=this._bindMethod(this._onMouseMove,this),this._onTouchMove=this._bindMethod(this._onTouchMove,this)},m._bindMethod=function(t,e){return t.bind(e)},m._correctValueMinMax=function(t,e,n){return t>n&&(t=n),t<e&&(t=e),t},m._calculateStepsToValue=function(t,e){return Math.abs(t-e)},m._calculateMaxSteps=function(t,e){return Math.abs(e-t)},m._calculateStepsEqualToPercentage=function(t,e){return t/100*e},m._calculateNextStepInRange=function(t,e,n,i){var r=this._calculateMaxSteps(e,n),o=this._calculateStepsToValue(t,e),s=e+Math.floor(r/i)*i;return t=Math.min(s,e+Math.round(o/i)*i)},m._dispatchEvent=function(t,e){t.dispatchEvent(new CustomEvent(e))},m.disableUserControls=function(){this._removeEventListeners()},m.enableUserControls=function(){this._addEventListeners()},m._getNextValue=function(t,e,n,i){return t=this._correctValueMinMax(t,e,n),"auto"!==i&&(t=this._calculateNextStepInRange(t,e,n,i)),t},m.getOrientation=function(){return this.model.orientation},m.getValue=function(){return this.model.value},m.getMin=function(){return this.model.min},m.getMax=function(){return this.model.max},m.getStep=function(){return this.model.step},m.getClientXValue=function(t,e){var n=this._getClientXFromEvent(t),i=null!==e?r.getDimensions(e||this.thumbElement):{width:0,height:0},o=r.getDimensions(this.runnableTrackElement),s=n-this.runnableTrackElement.getBoundingClientRect().left-Math.round(i.width/2),a=o.width-i.width,l=s/a*100,c=this._calculateMaxSteps(this.getMin(),this.getMax()),u=this._calculateStepsEqualToPercentage(l,c);return this.getMin()+u},m.getClientYValue=function(t){var e=this._getClientYFromEvent(t),n=r.getDimensions(this.thumbElement),i=r.getDimensions(this.runnableTrackElement),o=r.getViewportPosition(this.runnableTrackElement,this.model.renderedPosition),s=i.height-n.height,a=s-(e-o.top-n.height/2),l=a/(i.height-n.height)*100,c=this._calculateMaxSteps(this.model.min,this.model.max),u=this._calculateStepsEqualToPercentage(l,c);return this.model.min+u},m.getClientValue=function(t){t=t.originalEvent||t;var e;return e="horizontal"===this.model.orientation?this.getClientXValue(t):this.getClientYValue(t)},m._getClientXFromEvent=function(t){return t.touches?t.touches[0].clientX:t.clientX},m._getClientYFromEvent=function(t){return t.touches?t.touches[0].clientY:t.clientY},m._initialize=function(){this._setNodeReferences(),this.setValue(this.model.value),this._bindMethods(),this._addEventListeners()},m._onMouseLeave=function(){this._preventDocumentMouseUpDispatch=!1},m._onMouseDown=function(t){this._addGrabClass(),this._addEventListener(document,"mouseup",this._onMouseUp),this._addEventListener(document,"mousemove",this._onMouseMove);var e=this.getClientValue(t);this.trigger("grab",this.getValue()),this.setValue(e)},m._onMouseUp=function(){this._removeGrabClass(),this._removeEventListener(document,"mouseup",this._onMouseUp),this._removeEventListener(document,"mousemove",this._onMouseMove),this.trigger("release",this.getValue()),this._preventDocumentMouseUpDispatch||this._dispatchEvent(this.el,"mouseup")},m._onMouseOver=function(){this._preventDocumentMouseUpDispatch=!0},m._onTouchEnd=function(){this._removeGrabClass(),this._removeEventListener(document,"touchend",this._onTouchEnd),this._removeEventListener(document,"touchmove",this._onTouchMove),this.trigger("release",this.getValue()),this._preventDocumentMouseUpDispatch||this._dispatchEvent(this.el,"touchend")},m._onTouchStart=function(t){this._addGrabClass();var e=this.getClientValue(t);this._addEventListener(document,"touchend",this._onTouchEnd),this._addEventListener(document,"touchmove",this._onTouchMove),this.trigger("grab",this.getValue()),this.setValue(e)},m._onMouseMove=function(t){var e=this.getClientValue(t);this.setValue(e)},m._onTouchMove=function(t){t.preventDefault&&t.preventDefault();var e=this.getClientValue(t);this.setValue(e)},m._getElementOrientationOffsetValue=function(t,e){return"horizontal"===e?r.getDimensions(t).width:r.getDimensions(t).height},m._getAvailableRunnableTrack=function(t,e){var n=this._getElementOrientationOffsetValue(this.thumbElement,e);return t-n},m._getPercentageByValue=function(t,e){return t=this._calculateStepsToValue(t,this.getMin()),e=this._calculateMaxSteps(this.getMin(),this.getMax()),t/e*100},m._getPercentageOfRunnableTrack=function(t){var e=this.getOrientation(),n=this._getElementOrientationOffsetValue(this.runnableTrackElement,e),i=this._getAvailableRunnableTrack(n,e),r=this._getPercentageByValue(t,this.getMax()),o=r/100*i;return o/n*100},m._onChange=function(t){var e=this._getPercentageOfRunnableTrack(t);isNaN(e)||("horizontal"===this.getOrientation()?this.thumbElement.style.left=e+"%":this.thumbElement.style.bottom=e+"%",this.trigger("change",this.getValue()))},m._removeEventListeners=function(){this._removeEventListener(this.el,"mousedown",this._onMouseDown),this._removeEventListener(this.el,"touchstart",this._onTouchStart),this._removeEventListener(this.el,"mouseover",this._onMouseOver),this._removeEventListener(this.el,"mouseleave",this._onMouseLeave),this._removeEventListener(document,"touchend",this._onMouseUp)},m._removeEventListener=function(t,e,n){t.removeEventListener(e,n)},m._setNodeReferences=function(){this.runnableTrackElement=this.el.querySelector(".ac-slider-runnable-track"),this.thumbElement=this.el.querySelector(".ac-slider-thumb")},m.setOrientation=function(t){this._set("orientation",t)},m._triggerRelease=function(t){this._preventDefault(t),this.trigger("release",this.getValue()),this._keyDown[h(t)]=0},m._preventDefault=function(t){t.preventDefault(),t.stopPropagation()},m._step=function(t,e){this._preventDefault(t),this.el.focus();var n=this._keyDown[h(t)]||0;n?Math.abs(this._keyDown[h(t)])<Math.abs(this.model.max*this.model.keyboardMaxStepPercentage)&&(n*=this.model.keyboardStepMultiplier):(this.trigger("grab",this.getValue()),n=this.getStep(),n="auto"!==n?n:this._cachedMaxStep,e||(n*=-1),this._keyboard.onceUp(h(t),this._triggerRelease)),this._keyDown[h(t)]=n,this.setValue(this.getValue()+n)},m.stepUp=function(t){this._step(t,!0)},m.stepDown=function(t){this._step(t,!1)},m.setValue=function(t){t=this._getNextValue(t,this.getMin(),this.getMax(),this.getStep()),this._set("value",t),this.el.setAttribute("aria-valuenow",t),this._onChange(t)},m.setMin=function(t){this._set("min",t),this.el.setAttribute("aria-valuemin",t)},m.setMax=function(t){this._set("max",t),this.el.setAttribute("aria-valuemax",t),this._cachedMaxStep=t/100},m.setStep=function(t){this._set("step",t)},m._set=function(t,e){if(d.indexOf(t)>-1&&this.model[t]!==e){var n=this.model[t];this.model[t]=e,this.trigger("change:model:"+t,{previous:n,current:e})}},m._removeEventListeners=function(){this._removeEventListener(this.el,"mousedown",this._onMouseDown),this._removeEventListener(this.el,"touchstart",this._onTouchStart),this._removeEventListener(this.el,"mouseover",this._onMouseOver),this._removeEventListener(this.el,"mouseleave",this._onMouseLeave),this._removeEventListener(this.el,"touchend",this._onTouchEnd),this._removeEventListener(document,"touchend",this._onMouseUp),"horizontal"===this.model.orientation?(this._keyboard.offDown(l.num,this.stepUp),this._keyboard.offDown(s.num,this.stepDown),this._keyboard.offUp(s.num,this._triggerRelease),this._keyboard.offUp(l.num,this._triggerRelease)):(this._keyboard.offDown(c.num,this.stepDown),this._keyboard.offDown(a.num,this.stepUp),this._keyboard.offUp(c.num,this._triggerRelease),this._keyboard.offUp(a.num,this._triggerRelease))},m.destroy=function(){this._removeEventListeners(),this._keyboard&&this._keyboard.destroy(),i.EventEmitterMicro.prototype.destroy.call(this)},e.exports=p},{"@marcom/ac-dom-metrics":289,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-keyboard/Keyboard":217}],302:[function(t,e,n){"use strict";e.exports.Slider=t("./Slider")},{"./Slider":301}],303:[function(t,e,n){"use strict";e.exports=t("./lib/")},{"./lib/":304}],304:[function(t,e,n){"use strict";var i=t("./stringify"),r=t("./parse");e.exports={stringify:i,parse:r}},{"./parse":305,"./stringify":306}],305:[function(t,e,n){"use strict";var i=t("./utils"),r={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};r.parseValues=function(t,e){for(var n={},r=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),o=0,s=r.length;o<s;++o){var a=r[o],l=a.indexOf("]=")===-1?a.indexOf("="):a.indexOf("]=")+1;if(l===-1)n[i.decode(a)]="";else{var c=i.decode(a.slice(0,l)),u=i.decode(a.slice(l+1));n.hasOwnProperty(c)?n[c]=[].concat(n[c]).concat(u):n[c]=u}}return n},r.parseObject=function(t,e,n){if(!t.length)return e;var i=t.shift(),o={};if("[]"===i)o=[],o=o.concat(r.parseObject(t,e,n));else{
var s="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(s,10),l=""+a;!isNaN(a)&&i!==s&&l===s&&a>=0&&a<=n.arrayLimit?(o=[],o[a]=r.parseObject(t,e,n)):o[s]=r.parseObject(t,e,n)}return o},r.parseKeys=function(t,e,n){if(t){var i=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,s=i.exec(t);if(!Object.prototype.hasOwnProperty(s[1])){var a=[];s[1]&&a.push(s[1]);for(var l=0;null!==(s=o.exec(t))&&l<n.depth;)++l,Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||a.push(s[1]);return s&&a.push("["+t.slice(s.index)+"]"),r.parseObject(a,e,n)}}},e.exports=function(t,e){if(""===t||null===t||"undefined"==typeof t)return{};e=e||{},e.delimiter="string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:r.delimiter,e.depth="number"==typeof e.depth?e.depth:r.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:r.arrayLimit,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:r.parameterLimit;for(var n="string"==typeof t?r.parseValues(t,e):t,o={},s=Object.keys(n),a=0,l=s.length;a<l;++a){var c=s[a],u=r.parseKeys(c,n[c],e);o=i.merge(o,u)}return i.compact(o)}},{"./utils":307}],306:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./utils"),o={delimiter:"&",indices:!0};o.stringify=function(t,e,n){if(r.isBuffer(t)?t=t.toString():t instanceof Date?t=t.toISOString():null===t&&(t=""),"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return[encodeURIComponent(e)+"="+encodeURIComponent(t)];var i=[];if("undefined"==typeof t)return i;for(var s=Object.keys(t),a=0,l=s.length;a<l;++a){var c=s[a];i=!n.indices&&Array.isArray(t)?i.concat(o.stringify(t[c],e,n)):i.concat(o.stringify(t[c],e+"["+c+"]",n))}return i},e.exports=function(t,e){e=e||{};var n="undefined"==typeof e.delimiter?o.delimiter:e.delimiter;e.indices="boolean"==typeof e.indices?e.indices:o.indices;var r=[];if("object"!==("undefined"==typeof t?"undefined":i(t))||null===t)return"";for(var s=Object.keys(t),a=0,l=s.length;a<l;++a){var c=s[a];r=r.concat(o.stringify(t[c],c,e))}return r.join(n)}},{"./utils":307}],307:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.arrayToObject=function(t){for(var e={},n=0,i=t.length;n<i;++n)"undefined"!=typeof t[n]&&(e[n]=t[n]);return e},n.merge=function(t,e){if(!e)return t;if("object"!==("undefined"==typeof e?"undefined":i(e)))return Array.isArray(t)?t.push(e):t[e]=!0,t;if("object"!==("undefined"==typeof t?"undefined":i(t)))return t=[t].concat(e);Array.isArray(t)&&!Array.isArray(e)&&(t=n.arrayToObject(t));for(var r=Object.keys(e),o=0,s=r.length;o<s;++o){var a=r[o],l=e[a];t[a]?t[a]=n.merge(t[a],l):t[a]=l}return t},n.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},n.compact=function(t,e){if("object"!==("undefined"==typeof t?"undefined":i(t))||null===t)return t;e=e||[];var r=e.indexOf(t);if(r!==-1)return e[r];if(e.push(t),Array.isArray(t)){for(var o=[],s=0,a=t.length;s<a;++s)"undefined"!=typeof t[s]&&o.push(t[s]);return o}var l=Object.keys(t);for(s=0,a=l.length;s<a;++s){var c=l[s];t[c]=n.compact(t[c],e)}return t},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],308:[function(t,e,n){"use strict";e.exports={Link:t("./ac-social/Link"),Dialog:t("./ac-social/Dialog"),Focus:t("./ac-social/Focus"),Debug:t("./ac-social/Debug")}},{"./ac-social/Debug":309,"./ac-social/Dialog":310,"./ac-social/Focus":311,"./ac-social/Link":312}],309:[function(t,e,n){"use strict";function i(){this.types={};var t;for(t in r)r.hasOwnProperty(t)&&(o[t]=t,this.addType(t,r[t].getDialogDebugData.bind(r[t])))}var r=t("./NetworkActions"),o=i.prototype;o.create=function(t,e){e=e||{};var n=this.types[t];if(n)return n(e)},o.addType=function(t,e){return this.types[t]=e,this},o.removeType=function(){return this.types[name]=null,this},e.exports=new i},{"./NetworkActions":313}],310:[function(t,e,n){"use strict";function i(){this.types={};var t;for(t in r)r.hasOwnProperty(t)&&(o[t]=t,this.addType(t,r[t].generateDialog.bind(r[t])))}var r=t("./NetworkActions"),o=i.prototype;o.create=function(t,e){e=e||{};var n=this.types[t];if(n)return n(e)},o.addType=function(t,e){return this.types[t]=e,this},o.removeType=function(){return this.types[name]=null,this},e.exports=new i},{"./NetworkActions":313}],311:[function(t,e,n){"use strict";e.exports=function(t){if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}else if(t.setSelectionRange)t.setSelectionRange(0,t.value.length);else if(document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(t),n.select()}}},{}],312:[function(t,e,n){"use strict";function i(){this.types={};var t;for(t in r)r.hasOwnProperty(t)&&(s[t]=t,this.addType(t,r[t].generateLink.bind(r[t])))}var r=t("./NetworkActions"),o=t("./network-actions/DefaultNetworkAction"),s=i.prototype;s.create=function(t,e,n){e=e||{};var i=this.types[t];if(i)return i(e,n)},s.createFromAnchor=function(t){var e,n=t.getAttribute("data-network-action");for(e in r)if(r.hasOwnProperty(e)&&n===r[e].id)return void r[e].enhanceLinkEngagement(t);o.enhanceLinkEngagement(t)},s.addType=function(t,e){return this.types[t]=e,this},s.removeType=function(){return this.types[name]=null,this},e.exports=new i},{"./NetworkActions":313,"./network-actions/DefaultNetworkAction":314}],313:[function(t,e,n){"use strict";var i=t("./network-actions/FacebookShare"),r=t("./network-actions/PinterestShare"),o=t("./network-actions/TumblrShare"),s=t("./network-actions/TwitterFavorite"),a=t("./network-actions/TwitterReply"),l=t("./network-actions/TwitterRetweet"),c=t("./network-actions/TwitterTweet"),u=t("./network-actions/WeiboShare"),h=t("./network-actions/QQWeiboShare"),f=t("./network-actions/QZoneShare"),d=t("./network-actions/RenrenShare"),p=t("./network-actions/EMailShare");e.exports={FACEBOOK_SHARE:i,PINTEREST_SHARE:r,TUMBLR_SHARE:o,TWITTER_FAVORITE:s,TWITTER_REPLY:a,TWITTER_RETWEET:l,TWITTER_TWEET:c,WEIBO_SHARE:u,QQWEIBO_SHARE:h,QZONE_SHARE:f,RENREN_SHARE:d,EMAIL_SHARE:p}},{"./network-actions/EMailShare":315,"./network-actions/FacebookShare":316,"./network-actions/PinterestShare":318,"./network-actions/QQWeiboShare":319,"./network-actions/QZoneShare":320,"./network-actions/RenrenShare":321,"./network-actions/TumblrShare":322,"./network-actions/TwitterFavorite":323,"./network-actions/TwitterReply":324,"./network-actions/TwitterRetweet":325,"./network-actions/TwitterTweet":326,"./network-actions/WeiboShare":327}],314:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return t};e.exports=new i(r,{baseLinkPath:""})},{"./NetworkAction":317}],315:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={url:t.url};return t.title&&(e.subject=t.title),t.description?e.body=t.description+"\r\n\r\n"+t.url:e.body=t.url,e};e.exports=new i(r,{id:"email-share",baseLinkPath:"mailto:",preventDialog:!0})},{"./NetworkAction":317}],316:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{u:t.url}};e.exports=new i(r,{id:"facebook-share",baseLinkPath:"https://www.facebook.com/sharer/sharer.php",dialogDimensions:{width:555,height:368}})},{"./NetworkAction":317}],317:[function(t,e,n){"use strict";var i,r=t("qs"),o=function(t,e){e=e||{},this.baseLinkPath=e.baseLinkPath,e.dialogDimensions&&(this.dialogDimensions=e.dialogDimensions),e.id&&(this.id=e.id),e.preventDialog&&(this.preventDialog=e.preventDialog),this.normalizeData=t};i=o.prototype,i.dataAttributeName="network-action",i.id="network-action",i.normalizeData=function(t){return t},i.dialogDimensions={width:500,height:500},i.generateLinkURL=function(t){var e=this.normalizeData(t),n=r.stringify(e),i=this.baseLinkPath;return n.length>0&&(i=i+"?"+n),i},i.generateLink=function(t,e){var n=this.generateLinkURL(t);return e=e||document.createElement("A"),e.setAttribute("href",n),e.setAttribute("target","_blank"),e.setAttribute("data-"+this.dataAttributeName,this.id),this.enhanceLinkEngagement(e,n),e},i.generateDialog=function(t){var e=this.generateLinkURL(t);this._triggerDialog(e)},i.enhanceLinkEngagement=function(t,e){e=e||t.getAttribute("href"),t.addEventListener("click",this._onLinkEngaged.bind(this,e))},i.getDialogOptions=function(){var t,e="status=1",n={width:this.dialogDimensions.width,height:this.dialogDimensions.height};n.top=(window.screen.availHeight-n.height)/2,n.left=(window.screen.availWidth-n.width)/2;for(t in n)n.hasOwnProperty(t)&&(e+=", "+t+"="+n[t]);return e},i.getDialogDebugData=function(t){return{data:this.normalizeData(t),dialogUrl:this.generateLinkURL(t)}},i._triggerDialog=function(t){return this.preventDialog?void(window.location.href=t):void window.open(t,"_blank",this.getDialogOptions())},i._onLinkEngaged=function(t,e){e.preventDefault(),this._triggerDialog(t)},e.exports=o},{qs:303}],318:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={url:t.url,description:t.description};return t.media&&(e.media=t.media),e};e.exports=new i(r,{id:"pinterest-share",baseLinkPath:"http://www.pinterest.com/pin/create/button",dialogDimensions:{width:750,height:450}})},{"./NetworkAction":317}],319:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title,pic:t.media}};e.exports=new i(r,{id:"qq-weibo-share",baseLinkPath:"http://v.t.qq.com/share/share.php",dialogDimensions:{width:658,height:506}})},{"./NetworkAction":317}],320:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title,pics:t.media,summary:t.description}};e.exports=new i(r,{id:"qzone-share",baseLinkPath:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",dialogDimensions:{width:620,height:645}})},{"./NetworkAction":317}],321:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title}};e.exports=new i(r,{id:"renren-share",baseLinkPath:"http://www.connect.renren.com/share/sharer",dialogDimensions:{width:500,height:315}})},{"./NetworkAction":317}],322:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={clickthru:t.url,caption:t.description};return t.media&&(e.source=t.media),e};e.exports=new i(r,{id:"tumblr-share",baseLinkPath:"http://www.tumblr.com/share/photo",dialogDimensions:{width:450,height:432}})},{"./NetworkAction":317}],323:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={tweet_id:t.messageId};return e};e.exports=new i(r,{id:"twitter-favorite",baseLinkPath:"https://twitter.com/intent/favorite",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":317}],324:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={in_reply_to:t.messageId};return t.hashtags&&(e.hashtags=t.hashtags),e};e.exports=new i(r,{id:"twitter-reply",baseLinkPath:"https://twitter.com/intent/tweet",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":317}],325:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={tweet_id:t.messageId};return e};e.exports=new i(r,{id:"twitter-retweet",baseLinkPath:"https://twitter.com/intent/retweet",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":317}],326:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={url:t.url,text:t.description};return t.hashtags&&(e.hashtags=t.hashtags),e};e.exports=new i(r,{id:"twitter-tweet",baseLinkPath:"https://twitter.com/intent/tweet",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":317}],327:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title,pic:t.media}};e.exports=new i(r,{id:"weibo-share",baseLinkPath:"http://service.weibo.com/share/share.php",dialogDimensions:{width:650,height:426}})},{"./NetworkAction":317}],328:[function(t,e,n){"use strict";var i=t("@marcom/ac-eclipse").Clip,r=t("@marcom/ac-feature/cssPropertyAvailable");e.exports=function(t,e,n,o,s){if(r("opacity")){if(s=s||{},o)return s.autoplay=s.autoplay!==!1||s.autoplay,s.propsFrom=s.propsFrom||{},s.propsFrom.opacity=e,s.autoplay?i.to(t,o,{opacity:n},s):new i(t,o,{opacity:n},s);t.style.opacity=n,"function"==typeof s.onStart&&s.onStart(),"function"==typeof s.onComplete&&s.onComplete()}else t.style.visibility=n?"visible":"hidden","function"==typeof s.onStart&&s.onStart(),"function"==typeof s.onComplete&&s.onComplete()}},{"@marcom/ac-eclipse":139,"@marcom/ac-feature/cssPropertyAvailable":164}],329:[function(t,e,n){"use strict";var i=t("@marcom/ac-eclipse").Clip,r=t("@marcom/ac-feature/cssPropertyAvailable");e.exports=function(t,e,n){var o=1;if(n=n||{},r("opacity")){if(e)return n.autoplay=n.autoplay!==!1||n.autoplay,n.autoplay?i.to(t,e,{opacity:o},n):new i(t,e,{opacity:o},n);t.style.opacity=o,"function"==typeof n.onStart&&n.onStart(),"function"==typeof n.onComplete&&n.onComplete()}else t.style.visibility="visible","function"==typeof n.onStart&&n.onStart(),"function"==typeof n.onComplete&&n.onComplete()}},{"@marcom/ac-eclipse":139,"@marcom/ac-feature/cssPropertyAvailable":164}],330:[function(t,e,n){"use strict";var i=t("@marcom/ac-eclipse").Clip,r=t("@marcom/ac-feature/cssPropertyAvailable");e.exports=function(t,e,n){var o=0;if(n=n||{},r("opacity")){if(e)return n.autoplay=n.autoplay!==!1||n.autoplay,n.autoplay?i.to(t,e,{opacity:o},n):new i(t,e,{opacity:o},n);t.style.opacity=o,"function"==typeof n.onStart&&n.onStart(),"function"==typeof n.onComplete&&n.onComplete()}else t.style.visibility="hidden","function"==typeof n.onStart&&n.onStart(),"function"==typeof n.onComplete&&n.onComplete()}},{"@marcom/ac-eclipse":139,"@marcom/ac-feature/cssPropertyAvailable":164}],331:[function(t,e,n){"use strict";var i=t("@marcom/ac-eclipse").Clip,r=t("@marcom/ac-dom-styles");e.exports=function(t,e,n,o,s){s=s||{},s.autoplay=s.autoplay!==!1||s.autoplay;var a,l=s.onStart||null,c=s.onComplete||null;return a={transform:{translateX:e+"px",translateY:n+"px"}},o?(s.onStart=function(){t.style.willChange="transform",null!==l&&l.call(this)},s.onComplete=function(){t.style.willChange="",null!==c&&c.call(this)},s.autoplay?i.to(t,o,a,s):new i(t,o,a,s)):(r.setStyle(t,a),"function"==typeof s.onStart&&s.onStart(),void("function"==typeof s.onComplete&&s.onComplete()))}},{"@marcom/ac-dom-styles":116,"@marcom/ac-eclipse":139}],332:[function(t,e,n){"use strict";var i=t("@marcom/ac-browser-prefixed"),r=t("@marcom/ac-transform").Transform,o=t("./move");e.exports=function(t,e,n,s){var a=new r;return a.setMatrixValue(getComputedStyle(t)[i.transform]),o(t,e,a.getTranslateY(),n,s)}},{"./move":331,"@marcom/ac-browser-prefixed":42,"@marcom/ac-transform":335}],333:[function(t,e,n){"use strict";e.exports=function(t,e,n){return e?(n=n||/{([^{}]*)}/g,t.replace(n,function(t,n){var i=e[n];return"string"==typeof i||"number"==typeof i||"boolean"==typeof i?i:t})):t}},{}],334:[function(t,e,n){"use strict";function i(t,e){return e=Object.assign({},o,e),new r(t,e)}var r=t("@marcom/ac-scroll-container").ScrollContainer,o={itemsSelector:".tabnav-items",itemSelector:".tabnav-link",leftPaddleSelector:".tabnav-paddle-left",rightPaddleSelector:".tabnav-paddle-right",scrollEasing:"ease-out",scrollDuration:.5,usePaddles:!0};e.exports=i},{"@marcom/ac-scroll-container":286}],335:[function(t,e,n){"use strict";e.exports={Transform:t("./ac-transform/Transform")}},{"./ac-transform/Transform":336}],336:[function(t,e,n){"use strict";function i(){this.m=r.create()}var r=t("./gl-matrix/mat4"),o=t("./gl-matrix/vec3"),s=t("./gl-matrix/vec4"),a=Math.PI/180,l=180/Math.PI,c=0,u=0,h=1,f=1,d=2,p=3,m=4,_=4,y=5,g=5,v=6,b=7,w=8,E=9,x=10,S=11,k=12,T=12,C=13,A=13,P=14,M=15,O=i.prototype;O.rotateX=function(t){var e=a*t;return r.rotateX(this.m,this.m,e),this},O.rotateY=function(t){var e=a*t;return r.rotateY(this.m,this.m,e),this},O.rotateZ=function(t){var e=a*t;return r.rotateZ(this.m,this.m,e),this},O.rotate=O.rotateZ,O.rotate3d=function(t,e,n,i){null!==e&&void 0!==e||(e=t),null!==n&&void 0!==e||(n=t);var o=a*i;return r.rotate(this.m,this.m,o,[t,e,n]),this},O.rotateAxisAngle=O.rotate3d,O.scale=function(t,e){return e=e||t,r.scale(this.m,this.m,[t,e,1]),this},O.scaleX=function(t){return r.scale(this.m,this.m,[t,1,1]),this},O.scaleY=function(t){return r.scale(this.m,this.m,[1,t,1]),this},O.scaleZ=function(t){return r.scale(this.m,this.m,[1,1,t]),this},O.scale3d=function(t,e,n){return r.scale(this.m,this.m,[t,e,n]),this},O.skew=function(t,e){if(null===e||void 0===e)return this.skewX(t);t=a*t,e=a*e;var n=r.create();return n[_]=Math.tan(t),n[f]=Math.tan(e),r.multiply(this.m,this.m,n),this},O.skewX=function(t){t=a*t;var e=r.create();return e[_]=Math.tan(t),r.multiply(this.m,this.m,e),this},O.skewY=function(t){t=a*t;var e=r.create();return e[f]=Math.tan(t),r.multiply(this.m,this.m,e),this},O.translate=function(t,e){return e=e||0,r.translate(this.m,this.m,[t,e,0]),this},O.translate3d=function(t,e,n){return r.translate(this.m,this.m,[t,e,n]),this},O.translateX=function(t){return r.translate(this.m,this.m,[t,0,0]),this},O.translateY=function(t){return r.translate(this.m,this.m,[0,t,0]),this},O.translateZ=function(t){return r.translate(this.m,this.m,[0,0,t]),this},O.perspective=function(t){var e=r.create();0!==t&&(e[S]=-1/t),r.multiply(this.m,this.m,e)},O.inverse=function(){var t=this.clone();return t.m=r.invert(t.m,this.m),t},O.reset=function(){return r.identity(this.m),this},O.getTranslateXY=function(){var t=this.m;return this.isAffine()?[t[T],t[A]]:[t[k],t[C]]},O.getTranslateXYZ=function(){var t=this.m;return this.isAffine()?[t[T],t[A],0]:[t[k],t[C],t[P]]},O.getTranslateX=function(){var t=this.m;return this.isAffine()?t[T]:t[k]},O.getTranslateY=function(){var t=this.m;return this.isAffine()?t[A]:t[C]},O.getTranslateZ=function(){var t=this.m;return this.isAffine()?0:t[P]},O.clone=function(){var t=new i;return t.m=r.clone(this.m),t},O.toArray=function(){var t=this.m;return this.isAffine()?[t[u],t[f],t[_],t[g],t[T],t[A]]:[t[c],t[h],t[d],t[p],t[m],t[y],t[v],t[b],t[w],t[E],t[x],t[S],t[k],t[C],t[P],t[M]]},O.fromArray=function(t){return this.m=Array.prototype.slice.call(t),this},O.setMatrixValue=function(t){t=String(t).trim();var e=r.create();if("none"===t)return this.m=e,this;var n,i,o=t.slice(0,t.indexOf("("));if("matrix3d"===o)for(n=t.slice(9,-1).split(","),i=0;i<n.length;i++)e[i]=parseFloat(n[i]);else{if("matrix"!==o)throw new TypeError("Invalid Matrix Value");for(n=t.slice(7,-1).split(","),i=n.length;i--;)n[i]=parseFloat(n[i]);e[c]=n[0],e[h]=n[1],e[k]=n[4],e[m]=n[2],e[y]=n[3],e[C]=n[5]}return this.m=e,this};var I=function(t){return Math.abs(t)<1e-4};O.decompose=function(t){t=t||!1;for(var e=r.clone(this.m),n=o.create(),i=o.create(),a=o.create(),c=s.create(),u=s.create(),h=(o.create(),0);h<16;h++)e[h]/=e[M];var f=r.clone(e);f[p]=0,f[b]=0,f[S]=0,f[M]=1;var d=(e[3],e[7],e[11],e[12]),m=e[13],_=e[14],y=(e[15],s.create());if(I(e[p])&&I(e[b])&&I(e[S]))c=s.fromValues(0,0,0,1);else{y[0]=e[p],y[1]=e[b],y[2]=e[S],y[3]=e[M];var g=r.invert(r.create(),f),v=r.transpose(r.create(),g);c=s.transformMat4(c,y,v)}n[0]=d,n[1]=m,n[2]=_;var w=[o.create(),o.create(),o.create()];w[0][0]=e[0],w[0][1]=e[1],w[0][2]=e[2],w[1][0]=e[4],w[1][1]=e[5],w[1][2]=e[6],w[2][0]=e[8],w[2][1]=e[9],w[2][2]=e[10],i[0]=o.length(w[0]),o.normalize(w[0],w[0]),a[0]=o.dot(w[0],w[1]),w[1]=this._combine(w[1],w[0],1,-a[0]),i[1]=o.length(w[1]),o.normalize(w[1],w[1]),a[0]/=i[1],a[1]=o.dot(w[0],w[2]),w[2]=this._combine(w[2],w[0],1,-a[1]),a[2]=o.dot(w[1],w[2]),w[2]=this._combine(w[2],w[1],1,-a[2]),i[2]=o.length(w[2]),o.normalize(w[2],w[2]),a[1]/=i[2],a[2]/=i[2];var E=o.cross(o.create(),w[1],w[2]);if(o.dot(w[0],E)<0)for(h=0;h<3;h++)i[h]*=-1,w[h][0]*=-1,w[h][1]*=-1,w[h][2]*=-1;u[0]=.5*Math.sqrt(Math.max(1+w[0][0]-w[1][1]-w[2][2],0)),u[1]=.5*Math.sqrt(Math.max(1-w[0][0]+w[1][1]-w[2][2],0)),u[2]=.5*Math.sqrt(Math.max(1-w[0][0]-w[1][1]+w[2][2],0)),u[3]=.5*Math.sqrt(Math.max(1+w[0][0]+w[1][1]+w[2][2],0)),w[2][1]>w[1][2]&&(u[0]=-u[0]),w[0][2]>w[2][0]&&(u[1]=-u[1]),w[1][0]>w[0][1]&&(u[2]=-u[2]);var x=s.fromValues(u[0],u[1],u[2],2*Math.acos(u[3])),k=this._rotationFromQuat(u);return t&&(a[0]=Math.round(a[0]*l*100)/100,a[1]=Math.round(a[1]*l*100)/100,a[2]=Math.round(a[2]*l*100)/100,k[0]=Math.round(k[0]*l*100)/100,k[1]=Math.round(k[1]*l*100)/100,k[2]=Math.round(k[2]*l*100)/100,x[3]=Math.round(x[3]*l*100)/100),{translation:n,scale:i,skew:a,perspective:c,quaternion:u,eulerRotation:k,axisAngle:x}},O.recompose=function(t,e,n,i,a){t=t||o.create(),e=e||o.create(),n=n||o.create(),i=i||s.create(),a=a||s.create();var l=r.fromRotationTranslation(r.create(),a,t);l[p]=i[0],l[b]=i[1],l[S]=i[2],l[M]=i[3];var c=r.create();return 0!==n[2]&&(c[E]=n[2],r.multiply(l,l,c)),0!==n[1]&&(c[E]=0,c[w]=n[1],r.multiply(l,l,c)),n[0]&&(c[w]=0,c[4]=n[0],r.multiply(l,l,c)),r.scale(l,l,e),this.m=l,this},O.isAffine=function(){return 0===this.m[d]&&0===this.m[p]&&0===this.m[v]&&0===this.m[b]&&0===this.m[w]&&0===this.m[E]&&1===this.m[x]&&0===this.m[S]&&0===this.m[P]&&1===this.m[M]},O.toString=function(){var t=this.m;return this.isAffine()?"matrix("+t[u]+", "+t[f]+", "+t[_]+", "+t[g]+", "+t[T]+", "+t[A]+")":"matrix3d("+t[c]+", "+t[h]+", "+t[d]+", "+t[p]+", "+t[m]+", "+t[y]+", "+t[v]+", "+t[b]+", "+t[w]+", "+t[E]+", "+t[x]+", "+t[S]+", "+t[k]+", "+t[C]+", "+t[P]+", "+t[M]+")"},O.toCSSString=O.toString,O._combine=function(t,e,n,i){var r=o.create();return r[0]=n*t[0]+i*e[0],r[1]=n*t[1]+i*e[1],r[2]=n*t[2]+i*e[2],r},O._matrix2dToMat4=function(t){for(var e=r.create(),n=0;n<4;n++)for(var i=0;i<4;i++)e[4*n+i]=t[n][i];return e},O._mat4ToMatrix2d=function(t){for(var e=[],n=0;n<4;n++){e[n]=[];for(var i=0;i<4;i++)e[n][i]=t[4*n+i]}return e},O._rotationFromQuat=function(t){var e,n,i,r=t[3]*t[3],s=t[0]*t[0],a=t[1]*t[1],l=t[2]*t[2],c=s+a+l+r,u=t[0]*t[1]+t[2]*t[3];return u>.499*c?(n=2*Math.atan2(t[0],t[3]),i=Math.PI/2,e=0,o.fromValues(e,n,i)):u<-.499*c?(n=-2*Math.atan2(t[0],t[3]),i=-Math.PI/2,e=0,o.fromValues(e,n,i)):(n=Math.atan2(2*t[1]*t[3]-2*t[0]*t[2],s-a-l+r),i=Math.asin(2*u/c),e=Math.atan2(2*t[0]*t[3]-2*t[1]*t[2],-s+a-l+r),o.fromValues(e,n,i))},e.exports=i},{"./gl-matrix/mat4":337,"./gl-matrix/vec3":338,"./gl-matrix/vec4":339}],337:[function(t,e,n){"use strict";var i={create:t("gl-mat4/create"),rotate:t("gl-mat4/rotate"),rotateX:t("gl-mat4/rotateX"),rotateY:t("gl-mat4/rotateY"),rotateZ:t("gl-mat4/rotateZ"),scale:t("gl-mat4/scale"),multiply:t("gl-mat4/multiply"),translate:t("gl-mat4/translate"),invert:t("gl-mat4/invert"),clone:t("gl-mat4/clone"),transpose:t("gl-mat4/transpose"),identity:t("gl-mat4/identity"),fromRotationTranslation:t("gl-mat4/fromRotationTranslation")};e.exports=i},{"gl-mat4/clone":517,"gl-mat4/create":518,"gl-mat4/fromRotationTranslation":519,"gl-mat4/identity":520,"gl-mat4/invert":521,"gl-mat4/multiply":522,"gl-mat4/rotate":523,"gl-mat4/rotateX":524,"gl-mat4/rotateY":525,"gl-mat4/rotateZ":526,"gl-mat4/scale":527,"gl-mat4/translate":528,"gl-mat4/transpose":529}],338:[function(t,e,n){"use strict";var i={create:t("gl-vec3/create"),dot:t("gl-vec3/dot"),normalize:t("gl-vec3/normalize"),length:t("gl-vec3/length"),cross:t("gl-vec3/cross"),fromValues:t("gl-vec3/fromValues")};e.exports=i},{"gl-vec3/create":530,"gl-vec3/cross":531,"gl-vec3/dot":532,"gl-vec3/fromValues":533,"gl-vec3/length":534,"gl-vec3/normalize":535}],339:[function(t,e,n){"use strict";var i={create:t("gl-vec4/create"),transformMat4:t("gl-vec4/transformMat4"),fromValues:t("gl-vec4/fromValues")};e.exports=i},{"gl-vec4/create":536,"gl-vec4/fromValues":537,"gl-vec4/transformMat4":538}],340:[function(t,e,n){"use strict";e.exports=function(t,e){var n="&",i="";if(t){var r=Object.keys(t),o=r.length-1;r.forEach(function(e,r){var s=t[e];e=e.trim(),s=s&&"string"==typeof s?s.trim():s,s=null===s?"":"="+s;var a=e+s+(r===o?"":n);i=i?i.concat(a):a})}return i&&e!==!1?"?"+i:i}},{}],341:[function(t,e,n){"use strict";e.exports=function(t){t=t||window.location.search,t=t.replace(/^[^?]*\?/,"");var e="&",n=t?t.split(e):[],i={},r="=",o=new RegExp(r);return n.forEach(function(t){var e,n;if(o.test(t)){var s=t.split(r,2);e=s[0],n=s[1]}else e=t,n=null;i[e]=n}),i}},{}],342:[function(t,e,n){"use strict";function i(t){var e=t.port,n=new RegExp(":"+e);return e&&!n.test(t.href)&&n.test(t.host)}var r=t("./parseSearchParams");e.exports=function(t){var e,n="",o=!1;return t?window.URL&&"function"==typeof window.URL?e=new URL(t,window.location):(e=document.createElement("a"),e.href=t,e.href=e.href,i(e)&&(n=e.host.replace(new RegExp(":"+e.port),""),o=!0)):e=window.location,{hash:e.hash,host:n||e.host,hostname:e.hostname,href:e.href,origin:e.origin||e.protocol+"//"+(n||e.host),pathname:e.pathname,port:o?"":e.port,protocol:e.protocol,search:e.search,searchParams:r(e.search)}}},{"./parseSearchParams":341}],343:[function(t,e,n){"use strict";var i={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};e.exports=t("./parseUserAgent")(i)},{"./parseUserAgent":346}],344:[function(t,e,n){"use strict";e.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{name:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{name:"",major:0,minor:0,patch:0}}}},{}],345:[function(t,e,n){"use strict";e.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(t){return t.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===t.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(t){return t.ua.indexOf("Safari")>-1&&t.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(t){return t.ua.indexOf("IE")>-1||t.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var t=!1;return document.documentMode&&(t=parseInt(document.documentMode,10)),t}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(t){return t.platform.indexOf("Win")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(t){return t.platform.indexOf("Mac")>-1}},{name:"ios",test:function(t){return t.ua.indexOf("iPhone")>-1||t.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(t){return t.platform.indexOf("Linux")>-1&&t.ua.indexOf("Android")===-1}},{name:"fireos",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android"},{name:"chromeos",userAgent:"CrOS"}]}},{}],346:[function(t,e,n){"use strict";function i(t){return new RegExp(t+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function r(t,e){if("function"==typeof t.parseVersion)return t.parseVersion(e);var n=t.version||t.userAgent;"string"==typeof n&&(n=[n]);for(var r,o=n.length,s=0;s<o;s++)if(r=e.match(i(n[s])),r&&r.length>1)return r[1].replace(/_/g,".")}function o(t,e,n){for(var i,o,s=t.length,a=0;a<s;a++)if("function"==typeof t[a].test?t[a].test(n)===!0&&(i=t[a].name):n.ua.indexOf(t[a].userAgent)>-1&&(i=t[a].name),i){if(e[i]=!0,o=r(t[a],n.ua),"string"==typeof o){var l=o.split(".");e.version.name=o,l&&l.length>0&&(e.version.major=parseInt(l[0]||0),e.version.minor=parseInt(l[1]||0),e.version.patch=parseInt(l[2]||0))}else"edge"===i&&(e.version.name="12.0.0",e.version.major="12",e.version.minor="0",e.version.patch="0");return"function"==typeof t[a].parseDocumentMode&&(e.version.documentMode=t[a].parseDocumentMode()),e}return e}function s(t){var e={};return e.browser=o(l.browser,a.browser,t),e.os=o(l.os,a.os,t),e}var a=t("./defaults"),l=t("./dictionary");e.exports=s},{"./defaults":344,"./dictionary":345}],347:[function(t,e,n){e.exports="3.6.2-2"},{}],348:[function(t,e,n){"use strict";var i=function(t){this.el=t},r=i.prototype;r.on=function(){this.el.addEventListener.apply(this.el,arguments)},r.off=function(){this.el.removeEventListener.apply(this.el,arguments)},r.once=function(t,e){var n=function(){e(),this.off(t,n)}.bind(this);this.on(t,n)},r.trigger=function(t,e){var n=new CustomEvent(t,{detail:e});this.el.dispatchEvent(n)},e.exports=i},{}],349:[function(t,e,n){"use strict";var i=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,r=function(){i.call(this)},o=i.prototype;r.prototype=Object.create(o);var s=r.prototype;s.constructor=r,s.once=function(t,e,n){if(n){var i=function(){e.apply(n,arguments)};o.once.apply(this,[t,i])}else o.once.apply(this,arguments)},s.on=function(t,e,n){if(arguments.length>2){this._boundListeners||(this._boundListeners={}),this._boundListeners[t]||(this._boundListeners[t]=[]);var i=e.bind(n);return this._boundListeners[t].push([e,n,i]),o.on.call(this,t,i)}return o.on.apply(this,arguments)},s.off=function(t,e,n){if(!(arguments.length>2))return o.off.apply(this,arguments);try{for(var i=this._boundListeners[t],r=0,s=i.length;r<s;r++)if(i[r][0]===e&&i[r][1]===n){var a=i.splice(r,1)[0];return o.off.call(this,t,a[2])}}catch(l){}},s.destroy=function(){this._boundListeners=void 0,o.destroy.call(this)},e.exports=r},{"@marcom/ac-event-emitter-micro":160}],350:[function(t,e,n){"use strict";e.exports=t("./utils/urlOptimizer/OptimizeVideoUrl")},{"./utils/urlOptimizer/OptimizeVideoUrl":417}],351:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":i(t)},o=t("../event-emitter-shim/EventEmitterShim"),s=t("../dom-emitter/DOMEmitterMicro"),a=t("../video/VideoFactory").create,l=t("@marcom/useragent-detect"),c=t("@marcom/ac-fullscreen"),u=t("../posterframe/PosterFrameFactory"),h=t("@marcom/ac-raf-emitter/update"),f=t("@marcom/ac-raf-emitter/cancelUpdate"),d=t("@marcom/ac-feature/isRetina")(),p=t("@marcom/ac-feature/isDesktop")(),m=t("@marcom/ac-feature/isHandheld")(),_=l.browser.safari&&l.os.osx,y=l.browser.safari&&l.os.ios,g=l.browser.chrome,v="user-hover",b="mouse-leave",w="mobile",E="initial-play",x="ac-video-live",S="longform",k=t("../ui/DefaultBreakpoints"),T=t("@marcom/ac-console/log"),C=t("./event/EventsToForward"),A=t("./event/ReadyStateChangeEvents"),P=t("../utils/BreakpointDetect"),M=t("../ui/keyboard-control/createKeyboardControl"),O=t("../ui/controls-interaction/createControlsInteraction"),I=t("@marcom/ac-accessibility/helpers/hide"),L=t("@marcom/ac-accessibility/helpers/show"),D=t("../utils/getVersion"),R=function(t){t=t||{},this.el=t.el||document.createElement("div"),this._elementEmitter=new s(this.el),this.VERSION=D,this.options=t,o.call(this),this._controlsFactory=t.controlsFactory,this._urlOptimizer=t.urlOptimizer;try{var e=window.top;this._maxWidth=t.maxWidth||Math.min(window.innerWidth,1280)||Math.min(e.innerWidth,1280)}catch(n){this._maxWidth=t.maxWidth||Math.min(window.innerWidth,1280)}this._lastResize=0,this._lastMouseCoords={},this.el.classList.add("ac-video-player"),this._isLive=t.live,this._isLive&&this._useLiveMode(),this._videoImpl=a(t,this.el),this._isResponsive=t.responsive,this._isResponsive&&(this._breakpointDetect=new P({el:this.el,player:this,breakpoints:k,addClass:!0})),this._supportsInlineVideo=p||!(m&&y),this._cachedPiPMode=this.isPictureInPicture(),this._cachedReadyState=this.getReadyState(),this._cachedVisibleTracksLength=0,this.el.appendChild(this._videoImpl.getRenderElement()),(t.poster||"undefined"==typeof t.poster)&&this._initPoster(t.poster),
this._bindMethods(),this._addEventListeners(),p&&(this._keyboardControl=M({player:this,threesixty:t.threesixty,keyboardTarget:t.keyboardTarget})),t.controls&&this._initUIComponents(),t.parentElement&&t.parentElement.appendChild(this.el),this.refreshSize=this.refreshSize.bind(this),this._refreshSizeTimeout=setTimeout(this.refreshSize,0),window.addEventListener("DOMContentLoaded",this.refreshSize)};R.LOADEDMETADATA=1,R.LOADEDDATA=2,R.CANPLAY=3,R.CANPLAYTHROUGH=4;var F=o.prototype;R.prototype=Object.create(F);var N=R.prototype;N.constructor=R,N._bindMethods=function(){this._onStart=this._onStart.bind(this),this._onEnded=this._onEnded.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onCaptionsChanged=this._onCaptionsChanged.bind(this),this._onPlay=this._onPlay.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._forwardEvent=this._forwardEvent.bind(this),this._onPresentationModeChanged=this._onPresentationModeChanged.bind(this),this._forwardFullScreenChangeEvent=this._forwardNamedEvent.bind(this,"fullscreen:change"),this._forwardEnterFullScreenEvent=this._forwardNamedEvent.bind(this,"enterfullscreen"),this._forwardExitFullScreenEvent=this._forwardNamedEvent.bind(this,"exitfullscreen"),this._onDurationChange=this._onDurationChange.bind(this),this._forwardReadyStateChange=this._forwardReadyStateChange.bind(this),this._showControls=this._showControls.bind(this),this._hideControls=this._hideControls.bind(this),this._raiseControls=this._raiseControls.bind(this),this._lowerControls=this._lowerControls.bind(this),this._onPlayPromiseError=this._onPlayPromiseError.bind(this),this._onPlayPromiseResolved=this._onPlayPromiseResolved.bind(this)},N._addEventListeners=function(){for(var t=0,e=C.length;t<e;t++)this._videoImpl.on(C[t],this._forwardEvent);for(t=0,e=A.length;t<e;t++)this._videoImpl.on(A[t],this._forwardReadyStateChange);this._videoImpl.on("timeupdate",this._onTimeUpdate),this._videoImpl.on("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.on("durationchange",this._onDurationChange),this._videoImpl.on("addtrack",this._forwardEvent),this._videoImpl.on("change",this._forwardEvent),this._videoImpl.on("change",this._onCaptionsChanged),this._videoImpl.on("removetrack",this._forwardEvent),this._videoImpl.on("loadedmetadata",this._refreshSize),this._videoImpl.on("loadeddata",this._refreshSize),p?(c.on("enterfullscreen",this._forwardEnterFullScreenEvent),c.on("exitfullscreen",this._forwardExitFullScreenEvent),c.on("enterfullscreen",this._forwardFullScreenChangeEvent),c.on("exitfullscreen",this._forwardFullScreenChangeEvent),this.on("fullscreen:change",this._onFullscreenChange)):y&&(this._videoImpl.on("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.on("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.on("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.on("webkitendfullscreen",this._forwardFullScreenChangeEvent),m&&this.on("fullscreen:change",this._onFullscreenChange)),this._videoImpl.on("PlayPromiseError",this._onPlayPromiseError),this._videoImpl.on("PlayPromiseResolved",this._onPlayPromiseResolved)},N._onPlayPromiseResolved=function(){this.trigger("PlayPromiseResolved")},N._removeEventListeners=function(){for(var t=0,e=C.length;t<e;t++)this._videoImpl.off(C[t],this._forwardEvent);for(t=0,e=A.length;t<e;t++)this._videoImpl.off(A[t],this._forwardReadyStateChange);this._videoImpl.off("timeupdate",this._onTimeUpdate),this._videoImpl.off("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.off("durationchange",this._onDurationChange),p?(c.off("enterfullscreen",this._forwardEnterFullScreenEvent),c.off("exitfullscreen",this._forwardExitFullScreenEvent),c.off("enterfullscreen",this._forwardFullScreenChangeEvent),c.off("exitfullscreen",this._forwardFullScreenChangeEvent)):l.os.ios&&(this._videoImpl.off("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.off("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.off("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.off("webkitendfullscreen",this._forwardFullScreenChangeEvent)),this._videoImpl.off("PlayPromiseError",this._onPlayPromiseError)},N._forwardReadyStateChange=function(){var t=this.getReadyState();(t>this._cachedReadyState||0===t)&&(this._cachedReadyState=t,this.trigger("readystatechange",{readyState:t}))},N._forwardEvent=function(t){T(t.type+" time:"+this.getCurrentTime()),this.trigger(t.type)},N._forwardNamedEvent=function(t){T(t+" time:"+this.getCurrentTime()),this.trigger(t)},N._onPlayPromiseError=function(){T("play() Promise rejected, probably because the browser is blocking autoplay"),this.el.classList.add(E),this._showStartState(),this.once("play",this._onPlay)},N._onCaptionsChanged=function(t){var e=this.getVisibleTextTracks().length;e>0&&0===this._cachedVisibleTracksLength?this.trigger("texttrackshow"):0===e&&this._cachedVisibleTracksLength>0&&this.trigger("texttrackhide"),this._cachedVisibleTracksLength=e},N._onTimeUpdate=function(){this.trigger("timeupdate",{currentTime:this.getCurrentTime()})},N.load=function(t,e,n,i){if(this.refreshSize(),Array.isArray(t)||(t=[t]),e&&!Array.isArray(e)&&(e=[{src:e}]),this._cachedReadyState=0,i||(i=this.options),this._urlOptimizer){e||(e=t.map(this._urlOptimizer.getCaptionsSource).filter(function(t){return!!t}));var r=this.getVisibleTextTracks();r&&r.length&&e&&e.length&&(e[0].mode="showing");var o=i.maxWidth||this._calcMaxWidth();t=t.map(function(t){return this._urlOptimizer.getVideoSource(t,o,null,{maxWidth:this._maxWidth})}.bind(this))}var s=i&&i.thumbnails||this._urlOptimizer&&this._urlOptimizer.getThumbnailImageSource(t[0]);this.once("play",this._onPlay),this._poster&&this._poster.show(),(this.options.autoplay&&p||this.getEnded())&&this.once("loadstart",function(){this.play()}.bind(this)),i||(i=this.options),i&&this.setPoster(i.poster),this._poster&&this._poster.show(),this.controls&&this.controls.sharingModule&&(i.sharing?this.controls.sharingModule.setData(i.sharing):this.controls.sharingModule.setData(null)),void 0!==i.live&&(this._isLive=i.live,this._useLiveMode()),this._hideEndState(),this._videoImpl.load(t,e,n),this.controls&&this.controls.overlays?this.controls.overlays.setData(s):this.controls&&this.once("controlsready",function(){this.controls.overlays&&this.controls.overlays.setData(s)}.bind(this)),this.controls&&this.controls.endState?this.controls.endState.setData(i.endState):this.controls&&this.once("controlsready",function(){this.controls.endState&&this.controls.endState.setData(i.endState)}.bind(this))},N._calcMaxWidth=function(){return this.el.parentElement?this.el.parentElement.clientWidth:this._maxWidth},N._isActiveArea=function(t){for(;t!==this.el;){if(t.hasAttribute("data-acv-active-area"))return!0;t=t.parentNode}return!1},N._onPresentationModeChanged=function(t){this._forwardEvent(t);var e=this.isPictureInPicture();this._cachedPiPMode!==e&&(this._cachedPiPMode=e,T("pictureinpicture:change to "+e),this.trigger("pictureinpicture:change"))},N._onDurationChange=function(t){this.getDuration()>3600&&this.el.classList.add(S),this.refreshSize()},N.appendTo=function(t){t.appendChild(this.el),this.refreshSize()},N.getTextTracks=function(){return Array.prototype.slice.call(this._videoImpl.getTextTracks())},N.getVisibleTextTracks=function(){var t=Array.prototype.slice.call(this._videoImpl.getTextTracks());return t&&t.length&&(t=t.filter(function(t){return"showing"===t.mode})),t},N.getFullScreenElement=function(){return p?this.el:this.getMediaElement()},N.getFullScreenEnabled=function(){return c.fullscreenEnabled(this.getFullScreenElement())},N.isFullscreen=function(){return p?c.fullscreenElement()===this.getFullScreenElement():this._videoImpl.isFullscreen()},N.requestFullscreen=function(){if(!this.isFullscreen()){this.controls&&(this.controls.el.display="none"),this._hideControls(),this.trigger("fullscreen:willenter",{type:"enter"}),this._lastResize=Date.now(),f(this._updateFullscreenId);var t=this,e=function n(){t.refreshSize(),t._updateFullscreenId=h(n)};this._updateFullscreenId=h(e),g?setTimeout(function(){this._lastResize=Date.now(),c.requestFullscreen(this.getFullScreenElement())}.bind(this),300):c.requestFullscreen(this.getFullScreenElement())}},N.exitFullscreen=function(){this.isFullscreen()&&(this.controls&&(this.controls.el.display="none"),this._hideControls(),this.trigger("fullscreen:willexit",{type:"exit"}),g?setTimeout(function(){c.exitFullscreen(this.getFullScreenElement())}.bind(this),300):c.exitFullscreen(this.getFullScreenElement()))},N._onFullscreenChange=function(){this._lastResize=Date.now(),this.controls&&(this.controls.el.display=""),this._hideControls(),this._preventUserInteraction=!0,setTimeout(function(){f(this._updateFullscreenId),this._preventUserInteraction=!1,this.refreshSize()}.bind(this),750),this.refreshSize()},N.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()},N._initUIComponents=function(){this._controlsFactory?(this._instantiateDefaultCustomUIControls(),p?this.el.appendChild(this._blockade.el):(this.controls.el.classList.add(w),this.setControls(!0))):this.setControls(!0)},N._showControls=function(){this._controlsVisible=!0,this.el.classList.remove(E),this.el.classList.add(v)},N._hideControls=function(){this._controlsVisible=!1,this.el.classList.remove(v),this.hideCaptionsSelector()},N._raiseControls=function(){this._controlsVisible=!0,this.el.classList.remove(b)},N._lowerControls=function(){this._controlsVisible=!1,this.el.classList.add(b),this.hideCaptionsSelector()},N._onControlsReady=function(){this.options.autoplay&&p||this._showStartState()},N._showStartState=function(){this.controls&&this.controls.el.classList.add("start-state"),this._poster&&this._poster.show(),p||I(this.getMediaElement())},N._hideStartState=function(){this.controls&&this.controls.el.classList.remove("start-state"),this._poster&&this._poster.hide(),p||L(this.getMediaElement())},N._showEndState=function(){this.controls&&(this.controls.mainControlsElement?this.controls.mainControlsElement.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)):this.el.contains(document.activeElement)&&!this.controls.sharingModule.el.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)),this.controls.el.classList.add("end-state")),this._poster&&this._poster.show(),I(this.getMediaElement())},N._hideEndState=function(){this.controls&&this.controls.el.classList.remove("end-state"),p||L(this.getMediaElement())},N._createBlockade=function(){this._blockade=new s(document.createElement("div")),this._blockade.el.classList.add("ac-video-blockade")},N._instantiateDefaultCustomUIControls=function(){return this.controls=this._controlsFactory.create({player:this,endState:this.options.endState,enableMainControls:p,basePath:this.options.localizationBasePath,template:this.options.template,readyCallback:function(){this.options.autoplay&&p||this._showStartState(),this.trigger("controlsready")}.bind(this)}),this.controls.el.parentNode!==this.el&&this.el.appendChild(this.controls.el),this._videoImpl.setControls(!1),this._createBlockade(),this._controlsInteraction=O({player:this,keyboardControl:this._keyboardControl,controlsTimeoutDuration:this.options.controlsTimeoutDuration,showControls:this._showControls,hideControls:this._hideControls,raiseControls:this._raiseControls,lowerControls:this._lowerControls,controlsVisible:function(){return this._controlsVisible}.bind(this),sendMouseDown:this._videoImpl.sendMouseDown,elementEmitter:this._elementEmitter}),this.controls},N._onPlay=function(){_?this.once("timeupdate",this._onStart,function(){return this.getCurrentTime()>0}.bind(this)):this.once("timeupdate",this._onStart)},N.isCaptionsSelectorShowing=function(){return this.controls.el.classList.contains("captions-selector-showing")},N.showCaptionsSelector=function(){this.controls.el.classList.add("captions-selector-showing")},N.hideCaptionsSelector=function(){this.controls.el.classList.remove("captions-selector-showing")},N._onStart=function(){this.el.classList.add(E),this._poster&&this._poster.hide(),this.controls&&(this._hideStartState(),this._hideEndState()),this.once("ended",this._onEnded)},N._onEnded=function(){this.isFullscreen()&&this.exitFullscreen(),this.controls&&(this._hideStartState(),this._showEndState()),setTimeout(function(){this.once("timeupdate",this._onStart)}.bind(this),300),this._poster&&this._poster.show()},N._initPoster=function(t){this._poster=u({player:this,video:this._videoImpl,useNativePoster:this.options.controls===!1,is2x:d,src:t}),this._poster.el&&this.el.appendChild(this._poster.el),this.options.autoplay||this._poster.show()},N._useLiveMode=function(){this._isLive?this.el.classList.add(x):this.el.classList.remove(x)},N.once=function(t,e,n){if(arguments.length<3||"object"===("undefined"==typeof n?"undefined":r(n)))F.once.apply(this,arguments);else{var i=arguments,o=Array.prototype.slice.call(arguments,2),s=function(){o.every(function(t){return!!t()})&&(i[1].apply(this,i),this.off(i[0],s))}.bind(this);this.on(i[0],s)}},N.getMediaElement=function(){return this._videoImpl.getMediaElement()},N.play=function(){T("play called"),this._videoImpl.play()},N.pause=function(){this._videoImpl.pause()},N.seek=function(t){this.setCurrentTime.apply(this,arguments)},N.addTextTrack=function(t){this._videoImpl.addTextTrack(t)},N.getReadyState=function(){return this._videoImpl.getMediaElement().readyState},N.getPreload=function(){return this._videoImpl.getPreload()},N.setPoster=function(t){this._poster.setSrc(t)},N.getPoster=function(){this._poster.getSrc()},N.getVolume=function(){return this._videoImpl.getVolume()},N.getMuted=function(){return this._videoImpl.getMuted()},N.getCurrentTime=function(){return this._videoImpl.getCurrentTime()},N.getDuration=function(){return this._videoImpl.getDuration()},N.getPaused=function(){return this._videoImpl.getPaused()},N.getEnded=function(){return this._videoImpl.getEnded()},N.setCurrentTime=function(t){return this._videoImpl.setCurrentTime(t)},N.setVolume=function(t){return this.trigger("uservolumechange"),this._videoImpl.setVolume(t)},N.setMuted=function(t){this.trigger("uservolumechange"),this._videoImpl.setMuted(t)},N.setSrc=function(t){this._videoImpl.setSrc(t)},N.getCurrentSrc=function(){return this._videoImpl.getCurrentSrc()},N.setControls=function(t){return this._videoImpl.setControls(t)},N.getMediaHeight=function(){return this._videoImpl.getMediaElement().videoHeight},N.getMediaWidth=function(){return this._videoImpl.getMediaElement().videoWidth},N.supportsPictureInPicture=function(){return this._videoImpl.supportsPictureInPicture()},N.isPictureInPicture=function(){return this._videoImpl.isPictureInPicture()},N.setPictureInPicture=function(t){return this._videoImpl.setPictureInPicture(t)},N.supportsAirPlay=function(){return this._videoImpl.supportsAirPlay()},N.isLive=function(){return this._isLive},N.refreshSize=function(){this._breakpointDetect?this._breakpointDetect.refresh():(this._currentBreakpoint&&this.el.classList.remove(this._currentBreakpoint.name),this._currentBreakpoint=P.getBreakpointFromElement(this.el,k),this.el.classList.add(this._currentBreakpoint.name)),this._videoImpl.refreshSize()},N.destroy=function(){this._removeEventListeners(),this.controls&&(this.controls.destroy(),this.controls=null),this.el.innerHTML="",this._breakpointDetect&&this._breakpointDetect.destroy(),this._videoImpl.destroy(),this._videoImpl=null,clearTimeout(this._refreshSizeTimeout),o.prototype.destroy.call(this)},e.exports=R},{"../dom-emitter/DOMEmitterMicro":348,"../event-emitter-shim/EventEmitterShim":349,"../posterframe/PosterFrameFactory":358,"../ui/DefaultBreakpoints":367,"../ui/controls-interaction/createControlsInteraction":386,"../ui/keyboard-control/createKeyboardControl":401,"../utils/BreakpointDetect":409,"../utils/getVersion":411,"../video/VideoFactory":421,"./event/EventsToForward":353,"./event/ReadyStateChangeEvents":354,"@marcom/ac-accessibility/helpers/hide":25,"@marcom/ac-accessibility/helpers/show":29,"@marcom/ac-console/log":80,"@marcom/ac-feature/isDesktop":166,"@marcom/ac-feature/isHandheld":167,"@marcom/ac-feature/isRetina":168,"@marcom/ac-fullscreen":185,"@marcom/ac-raf-emitter/cancelUpdate":271,"@marcom/ac-raf-emitter/update":273,"@marcom/useragent-detect":501}],352:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function m(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:m(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=t("./Player"),u=t("../ui/controls-interaction/createControlsInteraction"),h=t("@marcom/useragent-detect").os,f=h.ios||h.android||!t("@marcom/ac-feature/isDesktop")(),d="threesixty-ui",p=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t.threesixty&&n.el.classList.add("threesixty-video"),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this),this._showCompass=this._showCompass.bind(this),this._hideCompass=this._hideCompass.bind(this),this.panToOrigin=this.panToOrigin.bind(this)}},{key:"_addEventListeners",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addEventListeners",this).call(this)}},{key:"_removeEventListeners",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_removeEventListeners",this).call(this),this.controls.compass.removeEventListener("click",this.panToOrigin)}},{key:"_showCompass",value:function(){this.el.classList.add(d)}},{key:"_hideCompass",value:function(){this.el.classList.remove(d)}},{key:"_instantiateDefaultCustomUIControls",value:function(){return this.controls=this._controlsFactory.create({player:this,endState:this.options.endState,threesixty:!0,enableMainControls:!0,basePath:this.options.localizationBasePath,template:this.options.template,readyCallback:function(){this.options.autoplay&&!f||this._showStartState(),this.trigger("controlsready")}.bind(this)}),this.controls.el.parentNode!==this.el&&this.el.appendChild(this.controls.el),this._videoImpl.setControls(!1),this._createBlockade(),this._controlsInteraction=u({player:this,keyboardControl:this._keyboardControl,threesixty:!0,controlsTimeoutDuration:this.options.controlsTimeoutDuration,threesixtyElementsTimeoutDuration:this.options.threesixtyElementsTimeoutDuration,showControls:this._showControls,hideControls:this._hideControls,raiseControls:this._raiseControls,lowerControls:this._lowerControls,showCompass:this._showCompass,hideCompass:this._hideCompass,controlsVisible:function(){return this._controlsVisible}.bind(this),sendMouseDown:this._videoImpl.sendMouseDown,elementEmitter:this._elementEmitter}),this.controls}},{key:"panToOrigin",value:function(){this.get360().panToPosition({lat:0,lon:0})}},{key:"get360",value:function(){return this._videoImpl.get360()}},{key:"getFullScreenElement",value:function(){return this.el}},{key:"getFullScreenEnabled",value:function(){return!f&&l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getFullScreenEnabled",this).call(this)}}]),e}(c);e.exports=p},{"../ui/controls-interaction/createControlsInteraction":386,"./Player":351,"@marcom/ac-feature/isDesktop":166,"@marcom/useragent-detect":501}],353:[function(t,e,n){"use strict";e.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","ended","ratechange","durationchange","volumechange","addtrack","change","removetrack"]},{}],354:[function(t,e,n){"use strict";e.exports=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","waiting","canplay","canplaythrough"]},{}],355:[function(t,e,n){"use strict";var i=t("@marcom/ac-feature/isDesktop")();e.exports=function(e){e?arguments.length>1&&(e=Object.assign.apply(null,Array.prototype.slice.apply(arguments))):e={},e.components||(e.components=t("../../ui/DefaultComponents")),"undefined"==typeof e.controls&&(e.controls=!0),e.controlsImplementation||(e.controlsImplementation=t("../../ui/ControlBar")),e.controlsFactory||(e.controlsFactory=t("../../ui/ControlsFactory")({controlsImplementation:e.controlsImplementation,components:e.components,template:e.controlsTemplate})),("undefined"!=typeof e.urlOptimizer&&e.urlOptimizer===!0||"true"===e.urlOptimizer)&&(e.urlOptimizer=t("../../optimizeVideoUrl")),e.sources||e.src?e.sources=e.sources?e.sources:e.src?[e.src]:[]:e.sources=[],e.autoplay=void 0!==e.autoplay?e.autoplay:i,e.controlsTimeoutDuration||(e.controlsTimeoutDuration=3e3);var n;if(e.threesixty){e.threesixtyElementsTimeoutDuration||(e.threesixtyElementsTimeoutDuration=3e3);var r=t("../ThreeSixtyPlayer");n=new r(e)}else{var o=t("../Player");n=new o(e)}var s={};return e.sharing&&(s.sharing=Object.assign({},e.sharing)),e.thumbnails&&(s.thumbnails=Object.assign({},e.thumbnails)),e.endState&&(s.endState=Object.assign({},e.endState)),e.sources&&e.sources.length&&n.load(e.sources,e.textTracks,e.startTime,s),n}},{"../../optimizeVideoUrl":350,"../../ui/ControlBar":365,"../../ui/ControlsFactory":366,"../../ui/DefaultComponents":368,"../Player":351,"../ThreeSixtyPlayer":352,"@marcom/ac-feature/isDesktop":166}],356:[function(t,e,n){"use strict";e.exports=t("./createPlayer")},{"./createPlayer":355}],357:[function(t,e,n){"use strict";var i="ac-video-poster",r="ac-video-poster-hide",o=function(t){this._defaultSrc=t.src,this._initialize(t)},s=o.prototype;s._initialize=function(t){var e=t.src;this.el=t.el||document.createElement("div"),this._imgElement=document.createElement("img"),this._imgElement.src=e,this._currentSrc=e,this._imgElement.alt="",this._imgElement.addEventListener("load",this._onLoad.bind(this)),this.el.appendChild(this._imgElement),this.hide(),this.el.classList.add(i)},s.hide=function(){this.el.classList.add(r)},s.show=function(){this.el.classList.remove(r)},s.setSrc=function(t){var e=t||this._defaultSrc;e!==this._currentSrc&&(this._imgElement.style.display="none",this._imgElement.src=e,this._currentSrc=e)},s._onLoad=function(){this._imgElement.style.display=""},s.getSrc=function(){return this._imgElement.src},e.exports=o},{}],358:[function(t,e,n){"use strict";var i=t("./PosterFrame"),r={"1x":"/ac/ac-video-posterframe/1.0/images/ac-video-poster_848x480.jpg","2x":"/ac/ac-video-posterframe/1.0/images/ac-video-poster_848x480_2x.jpg"};e.exports=function(t){if(t.src=t.src||(t.is2x?r["2x"]:r["1x"]),t.useNativePoster){t.video.setPoster(t.src);var e,n=!1;return{show:function(){n=!0,e&&(t.video.setPoster(e),e=null)},hide:function(){n=!1},setSrc:function(i){n?t.video.setPoster(i):e=i}}}return new i(t)}},{"./PosterFrame":357}],359:[function(t,e,n){"use strict";var i=t("@marcom/ac-ajax-xhr"),r=t("@marcom/ac-function/throttle"),o=t("./parseVTT"),s=function(t,e){this._view=t,this._video=e.video,this._refreshTracks=this._refreshTracks.bind(this),this._throttledRefreshCurrentCaption=r(this._refreshCurrentCaption.bind(this),300),this._addTrackListeners()},a=s.prototype;a._addTrackListeners=function(){this._video.on("addtrack",this._refreshTracks),this._video.on("removetrack",this._refreshTracks),this._video.on("change",this._refreshTracks)},a._addVideoListeners=function(t){if(!t.cues){this._view.setText("");try{return i.get(t.src,{complete:function(e){t.cues=o(e.responseText),this._addVideoListeners(t),this._refreshCurrentCaption()}.bind(this),error:function(t){}.bind(this)})}catch(e){}}this._video.on("loadstart",this._refreshTracks),this._video.on("timeupdate",this._throttledRefreshCurrentCaption)},a._removeVideoListeners=function(){this._video.off("loadstart",this._refreshTracks),this._video.off("timeupdate",this._throttledRefreshCurrentCaption)},a._refreshTracks=function(){var t=this._video.getTextTracks();t&&t.length&&(t=t.filter(function(t){return"showing"===t.mode})),t.length?(this._activeTrack=t[0],this._addVideoListeners(this._activeTrack)):(this._activeTrack=null,this._removeVideoListeners()),this._refreshCurrentCaption()},a._getCurrentCaptionText=function(t){var e=this._activeTrack?this._activeTrack.cues:null;if(!e)return"";if(this._currentCaption&&this._currentCaption.startTime>=t&&this._currentCaption<=t)return this._currentCaption.text;for(var n,i=0,r=e.length;i<r;){if(e[i].startTime<=t&&e[i].endTime>=t)n=e[i];else if(e[i].startTime>=t)break;i++}return this._currentCaption=n,n?n.text:""},a._refreshCurrentCaption=function(){this._view.setText(this._getCurrentCaptionText(this._video.getCurrentTime()))},a.destroy=function(){this._removeVideoListeners()},e.exports=s},{"./parseVTT":364,"@marcom/ac-ajax-xhr":33,"@marcom/ac-function/throttle":194}],360:[function(t,e,n){"use strict";var i=t("../ui/factory/createComponents"),r=t("./TextTracksBehavior"),o=t("../ui/elements/Label"),s=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,a='<div class="ac-video-player-text-track"></div>',l="is-visible",c="ac-video-player-text-track-container",u={textTracksPolyfill:{className:"ac-video-player-text-track",view:{classDef:o,options:{}},behavior:{classDef:r}}},h=function(t){s.call(this),this.container=t.container,this._video=t.video,this._initialize(t)},f=h.prototype=Object.create(s.prototype);f._initialize=function(t){this._onTrackChange=this._onTrackChange.bind(this),this.el=document.createElement("div"),this.el.innerHTML=t.template||a,this.el.classList.add(c),this._tracks=t.tracks||[],this._textTrackComponent=i(this.el,u,{video:this._video})},f._onTrackChange=function(){this.trigger("change"),this.el.parentElement||(this._video.getRenderElement().parentElement.appendChild(this.el),this.el.firstElementChild.classList.add(l))},f.addTrack=function(t){this._tracks||(this._tracks=[]);var e=t.mode||"hidden",n=this._onTrackChange;Object.defineProperty(t,"mode",{get:function(){return e},set:function(t){e=t,n()},enumerable:!0,configurable:!0}),this._tracks.push(t),this.trigger("addtrack")},f.clearTracks=function(){this._tracks=[],this.trigger("removetrack"),this.trigger("change")},f.getTextTracks=function(){return this._tracks},f.trigger=function(t,e){return s.prototype.trigger.call(this,t,Object.assign({type:t},e||{}))},f.destroy=function(){this._textTrackComponent.destroy(),s.prototype.destroy.call(this)},e.exports=h},{"../ui/elements/Label":389,"../ui/factory/createComponents":397,"./TextTracksBehavior":359,"@marcom/ac-event-emitter-micro":160}],361:[function(t,e,n){"use strict";var i,r=t("@marcom/useragent-detect");i=r.browser.safari?function(t,e){t.track.mode=e}:function(t,e){t.mode=e};var o=function(t){var e;if(t instanceof HTMLElement)return this._videoElement.appendChild(t);var n=document.createElement("track");n.src=t.src,n.kind="captions",n.srclang=t.srclang,"en"===n.srclang?n.label=t.label||"English":n.label=t.label||t.srclang&&t.srclang.toUpperCase()||"Unknown CC",r.browser.firefox?(e=this._videoElement.textTracks.length,setTimeout(function(){this._videoElement.appendChild(n),i(this._videoElement.textTracks[e],t.mode||"hidden")}.bind(this),0)):r.os.android?(e=this._videoElement.textTracks.length,this._videoElement.appendChild(n),i(this._videoElement.textTracks[e],t.mode||"hidden")):(this._videoElement.appendChild(n),i(n,t.mode||"hidden"))},s=function(){return this._videoElement.textTracks},a=function(){if(!this._textTracksEmitter){var e=t("../dom-emitter/DOMEmitterMicro");this._textTracksEmitter=new e(this.getTextTracks())}return this._textTracksEmitter},l=function(t){for(var e=0,n=t?t.length:0;e<n;e++){var i=t[e];o.call(this,i)}},c=function(){};e.exports={create:l,add:o,get:s,getEmitter:a,destroy:c}},{"../dom-emitter/DOMEmitterMicro":348,"@marcom/useragent-detect":501}],362:[function(t,e,n){"use strict";var i=t("./TextTracksDOM"),r=function(t){if(t)if(this._textTracksPolyfill){this._textTracksPolyfill.clearTracks();for(var e=0,n=t.length;e<n;e++)this._textTracksPolyfill.addTrack(t[e])}else this._textTracksPolyfill=new i({video:this,tracks:t,container:this._parentElement})},o=function(t){return this._textTracksPolyfill.addTrack(t)},s=function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill.getTextTracks()},a=function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill},l=function(){this._textTracksPolyfill.destroy(),this._textTracksPolyfill=null};e.exports={create:r,add:o,get:s,getEmitter:a,destroy:l}},{"./TextTracksDOM":360}],363:[function(t,e,n){"use strict";var i=t("@marcom/useragent-detect"),r=!i.browser.ie&&!i.browser.edge;e.exports=function(e){e=e||{};var n;return n=!!e.hls||!e.threesixty&&("undefined"==typeof e.useNativeCaptions?r:e.useNativeCaptions),t(n?"./TextTracksNative":"./TextTracksPolyfill")}},{"./TextTracksNative":361,"./TextTracksPolyfill":362,"@marcom/useragent-detect":501}],364:[function(t,e,n){"use strict";var i=t("../utils/Time");e.exports=function(t){var e,n,r=t.split(/\n/),o=/([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}( \-\-> ){1}([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}/,s=[],a=0,l=r.length;for(a;a<l;a++)if(n="",o.test(r[a])){for(e=r[a].split(" --> "),e[0]=e[0].split(":").length<3?"00:"+e[0]:e[0],e[1]=e[1].split(":").length<3?"00:"+e[1]:e[1];++a&&a<l&&!o.test(r[a]);)""!==r[a]&&(n+=r[a]+"<br />");n=n.substr(0,n.length-6),a<l&&a--,s.push({startTime:i.stringToNumber(e[0].split(" ")[0]),endTime:i.stringToNumber(e[1].split(" ")[0]),text:n})}return s}},{"../utils/Time":410}],365:[function(t,e,n){"use strict";var i=t("@marcom/ac-string/supplant"),r=t("../utils/Time"),o=t("./localization/Localization"),s=t("./factory/createComponents"),a="ac-video-controls",l="control-bar-skin-default",c=t("@marcom/ac-feature/isDesktop")(),u=t("./overlays/OverlayContainer"),h=t("./end-state/EndStateItemContainer"),f=t("./compass/Compass"),d=t("../utils/merge"),p=function(t){this._initialize(t)},m=p.prototype;m._initialize=function(t){this.el=t.element||document.createElement("div"),this._basePath=t.basePath,this.el.style.display="none",this._template=t.template||'<div class="controls-container" >\n\n\t<div class="{elementClassPrefix}-social-tray hidden"></div>\n\n\t<div class="center-button-container {elementClassPrefix}-play-pause-button-container">\n\t\t<div class="button-wrapper">\n\t\t\t<button type="button" class="ac-video-icon centered-button {elementClassPrefix}-play-pause-button {elementClassPrefix}-button no-autoplay" value="{playpause}" aria-label="{playpause}" role="button" tabindex="0" data-acv-active-area data-acv-draggable-area></button>\n\t\t</div>\n\t</div>\n\n\t<div class="main-controls-container">\n\t\t<div class="ac-video-overlay-container"></div>\n\t\t<div class="main-controls">\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<div class="main-controls-item controls-volume">\n\t\t\t\t\t<button type="button" class="ac-video-icon {elementClassPrefix}-toggle-mute-volume-button {elementClassPrefix}-button" value="{togglemutevolume}" aria-label="{togglemutevolume}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t\t\t<div class="{elementClassPrefix}-volume-level-indicator" tabindex="0" aria-valuemin="0" aria-valuemax="100" min="0" max="100" aria-label="{adjustvolume}" role="slider" aria-orientation="vertical" step="0.05" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-text-tracks-toggle-button {elementClassPrefix}-button no-text-tracks" value="{captionscontrol}" aria-label="{captionscontrol}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t\t<div class="ac-video-captions-selector-container">\n\t\t\t\t\t<span class="ac-video-captions-selector-title">{subtitlescontrol}</span>\n\t\t\t\t\t<ul class="{elementClassPrefix}-captions-selector" role="radiogroup" aria-label="{subtitlescontrol}" data-acv-active-area></ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="main-controls-item controls-progress">\n\t\t\t\t<div class="controls-progress-time controls-progress-time-1">\n\t\t\t\t\t<div class="{elementClassPrefix}-elapsed-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{elapsed}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-elapsed-time">00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-bar">\n\t\t\t\t\t<div class="{elementClassPrefix}-buffered-indicator"></div>\n\t\t\t\t\t<div class="{elementClassPrefix}-progress-indicator ac-slider-inactive" aria-label="progress-indicator" role="slider" precision="float" min="0" max="{max}" step="0.0005" value="0" tabindex="0" aria-valuemax="{max}" aria-valuemin="{min}" aria-valuenow="{value}" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-time controls-progress-time-2">\n\t\t\t\t\t<div class="{elementClassPrefix}-remaining-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{remaining}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-remaining-time">-00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">-44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="main-controls-item live-stream">\n\t\t\t\t<span class="live-stream-text">{livestream}</span>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-airplay-button {elementClassPrefix}-button airplay-unsupported" value="{airplay}" aria-label="{airplay}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-picture-in-picture-button {elementClassPrefix}-button picture-in-picture-unsupported" value="{pictureinpicture}" aria-label="{pictureinpicture}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-full-screen-button {elementClassPrefix}-button fullscreen-unsupported" value="{fullscreen}" aria-label="{fullscreen}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="end-state-wrapper">\n\t\t<div class="end-state-container"></div>\n\t</div>\n</div>\n\n<div class="compass-wrapper" data-acv-active-area>\n\t<div class="compass-background ac-video-icon"></div>\n\t<div class="compass-arrows">\n\t\t<button class="compass-arrow-top ac-video-icon" aria-label="{threesixtyup}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-right ac-video-icon" aria-label="{threesixtyright}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-bottom ac-video-icon" aria-label="{threesixtydown}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-left ac-video-icon" aria-label="{threesixtyleft}" role="button" tabindex="0"></button>\n\t</div>\n\t<div class="compass-field ac-video-icon"></div>\n\t<div class="compass-ring ac-video-icon"></div>\n\t<button class="compass" aria-label="{threesixtyicon}" role="button" tabindex="0"></button>\n</div>\n',
this._templateData=t.templateData||Object.assign({elementClassPrefix:"controls"}),this._destroyed=!1,this._localize().then(function(){this._destroyed||(this._initUIComponents(t),this.el.style.display=""),"function"==typeof t.readyCallback&&t.readyCallback()}.bind(this))},m._localize=function(){return new Promise(function(t){o.getTranslation({callback:function(e){t(e)}.bind(this),basePath:this._basePath})}.bind(this)).then(function(t){this._templateData=Object.assign(this._templateData,t)}.bind(this))},m._renderTemplateMarkup=function(){var t=i(this._template,this._templateData);this.el.innerHTML=t},m._initDesktopControls=function(t,e){this._componentCollection=s(t,d(e,{elementClassPrefix:this._templateData.elementClassPrefix,elapsedTimeIndicator:{behavior:{observe:{source:this._player,events:["timeupdate","seeking","seeked","durationchange"],update:function(t){t.setText(r.formatTime(this._player.getCurrentTime(),this._player.getDuration()))}.bind(this)}}},remainingTimeIndicator:{behavior:{observe:{source:this._player,events:["timeupdate","seeking","seeked","durationchange"],update:function(t){t.setText(r.formatTime(this._player.getCurrentTime()-this._player.getDuration(),this._player.getDuration()))}.bind(this)}}},volumeLevel:{view:{options:{value:this._player.getMuted()?0:100*this._player.getVolume()}}},playPauseContainer:{view:{options:{labels:{playing:this._templateData.pause,paused:this._templateData.play,ended:this._templateData.replay}}}},fullScreen:{view:{options:{labels:{initial:this._templateData.fullscreen,on:this._templateData.exitfullscreen,off:this._templateData.fullscreen}}}},pictureInPictureToggle:{view:{options:{labels:{initial:this._templateData.pictureinpicture,on:this._templateData.exitpictureinpicture,off:this._templateData.pictureinpicture}}}}}),{player:this._player,localization:this._templateData})},m._initUIComponents=function(t){this._player=t.player;var e=this.el,n=t.components;e.classList.add(t.className||a),this._renderTemplateMarkup();var i=e.querySelector(".main-controls-container");t.enableMainControls?(i.classList.add(l),this.mainControlsElement=i):i.parentElement.removeChild(i);var r=e.querySelector(".end-state-container");this.endState=new h(Object.assign({},{el:r,player:this._player},t.endState)),t.threesixty&&(this.compass=new f({rootElement:e,player:this._player})),this._initDesktopControls(e,n),this.sharingModule=this._componentCollection.components.socialShare[0].behavior.sharingModule,this._componentCollection.components.progressBar.length&&(this.scrubberView=this._componentCollection.components.progressBar[0].view),this.playButtonElement=this.el.querySelector(".controls-play-pause-button"),c&&(this.overlays=new u({el:this.el.querySelector(".ac-video-overlay-container"),player:this._player}))},m.destroy=function(){this._componentCollection&&(this._componentCollection.destroy(),this._componentCollection=null),this._destroyed=!0,this._player=null,this._templateData=null},e.exports=p},{"../utils/Time":410,"../utils/merge":412,"./compass/Compass":382,"./end-state/EndStateItemContainer":395,"./factory/createComponents":397,"./localization/Localization":403,"./overlays/OverlayContainer":405,"@marcom/ac-feature/isDesktop":166,"@marcom/ac-string/supplant":333}],366:[function(t,e,n){"use strict";var i={components:t("./DefaultComponents"),controlsImplementation:t("./ControlBar")},r=function(t){t=t||{};var e=Object.assign({},i,t);return{create:function(n){var r=Object.assign({},e,n);return r.components=t.components||i.components,new r.controlsImplementation(r)}}};e.exports=r},{"./ControlBar":365,"./DefaultComponents":368}],367:[function(t,e,n){"use strict";e.exports=[{name:"small",minWidth:0,maxWidth:479},{name:"medium",minWidth:480,maxWidth:779},{name:"large",minWidth:780,maxWidth:1/0}]},{}],368:[function(t,e,n){"use strict";var i=t("./elements/Button"),r=t("./elements/StatefulButton"),o=t("./elements/Label"),s=t("./elements/ListSelector"),a=t("./elements/Slider"),l=t("./elements/Container"),c=t("./behaviors/MuteButtonBehavior"),u=t("./behaviors/PlayPauseButtonBehavior"),h=t("./behaviors/PictureInPictureButtonBehavior"),f=t("./behaviors/CaptionsButtonBehavior"),d=t("./behaviors/CaptionsSelectorBehavior"),p=t("./behaviors/FullScreenButtonBehavior"),m=t("./behaviors/ProgressBarSliderBehavior"),_=t("./behaviors/VolumeSliderBehavior"),y=t("./behaviors/SharingButtonBehavior"),g=t("./behaviors/SocialContainerBehavior"),v=t("./behaviors/AirPlayButtonBehavior"),b=t("./elements/mixins/CursorPointer");e.exports={back30Seconds:{className:"back-30-seconds-button",view:{classDef:i}},fullScreen:{className:"full-screen-button",view:{classDef:r,options:{states:{initial:"fullscreen-unsupported",on:"is-fullscreen",off:""},labels:{initial:"fullscreen",on:"exitfullscreen",off:"fullscreen"}}},behavior:{classDef:p}},toggleMuteVolume:{className:"toggle-mute-volume-button",view:{classDef:r,options:{states:{initial:[],on:["is-muted"],off:[]}}},behavior:{classDef:c}},playPauseContainer:{className:"play-pause-button-container",view:{classDef:r,options:{states:{playing:["is-playing"],paused:[],ended:["is-ended"]}}},behavior:{classDef:u}},pictureInPictureToggle:{className:"picture-in-picture-button",view:{classDef:r,options:{states:{initial:["picture-in-picture-unsupported"],on:["is-picture-in-picture"],off:[]},labels:{initial:"pictureinpicture",on:"exitpictureinpicture",off:"pictureinpicture"}}},behavior:{classDef:h}},captionsToggle:{className:"text-tracks-toggle-button",view:{classDef:r,options:{states:{initial:["no-text-tracks"],on:["text-tracks-visible"],off:[]}}},behavior:{classDef:f}},captionsSelector:{className:"captions-selector",view:{classDef:s},behavior:{classDef:d}},airplayToggle:{className:"airplay-button",view:{classDef:r,options:{states:{initial:["airplay-unsupported"],on:["airplay-active"],off:[]}}},behavior:{classDef:v}},elapsedTimeIndicator:{className:"elapsed-time",view:{classDef:o}},remainingTimeIndicator:{className:"remaining-time",view:{classDef:o}},progressBar:{className:"progress-indicator",view:{classDef:a,options:{template:'<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-hover-track">\n\t\t<div class="ac-slider-hover-notch"></div>\n\t</div>\n\t<div class="ac-slider-thumb">\n\t\t<div class="ac-slider-thumb-background-wrapper">\n\t\t\t<div class="ac-slider-thumb-background"></div>\n\t\t</div>\n\t</div>\n\t<div class="ac-slider-inner-track">\n\t\t<div class="ac-slider-scrubbed"></div>\n\t</div>\n</div>',min:0,max:1,mixins:[b],orientation:"horizontal"}},behavior:{classDef:m}},volumeLevel:{className:"volume-level-indicator",view:{classDef:a,options:{template:'<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-background"></div>\n\t<div class="ac-slider-thumb-wrapper">\n\t\t<div class="ac-slider-thumb">\n\t\t\t<div class="ac-slider-thumb-background-wrapper">\n\t\t\t\t<div class="ac-slider-thumb-background"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ac-slider-inner-track">\n\t\t<div class="ac-slider-scrubbed"></div>\n\t</div>\n</div>',min:0,max:100,mixins:[b],orientation:"vertical"}},behavior:{classDef:_}},sharing:{className:"sharing-button",view:{classDef:r,options:{states:{initial:["sharing-unsupported"],on:["is-sharing"],off:[]}}},behavior:{classDef:y}},socialShare:{className:"social-tray",view:{classDef:l,options:{}},behavior:{classDef:g}}}},{"./behaviors/AirPlayButtonBehavior":369,"./behaviors/CaptionsButtonBehavior":372,"./behaviors/CaptionsSelectorBehavior":373,"./behaviors/FullScreenButtonBehavior":374,"./behaviors/MuteButtonBehavior":375,"./behaviors/PictureInPictureButtonBehavior":376,"./behaviors/PlayPauseButtonBehavior":377,"./behaviors/ProgressBarSliderBehavior":378,"./behaviors/SharingButtonBehavior":379,"./behaviors/SocialContainerBehavior":380,"./behaviors/VolumeSliderBehavior":381,"./elements/Button":387,"./elements/Container":388,"./elements/Label":389,"./elements/ListSelector":390,"./elements/Slider":391,"./elements/StatefulButton":392,"./elements/mixins/CursorPointer":393}],369:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._player.supportsAirPlay()&&(this._airplayStateChange=this._airplayStateChange.bind(this),this._player.getMediaElement().addEventListener("webkitplaybacktargetavailabilitychanged",this._airplayStateChange),this._updateState=this._updateState.bind(this),this._player.getMediaElement().addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this._updateState))},o=i.prototype,s=r.prototype=Object.create(o);s._airplayStateChange=function(t){"available"===t.availability?this._airplayAvailable=!0:this._airplayAvailable=!1,this._updateState()},s._updateState=function(){this._player.getMediaElement().webkitCurrentPlaybackTargetIsWireless?this._view.setState("on"):this._airplayAvailable?this._view.setState("off"):this._view.setState("initial")},s._onClick=function(){this._player.getMediaElement().webkitShowPlaybackTargetPicker()},s.destroy=function(){this._player.getMediaElement().removeEventListener("webkitplaybacktargetavailabilitychanged",this._airplayStateChange),this._player.getMediaElement().removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this._updateState)},e.exports=r},{"./ButtonBehavior":371}],370:[function(t,e,n){"use strict";var i=function(t,e){this._player=e.player,this._view=t,this._addViewListeners&&this._addViewListeners(),this._addPlayerListeners&&this._addPlayerListeners()};e.exports=i},{}],371:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=function(t,e){this._onClick=this._onClick.bind(this),i.apply(this,arguments)},o=r.prototype=Object.create(i.prototype);o._addViewListeners=function(){this._view.on("click",this._onClick)},o._onClick=function(t){},o.destroy=function(){this._view.off("click",this._onClick)},e.exports=r},{"./BaseBehavior":370}],372:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._updateState(),this._allowMultiLanguageCaptions=!this._player.options.disableMultiLanguageCaptions},o=i.prototype,s=r.prototype=Object.create(o);s._updateState=function(){var t=this._player.getVisibleTextTracks(),e=this._player.getTextTracks().filter(function(t){return"subtitles"===t.kind||"captions"===t.kind||!t.kind});t.length?this._view.setState("on"):e.length?this._view.setState("off"):this._view.setState("initial")},s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("addtrack",this._updateState),this._player.on("change",this._updateState),this._player.on("removetrack",this._updateState)},s._onClick=function(){var t=this._player.getVisibleTextTracks(),e=this._player.getTextTracks().filter(function(t){return"metadata"!==t.kind});e.length>1&&this._allowMultiLanguageCaptions?this._player.isCaptionsSelectorShowing()?this._player.hideCaptionsSelector():this._player.showCaptionsSelector():1===t.length?e[0].mode="hidden":e[0].mode="showing",setTimeout(this._updateState)},s.destroy=function(){this._player.off("addtrack",this._updateState),this._player.off("change",this._updateState),this._player.off("removetrack",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":371}],373:[function(t,e,n){"use strict";var i="__CC_DISABLE",r=t("./BaseBehavior"),o=t("@marcom/useragent-detect").browser,s=o.edge||o.ie,a=function(t,e){r.apply(this,arguments),this._updateState()},l=a.prototype=Object.create(r.prototype);l._addViewListeners=function(){this._onSelected=this._onSelected.bind(this),this._view.on("ItemSelected",this._onSelected)},l._updateState=function(){var t="showing",e=this._player.getTextTracks().filter(function(t){return"subtitles"===t.kind||"captions"===t.kind||!t.kind}),n=e.map(function(e){"showing"===e.mode&&(t="hidden");var n={label:e.label||e.language||e.srclang&&("en"===e.srclang.toLowerCase()?"English":e.srclang)||"Unknown CC",language:e.language};return Object.defineProperty(n,"mode",{get:function(){return e.mode},set:function(t){e.mode=t}}),n});this._view.setItems([{label:"Off",language:i,mode:t}].concat(n))},l._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("addtrack",this._updateState),this._player.on("change",this._updateState),this._player.on("removetrack",this._updateState)},l._onSelected=function(t){var e=t.detail;this._player.getVisibleTextTracks().forEach(function(t){t.mode="hidden"}),e.language!==i&&(e.mode="showing"),s&&this._player.getMediaElement().textTracks.dispatchEvent(new CustomEvent("change")),setTimeout(this._updateState)},l.destroy=function(){this._player.off("addtrack",this._updateState),this._player.off("change",this._updateState),this._player.off("removetrack",this._updateState),this._view.off("ItemSelected",this._onSelected)},e.exports=a},{"./BaseBehavior":370,"@marcom/useragent-detect":501}],374:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._player.getFullScreenEnabled()&&this._updateState()},o=i.prototype,s=r.prototype=Object.create(o);s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("fullscreen:change",this._updateState)},s._updateState=function(){this._view.setState(this._player.isFullscreen()?"on":"off")},s._onClick=function(){this._player.toggleFullscreen(!this._player.isFullscreen())},s.destroy=function(){this._player.off("fullscreen:change",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":371}],375:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._updateState()},o=i.prototype,s=r.prototype=Object.create(o);s._updateState=function(){this._view.setState(this._player.getMuted()?"on":"off")},s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("volumechange",this._updateState)},s._onClick=function(){this._player.getMuted()?(this._player.setMuted(!1),0===this._player.getVolume()&&this._player.setVolume(.1)):this._player.setMuted(!0)},s.destroy=function(){this._player.off("volumechange",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":371}],376:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._initialize()},o=i.prototype,s=r.prototype=Object.create(o);s._initialize=function(){this._updateButtonState=this._updateButtonState.bind(this),this._player.supportsPictureInPicture()&&(this._updateButtonState(),this._player.on("webkitpresentationmodechanged",this._updateButtonState))},s._onClick=function(){this._player.setPictureInPicture(!this._player.isPictureInPicture())},s._updateButtonState=function(){this._view.setState(this._player.isPictureInPicture()?"on":"off")},s.destroy=function(){this._player.off("webkitpresentationmodechanged",this._updateButtonState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":371}],377:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._setPlayingState()},o=i.prototype,s=r.prototype=Object.create(o);s._addPlayerListeners=function(){this._setPlayingState=this._setPlayingState.bind(this),this._player.on("play",this._setPlayingState),this._player.on("playing",this._setPlayingState),this._player.on("pause",this._setPlayingState),this._player.on("ended",this._setPlayingState)},s._onClick=function(){this._togglePlay()},s._setPlayingState=function(){this._view.setState(this._player.getEnded()?"ended":this._player.getPaused()?"paused":"playing")},s._togglePlay=function(){this._player.getPaused()||this._player.getEnded()?this._player.play():this._player.pause()},s.destroy=function(){this._player.off("play",this._setPlayingState),this._player.off("pause",this._setPlayingState),this._player.off("playing",this._setPlayingState),this._player.off("ended",this._setPlayingState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":371}],378:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=t("@marcom/ac-string/supplant"),o="is-playing",s=t("@marcom/ac-raf-emitter/draw"),a=t("@marcom/ac-raf-emitter/cancelDraw"),l=function(t,e){i.apply(this,arguments),this._visible=!1,this._ariaTextTemplate=e.localization.currenttimetext,this._onDurationChange()},c=l.prototype=Object.create(i.prototype);c._addViewListeners=function(){this._onSliderGrab=this._onSliderGrab.bind(this),this._onSliderChange=this._onSliderChange.bind(this),this._onSliderRelease=this._onSliderRelease.bind(this),this._view.on("grab",this._onSliderGrab)},c._addPlayerListeners=function(){this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onPlay=this._onPlay.bind(this),this._onPause=this._onPause.bind(this),this._onEnded=this._onEnded.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onRAF=this._onRAF.bind(this),this._player.on("durationchange",this._onDurationChange),this._player.on("loadstart",this._onEnded),this._player.on("ended",this._onEnded),this._player.on("timeupdate",this._onTimeUpdate),this._player.on("play",this._onPlay),this._player.on("pause",this._onPause),this._player.on("ended",this._onEnded)},c._setIsPlaying=function(t){t?this._view.setState(o):this._view.clearState(o)},c._onPlay=function(){this._setIsPlaying(!0),this._player.isLive()||(a(this._timeUpdateInterval),s(this._onRAF))},c._onRAF=function(){this._onTimeUpdate(),this._timeUpdateInterval=s(this._onRAF)},c._onPause=function(){this._setIsPlaying(!1),a(this._timeUpdateInterval),this._onTimeUpdate()},c._onEnded=function(){this._onPause(),this._updateSliderPosition(0)},c._onSliderGrab=function(){this._player.off("timeupdate",this._onTimeUpdate),a(this._timeUpdateInterval),this._view.off("grab",this._onSliderGrab),this._view.on("change",this._onSliderChange),this._view.on("release",this._onSliderRelease),this._onPause()},c._onSliderRelease=function(){this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.on("grab",this._onSliderGrab),this._player.on("timeupdate",this._onTimeUpdate),this._player.getPaused()||this._onPlay()},c._getTimeAsPercent=function(){return this._player.getCurrentTime()/this._cachedDuration},c._onDurationChange=function(){this._cachedDuration=this._player.getDuration(),this._updateSliderPosition(this._getTimeAsPercent()),this._player.getPaused()||this._onPlay()},c._onSliderChange=function(){var t=this._view.getValue();this._setPlayerCurrentTime(t*this._cachedDuration),this._setAriaValueText(t*this._cachedDuration),this._updateScrubbedValue()},c._onTimeUpdate=function(){this._player.getPaused()?this._updateSliderPosition(this._getTimeAsPercent()):this._updateSliderPosition(this._getTimeAsPercent())},c._updateSliderPosition=function(t){this._view.setValue(t),this._setAriaValueText(t*this._cachedDuration),this._updateScrubbedValue(),this._visible||isNaN(this._cachedDuration)||(this._view.show(),this._visible=!0)},c._setAriaValueText=function(t){var e=Math.floor(t/60),n=Math.ceil(t%60);this._view.setAriaValueText(r(this._ariaTextTemplate,{minutes:e,seconds:n}))},c._updateScrubbedValue=function(){this._view.setScrubbedValue()},c._setPlayerCurrentTime=function(t){this._player.setCurrentTime(t)},c._removeEventListeners=function(){this._player.off("durationchange",this._onDurationChange),this._player.off("loadstart",this._onEnded),this._player.off("ended",this._onEnded),this._player.off("timeupdate",this._onTimeUpdate),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.off("grab",this._onSliderGrab),this._player.off("play",this._onPlay),this._player.off("pause",this._onPause),this._player.off("ended",this._onPause)},c.destroy=function(){this._removeEventListeners(),a(this._timeUpdateInterval)},e.exports=l},{"./BaseBehavior":370,"@marcom/ac-raf-emitter/cancelDraw":270,"@marcom/ac-raf-emitter/draw":272,"@marcom/ac-string/supplant":333}],379:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._player.states&&this._updateState()},o=i.prototype,s=r.prototype=Object.create(o);s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.states&&this._player.states.on("statechange",this._updateState)},s._updateState=function(){this._stateChanging=!1,this._view.setState("sharing"===this._player.states.getCurrentState()?"on":"off")},s._onClick=function(){this._stateChanging||("sharing"===this._player.states.getCurrentState()?(this._view.setState("off"),this._player.states.setState("none")):(this._view.setState("on"),this._player.states.setState("sharing")),this._stateChanging=!0)},s.destroy=function(){this._player.states&&this._player.states.off("statechange",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":371}],380:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=t("../sharing/SharingModule"),o=function(t,e){i.apply(this,arguments),this._updateState()},s=i.prototype,a=o.prototype=Object.create(s);a._updateState=function(){this.sharingModule=new r(Object.assign({},{player:this._player,parentView:this._view})),this.sharingModule.setData(this._player.options.sharing),this._view.el.innerHTML="",this._view.el.appendChild(this.sharingModule.el)},e.exports=o},{"../sharing/SharingModule":408,"./BaseBehavior":370}],381:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=function(t,e){i.apply(this,arguments),this._hideVolume(),this._updateSliderVolumeValue()},o=r.prototype=Object.create(i.prototype);o._addViewListeners=function(){this._showVolume=this._showVolume.bind(this),this._hideVolume=this._hideVolume.bind(this),this._onSliderGrab=this._onSliderGrab.bind(this),this._onSliderChange=this._onSliderChange.bind(this),this._onSliderRelease=this._onSliderRelease.bind(this),this._onFocusChange=this._onFocusChange.bind(this),this._view.on("grab",this._onSliderGrab),this._view.on("focuschange",this._onFocusChange)},o._addPlayerListeners=function(){this._updateSliderVolumeValue=this._updateSliderVolumeValue.bind(this),this._onUserVolumeChange=this._onUserVolumeChange.bind(this),this._player.once("durationchange",this._updateSliderVolumeValue),this._player.on("volumechange",this._updateSliderVolumeValue),this._player.on("uservolumechange",this._onUserVolumeChange)},o._onSliderGrab=function(){this._cachedVolume=this._player.getVolume(),this._player.off("volumechange",this._updateSliderVolumeValue),this._view.off("grab",this._onSliderGrab),this._view.on("change",this._onSliderChange),this._view.on("release",this._onSliderRelease)},o._onSliderRelease=function(){this._setPlayerVolume(this._view.getValue()),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.on("grab",this._onSliderGrab),this._player.on("volumechange",this._updateSliderVolumeValue)},o._onSliderChange=function(){var t=this._view.getValue();this._setPlayerVolume(t),this._view.setScrubbedValue()},o._setPlayerVolume=function(t){t?(this._player.setMuted(!1),this._player.setVolume(t/100)):(this._player.setMuted(!0),this._player.setVolume(this._cachedVolume))},o._showVolume=function(){this._view.show()},o._hideVolume=function(){this._view.hide()},o._onUserVolumeChange=function(){this._showVolume(),clearTimeout(this._hideVolumeTimer),this._view.isFocused()||(this._hideVolumeTimer=setTimeout(this._hideVolume,1e3))},o._onFocusChange=function(){this._view.isFocused()?this._showVolume():this._hideVolume()},o._updateSliderVolumeValue=function(){if(this._player.getMuted())this._view.setValue(0),this._view.setScrubbedValue();else{var t=this._player.getVolume();this._view.setValue(100*t),this._view.setScrubbedValue()}},o._removeEventListeners=function(){this._player.off("durationchange",this._updateSliderVolumeValue),this._player.off("volumechange",this._updateSliderVolumeValue),this._player.off("uservolumechange",this._onUserVolumeChange),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.off("grab",this._onSliderGrab)},o.destroy=function(){this._removeEventListeners()},e.exports=r},{"./BaseBehavior":370}],382:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(t("../localization/Localization"),t("@marcom/ac-keyboard/Keyboard")),s=(t("@marcom/ac-keyboard/keyMap"),t("@marcom/useragent-detect")),a=s.os.ios||s.os.android,l=t("@marcom/ac-360"),c=360,u=180,h=function(){function t(e){i(this,t),this._rootElement=e.rootElement,this._player=e.player,this._360=this._player.get360(),this.el=this._rootElement.querySelector(".compass-wrapper"),this.compassRing=this.el.querySelector(".compass-ring"),this.compassField=this.el.querySelector(".compass-field"),this.compass=this.el.querySelector(".compass"),this.compassArrows=this.el.querySelector(".compass-arrows"),this.compassArrowLeft=this.el.querySelector(".compass-arrow-left"),this.compassArrowRight=this.el.querySelector(".compass-arrow-right"),this.compassArrowTop=this.el.querySelector(".compass-arrow-top"),this.compassArrowBottom=this.el.querySelector(".compass-arrow-bottom"),this._keyboard=new o(this.el),this._arrowControls=this._player.get360().arrowControls,this._bindMethods(),this._addEventListeners()}return r(t,[{key:"_bindMethods",value:function(){this._onFocusIn=this._onFocusIn.bind(this),this._onFocusOut=this._onFocusOut.bind(this),this._onCompassClick=this._onCompassClick.bind(this),this._onCompassMouseEnter=this._onCompassMouseEnter.bind(this),this._onCompassMouseLeave=this._onCompassMouseLeave.bind(this),this._onCompassFocusIn=this._onCompassFocusIn.bind(this),this._onCompassFocusOut=this._onCompassFocusOut.bind(this),this._onRotationTransitionEnd=this._onRotationTransitionEnd.bind(this),this._onCompassArrowsClick=this._onCompassArrowsClick.bind(this),this._on360PositionChange=this._on360PositionChange.bind(this),this._on360IconUpdate=this._on360IconUpdate.bind(this),this._transitionTiming=this._transitionTiming.bind(this)}},{key:"_addEventListeners",value:function(){this._player.once("controlsready",function(){a||(this.compass.addEventListener("mouseenter",this._onCompassMouseEnter),this.compass.addEventListener("mouseleave",this._onCompassMouseLeave)),this.el.addEventListener("focusin",this._onFocusIn),this.el.addEventListener("focusout",this._onFocusOut),this.compass.addEventListener("click",this._onCompassClick),this.compass.addEventListener("focusin",this._onCompassFocusIn),this.compass.addEventListener("focusout",this._onCompassFocusOut),this.compassArrows.addEventListener("click",this._onCompassArrowsClick),this._360.on(l.POSITION_CHANGE,this._on360PositionChange),this._360.on(l.ROTATION_START,this._transitionTiming),this._360.on(l.ROTATION_COMPLETE,this._onRotationTransitionEnd)}.bind(this))}},{key:"_removeEventListeners",value:function(){this.el.removeEventListener("focusin",this._onFocusIn),this.el.removeEventListener("focusout",this._onFocusOut),this.compass.removeEventListener("click",this._onCompassClick),this.compass.removeEventListener("focusin",this._onCompassFocusIn),this.compass.removeEventListener("focusout",this._onCompassFocusOut),this.compass.removeEventListener("mouseenter",this._onCompassMouseEnter),this.compass.removeEventListener("mouseleave",this._onCompassMouseLeave),this.compassArrows.removeEventListener("click",this._onCompassArrowsClick),this._360.off(l.POSITION_CHANGE,this._on360PositionChange),this._360.off(l.ROTATION_START,this._transitionTiming),this._360.off(l.ROTATION_COMPLETE,this._onRotationTransitionEnd)}},{key:"_showCompassArrows",value:function(){this.el.classList.add("show-arrows")}},{key:"_hideCompassArrows",value:function(){this.el.classList.remove("show-arrows")}},{key:"_onRotationTransitionEnd",value:function(){this._compassIsRotating=!1,this._360.off(l.ROTATION_UPDATE,this._on360IconUpdate)}},{key:"_transitionTiming",value:function(t){var e=t.time,n=this._get360HorizontalAngle();this._compassIsRotating=!0,this.compassRing.style.transition="transform "+e+"ms cubic-bezier(0.25,0.1,0,1)",this.compassField.style.transition="transform "+e+"ms cubic-bezier(0.25,0.1,0,1)";var i="rotate("+c+"deg)";n>u?(this.compassRing.style.transform=i,this.compassField.style.transform=i):n<-u?(this.compassRing.style.transform=i,this.compassField.style.transform=i):(this.compassRing.style.transform="rotate(0deg)",this.compassField.style.transform="rotate(0deg)")}},{key:"_on360IconUpdate",value:function(t){this.compassRing.style.transition="transform 0.1s ease",this.compassRing.style.transform="rotate("+t.currentPosition.lon+"deg)",this.compassField.style.transition="transform 0.1s ease",this.compassField.style.transform="rotate("+t.currentPosition.lon+"deg)"}},{key:"_onCompassClick",value:function(t){this._compassIsRotating||(this._player.get360().isAtOrigin?(this._360.on(l.ROTATION_UPDATE,this._on360IconUpdate),this._player.get360().oscillateLongitude()):this._player.panToOrigin())}},{key:"_onCompassArrowsClick",value:function(t){switch(t.target){case this.compassArrowLeft:this._arrowControls.leftArrowDown(t),this._arrowControls.leftArrowUp(t);break;case this.compassArrowRight:this._arrowControls.rightArrowDown(t),this._arrowControls.rightArrowUp(t);break;case this.compassArrowTop:this._arrowControls.upArrowDown(t),this._arrowControls.upArrowUp(t);break;case this.compassArrowBottom:this._arrowControls.downArrowDown(t),this._arrowControls.downArrowUp(t)}}},{key:"_onFocusIn",value:function(t){t.target!==this.compass&&this._showCompassArrows()}},{key:"_onFocusOut",value:function(t){this._hideCompassArrows()}},{key:"_onCompassFocusIn",value:function(t){this._rotateFieldOfViewToOrigin()}},{key:"_onCompassFocusOut",value:function(t){var e=this._get360HorizontalAngle();this.compassField.style.transform="rotate("+e+"deg)"}},{key:"_rotateFieldOfViewToOrigin",value:function(){var t=this._get360HorizontalAngle();this.compassField.style.transition="transform 0.3s ease",t>u?this.compassField.style.transform="rotate("+c+"deg)":t<-u?this.compassField.style.transform="rotate(-"+c+"deg)":this.compassField.style.transform="rotate(0deg)"}},{key:"_onCompassMouseEnter",value:function(t){this._hovering=!0,this._compassIsRotating||this._rotateFieldOfViewToOrigin()}},{key:"_onCompassMouseLeave",value:function(t){if(this._hovering=!1,!this._compassIsRotating){var e=this._get360HorizontalAngle();this.compassField.style.transition="transform 0.3s ease",this.compassField.style.transform="rotate("+e+"deg)"}}},{key:"_on360PositionChange",value:function(){var t=this._get360HorizontalAngle();this.compassRing.style.transition="none",this.compassRing.style.transform="rotate("+t+"deg)",this._hovering||(this.compassField.style.transition="none",this.compassField.style.transform="rotate("+t+"deg)")}},{key:"_get360HorizontalAngle",value:function(){var t=this._player.get360().position,e=t.lon%c;return e}},{key:"destroy",value:function(){this._removeEventListeners()}}]),t}();e.exports=h},{"../localization/Localization":403,"@marcom/ac-360":12,"@marcom/ac-keyboard/Keyboard":217,"@marcom/ac-keyboard/keyMap":220,"@marcom/useragent-detect":501}],383:[function(t,e,n){"use strict";var i=(t("@marcom/ac-feature/isDesktop")(),function(t){this._player=t.player,this.el=this._player.el,this._showControls=t.showControls,this._hideControls=t.hideControls,this._raiseControls=t.raiseControls,this._lowerControls=t.lowerControls,this._sendMouseDown=t.sendMouseDown,this._controls=this._player.controls,this._controlsVisible=t.controlsVisible,this._controlsTimeoutDuration=t.controlsTimeoutDuration,this._keyboardControl=t.keyboardControl,this._lastMouseCoords={},this._elementEmitter=t.elementEmitter,this._bindMethods(),this._addEventListeners()}),r=i.prototype;r._bindMethods=function(){this._onUserInteraction=this._onUserInteraction.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),
this._onFullscreenWillExit=this._onFullscreenWillExit.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onFocusIn=this._onFocusIn.bind(this),this._onFocusOut=this._onFocusOut.bind(this),this._onUserInteractionTimeout=this._onUserInteractionTimeout.bind(this)},r._addEventListeners=function(){this._controls.el.addEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.addEventListener("click",this._onClick,!0),this._player.on("fullscreen:change",this._onFullscreenChange),this._player.on("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.addEventListener("mouseleave",this._onMouseLeave):this._controls.el.addEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.on("keyboardinteraction",this._onUserInteraction),this._elementEmitter.on("focusin",this._onFocusIn),this._elementEmitter.on("focusout",this._onFocusOut)},r._removeEventListeners=function(){this._controls.el.removeEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.removeEventListener("click",this._onClick,!0),this._player.off("fullscreen:change",this._onFullscreenChange),this._player.off("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.removeEventListener("mouseleave",this._onMouseLeave):this._controls.el.removeEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.on("keyboardinteraction",this._onUserInteraction)},r._shouldIgnoreUserInteraction=function(t){return!!(t&&"focusin"!==t.type&&t.target&&this._isActiveArea(t.target))},r._onUserInteraction=function(t,e){!t||"click"!==t.type&&"focusin"!==t.type||this._player.isCaptionsSelectorShowing()&&!t.target.classList.contains("controls-text-tracks-toggle-button")&&"radio"!==t.target.getAttribute("role")&&"radiogroup"!==t.target.getAttribute("role")&&this._player.hideCaptionsSelector(),!this._player.getCurrentSrc()||this._preventUserInteraction||!e&&t&&"mousemove"===t.type&&this._lastMouseCoords.x===t.screenX&&this._lastMouseCoords.y===t.screenY||(t&&t.pageX&&(this._lastMouseCoords={x:t.screenX,y:t.screenY}),this._showControls(),this._raiseControls(),clearTimeout(this._userInteractionTimeout),this._shouldIgnoreUserInteraction(t)||(this._userInteractionTimeout=window.setTimeout(this._onUserInteractionTimeout,this._controlsTimeoutDuration)))},r._onUserInteractionTimeout=function(){this._hideControls()},r._onMouseLeave=function(t){window.clearTimeout(this._userInteractionTimeout),this._hideControls(),this._lowerControls(),this._lastMouseCoords={}},r._onMouseOut=function(t){this._controls.el.contains(t.target)||t.target===this._controls.el||this._onMouseLeave()},r._isActiveArea=function(t){for(;t!==this.el;){if(t.hasAttribute("data-acv-active-area"))return!0;t=t.parentNode}return!1},r._onClick=function(t){this._hasFocus=!1,this._onUserInteraction(t)},r._onFullscreenWillExit=function(){this.controls&&(this.controls.el.display="none")},r._onFullscreenChange=function(){this.controls&&(this.controls.el.display=""),this._hideControls(),this._lowerControls(),this._preventUserInteraction=!0,setTimeout(function(){this._preventUserInteraction=!1,this._player.refreshSize()}.bind(this),750),this._player.refreshSize()},r._onFocusIn=function(t){clearTimeout(this._focusOutTimer),this._focusOutTimer=null,this._hasFocus=!0,this._onUserInteraction(t)},r._onFocusOut=function(t){this._focusOutTimer=setTimeout(function(){this._hasFocus&&!this.el.contains(document.activeElement)&&(this._hasFocus=!1,this._hideControls(),this._lowerControls())}.bind(this),100)},r.destroy=function(){this._removeEventListeners()},e.exports=i},{"@marcom/ac-feature/isDesktop":166}],384:[function(t,e,n){"use strict";var i=t("./DefaultControlsInteraction"),r=30,o=500,s=3e3,a=function(t){i.call(this,t),this._showCompass=t.showCompass,this._hideCompass=t.hideCompass,this._threesixtyElementsTimeoutDuration=t.threesixtyElementsTimeoutDuration||s,this._dragEndThreshold=o,this._mouseDownPosition=null},l=i.prototype,c=a.prototype=Object.create(l);c._bindMethods=function(){l._bindMethods.apply(this,arguments),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onDragging=this._onDragging.bind(this),this._onClick=this._onClick.bind(this)},c._addEventListeners=function(){l._addEventListeners.apply(this,arguments),this._controls.el.addEventListener("mousedown",this._onMouseDown),this._controls.el.addEventListener("click",this._onClick)},c._removeEventListeners=function(){l._removeEventListeners.apply(this,arguments),this._controls.el.removeEventListener("mousedown",this._onMouseDown)},c._onUserInteraction=function(t){this._userWasRecentlyDragging||t&&"mousemove"===t.type&&this._lastMouseCoords.x===t.screenX&&this._lastMouseCoords.y===t.screenY||this._dragging||(this._showCompass(),clearTimeout(this._userHideMouse),l._onUserInteraction.apply(this,arguments))},c._onUserInteractionTimeout=function(){l._onUserInteractionTimeout.apply(this,arguments),clearTimeout(this._userHideMouse),this._userHideMouse=setTimeout(function(){this._hideCompass()}.bind(this),this._threesixtyElementsTimeoutDuration)},c._onDragging=function(t){!this._dragging&&this._isActiveArea(t.target)||(this._dragging=!0,this._player.el.classList.add("dragging"),this._player.el.classList.add("recently-dragging"),this._recentDragTimeout=setTimeout(function(){this._dragging&&(this._hideControls(),this._userWasRecentlyDragging=!0,clearTimeout(this._dragTimer),this._dragTimer=setTimeout(function(){this._userWasRecentlyDragging=!1,this._player.el.classList.remove("recently-dragging")}.bind(this),this._dragEndThreshold))}.bind(this),r),clearTimeout(this._userInteractionTimeout),clearTimeout(this._userHideMouse))},c._isDraggable=function(t){var e=[this._player.controls.compass.el,this._player.controls.playButtonElement];return e.indexOf(t)!==-1||this._player.controls.compass.el.contains(t)},c._onMouseDown=function(t){this._isActiveArea(t.target)&&this._controlsVisible()&&!this._isDraggable(t.target)||!this._isPlayingState()||(this._showControls(),clearTimeout(this._userHideMouse),clearTimeout(this._recentDragTimeout),this._player.el.classList.remove("dragging"),this._player.el.classList.remove("recently-dragging"),this._mouseDownPosition={x:t.x,y:t.y},window.addEventListener("mouseup",this._onMouseUp),window.addEventListener("mousemove",this._onDragging),this._sendMouseDown(t))},c._onMouseUp=function(t){window.removeEventListener("mousemove",this._onDragging),window.removeEventListener("mouseup",this._onMouseUp),this._dragging&&this._onUserInteractionTimeout(),this._player.el.contains(t.target)||this._hideCompass(),this._player.el.classList.remove("dragging"),this._dragging=!1},c._onMouseLeave=function(t){l._onMouseLeave.apply(this,arguments),this._userWasRecentlyDragging=!1,this._dragging||(clearTimeout(this._userHideMouse),this._hideCompass())},c._onClick=function(t){this._player.controls.compass.el.contains(t.target)&&this._userWasRecentlyDragging&&t.stopPropagation(),t.target!==this._player.controls.playButtonElement.parentElement&&t.target!==this._controls.el.firstElementChild||null===this._mouseDownPosition||this._mouseDownPosition.x!==t.x||this._mouseDownPosition.y!==t.y||(this._mouseDownPosition=null,this._mouseDownTime=1/0,this._dragging=!1,this._userWasRecentlyDragging=!1,clearTimeout(this._dragTimer),clearTimeout(this._recentDragTimeout))},c._isPlayingState=function(){return!this._player.controls.el.classList.contains("start-state")&&!this._player.controls.el.classList.contains("end-state")},e.exports=a},{"./DefaultControlsInteraction":383}],385:[function(t,e,n){"use strict";var i=(t("@marcom/ac-console/log"),t("./ThreeSixtyControlsInteraction")),r=function(t){i.call(this,t),this._controlsVisible=t.controlsVisible},o=i.prototype,s=r.prototype=Object.create(o);s._bindMethods=function(){o._bindMethods.apply(this,arguments),this._onTouchStart=this._onTouchStart.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onClick=this._onClick.bind(this)},s._addEventListeners=function(){this._controls.el.addEventListener("touchstart",this._onTouchStart),this._controls.el.addEventListener("click",this._onClick),this._controls.el.addEventListener("focusin",this._onFocusIn),this._controls.el.addEventListener("focusout",this._onFocusOut)},s._removeEventListeners=function(){this._controls.el.removeEventListener("touchstart",this._onTouchStart),this._controls.el.removeEventListener("touchend",this._onTouchEnd),this._controls.el.removeEventListener("click",this._onClick),this._controls.el.removeEventListener("focusin",this._onFocusIn),this._controls.el.removeEventListener("focusout",this._onFocusOut)},s._onDragging=function(t){o._onDragging.apply(this,arguments)},s._shouldIgnoreUserInteraction=function(t){return!1},s._onClick=function(t){t.target!==this._player.controls.compass.compassView&&(this._controlsVisible()?this._isActiveArea(t.target)||(this._hideControls(),this._hideCompass()):this._onUserInteraction(t))},s._onTouchStart=function(t){t.target!==this._player.controls.playButtonElement&&t.target!==this._controls.el.firstElementChild&&t.target!==this._player.controls.compass.compassView&&t.target!==this._player.controls.playButtonElement||(document.addEventListener("touchend",this._onTouchEnd),window.addEventListener("touchmove",this._onDragging),this._showCompass(),this._touchDownTime=Date.now(),this._sendMouseDown(t))},s._onTouchEnd=function(t){document.removeEventListener("touchend",this._onTouchEnd),window.removeEventListener("touchmove",this._onDragging),this._onMouseUp(t)},e.exports=r},{"./ThreeSixtyControlsInteraction":384,"@marcom/ac-console/log":80}],386:[function(t,e,n){"use strict";var i=t("@marcom/useragent-detect"),r=i.os.ios||i.os.android,o=t("./DefaultControlsInteraction"),s=t("./ThreeSixtyControlsInteraction"),a=t("./ThreeSixtyMobileControlsInteraction"),l=function(t){return t.threesixty?r?new a(t):new s(t):new o(t)};e.exports=l},{"./DefaultControlsInteraction":383,"./ThreeSixtyControlsInteraction":384,"./ThreeSixtyMobileControlsInteraction":385,"@marcom/useragent-detect":501}],387:[function(t,e,n){"use strict";var i=t("../../dom-emitter/DOMEmitterMicro"),r=function(t){this.el=t};r.prototype=Object.create(i.prototype),e.exports=r},{"../../dom-emitter/DOMEmitterMicro":348}],388:[function(t,e,n){"use strict";var i=function(t){this.el=t},r=i.prototype;r.show=function(){this.el.classList.remove("hidden")},r.hide=function(){this.el.classList.add("hidden")},r.destroy=function(t){},e.exports=i},{}],389:[function(t,e,n){"use strict";var i=function(t){this.el=t},r=i.prototype;r.setText=function(t){this.el.innerHTML=t},e.exports=i},{}],390:[function(t,e,n){"use strict";var i=t("../../dom-emitter/DOMEmitterMicro"),r=t("@marcom/ac-keyboard/Keyboard"),o=t("@marcom/ac-keyboard/keyMap"),s=function(t){this.el=t,i.call(this,t),this._keyboard=new r(this.el),this._addEventListeners()},a=s.prototype=Object.create(i.prototype);a._addEventListeners=function(){this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this.el.addEventListener("click",this._onClick),this._keyboard.onDown(o.ARROW_UP,this._onKeyDown),this._keyboard.onDown(o.ARROW_DOWN,this._onKeyDown)},a._removeEventListeners=function(){this.el.removeEventListener("click",this._onClick),this._keyboard.onDown(o.ARROW_UP,this._onKeyDown),this._keyboard.onDown(o.ARROW_DOWN,this._onKeyDown)},a.setItems=function(t){var e;this.el.innerHTML="",t.forEach(function(t){var n=document.createElement("li");n.setAttribute("role","radio"),"showing"===t.mode?(n.classList.add(t.mode),n.setAttribute("aria-checked","true"),n.setAttribute("tabIndex",0),e=n):(n.setAttribute("aria-checked","false"),n.setAttribute("tabIndex",-1)),n.innerText=t.label,n.acvMetadata=t,this.el.appendChild(n)}.bind(this)),e&&e.focus()},a._onKeyDown=function(t){var e=t.target,n=!1;parseInt(t.keyCode)===o.ARROW_DOWN?n=e.nextSibling:parseInt(t.keyCode)===o.ARROW_UP&&(n=e.previousSibling),n&&(this.trigger("ItemSelected",n.acvMetadata),t.preventDefault(),t.stopPropagation())},a._onClick=function(t){this.el!==t.target&&this.el.contains(t.target)&&this.trigger("ItemSelected",t.target.acvMetadata)},a.destroy=function(){this._removeEventListeners()},e.exports=s},{"../../dom-emitter/DOMEmitterMicro":348,"@marcom/ac-keyboard/Keyboard":217,"@marcom/ac-keyboard/keyMap":220}],391:[function(t,e,n){"use strict";var i=t("@marcom/ac-slider").Slider,r="ac-slider-inactive",o=function(t,e){if(this.el=t,this._min=e.min||0,this._max=e.max||1,e.mixins)for(var n=e.mixins.slice(0);n.length;)Object.assign(this,n.pop());this._slider=new i(this.el,{template:e.template,min:this._min,max:this._max,step:isNaN(+this.el.getAttribute("step"))?this.el.getAttribute("step"):+this.el.getAttribute("step"),value:void 0!==e.value?e.value:+this.el.getAttribute("value"),orientation:e.orientation,renderedPosition:!0,keyboardContext:this.el}),this._onFocusChange=this._onFocusChange.bind(this),this._setHoveringValue=this._setHoveringValue.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._slider.el.addEventListener("blur",this._onFocusChange),this._slider.el.addEventListener("focus",this._onFocusChange),this._slider.el.addEventListener("mouseout",this._onFocusChange),this.forceCursorPointer=this.forceCursorPointer.bind(this),this.disableForcedCursorPointer=this.disableForcedCursorPointer.bind(this),this._slider.on("grab",this.forceCursorPointer),this._slider.on("release",this.disableForcedCursorPointer),this._scrubbedEl=this.el.querySelector(".ac-slider-scrubbed"),this._notchEl=this.el.querySelector(".ac-slider-hover-notch"),this._notchEl&&(this._slider.el.addEventListener("mouseover",this._onMouseOver),this._slider.el.addEventListener("mouseleave",this._onMouseLeave),this._slider.el.addEventListener("mousemove",this._setHoveringValue)),e.value&&requestAnimationFrame(function(){this._slider&&this.setValue(e.value)}.bind(this))},s=o.prototype;s.on=function(){return this._slider.on.apply(this._slider,arguments)},s.off=function(){return this._slider.off.apply(this._slider,arguments)},s.trigger=function(){return this._slider.trigger.apply(this._slider,arguments)},s.setValue=function(t){return this._slider.setValue.call(this._slider,t)},s.setAriaValueText=function(t){this._slider.el.setAttribute("aria-valuetext",t)},s.setMin=function(t){this._min=t,this._slider.setMin(t)},s.setMax=function(t){this._max=t,this._slider.setMax(t)},s._onMouseOver=function(){this._slider.el.classList.add("hover")},s._onMouseLeave=function(){this._slider.el.classList.remove("hover")},s._onFocusChange=function(){setTimeout(function(){this.trigger("focuschange")}.bind(this),0)},s.isFocused=function(){return this._slider.el===document.activeElement&&this._hasFocusOutline()},s._hasFocusOutline=function(){return"none"!==getComputedStyle(this._slider.el).getPropertyValue("outline-style")},s.getValue=function(){return this._slider.getValue.apply(this._slider,arguments)},s.getMax=function(){return this._max},s.setScrubbedValue=function(){"horizontal"===this._slider.getOrientation()?this._scrubbedEl.style.left=this._slider.thumbElement.style.left:this._scrubbedEl.style.bottom=this._slider.thumbElement.style.bottom},s._setHoveringValue=function(t){var e=this.getClientXValue(t,this._notchEl);this._notchEl.style.left=e/this.getMax()*100+"%",this._setNotchColor(e)},s._setNotchColor=function(t){t>this.getValue()?this._notchEl.style.backgroundColor="#fff":this._notchEl.style.backgroundColor="#333"},s.show=function(){this.el.classList.remove(r)},s.hide=function(){this.el.classList.add(r)},s.setState=function(t){this.el.classList.add(t)},s.clearState=function(t){this.el.classList.remove(t)},s.getClientXValue=function(t,e){return this._slider.getClientXValue(t,e)},s.destroy=function(){this._slider.el.removeEventListener("mousemove",this._setHoveringValue),this._slider.el.removeEventListener("mouseleave",this._onMouseOver),this._slider.el.removeEventListener("mouseout",this._onMouseLeave),this._slider.el.removeEventListener("blur",this._onFocusChange),this._slider.el.removeEventListener("focus",this._onFocusChange),this._slider.el.removeEventListener("mouseout",this._onFocusChange),this._slider.off("grab",this.forceCursorPointer),this._slider.off("release",this.disableForcedCursorPointer),this._slider.destroy(),this._slider=null},e.exports=o},{"@marcom/ac-slider":302}],392:[function(t,e,n){"use strict";var i=t("./Button"),r=function(t,e){i.apply(this,arguments),this._states=e.states||{},this._labels=e.labels,this._focusTarget=this.el.querySelector("button")||this.el,this._states&&this._states.initial&&this.setState("initial")},o=r.prototype=Object.create(i.prototype);o.setState=function(t){this._currentState&&this._currentState!==t&&this._states[this._currentState].length&&this.el.classList.remove(this._states[this._currentState]),this._currentState=t,this._labels&&this._labels[this._currentState]&&(this._focusTarget.value=this._labels[this._currentState],this._focusTarget.setAttribute("aria-label",this._labels[this._currentState])),"on"===this._currentState?this._focusTarget.setAttribute("aria-pressed",!0):this._focusTarget.setAttribute("aria-pressed",!1),this._states[t].length&&this.el.classList.add(this._states[t])},e.exports=r},{"./Button":387}],393:[function(t,e,n){"use strict";var i="cursor-pointer";e.exports={disableForcedCursorPointer:function(){document.body.classList.remove(i),this.onSelectStartResumeDefault()},forceCursorPointer:function(){document.body.classList.add(i),this.onSelectStartPreventDefault()},onSelectStartResumeDefault:function(){document.removeEventListener("selectstart",this.preventDefault)},onSelectStartPreventDefault:function(){document.addEventListener("selectstart",this.preventDefault)},preventDefault:function(t){t.preventDefault()}}},{}],394:[function(t,e,n){"use strict";var i="hidden",r='<a class="end-state-link hidden"></a>\n',o=function(t){this.el=t.el,this.el.innerHTML=r,this._player=t.player,this._bindContent(t)},s=o.prototype;s._bindContent=function(t){if("link"===t.type||"video"===t.type){var e=this.el.querySelector(".end-state-link"),n=document.createElement("div");e.classList.remove(i),n.classList.add("end-state-text-container"),n.innerText=t.label||"",e.href=t.url||"",e.appendChild(n),"link"===t.type?e.classList.add("icon","icon-after","icon-chevronright"):"video"===t.type&&e.classList.add("icon","icon-after","icon-playcircle"),this._bindAction(this.el,t)}},s._bindAction=function(t,e){"function"==typeof e.onclick?t.onclick=function(t){t.preventDefault(),e.onclick.call(null,t)}.bind(this):"video"===e.type&&e.url&&(t.onclick=function(t){t.preventDefault(),this._player.load(e.url,null,0,{})}.bind(this))},s.destroy=function(){},e.exports=o},{}],395:[function(t,e,n){"use strict";var i=t("./EndStateItem"),r=function(t){this.el=t.el,this._player=t.player,this._addItems(t.items||[])},o=r.prototype;o._addItems=function(t){this._items=[],t.forEach(function(t){var e=document.createElement("div");e.classList.add("end-state-item");var n=new i(Object.assign({},t,{el:e,player:this._player}));this.el.appendChild(e),this._items.push(n)}.bind(this))},o.setData=function(t){for(;this._items.length;)this._items.pop().destroy();this.el.innerHTML="",t?(this.el.classList.remove("hidden"),this._addItems(t.items)):this.el.classList.add("hidden")},o.destroy=function(){for(;this._items.length;)this._items.pop().destroy()},e.exports=r},{"./EndStateItem":394}],396:[function(t,e,n){"use strict";var i=function(t,e,n){return new e.classDef(t,Object.assign(e.options||{},n||{}))},r=function(t,e,n){return function(i){t[e](i,n)}},o=function(t,e){var n=e.handlers||{},i={};for(var o in n)n.hasOwnProperty(o)&&t.on(o,i[o]=r(n,o,t));var s,a=e.observe;if(a){for(var l=a.update,c=a.source,u=c.on.bind(c)||c.addEventListener,h=c.off.bind(c)||c.removeEventListener,f=a.events,d=0,p=f.length,m=function(){l.call(a,t)};d<p;d++)o=f[d],u(o,m);s=function(){for(d=0;d<p;d++)o=f[d],h(o,m)}}var _=function(){for(var e in i)i.hasOwnProperty(e)&&t.off(e,i[e]);s&&s()};return{destroy:_}};e.exports=function(t,e,n){return e.classDef?i(t,e,n):o(t,e,n)}},{}],397:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":i(t)},o=t("./createView"),s=t("./createBehavior"),a=function(t,e){"function"==typeof e.destroy&&e.destroy(),"function"==typeof t.destroy&&t.destroy()},l=function(t){for(;t.length;)t.shift().destroy()},c=function(t){for(var e in t)t.hasOwnProperty(e)&&(l(t[e]),delete t[e])},u=function(t,e,n){var i=o(t,e.view),r=s(i,e.behavior,n);return{view:i,behavior:r,destroy:a.bind(null,i,r)}};e.exports=function(t,e,n){var i={};for(var o in e)if(e.hasOwnProperty(o)&&"object"===r(e[o])){var s=e[o],a=e.elementClassPrefix?"."+e.elementClassPrefix+"-"+s.className:"."+s.className,l=t.querySelectorAll(a);i[o]=[];for(var h=0,f=l.length;h<f;h++)i[o].push(u(l[h],s,n))}return{components:i,destroy:c.bind(null,i)}}},{"./createBehavior":396,"./createView":398}],398:[function(t,e,n){"use strict";e.exports=function(t,e){return new e.classDef(t,e.options)}},{}],399:[function(t,e,n){"use strict";var i=t("@marcom/ac-keyboard/Keyboard"),r=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=32,s=37,a=38,l=39,c=40,u=function(t){r.call(this),this._player=t.player,this._target=t.keyboardTarget||this._player.el,this._keyboard=new i(this._target),this._bindMethods(),this._addEventListeners()},h=r.prototype,f=u.prototype=Object.create(h);f._bindMethods=function(){this._onLeftArrowDown=this._onLeftArrowDown.bind(this),this._onRightArrowDown=this._onRightArrowDown.bind(this),this._onUpArrowDown=this._onUpArrowDown.bind(this),this._onDownArrowDown=this._onDownArrowDown.bind(this),this._onSpaceBarUp=this._onSpaceBarUp.bind(this),this._onSpaceBarDown=this._onSpaceBarDown.bind(this),this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._boundKeyboardInteraction={},[o,s,l,a,c].forEach(function(t){this._boundKeyboardInteraction[t]=this._onKeyboardInteraction.bind(this,t)}.bind(this))},f._addEventListeners=function(){[o,s,l,a,c].forEach(function(t){this._keyboard.onDown(t,this._boundKeyboardInteraction[t])}.bind(this)),this._keyboard.onDown(o,this._onSpaceBarDown),this._keyboard.onDown(s,this._onLeftArrowDown),this._keyboard.onDown(l,this._onRightArrowDown),this._keyboard.onDown(a,this._onUpArrowDown),this._keyboard.onDown(c,this._onDownArrowDown),this._player.on("durationchange",this._onDurationChange)},f._removeEventListeners=function(){[o,s,l,a,c].forEach(function(t){this._keyboard.offDown(t,this._boundKeyboardInteraction[t])}.bind(this)),this._boundKeyboardInteraction=null,this._keyboard.offDown(o,this._onSpaceBarDown),this._keyboard.offUp(o,this._onSpaceBarUp),this._keyboard.offDown(s,this._onLeftArrowDown),this._keyboard.offDown(l,this._onRightArrowDown),this._keyboard.offDown(a,this._onUpArrowDownDown),this._keyboard.offDown(c,this._onDownArrowDown),this._player.off("durationchange",this._onDurationChange)},f._onKeyboardInteraction=function(){this._triggerKeyboardInteraction()},f._triggerKeyboardInteraction=function(){this.trigger("keyboardinteraction")},f._onDurationChange=function(){var t=this._player.getDuration();t>=60?this._interval=10:t>=20?this._interval=5:this._interval=1},f._onLeftArrowDown=function(t){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getCurrentTime();isNaN(e)||this._player.seek(Math.max(e-this._interval,0))},f._onRightArrowDown=function(t){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getCurrentTime();isNaN(e)||this._player.seek(Math.min(e+this._interval,this._player.getDuration()))},f._onUpArrowDown=function(t){if(!t.target.hasAttribute("aria-checked")){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getMuted()?0:this._player.getVolume(),n=Math.min(1,e+.1);this._player.setVolume(n),this._player.setMuted(!1)}},f._onDownArrowDown=function(t){if(!t.target.hasAttribute("aria-checked")){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getMuted()?0:this._player.getVolume(),n=Math.max(0,e-.1);this._player.setVolume(n),this._player.setMuted(0===Math.round(10*n))}},f._onSpaceBarDown=function(t){"BUTTON"!==t.target.tagName&&"button"!==t.target.getAttribute("role")&&(this._keyboard.offDown(o,this._onSpaceBarDown),this._keyboard.onUp(o,this._onSpaceBarUp))},f._onSpaceBarUp=function(){this._keyboard.offUp(o,this._onSpaceBarUp),this._player.getPaused()?this._player.play():this._player.pause(),this._keyboard.onDown(o,this._onSpaceBarDown)},f.destroy=function(){this._removeEventListeners(),this._keyboard.destroy(),h.destroy.call(this)},e.exports=u},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-keyboard/Keyboard":217}],400:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function y(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:y(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=t("./KeyboardControl"),u=["controls-toggle-mute-volume-button","controls-volume-level-indicator"],h="controls-progress-indicator",f=37,d=38,p=39,m=40,_=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._arrowControls=n._player.get360().arrowControls,n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this),this._onLeftArrowUp=this._onLeftArrowUp.bind(this),this._onRightArrowUp=this._onRightArrowUp.bind(this),this._onDownArrowUp=this._onDownArrowUp.bind(this),this._onUpArrowUp=this._onUpArrowUp.bind(this)}},{key:"_addEventListeners",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addEventListeners",this).call(this),this._keyboard.onUp(f,this._onLeftArrowUp),this._keyboard.onUp(p,this._onRightArrowUp),this._keyboard.onUp(d,this._onUpArrowUp),this._keyboard.onUp(m,this._onDownArrowUp)}},{key:"_removeEventListeners",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_removeEventListeners",this).call(this),this._keyboard.offUp(f,this._onLeftArrowUp),this._keyboard.offUp(p,this._onRightArrowUp),this._keyboard.offUp(d,this._onUpArrowUp),this._keyboard.offUp(m,this._onDownArrowUp)}},{key:"_onLeftArrowDown",value:function(t){return t.target.classList.contains(h)?(this._triggerKeyboardInteraction(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onLeftArrowDown",this).call(this,t)):void this._arrowControls.leftArrowDown(t)}},{key:"_onRightArrowDown",value:function(t){return t.target.classList.contains(h)?(this._triggerKeyboardInteraction(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRightArrowDown",this).call(this,t)):void this._arrowControls.rightArrowDown(t)}},{key:"_onUpArrowDown",value:function(t){return t.target.classList.contains(u[0])||t.target.classList.contains(u[1])?(this._triggerKeyboardInteraction(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onUpArrowDown",this).call(this,t)):(t.originalEvent.preventDefault(),void this._arrowControls.upArrowDown(t))}},{key:"_onDownArrowDown",value:function(t){return t.target.classList.contains(u[0])||t.target.classList.contains(u[1])?(this._triggerKeyboardInteraction(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onDownArrowDown",this).call(this,t)):(t.originalEvent.preventDefault(),void this._arrowControls.downArrowDown(t))}},{key:"_onLeftArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():(t.originalEvent.preventDefault(),void this._arrowControls.leftArrowUp(t))}},{key:"_onRightArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():(t.originalEvent.preventDefault(),void this._arrowControls.rightArrowUp(t))}},{key:"_onUpArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():void this._arrowControls.upArrowUp(t)}},{key:"_onDownArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():void this._arrowControls.downArrowUp(t)}},{key:"_onKeyboardInteraction",value:function(t){}},{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c);e.exports=_},{"./KeyboardControl":399}],401:[function(t,e,n){"use strict";var i,r;e.exports=function(e){return e.threesixty?(i||(i=t("./ThreeSixtyKeyboardControl")),new i(e)):(r||(r=t("./KeyboardControl")),new r(e))}},{"./KeyboardControl":399,"./ThreeSixtyKeyboardControl":400}],402:[function(t,e,n){"use strict";e.exports={backthirtyseconds:"Back 30 Seconds",playpause:"Play/Pause",play:"Play",pause:"Pause",togglemutevolume:"Toggle Mute Volume",mutevolume:"Mute Volume",minvolume:"Minimum Volume",adjustvolume:"Adjust Volume",fastreverse:"Fast Reverse",fastforward:"Fast Forward",fullvolume:"Full Volume",fullscreen:"Full Screen",exitfullscreen:"Exit Full Screen",airplay:"AirPlay",captionscontrol:"Closed Captions",captionsturnedon:"Closed Captions On",captionsturnedoff:"Closed Captions Off",subtitlescontrol:"Subtitles",subtitlesturnedon:"Subtitles On",subtitlesturnedoff:"Subtitles Off",sizescontrol:"Video Size",downloadcontrol:"Download Video",share:"Share",small:"Small",medium:"Medium",large:"Large",hd:"HD",ipod:"iPod/iPhone",mb:"MB",gb:"GB",tb:"TB",downloadquicktimetitle:"Get QuickTime.",downloadquicktimetext:"Download QuickTime to view this video. QuickTime is free for Mac + PC.",downloadquicktimebutton:"Download",downloadquicktimeurl:"https://www.apple.com/quicktime/download/",elapsed:"elapsed",remaining:"remaining",currenttimetext:"{minutes} minutes and {seconds} seconds",pictureinpicture:"Picture-in-Picture",exitpictureinpicture:"Exit Picture-in-Picture",closesharing:"Close Sharing",facebookshare:"Share to Facebook",twittershare:"Share to Twitter",copylink:"Copy Link",copyembed:"Copy Embed Code",copyarea:"Copy Link Text Area",selectlink:"Select Link Text",selectembed:"Select Embed Code",close:"Close",dismisscopy:"Dismiss Copy",replay:"Replay",livestream:"Live Streaming",newwindow:"Opens in New Window",threesixtyicon:"Return 360 Point of View to Origin",threesixtyleft:"Move 360 Point of View Left",
threesixtyright:"Move 360 Point of View Right",threesixtyup:"Move 360 Point of View Up",threesixtydown:"Move 360 Point of View Down"}},{}],403:[function(t,e,n){"use strict";var i,r=t("./Translations"),o=t("./DefaultLabelStrings"),s=window.document.documentElement;try{i=window.top.document.documentElement}catch(a){i=s}var l=t("@marcom/ac-ajax-xhr"),c="m",u="/global/ac_"+c+"edia_player/scripts/ac_"+c+"edia_languages/",h="en-US",f={},d=function(t){var e;try{e=t||i.getAttribute("lang")}catch(n){e=s.getAttribute("lang")}var r;if(e)switch(e.toLowerCase()){case"es-418":r="es-LA";break;case"pt":r="pt-BR";break;default:r=e}else r=h;return r},p=function(t){return t=d(t),void 0!==f[t]},m=function(t){t=t||{};var e=d(t.lang);if(p(e))return t.callback?void t.callback(f[e]):f[e];if(!t.callback)throw new Error("To use Localization.getTranslation you must either pass a callback or ensure the translation is ready via Localization.translationReady");var n=t.basePath||u,i=r[e]?n+r[e]:n+r[h],s=o;l.get(i,{success:function(n){s=Object.assign(s,JSON.parse(n)),f[e]=s,t.callback(s)},error:function(){f[e]=s,t.callback(s)}})};e.exports={getLanguage:d,getTranslation:m,translationReady:p}},{"./DefaultLabelStrings":402,"./Translations":404,"@marcom/ac-ajax-xhr":33}],404:[function(t,e,n){"use strict";e.exports={"bg-BG":"bg-BG.json","cs-CZ":"cs-CZ.json","el-GR":"el-GR.json","de-AT":"de-AT.json","de-CH":"de-CH.json","de-DE":"de-DE.json","de-LI":"de-LI.json","da-DK":"da-DK.json",en:"en.json","en-US":"en-US.json","en-AP":"en-AP.json","en-CA":"en-CA.json","en-GB":"en-GB.json","en-HK":"en-HK.json","en-IE":"en-IE.json","en-IN":"en-IN.json","en-KR":"en-KR.json","en-AU":"en-AU.json","en-NZ":"en-NZ.json","en-SG":"en-SG.json","en-ZA":"en-ZA.json",es:"es.json","es-LA":"es-LA.json","es-MX":"es-MX.json","es-ES":"es-ES.json","et-EE":"et-EE.json","fi-FI":"fi-FI.json",fr:"fr.json","fr-BE":"fr-BE.json","fr-CA":"fr-CA.json","fr-CH":"fr-CH.json","fr-FR":"fr-FR.json","hr-HR":"hr-HR.json","hu-HU":"hu-HU.json","it-IT":"it-IT.json",ja:"ja.json","ja-JP":"ja-JP.json","ko-KR":"ko-KR.json","lt-LT":"lt-LT.json","lv-LV":"lv-LV.json","nl-BE":"nl-BE.json","nl-NL":"nl-NL.json","no-NO":"no-NO.json","pl-PL":"pl-PL.json",pt:"pt.json","pt-BR":"pt-BR.json","pt-PT":"pt-PT.json","ro-RO":"ro-RO.json","ru-RU":"ru-RU.json","sk-SK":"sk-SK.json","sv-SE":"sv-SE.json","tr-TR":"tr-TR.json",zh:"zh.json","zh-CN":"zh-CN.json","zh-HK":"zh-HK.json","zh-TW":"zh-TW.json"}},{}],405:[function(t,e,n){"use strict";var i=t("./PopUp"),r=function(t){this.el=t.el,this._player=t.player,this._popUp=new i(t),this.el.appendChild(this._popUp.el)},o=r.prototype;o.setData=function(t){this._popUp.setData(t)},o.show=function(){this.el.classList.remove("hidden")},o.hide=function(){this.el.classList.add("hidden")},o.destroy=function(){},e.exports=r},{"./PopUp":406}],406:[function(t,e,n){"use strict";var i='<div class="ac-video-trickplay hidden" aria-hidden="true">\n    <div class="ac-video-trickplay-image">\n    </div>\n    <div class="ac-video-trickplay-time"></div>\n</div>\n',r=t("../../utils/Time"),o=t("./ThumbnailHandler"),s=t("@marcom/ac-function/throttle"),a=5,l=function(t){this._player=t.player,this.el=document.createElement("div"),this.el.style.opacity="0",this.el.innerHTML=i,this._thumbnailHandler=new o({el:this.el.querySelector(".ac-video-trickplay-image"),player:this._player,numberOfImages:t.numberOfImages}),this._timeLabel=this.el.querySelector(".ac-video-trickplay-time"),this._bindMethods(),this._addEventListeners()},c=l.prototype;c._initPointerTracking=function(){this._scrubberView=this._player.controls.scrubberView,this._scrubberView&&(this._runnableTrack=this._scrubberView.el.querySelector(".ac-slider-runnable-track"),this._calcOffsets(),this._scrubberView.el.addEventListener("mouseover",this._show),this._scrubberView.el.addEventListener("mouseout",this._hide),this._scrubberView.el.addEventListener("mousedown",this._startScrubbing),this._scrubberView.el.addEventListener("mouseup",this._endScrubbing),this._scrubberView.el.addEventListener("mousemove",this._onTrackerUpdate),this._scrubberView.el.addEventListener("mousemove",this._setThumbnail),this._player.on("resize",this._calcOffsets),window.addEventListener("resize",this._calcOffsets))},c._bindMethods=function(){this._show=this._show.bind(this),this._hide=this._hide.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._startScrubbing=this._startScrubbing.bind(this),this._endScrubbing=this._endScrubbing.bind(this),this._initPointerTracking=this._initPointerTracking.bind(this),this._onTrackerUpdate=this._onTrackerUpdate.bind(this),this._setThumbnail=this._setThumbnail.bind(this),this._calcOffsets=this._calcOffsets.bind(this),this._debouncedCalcOffsets=s(this._calcOffsets,30)},c._startScrubbing=function(t){this._thumbnailHandler.el.classList.add("hidden"),this._scrubberView.el.removeEventListener("mousemove",this._setThumbnail),this._scrubberView.el.removeEventListener("mouseout",this._hide),document.addEventListener("mouseup",this._endScrubbing),document.addEventListener("mousemove",this._onTrackerUpdate)},c._endScrubbing=function(t){t.target===this._scrubberView.el&&this._hide(),this._scrubberView.el.addEventListener("mousemove",this._setThumbnail),this._scrubberView.el.addEventListener("mouseout",this._hide),document.removeEventListener("mouseup",this._endScrubbing),document.removeEventListener("mousemove",this._onTrackerUpdate),this._setThumbnail(t),this._thumbnailHandler.el.classList.remove("hidden")},c._calcOffsets=function(){this._onLoadedMetaData();var t=this._player.el.getBoundingClientRect();this._offsetLeft=t.left;var e=this._runnableTrack.getBoundingClientRect();this._leftBoundary=e.left-this._offsetLeft+a,this._rightBoundary=this._leftBoundary+e.width-a-2,this._imgWidth=this.el.firstElementChild.getBoundingClientRect().width},c._onLoadedMetaData=function(){var t=this._player.getMediaElement().videoWidth,e=this._player.getMediaElement().videoHeight,n=this._player.getMediaElement().src.indexOf("-tft-")!==-1;this.el.classList.remove("square-video"),this.el.classList.remove("vertical-video"),this.el.classList.remove("tft-video"),n?(this.el.classList.add("tft-video"),this._thumbnailHandler.setVertical(!1)):t<e?(this.el.classList.add("vertical-video"),this._thumbnailHandler.setVertical(!0)):t===e?(this.el.classList.add("square-video"),this._thumbnailHandler.setVertical(!1)):this._thumbnailHandler.setVertical(!1)},c._addEventListeners=function(){this._player.on("durationchange",this._onDurationChange),this._player.once("controlsready",this._initPointerTracking),this._player.on("loadedmetadata",this._calcOffsets)},c._removeEventListeners=function(){this._player.off("durationchange",this._onDurationChange),this._player.off("controlsready",this._initPointerTracking),this._player.off("timeupdate",this._calcOffsets),this._player.off("resize",this._debouncedCalcOffsets),window.removeEventListener("resize",this._debouncedCalcOffsets),this._scrubberView.el.removeEventListener("mouseover",this._show),this._scrubberView.el.removeEventListener("mouseout",this._hide),this._scrubberView.el.removeEventListener("mousemove",this._onTrackerUpdate),this._scrubberView.el.removeEventListener("mousemove",this._setThumbnail)},c._onTrackerUpdate=function(t){this._calcOffsets();var e=Math.min(Math.max(t.clientX-this._offsetLeft,this._leftBoundary),this._rightBoundary);this.el.firstElementChild.style.left=e-this._imgWidth/2+"px";var n=this._scrubberView.getClientXValue(t);this._player.getReadyState()<=2?this._cachedTrackerUpdate=t:this._cachedTrackerUpdate=null,this._setTime(Math.max(n,0))},c._onDurationChange=function(t){this._cachedDuration=this._player.getDuration(),this._cachedTrackerUpdate&&(this._onTrackerUpdate(this._cachedTrackerUpdate),this._setThumbnail()),this.el.style.opacity="1"},c._setThumbnail=function(t){this._thumbnailHandler.setTime(this._time,this._cachedDuration)},c._setTime=function(t){var e=t/this._scrubberView.getMax();this._time=Math.min(e*this._cachedDuration,this._cachedDuration);var n=r.formatTime(Math.round(this._time),this._cachedDuration);this._timeLabel.innerHTML=n},c.setData=function(t){this.el.style.opacity="0",this._canPlayThroughHander&&(this._player.off("canplaythrough",this._canPlayThroughHander),this._player.off("playing",this._canPlayThroughHander),this._canPlayThroughHander=null),t&&this._player.getReadyState()>2?(this.el.style.opacity="1",this._thumbnailHandler.setData(t),this._cachedTrackerUpdate&&(this._onTrackerUpdate(this._cachedTrackerUpdate),this._setThumbnail())):(this._thumbnailHandler.setData(null),t?(this._canPlayThroughHander=this.setData.bind(this,t),this._player.on("canplaythrough",this._canPlayThroughHander),this._player.on("playing",this._canPlayThroughHander)):this.el.style.opacity="1"),this._onLoadedMetaData()},c._show=function(t){this._onTrackerUpdate(t),this.el.firstElementChild.classList.remove("hidden")},c._hide=function(){this.el.firstElementChild.classList.add("hidden")},c.destroy=function(){this._canPlayThroughHander&&(this._player.off("canplaythrough",this._canPlayThroughHander),this._player.off("playing",this._canPlayThroughHander)),this._tracker.destroy()},e.exports=l},{"../../utils/Time":410,"./ThumbnailHandler":407,"@marcom/ac-function/throttle":194}],407:[function(t,e,n){"use strict";var i=120,r=144,o=81,s=function(t){this.el=t.el,this._player=t.player,this._imgWidth=t.imgWidth||r,this.el.style.backgroundSize=100*this._numberOfImages+"% 100%"},a=s.prototype;a.setVertical=function(t){this._imgWidth=t?o:r},a.getWidth=function(){return this._imgWidth},a.setData=function(t){if(!t)return this._imgUrl=null,void(this.el.style.backgroundImage="");if(t.url!==this._imgUrl){this._imgUrl=t.url,this._numberOfImages=parseInt(t.numberOfImages||i),this.el.style.backgroundSize=100*this._numberOfImages+"% 100%",this.el.style.backgroundImage="",this.el.classList.add("hidden");var e=this._loadImage(this._imgUrl).then(function(){this._imageLoadPromise===e&&(this.el.style.backgroundImage='url("'+this._imgUrl+'")',this._imageLoadPromise=null,this.el.classList.remove("hidden"))}.bind(this));this._imageLoadPromise=e}},a._loadImage=function(t){return new Promise(function(e,n){var i=new Image;i.onload=function(){e()},i.onerror=function(){n()},i.src=t})},a.setTime=function(t,e){var n=t/e,i=Math.min(Math.round(n*this._numberOfImages),this._numberOfImages-1),r=i/(this._numberOfImages-1)*100;this.el.style.backgroundPositionX=r+"%"},a.destroy=function(){this._imageLoadPromise&&this._imageLoadPromise.cancel()},e.exports=s},{}],408:[function(t,e,n){(function(n){"use strict";var i,r=n("PGRpdiBjbGFzcz0ic2hhcmluZy1zdGF0ZSI+CiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiIGRhdGEtYWN2LWFjdGl2ZS1hcmVhPgogICAgICAgIDxkaXYgY2xhc3M9InNoYXJpbmctY29udGFpbmVyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2hhcmluZy1idXR0b24tY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImZhY2Vib29rLXNoYXJlIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV9mYiIgYXJpYS1sYWJlbD0ie2ZhY2Vib29rc2hhcmV9LCB7bmV3d2luZG93fSI+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0d2l0dGVyLXNoYXJlIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV90d2l0dGVyIiBhcmlhLWxhYmVsPSJ7dHdpdHRlcnNoYXJlfSwge25ld3dpbmRvd30iPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY29weS1saW5rIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV9saW5rIiBhcmlhLWxhYmVsPSJ7Y29weWxpbmt9Ij48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNvcHktZW1iZWQtY29kZSBhYy12aWRlby1pY29uIGljb24tc2hhcmVfZW1iZWQiIGFyaWEtbGFiZWw9Intjb3B5ZW1iZWR9Ij48L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGV4dGFyZWEtY29udGFpbmVyIj4KICAgICAgICAgICAgPHNwYW4+CiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImNvcHktYXJlYSBmb3JtLXRleHRib3ggZm9ybS10ZXh0Ym94LXRleHQgZGlzYWJsZWQiIHR5cGU9InRleHQiIGlkPSJjb3B5LWxpbmsiIGFyaWEtbGFiZWw9Intjb3B5bGlua30iPjwvaW5wdXQ+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0ZXh0aW5wdXQtY2xvc2UtYnV0dG9uIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV9jbG9zZSIgYXJpYS1sYWJlbD0ie2Rpc21pc3Njb3B5fSI+PC9idXR0b24+CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4K","base64").toString(),o=n("PGlmcmFtZSBzcmM9IntlbWJlZENvZGVQYXRofXt2aWRlb2lkfXtleHRlbnNpb259IiB3aWR0aD0ie3dpZHRofSIgaGVpZ2h0PSJ7aGVpZ2h0fSIgdGl0bGU9Int0aXRsZX0iIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4K","base64").toString(),s="https://www.apple.com/embed/",a="Video Player",l=t("@marcom/ac-console/log"),c=t("@marcom/ac-clipboard/select"),u=t("@marcom/ac-social").Dialog,h=t("@marcom/ac-string/supplant"),f=t("../localization/Localization"),d=t("@marcom/ac-accessibility/helpers/TabManager");try{i=t("@marcom/ac-analytics-share/factory/create")}catch(p){l("ac-analytics-share failed to load, are you sure you've included it?")}var m=t("@marcom/useragent-detect"),_=m.os,y=_.ios||_.android,g=735,v=function(t){this.el||this._initializeElement(t.el,t.template),this._player=t.player,this._parentView=t.parentView,this._clickedShareButton=null,this._container=this.el.querySelector(".container"),this._sharingButtonContainer=this.el.querySelector(".sharing-button-container"),this._facebookButton=this.el.querySelector(".facebook-share"),this._twitterButton=this.el.querySelector(".twitter-share"),this._copyLinkButton=this.el.querySelector(".copy-link"),this._copyEmbedCodeButton=this.el.querySelector(".copy-embed-code"),this._copyTextArea=this.el.querySelector(".copy-area"),this._copyCloseButton=this.el.querySelector(".textinput-close-button"),this._closeButton=this.el.querySelector(".close-button"),t.analytics===!1&&(i=null),y&&(this.el.firstChild.classList.add("mobile"),this._player.on("loadstart",function(){this._getClientWidth()>g&&this.el.firstChild.classList.add("mobile-large")}.bind(this))),this._bindMethods(),this._addEventListeners(),this._syncSocialShareHidden()},b=v.prototype;b._initializeElement=function(t,e){t?this.el=t:(this.el=document.createElement("div"),this._templateData=f.getTranslation(),this.el.innerHTML=h((e||r).toString(),this._templateData))},b.setData=function(t){if(!t)return void this._parentView.hide();if(this._parentView.show(),t.allowEmbed&&this.el.firstChild.classList.add("embed-enabled"),this._sharingUrl=t.originatorUrl||window.location.href,this._videoid=t.videoid,this._hideExtension=t.hideExtension,this._embedPath=t.embedpath||s,this._hideFacebook=t.hideFacebookShare||!1,this._hideTwitter=t.hideTwitterShare||!1,this._title=t.title||a,this._syncSocialShareHidden(),this._container.classList.remove("textarea-active"),i&&t.analytics!==!1&&t.videoid)try{this._initAnalyticsAttributes(t),this._analyticsObserver||(this._analyticsObserver=i({context:this.el}))}catch(e){l("ac-analytics-share failed to load, are you sure you've included it?")}},b._bindMethods=function(){this._doFacebookShare=this._doSocialShare.bind(this,u.FACEBOOK_SHARE),this._doTwitterShare=this._doSocialShare.bind(this,u.TWITTER_TWEET),this._copyUrl=this._copyUrl.bind(this),this._copyEmbedCode=this._copyEmbedCode.bind(this),this._closeCopyArea=this._showTextArea.bind(this,!1),this._closeState=this._closeState.bind(this)},b._addEventListeners=function(){this._facebookButton&&this._facebookButton.addEventListener("click",this._doFacebookShare),this._twitterButton&&this._twitterButton.addEventListener("click",this._doTwitterShare),this._copyLinkButton&&this._copyLinkButton.addEventListener("click",this._copyUrl),this._copyEmbedCodeButton&&this._copyEmbedCodeButton.addEventListener("click",this._copyEmbedCode),this._copyCloseButton&&this._copyCloseButton.addEventListener("click",this._closeCopyArea),this._closeButton&&this._closeButton.addEventListener("click",this._closeState)},b._removeEventListeners=function(){this._facebookButton&&this._facebookButton.removeEventListener("click",this._doFacebookShare),this._twitterButton&&this._twitterButton.removeEventListener("click",this._doTwitterShare),this._copyLinkButton&&this._copyLinkButton.removeEventListener("click",this._copyUrl),this._copyEmbedCodeButton&&this._copyEmbedCodeButton.removeEventListener("click",this._copyEmbedCode),this._copyCloseButton&&this._copyCloseButton.removeEventListener("click",this._closeCopyArea),this._closeButton&&this._closeButton.removeEventListener("click",this._closeState)},b._syncSocialShareHidden=function(){this._facebookButton&&(this._hideFacebook?this._facebookButton.classList.add("hide-button"):this._facebookButton.classList.remove("hide-button")),this._twitterButton&&(this._hideTwitter?this._twitterButton.classList.add("hide-button"):this._twitterButton.classList.remove("hide-button"))},b._doSocialShare=function(t){this._clickedShareButton=null,this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._showTextArea(!1),u.create(t,{url:this._sharingUrl,title:this._title})},b._showTextArea=function(t){t?(this._container.classList.add("textarea-active"),c(this._copyTextArea),y||this._copyTextArea.setAttribute("readonly","")):(this._container.classList.remove("textarea-active"),this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._copyTextArea.removeAttribute("readonly"),this._clickedShareButton&&this._clickedShareButton.focus(),this._copyLinkButton.setAttribute("aria-label",this._templateData.copylink),this._copyEmbedCodeButton.setAttribute("aria-label",this._templateData.copyembed))},b._copyUrl=function(){this._clearTextArea(),this._copyTextArea.value=this._sharingUrl,this._copyLinkButton.classList.add("active"),this._copyLinkButton.setAttribute("aria-label",this._templateData.selectlink),this._showTextArea(!0),this._clickedShareButton=this._copyLinkButton,this._copyTextArea.setAttribute("aria-label",this._templateData.copylink),c(this._copyTextArea)},b._clearTextArea=function(){window.getSelection().removeAllRanges(),this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._copyTextArea.removeAttribute("readonly")},b._copyEmbedCode=function(){this._clearTextArea(),this._copyTextArea.value=h(o,{videoid:this._videoid,embedCodePath:this._embedPath,width:this._player.getMediaWidth(),height:this._player.getMediaHeight(),title:this._title,extension:this._hideExtension?"":".html"}),this._copyEmbedCodeButton.classList.add("active"),this._copyEmbedCodeButton.setAttribute("aria-label",this._templateData.selectembed),this._showTextArea(!0),this._clickedShareButton=this._copyEmbedCodeButton,this._copyTextArea.setAttribute("aria-label",this._templateData.copyembed),c(this._copyTextArea)},b._focusFirstButton=function(){this._firstButton||(this._firstButton=d.getTabbableElements(this._sharingButtonContainer)[0]),this._firstButton.focus()},b.show=function(){return new Promise(function(t,e){requestAnimationFrame(function(){var e=function(){this.el.removeEventListener("transitionend",e),focus&&this._focusFirstButton(),t()}.bind(this);this.el.addEventListener("transitionend",e),setTimeout(function(){this._container.classList.add("showing")}.bind(this))}.bind(this))}.bind(this))},b.hide=function(){return this._clickedShareButton=null,this._showTextArea(!1),new Promise(function(t,e){var n=function(){this.el.removeEventListener("transitionend",n),t()}.bind(this);this.el.addEventListener("transitionend",n),setTimeout(function(){this._container.classList.remove("showing")}.bind(this))}.bind(this))},b._getClientHeight=function(){return this.el.clientHeight},b._getClientWidth=function(){return this.el.clientWidth},b.destroy=function(){this._removeEventListeners()},b._closeState=function(){this._showTextArea(!1),0===this._player.getCurrentTime()||this._player.getEnded()?this._player.states.setState("initial"):this._player.states.setState("none")},b._getAnalyticsSource=function(){return"drawer"},b._initAnalyticsAttributes=function(t){var e=[];this._facebookButton&&e.push({button:this._facebookButton,title:"facebook",events:"event85"}),this._twitterButton&&e.push({button:this._twitterButton,title:"twitter",events:"event84"}),this._copyLinkButton&&e.push({button:this._copyLinkButton,title:"copy-link",events:"event89"}),this._copyEmbedCodeButton&&e.push({button:this._copyEmbedCodeButton,title:"copy-embed-code",events:"event101"});var n=((t.url&&t.url.indexOf(".m3u8"))!==-1?"m3u8":"mp4")+" via html5",i=this._getAnalyticsSource(),r=t.videoid,o=document.head.querySelectorAll('meta[property="analytics-track"]');o=o?o[0].getAttribute("content"):"",e.forEach(function(t){t.button.setAttribute("data-analytics-click",""),t.button.setAttribute("data-analytics-share",JSON.stringify({title:r,events:t.events,prop2:o+" - "+r+" - "+t.title,prop18:n,eVar49:document.referrer,eVar54:document.location.href,eVar55:o+" - "+r,eVar70:i}))}.bind(this))},e.exports=v}).call(this,t("buffer").Buffer)},{"../localization/Localization":403,"@marcom/ac-accessibility/helpers/TabManager":24,"@marcom/ac-analytics-share/factory/create":41,"@marcom/ac-clipboard/select":53,"@marcom/ac-console/log":80,"@marcom/ac-social":308,"@marcom/ac-string/supplant":333,"@marcom/useragent-detect":501,buffer:214}],409:[function(t,e,n){"use strict";var i=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,r=function(t){i.call(this),this.el=t.el||document.body,this.breakpoints=t.breakpoints.sort(function(t,e){return t.minWidth-e.minWidth}),this._player=t.player,this._breakPointsLength=this.breakpoints.length,this._addClasses=t.addClass,this._addEventListeners(),this._onResize()},o=i.prototype,s=r.prototype=Object.create(o);s.constructor=r,s._addEventListeners=function(){var t=this;this._boundOnResize=function(){t._onResize.apply(t,arguments)},window.addEventListener("resize",this._boundOnResize),window.addEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},s._removeEventListeners=function(){window.removeEventListener("resize",this._boundOnResize),window.removeEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},s._onResize=function(t){var e=this.el.clientWidth,n=this._currentBreakpoint;if(t!==!1&&this._player.refreshSize(),!n||!r.widthInBreakpoint(e,n)){var i=r.getBreakpointFromWidth(e,this.breakpoints,n,this._breakPointsLength);this._addClasses&&(this._currentBreakpoint&&this.el.classList.remove(n.name),this.el.classList.add(i.name)),this._currentBreakpoint=i,this.trigger("breakpointchange",i)}},s.getCurrentBreakpoint=function(){return this._currentBreakpoint},s.refresh=function(){this._onResize(!1)},s.destroy=function(){this._removeEventListeners(),o.destroy.call(this)},r.getBreakpointFromElement=function(t,e){return r.getBreakpointFromWidth(t.clientWidth,e)},r.getBreakpointFromWidth=function(t,e,n,i){for(var r=0,o=i||e.length;r<o;r++){var s=e[r];if(s!==n&&t>=s.minWidth&&t<=s.maxWidth)return s}},r.widthInBreakpoint=function(t,e){return t>=e.minWidth&&t<=e.maxWidth},e.exports=r},{"@marcom/ac-event-emitter-micro":160}],410:[function(t,e,n){"use strict";var i=t("@marcom/ac-string/supplant"),r={addLeadingZero:function(t,e){if(e=e||2,t<10||e>2)for(t=String(t);t.length<e;)t="0"+t;return t},formatTime:function(t,e,n){if(isNaN(t))return"00:00";t=this.splitTime(Math.floor(t),e,function(t){return this.addLeadingZero(t,n)}.bind(this));var r;r=e>=3600?"{PN}{hours}:{minutes}:{seconds}":"{PN}{minutes}:{seconds}";var o=i(r,{PN:t.negativeModifier,hours:t.hours,minutes:t.minutes,seconds:t.seconds});return o},splitTime:function(t,e,n){n=n||function(t){return t};var i={negativeModifier:"",hours:0,minutes:0,seconds:0};if(isNaN(t))return i;i.negativeModifier=t<0?"-":"",t=Math.abs(t),i.hours=e>=3600?Math.floor(t/3600):0,i.minutes=i.hours?Math.floor(t/60%60):Math.floor(t/60),i.seconds=t%60;for(var r in i)"number"==typeof i[r]&&"hours"!==r&&(i[r]=n(i[r]));return i},stringToNumber:function(t){for(var e=0,n=t.split(":");n.length;)e+=3===n.length?3600*parseFloat(n.shift()):2===n.length?60*parseFloat(n.shift()):parseFloat(n.shift());return e}};e.exports=r},{"@marcom/ac-string/supplant":333}],411:[function(t,e,n){"use strict";var i=t("../../../.versionfile"),r=i.split("."),o=r[2].split("-"),s=parseInt(r[0]),a=parseInt(r[1]),l=parseInt(r[2]);parseInt(o[1]);e.exports={toString:function(){return i},toArray:function(){var t=[s,a,l];return t},major:parseInt(r[0]),minor:parseInt(r[1]),patch:parseInt(o[0]),prerelease:o.length>1?parseInt(o[1]):null}},{"../../../.versionfile":347}],412:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":i(t)},o=t("@marcom/ac-object/clone"),s=function a(){var t=Array.prototype.slice.call(arguments);if(t.length<2)return o(t[0]);var e=o(t.shift(),!0),n=t.shift();for(var i in n)n.hasOwnProperty(i)&&(e.hasOwnProperty(i)&&"object"===r(e[i])?"object"===r(e[i])&&"object"===r(n[i])&&(e[i]=a(e[i],n[i])):e[i]=n[i]);return t.length?a.apply(null,[e].concat(t)):e};e.exports=s},{"@marcom/ac-object/clone":233}],413:[function(t,e,n){"use strict";e.exports=[{width:384,height:160,type:"baseline-high",suffix:"h"},{width:384,height:160,type:"small",suffix:"h"},{width:384,height:160,type:"baseline-low",suffix:"l"},{width:384,height:160,type:"baseline-medium",suffix:"m"},{width:480,height:200,type:"medium",suffix:"h"},{width:768,height:320,type:"large",suffix:""},{width:960,height:400,type:"large",suffix:""},{width:1536,height:640,type:"large",suffix:"h"},{width:1536,height:640,type:"large",suffix:"l"},{width:1920,height:800,type:"large",suffix:"l"},{width:1920,height:800,type:"large",suffix:"h"}]},{}],414:[function(t,e,n){"use strict";e.exports=[{width:416,height:234,type:"baseline-high",suffix:"h"},{width:416,height:234,type:"small",suffix:"h"},{width:416,height:234,type:"baseline-low",suffix:"l"},{width:416,height:234,type:"baseline-medium",suffix:"m"},{width:640,height:360,type:"medium",suffix:"h"},{width:848,height:480,type:"large",suffix:""},{width:960,height:540,type:"large",suffix:""},{width:1280,height:720,type:"large",suffix:"h"},{width:1280,height:720,type:"large",suffix:"l"},{width:1920,height:1080,type:"large",suffix:"l"},{width:1920,height:1080,type:"large",suffix:"h"}]},{}],415:[function(t,e,n){"use strict";e.exports=[{width:528,height:244,type:"baseline-high",suffix:"h"},{width:528,height:244,type:"small",suffix:"h"},{width:528,height:244,type:"baseline-low",suffix:"l"},{width:528,height:244,type:"baseline-medium",suffix:"m"},{width:812,height:375,type:"medium",suffix:"h"},{width:1082,height:500,type:"large",suffix:""},{width:1218,height:563,type:"large",suffix:""},{width:1624,height:750,type:"large",suffix:"h"},{width:1624,height:750,type:"large",suffix:"l"},{width:2436,height:1126,type:"large",suffix:"l"},{width:2436,height:1126,type:"large",suffix:"h"}]},{}],416:[function(t,e,n){"use strict";e.exports=[{width:360,height:360,type:"baseline-high",suffix:"h"},{width:360,height:360,type:"small",suffix:"h"},{width:360,height:360,type:"baseline-low",suffix:"l"},{width:480,height:480,type:"medium",suffix:""},{width:540,height:540,type:"medium",suffix:""},{width:720,height:720,type:"large",suffix:"h"},{width:720,height:720,type:"large",suffix:"l"},{width:1080,height:1080,type:"large",suffix:"l"},{width:1080,height:1080,type:"large",suffix:"h"}]},{}],417:[function(t,e,n){"use strict";var i=t("@marcom/ac-string/supplant"),r=/_r[0-9].+\.mov$/,o=/_[0-9]+x[0-9].+\.mp4$/,s=/_([0-9]+)x([0-9]+)/,a=/-tpl-.*-/,l=/-cc-[a-z].*-/,c=/-tft-.*-/,u="m",h="_{width}x{height}{suffix}."+u+"p4",f="_{height}x{width}{suffix}."+u+"p4",d="j",p="_thumbnails."+d+"pg",m=t("./1X1AssetSizes"),_=t("./16X9AssetSizes"),y=t("./12X5AssetSizes"),g=t("./19X9AssetSizes"),v=function(t,e){return t.find(function(t){return t.width===e.width&&(t.height=e.height)||t.width===e.height&&(t.height=e.width)})},b=function(t,e,n,a){var l,u;s.test(t);var d,p={};if(p.width=parseInt(RegExp.$1,10),p.height=parseInt(RegExp.$2,10),t.match(c))l=y,u=1536;else if(p.width===p.height)l=m,u=1080;else if(t.match(r)||v(_,p))l=_,u=1280;else{if(!v(g,p))return t;l=g,u=1624}p.width<p.height&&(d=!0);var b=l[0].width,w=a&&a.maxWidth?Math.max(a.maxWidth,b):u;if(!t)throw"Must provide an url to optimize";if(void 0===e||isNaN(e))throw"Must provide a width";0===e&&(e=p.width),n&&(l=l.filter(function(t){return t.type===n})),w<1920&&(l=l.filter(function(t){return t.width<=w}));var E;E=d?l.reduce(function(t,n){return Math.abs(n.height-e)<Math.abs(t.height-e)?n:t}):l.reduce(function(t,n){return Math.abs(n.width-e)<Math.abs(t.width-e)?n:t});var x=h;return d&&(x=f),t.match(o)?t.replace(o,i(x,E)):t.match(r)?t.replace(r,i(x,E)):t},w=function(t){return t.match(l)?t.match(o)?{src:t.replace(o,"_cc.vtt"),srclang:"en"}:t.match(r)?{src:t.replace(r,"_cc.vtt"),srclang:"en"}:null:null},E=function(t){return t.match(a)?{url:t.replace(o,p)}:null};e.exports={getVideoSource:b,getCaptionsSource:w,getThumbnailImageSource:E}},{"./12X5AssetSizes":413,"./16X9AssetSizes":414,"./19X9AssetSizes":415,"./1X1AssetSizes":416,"@marcom/ac-string/supplant":333}],418:[function(t,e,n){"use strict";var i=window.Hls,r=t("./HTML5Video"),o=function(t){this._src=null,r.apply(this,arguments),this._initialize(t)},s=r.prototype,a=o.prototype=Object.create(s);a._initialize=function(t){if("undefined"==typeof window.Hls)throw new Error("Hls.js should be included on the page in a script tag");this._hls=new i({debug:t.debugHls,enableWorker:!0,enableStreaming:!0,autoRecoverError:!0,enablePerformanceLogging:t.enablePerformanceLogging||!1})},a.load=function(t,e){this._videoElement.innerHTML="",this._videoElement.removeAttribute("src");var n=function(){this._hls.off(i.Events.MEDIA_ATTACHED,n),this.setSrc(t[0]),this._createTextTrackTags(e)}.bind(this);this._hls.on(i.Events.MEDIA_ATTACHED,n),this._hls.attachMedia(this._videoElement)},a.setSrc=function(t){this._src=t,this._hls.loadSource(t),this._hls.on(i.Events.MANIFEST_PARSED,this._boundManifestParsed=function(){this._hls.off(i.Events.MANIFEST_PARSED,this._boundManifestParsed),this.play()}.bind(this))},a.getCurrentSrc=function(){return this._src},a.destroy=function(){s.destroy.apply(this,arguments),this._hls&&(this._hls.destroy(),this._hls=null)},e.exports=o},{"./HTML5Video":419}],419:[function(t,e,n){"use strict";var i=t("../dom-emitter/DOMEmitterMicro"),r=t("../texttracks/createTextTracks"),o=t("@marcom/ac-console/log"),s=window.document,a=function(t){this._videoElement=t&&t.mediaElement?t.mediaElement:s.createElement("video"),this.options=t||{},this._textTracks=r(t),this._initElement(),i.apply(this,[this._videoElement]),this._forwardCaptionEvent=this._forwardCaptionEvent.bind(this),this._textTracksEmitter=this.getTextTracksEventEmitter(),this._textTracksEmitter.on("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.on("change",this._forwardCaptionEvent),this._textTracksEmitter.on("removetrack",this._forwardCaptionEvent)},l=a.prototype=Object.create(i.prototype);l._initElement=function(){this._videoElement.classList.add("ac-video-media-controller"),null!==this.options.crossorigin&&this._videoElement.setAttribute("crossorigin",this.options.crossorigin?this.options.crossorigin:"anonymous"),this._videoElement.setAttribute("preload",this.options.preload||"auto"),this._videoElement.setAttribute("x-webkit-airplay","")},l._forwardCaptionEvent=function(t){this.trigger(t.type)},l.load=function(t,e,n){n&&(t=t.map(function(t){return t+"#t="+n})),this._createSourceTags(t),this._createTextTrackTags(e),this._videoElement.load()},l._createSourceTags=function(t){this._videoElement.removeAttribute("src"),this._videoElement.innerHTML="";var e=0,n=t.length;for(n&&this._videoElement.setAttribute("src",t[0]);e<n;e++){var i=s.createElement("source");i.src=t[e],this._videoElement.appendChild(i)}},l.play=function(){try{var t=this._videoElement.play();t&&"function"==typeof t["catch"]&&(t["catch"](function(e){
this._playPromise===t&&this.trigger("PlayPromiseError")}.bind(this)),t.then(function(){this.trigger("PlayPromiseResolved")}.bind(this),function(t){o(t)})),this._playPromise=t}catch(e){o(e)}},l.refreshSize=function(){},l.pause=function(){this._playPromise=null,this._videoElement.pause()},l.addTextTrack=function(t){this._addTextTrackTag(t)},l.removeTextTrack=function(t){this._removeTextTrackTag(t)},l.getRenderElement=function(){return this.getMediaElement()},l.getMediaElement=function(){return this._videoElement},l._createTextTrackTags=function(){return this._textTracks.create.apply(this,arguments)},l._addTextTrackTag=function(){return this._textTracks.add.apply(this,arguments)},l._removeTextTrackTag=function(){return this._textTracks.remove.apply(this,arguments)},l.getTextTracks=function(){return this._textTracks.get.apply(this,arguments)},l.getTextTracksEventEmitter=function(){return this._textTracks.getEmitter.apply(this,arguments)},l.getReadyState=function(){return this._videoElement.readyState},l.getPreload=function(){return this._videoElement.preload},l.setPreload=function(t){return this._videoElement.preload=t},l.setPoster=function(t){this._videoElement.poster=t},l.getVolume=function(){return this._videoElement.volume},l.getMuted=function(){return this._videoElement.muted},l.getPaused=function(){return this._videoElement.paused},l.getCurrentTime=function(){return this._videoElement.currentTime},l.getDuration=function(){return this._videoElement.duration},l.setCurrentTime=function(t){return this._videoElement.currentTime=t},l.setVolume=function(t){return this._videoElement.volume=t},l.setMuted=function(t){this._videoElement.muted=t},l.getEnded=function(){return this._videoElement.ended},l.setSrc=function(t){this._videoElement.childNodes.length&&t===this._getSrcNode().url||this._createSourceTags([t])},l.advanceLiveStream=function(){},l.getCurrentSrc=function(){return this._getSrcNode()},l._getSrcNode=function(){return this._videoElement.childNodes[0]},l.setControls=function(t){t?(this._videoElement.setAttribute("controls",""),this._videoElement.removeAttribute("aria-hidden")):(this._videoElement.removeAttribute("controls"),this._videoElement.setAttribute("aria-hidden","true"))},l.isFullscreen=function(){return this._videoElement.webkitDisplayingFullscreen},l.supportsPictureInPicture=function(){return"function"==typeof this._videoElement.webkitSetPresentationMode},l.isPictureInPicture=function(){return"picture-in-picture"===this._videoElement.webkitPresentationMode},l.setPictureInPicture=function(t){this.supportsPictureInPicture()&&this._videoElement.webkitSetPresentationMode(t?"picture-in-picture":"inline")},l.supportsAirPlay=function(){return!!window.WebKitPlaybackTargetAvailabilityEvent},l.destroy=function(){this._textTracks&&this._textTracks.destroy(),this._textTracksEmitter&&(this._textTracksEmitter.off("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.off("change",this._forwardCaptionEvent),this._textTracksEmitter.off("removetrack",this._forwardCaptionEvent)),this._textTracks=null,this._textTracksEmitter=null,this._videoElement=null},e.exports=a},{"../dom-emitter/DOMEmitterMicro":348,"../texttracks/createTextTracks":363,"@marcom/ac-console/log":80}],420:[function(t,e,n){"use strict";var i=t("./HTML5Video"),r=t("@marcom/ac-360"),o=function(t){i.call(this,t),this._renderElement=document.createElement("div"),this._renderElement.classList.add("threesixty-video-container"),this._videoElement.style.visibility="hidden",this._videoElement.style.opacity=0,this._renderElement.appendChild(this._videoElement),this._ac360=new r({el:this._renderElement,src:this.getMediaElement()}),this.sendMouseDown=this.sendMouseDown.bind(this)},s=i.prototype,a=o.prototype=Object.create(s);a.load=function(){this._ac360.setPos(0,0),s.load.apply(this,arguments)},a.play=function(){this.getEnded()&&this._ac360.setPos(0,0),s.play.apply(this,arguments)},a.sendMouseDown=function(t){this._ac360.sendMouseDown(t)},a.getRenderElement=function(){return this._renderElement},a.get360=function(){return this._ac360},a.setControls=function(t){s.setControls.call(this,!1)},a.supportsPictureInPicture=function(){return!1},a.supportsAirPlay=function(){return!1},a.refreshSize=function(){this._ac360.refreshSize()},e.exports=o},{"./HTML5Video":419,"@marcom/ac-360":12}],421:[function(t,e,n){"use strict";var i=t("@marcom/useragent-detect"),r=i.browser.safari||i.browser.edge,o="MediaSource"in window,s=function(){},a=s.prototype;a.create=function(e,n){if(e.hls&&!r&&o){var i=t("./HLSVideo");return new i(Object.assign({},e,{parentElement:n}))}if(e.threesixty){var s=t("./ThreeSixtyVideo");return new s(Object.assign({},e,{parentElement:n}))}var a=t("./HTML5Video");return new a(Object.assign({},e,{parentElement:n}))},e.exports=Object.create(s.prototype)},{"./HLSVideo":418,"./HTML5Video":419,"./ThreeSixtyVideo":420,"@marcom/useragent-detect":501}],422:[function(t,e,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],423:[function(t,e,n){arguments[4][2][0].apply(n,arguments)},{"./sharedRAFEmitterIDGeneratorInstance":431,"./sharedRAFExecutorInstance":432,"@marcom/ac-event-emitter-micro":160,dup:2}],424:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":161,dup:3}],425:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{"./SingleCallRAFEmitter":427,dup:4}],426:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{"./RAFInterface":425,dup:5}],427:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./RAFEmitter":423,dup:6}],428:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{"./RAFInterfaceController":426,dup:7}],429:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("draw")},{"./RAFInterfaceController":426}],430:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("external")},{"./RAFInterfaceController":426}],431:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"../.release-info.js":422,"@marcom/ac-shared-instance":287,dup:8}],432:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"../.release-info.js":422,"./RAFExecutor":424,"@marcom/ac-shared-instance":287,dup:9}],433:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./RAFInterfaceController":426,dup:10}],434:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=t("./Model/AnimSystemModel"),c=t("./Keyframes/Keyframe"),u=t("./Keyframes/KeyframeCSSClass"),h=t("./Keyframes/KeyframeDiscreteEvent"),f=t("./ScrollGroup"),d=t("./TimeGroup"),p=t("./utils/arrayToObject"),m={create:t("@marcom/ac-raf-emitter/RAFEmitter"),update:t("@marcom/ac-raf-emitter/update"),cancelUpdate:t("@marcom/ac-raf-emitter/cancelUpdate"),external:t("@marcom/ac-raf-emitter/external"),draw:t("@marcom/ac-raf-emitter/draw")},_=null,y=function(t){function e(){i(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(_)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return _=t,t.groups=[],t.scrollSystems=[],t.timeSystems=[],t._forceUpdateRAFId=-1,t.setupEvents(),t}return o(e,t),s(e,[{key:"initialize",value:function(){var t=this;this.initializeModel(),this.createDOMGroups(),m.external(function(){t.setupAnimatedContent()})}},{key:"destroy",value:function(){this.groups.forEach(function(t){return t.destroy()}),this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(l.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate)}},{key:"createTimeGroup",value:function(t){var e=new d(t,this);return this.groups.push(e),this.timeSystems.push(e),this.trigger(l.EVENTS.ON_GROUP_CREATED,e),e}},{key:"createScrollGroup",value:function(t){if(!t)throw"AnimSystem scroll based groups must supply an HTMLElement";var e=new f(t,this);return this.groups.push(e),this.scrollSystems.push(e),this.trigger(l.EVENTS.ON_GROUP_CREATED,e),e}},{key:"removeGroup",value:function(t){var e=this;t.keyframeControllers.forEach(function(e){return t.removeKeyframeController(e)}),m.update(function(){t.destroy();var n=e.groups.indexOf(t);n!==-1&&e.groups.splice(n,1),n=e.scrollSystems.indexOf(t),n!==-1&&e.scrollSystems.splice(n,1),n=e.timeSystems.indexOf(t),n!==-1&&e.timeSystems.splice(n,1)})}},{key:"createDOMGroups",value:function(){var t=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(e){return t.createScrollGroup(e)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(e){return t.createTimeGroup(e)}),this.trigger(l.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"setupAnimatedContent",value:function(){var t=this,e=[];[c.DATA_ATTRIBUTE,u.DATA_ATTRIBUTE,h.DATA_ATTRIBUTE].forEach(function(t){for(var n=0;n<12;n++)e.push(t+(0===n?"":"-"+(n-1)))});for(var n=0;n<e.length;n++)for(var i=e[n],r=document.querySelectorAll("["+i+"]"),o=0;o<r.length;o++){var s=r[o],a=JSON.parse(s.getAttribute(i));this.addKeyframe(s,a)}m.update(function(){return t.groups.forEach(function(t){return t.onKeyframesDirty({preventOnScroll:!0})})},!0),m.update(function(){t.groups.forEach(function(t){return t.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,t)}),t.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,t),t.groups.forEach(function(t){return t.reconcile()}),t.onScroll()},!0)}},{key:"initializeModel",value:function(){l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset,l.pageMetrics.breakpoint=l.getBreakpoint();var t=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=t.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=t.top+l.pageMetrics.scrollY}},{key:"setupEvents",value:function(){this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeImmediate)}},{key:"determineActiveKeyframes",value:function(){for(var t=p(Array.from(document.documentElement.classList)),e=0,n=this.groups.length;e<n;e++)this.groups[e].determineActiveKeyframes(t)}},{key:"onScroll",value:function(){l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var t=0,e=this.scrollSystems.length;t<e;t++)this.scrollSystems[t]._onScroll();this.trigger(l.PageEvents.ON_SCROLL,l.pageMetrics)}},{key:"onResizeImmediate",value:function(){l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var t=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=t.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=t.top+l.pageMetrics.scrollY,window.clearTimeout(l.RESIZE_TIMEOUT),l.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(l.PageEvents.ON_RESIZE_IMMEDIATE,l.pageMetrics)}},{key:"onResizedDebounced",value:function(){var t=this;m.update(function(){var e=l.pageMetrics.breakpoint,n=l.getBreakpoint(),i=n!==e;if(i){l.pageMetrics.previousBreakpoint=e,l.pageMetrics.breakpoint=n;for(var r=0,o=t.groups.length;r<o;r++)t.groups[r]._onBreakpointChange();t.trigger(l.PageEvents.ON_BREAKPOINT_CHANGE,l.pageMetrics)}for(var s=0,a=t.groups.length;s<a;s++)t.groups[s].forceUpdate({recalculateActiveKeyframes:i,waitForNextUpdate:!1});t.trigger(l.PageEvents.ON_RESIZE_DEBOUNCED,l.pageMetrics)},!0)}},{key:"forceUpdate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.recalculateActiveKeyframes,i=void 0!==n&&n,r=e.waitForNextUpdate,o=void 0===r||r;this._forceUpdateRAFId!==-1&&m.cancelUpdate(this._forceUpdateRAFId);var s=function(){for(var e=0,n=t.groups.length;e<n;e++){var r=t.groups[e];r.forceUpdate({recalculateActiveKeyframes:i,waitForNextUpdate:!1})}return-1};this._forceUpdateRAFId=o?m.update(s,!0):s()}},{key:"addKeyframe",value:function(t,e){var n=this.getGroupForTarget(t);return n.addKeyframe(t,e)}},{key:"getGroupForTarget",value:function(t){if(t._animInfo&&t._animInfo.group)return t._animInfo.group;for(var e=t;e;){if(e._animInfo&&e._animInfo.isGroup)return e._animInfo.group;e=e.parentElement}}},{key:"getControllerForTarget",value:function(t){return t._animInfo&&t._animInfo.controller?t._animInfo.controller:null}}]),e}(a);e.exports=new y},{"./Keyframes/Keyframe":445,"./Keyframes/KeyframeCSSClass":446,"./Keyframes/KeyframeDiscreteEvent":447,"./Model/AnimSystemModel":448,"./ScrollGroup":457,"./TimeGroup":458,"./utils/arrayToObject":459,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-raf-emitter/RAFEmitter":423,"@marcom/ac-raf-emitter/cancelUpdate":428,"@marcom/ac-raf-emitter/draw":429,"@marcom/ac-raf-emitter/external":430,"@marcom/ac-raf-emitter/update":433}],435:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/sm-math-utils"),l=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=t("./Model/AnimSystemModel"),u=t("d3/build/d3.min"),h=t("./AnimSystemGUI/Guides"),f=t("./AnimSystemGUI/InfoPanel"),d=t("./AnimSystemGUI/Styles"),p=0,m=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.group=t,void 0===n.group.viewableRange&&Object.defineProperty(n.group,"viewableRange",{get:function(){return this.keyFrames}}),n.uuid=p++,n.tlEdgePadding=1,n.rowStart=70,n.nameLabelSize=200,n.labelHeight=20,n.playheadWidth=50,n.keyframeDiamond=u.symbol().type(u.symbolDiamond).size(75),n.keyframeForward=u.symbol().type(u.symbolTriangle).size(35),n.triggerCircle=u.symbol().type(u.symbolCircle).size(35),n.eventCross=u.symbol().type(u.symbolCross).size(45),n.playhead={background:null,wire:null,group:null,label:null},n.pendingUpdateRAF=-1,n}return o(e,t),s(e,[{key:"destroy",value:function(){this.group=null,cancelAnimationFrame(this.pendingUpdateRAF),e.popup.removeEventListener("scroll",this.onScroll);var t=e.systems.indexOf(this);t!==-1&&e.systems.splice(t,1),this.svg.selectAll("g.playhead").remove(),this.svg.remove(),this.svgElement.remove(),this.eventCross=null,this.keyframeDiamond=null,this.keyframeForward=null,this.triggerCircle=null}},{key:"setupEvents",value:function(){var t=this;this.onScrollUpdate=this.onScrollUpdate.bind(this),this.onScroll=this.onScroll.bind(this),this.create=this.create.bind(this),this.onAnimationUpdate=this.onAnimationUpdated.bind(this),this.toggleCollapse=this.toggleCollapse.bind(this),e.popup.addEventListener("scroll",this.onScroll),this.group.on(c.EVENTS.ON_KEYFRAME_UPDATED,function(){cancelAnimationFrame(t.pendingUpdateRAF),t.pendingUpdateRAF=requestAnimationFrame(function(){return t.onAnimationUpdate()})})}},{key:"toggleCollapse",value:function(t){void 0===t&&(t=parseInt(this.svgElement.attr("height"))===this.svgHeight);var e=t?this.labelHeight:this.svgHeight;this.svgElement.attr("height",e)}},{key:"onAnimationUpdated",value:function(t){this.createAnimatedControllerEntries(),e.guides.update(t)}},{key:"create",value:function(){var t=this;cancelAnimationFrame(this.pendingUpdateRAF),this.pendingUpdateRAF=requestAnimationFrame(function(){t.svgHeight=50,t.createXScale(),t.createSVG(),t.createHeader(),t.createAxis(),t.createAnimatedControllerEntries(),t.createPlayhead(),cancelAnimationFrame(t.pendingUpdateRAF),t.pendingUpdateRAF=requestAnimationFrame(function(){e.guides.update(),t.setSVGSize()})})}},{key:"createSVG",value:function(){return this.svgElement?void this.svgElement.attr("width",e.workAreaWidth):(this.svgElement=u.select(e.popup.document.body).selectAll(".svg_"+this.uuid+" g").data([this.group]).enter().append("svg").classed("sm-ac-gui-main-canvas",!0).classed("svg_"+this.uuid,!0),this.svg=this.svgElement.append("g").attr("transform",this.translate(0,this.labelHeight)),void this.svgElement.attr("width",e.workAreaWidth))}},{key:"setSVGSize",value:function(){var t=this;this.group.hasDuration()&&0!==this.svg.selectAll("g.controller").size()?(this.svgElement.transition().duration(500).attr("height",this.svgHeight+"px"),requestAnimationFrame(function(){return t.updatePlayhead()})):this.toggleCollapse(!0)}},{key:"createPlayhead",value:function(){var t=this,n=5,i=this.svg.selectAll("g.playhead").data(function(t){return[t]},function(t){return t.name}),r=i.enter().append("g").classed("playhead",!0).attr("transform",this.translate(this.x(0),n));r.append("rect").attr("x",-this.playheadWidth/2).attr("width",this.playheadWidth).attr("rx",2).attr("height",this.labelHeight),r.append("text").attr("x",0).attr("y",this.labelHeight/2).classed("label",!0).classed("unselectable",!0).text("0.00"),r.append("line").attr("x1",0).attr("x2",0).attr("y1",this.labelHeight),this.playhead.group=this.svg.select("g.playhead"),this.playhead.label=this.svg.select("g.playhead text");var o=this.playhead.group.node().parentElement;o.insertBefore(this.playhead.group.node(),o.children[o.children.length-1]),this.svg.select("g.playhead line").attr("y2",function(){return Math.min(t.svgHeight,e.bounds.height)+t.labelHeight}),r.call(u.drag().on("start",function(){t.isDraggingPlayhead=!0,t.playhead.group.node().style.cursor="-webkit-grab",t.playhead.group.node().style.cursor="grab"}).on("drag",function(){t.playhead.group.node().style.cursor="-webkit-grabbing",t.playhead.group.node().style.cursor="grabbing";var e=t.x(t.group.boundsMin),n=t.x(t.group.boundsMax),i=u.event.x,r=a.norm(i,e,n),o=t.svgElement.node(),s=Math.max(-o.getBoundingClientRect().top-19,1);if(t.playhead.group.attr("transform",t.translate(i,s)),void 0!==t.group.duration)t.group.progress(r);else{var l=t.group.convertTValueToScrollPosition(r);window.scrollTo(window.scrollX,l)}t.playhead.label.text(t.group.timelines.localUnclamped.toPrecision(2))}).on("end",function(){t.isDraggingPlayhead=!1,t.playhead.group.node().style.cursor="-webkit-grab"}))}},{key:"createXScale",value:function(){var t=Math.min(this.group.boundsMin,0),n=Math.max(this.group.boundsMax,1);this.x=u.scaleLinear().domain([t,n]).range([this.nameLabelSize+this.tlEdgePadding,e.workAreaWidth-this.tlEdgePadding])}},{key:"createAxis",value:function(){var t=u.axisBottom(this.x);t.tickSize(this.labelHeight-2,0);var n=u.scaleLinear().domain([0,1980]).range([0,20]),i=this.svg.selectAll("g.axis.unselectable").data(function(t){return[t.viewableRange]});i.enter().append("g").attr("sm-gui-label","axis").classed("axis",!0).classed("unselectable",!0).merge(i).call(t.ticks(n(e.workAreaWidth),"s"))}},{key:"createHeader",value:function(){var t=this,n=this.svg.selectAll("g.header").data(function(t){return[t.name]}),i=n.enter().append("g").attr("class",function(){return"header "+(t.uuid%2===0?"even":"odd")}).on("click",function(){u.event.shiftKey&&e.systems.forEach(function(t){t.toggleCollapse(!0)}),t.toggleCollapse()});i.append("rect").attr("x",0).attr("width",e.workAreaWidth).attr("height",this.labelHeight),i.append("text").attr("x",10).attr("y",this.labelHeight/2).attr("text-anchor","middle").text(function(e){var n=""===t.group.name,i="[Unnamed Group] on "+t.group.element.className,r=n?i:t.group.name;return r}),n.enter().merge(n).selectAll("rect").attr("width",e.workAreaWidth)}},{key:"createAnimatedControllerEntries",value:function(){var t=this,e=this.group,n=this.rowStart,i=this.svg.selectAll("g.controller").data(function(t){return t.keyframeControllers.filter(function(t){return t._activeKeyframes.length>0}).sort(function(t,e){return t.boundsMin<e.boundsMin?-1:t.boundsMin>e.boundsMin?1:0})},function(t){return t.uuid});i.exit().transition().duration(500).ease(u.easeSinInOut).style("opacity",0).remove(),i=i.enter().append("g").attr("class","controller").merge(i).attr("data-prev-y",function(t){return this.dataset.y}).attr("data-y",function(e){var i=n;return n+=t.labelHeight*(e.attributes.length+2),t.translate(0,i)}).attr("data-index",function(t,e){return e+1}),this.svgHeight=n;var r=i.filter(function(){return this.dataset.prevY===this.dataset.y||void 0===this.dataset.prevY});r.attr("transform",function(){return this.dataset.y});var o=i.filter(function(){return this.dataset.prevY!==this.dataset.y&&void 0!==this.dataset.prevY});o.transition().ease(u.easeSinInOut).duration(500).attr("transform",function(){return this.dataset.y});var s=i.selectAll("g.controller-text-container").data(function(t){return[t.friendlyName]});s.exit().remove(),s=s.enter().append("g").classed("controller-text-container",!0).merge(s).on("click",function(){var t=this.parentElement.__data__.element,n=e.metrics.get(t);if(!n)return void console.log("AnimSystemGUI - No metrics for",t);var i=n.top-(.5*c.pageMetrics.windowHeight-.5*n.height);u.transition().duration(500).tween("scroll",function(){var t=u.interpolateNumber(pageYOffset,i);return function(e){scrollTo(0,t(e))}})});var a=s.selectAll("text.sm-ac-gui-controller-label").data(function(t){return[t]});a.exit().remove(),a.enter().append("text").attr("x",10).attr("y",-8).attr("class","sm-ac-gui-controller-label").merge(a).text(function(t){return t});var l=i.selectAll("g.attribute").data(function(t){return t.attributes},function(t){return t});l.exit().remove(),l=l.enter().append("g").attr("class",function(t,e){return"timeline-backgrounds attribute "+t.key+(e%2===0?" even":" odd")}).merge(l).attr("transform",function(e,n){return t.translate(0,n*t.labelHeight)}),this.createAttributeBackgroundBars(l),this.createAnimations(l)}},{key:"createAnimations",value:function(t){var e=this,n=u.transition().duration(250),i=function(t,n){var i=t.keyframe[t.key],r=1,o=1,s=0;switch(t.keyframe.keyframeType){case c.KeyframeTypes.Interpolation:o=1,r=.75,s=0;break;case c.KeyframeTypes.InterpolationForward:o=.75,r=1,s=90;break;case c.KeyframeTypes.CSSClass:o=1,r=1,s=0;break;case c.KeyframeTypes.Event:o=1,r=1,s=0}return e.translate(e.x(i),0)+" scale("+o+", "+r+") rotate("+s+")"},r=function(t){switch(t.keyframe.keyframeType){case c.KeyframeTypes.Interpolation:return e.keyframeDiamond();case c.KeyframeTypes.InterpolationForward:return e.keyframeForward();case c.KeyframeTypes.CSSClass:return e.triggerCircle();case c.KeyframeTypes.Event:return e.eventCross()}},o=t.selectAll("g.animation").data(function(t,e){return this.parentElement.__data__.keyframes[t]},function(t){return t.id});o.exit().transition().duration(500).ease(u.easeSinInOut).style("opacity",0).remove(),o=o.enter().append("g").attr("transform",function(t){return e.translate(0,.5*e.labelHeight)}).classed("animation",!0).merge(o).classed("trigger",function(t){return t.keyframeType===c.KeyframeTypes.CSSClass});var s=o.selectAll("line").data(function(t){return[t]});s.exit().remove(),s=s.enter().append("line").attr("stroke",function(t){return d.KeyframeColor(t.id)}).attr("x1",function(t){return e.x(t.start)}).attr("x2",function(t){return e.x(t.end)}).merge(s),s.transition(n).attr("x1",function(t){return e.x(t.start)}).attr("x2",function(t){return e.x(t.end)});var a=o.selectAll("path").data(function(t){return[{key:"start",keyframe:t},{key:"end",keyframe:t}]});a.exit().remove(),a.transition(n).attr("fill",function(t){return d.KeyframeColor(t.keyframe.id)}).attr("transform",i).attr("d",r),a.enter().append("path").attr("transform",i).attr("d",r).attr("fill",function(t){return d.KeyframeColor(t.keyframe.id)})}},{key:"createAttributeBackgroundBars",value:function(t){var n=this,i=t.selectAll("rect").data(function(t){return[t]});i=i.enter().append("rect").merge(i).attr("x",0).attr("width",function(){return n.x(Math.max(1,n.group.boundsMax))}).attr("height",this.labelHeight);var r=t.selectAll("text").data(function(t){return[t]});r.exit().remove(),r=r.enter().append("text").attr("class","attribute-label").attr("x",15).attr("y",10).merge(r).text(function(t){return t});var o=this;i.on("click",function(t){var n=u.select(this.parentNode.parentNode).datum(),i=o.x.invert(u.event.x),r=n.getNearestKeyframeForAttribute(i,t);if(r){var s=u.select(this.parentNode).selectAll("g.animation").filter(function(t){return t===r}).node();e.guides.update(r),e.panel.update(s,r)}}),this.createTimelineMarkers(t)}},{key:"createTimelineMarkers",value:function(t){var e=this,n=t.selectAll("line.timeline-marker").data(function(t){return[e.group.viewableRange.a,e.group.viewableRange.b,e.group.viewableRange.c].map(function(t){return e.group.convertScrollPositionToTValue(t)})},function(t,e){return e});n.exit().remove(),n.enter().append("line").classed("timeline-marker",!0).attr("y2",0).attr("y2",this.labelHeight).merge(n).transition(u.transition().duration(250)).attr("x1",function(t){return e.x(t)}).attr("x2",function(t){return e.x(t)})}},{key:"onScrollUpdate",value:function(t){this.updatePlayhead()}},{key:"onScroll",value:function(){this.updatePlayhead()}},{key:"updatePlayhead",value:function(){if(this.playhead.group&&!this.isDraggingPlayhead){var t=this.svgElement.node(),e=Math.max(-t.getBoundingClientRect().top-19,1),n=this.group.timelines;this.playhead.label.text(n.localUnclamped.toPrecision(2)),this.playhead.group.attr("transform",this.translate(this.x(n.localUnclamped),e))}}},{key:"translate",value:function(t,e){return t!==t?(console.log("AnimSystemGUI isNaN(x):",isNaN(t),"isNaN(y):",isNaN(e)),"translate("+t+","+e+")"):"translate("+t+","+e+")"}},{key:"onResizeDebounced",value:function(){var t=this;setTimeout(function(){t.group.hasDuration()&&(t.create(),e.guides._update())},250)}}]),e}(l);m.popup=null,m.SaveWindowPosition=function(){m.bounds={top:m.popup.screenTop,left:m.popup.screenLeft,windowWidth:m.popup.innerWidth,height:m.popup.innerHeight},localStorage.setItem(c.LOCAL_STORAGE_KEYS.GuiPosition,JSON.stringify(m.bounds))},m.GetWindowPosition=function(){var t=localStorage.getItem(c.LOCAL_STORAGE_KEYS.GuiPosition);if(m.bounds={top:0,left:0,windowWidth:.55*window.screen.width,height:.5*window.screen.width},null!==t){var e=JSON.parse(t);m.bounds.top=e.top,m.bounds.left=e.left,m.bounds.windowWidth=e.windowWidth,m.bounds.height=e.height}m.workAreaWidth=m.bounds.windowWidth-m.panelWidth},m.panel=null,m.panelWidth=250,m.guides=null,m.IS_ENABLED=!1,m.HAS_LOADED=!1,m.pending=[],m.systems=[],m.Enable=function(){return console.log("%c AnimSystem GUI - Version "+_+" ","background: #282828; color: #66cdff"),m.GetWindowPosition(),m.CreatePopup(),m.popup?(m.IS_ENABLED=!0,void m.LoadingComplete()):void(m.IS_ENABLED=!1)},m._resizeTimeout=-1,m.LoadingComplete=function(){m.popup.document.querySelectorAll("style").forEach(function(t){t.parentNode.removeChild(t)}),m.popup.document.querySelectorAll("svg").forEach(function(t){t.parentNode.removeChild(t)}),m.panel=new f(m.popup.document),m.guides=new h(m.panel.clearGuidesButton),d.Inject(m.popup.document),m.popup.addEventListener("resize",m.ON_RESIZE),d.KeyframeColor=u.scaleLinear().domain([0,10]).interpolate(u.interpolateHslLong).range([u.rgb("#66faff"),u.rgb("#ff6669")]),m.HAS_LOADED=!0;var t=function e(){var t=Array.from(document.querySelectorAll("[data-anim-group],[data-anim-scroll-group],[data-anim-time-group]")).map(function(t){return t._animInfo?t._animInfo.group:null}).filter(function(t){return null!==t});if(t.length>0){var n=t[0].anim;n.groups.forEach(function(t){return m.REGISTER(t)}),n.on(c.EVENTS.ON_GROUP_CREATED,function(t){return m.REGISTER(t)})}else requestAnimationFrame(e)};t()},m.REGISTER=function(t){m.HAS_LOADED?m.ADD_GUI_FOR_SYSTEM(t):m.pending.push(t)},m.ON_RESIZE_DEBOUNCED=function(){m.SaveWindowPosition(),m.workAreaWidth=m.bounds.windowWidth-m.panelWidth,m.systems.forEach(function(t){t.create()})},m.ADD_GUI_FOR_SYSTEM=function(t){var e=0!==m.systems.filter(function(e){return e.group===t}).length;if(!e){var n=new m(t);n.setupEvents(),n.create(),m.systems.push(n),t.gui=n}},m.ON_RESIZE=function(){window.clearTimeout(m._resizeTimeout),m._resizeTimeout=window.setTimeout(m.ON_RESIZE_DEBOUNCED,500)},m.CreatePopup=function(){if(!m.popup){if(m.popup=window.open("","AnimSystemGUI","top="+m.bounds.top+",left="+m.bounds.left+",width="+m.bounds.windowWidth+",height="+m.bounds.height+",location=no"),null===m.popup)return void console.error("AnimSystemGUI could not open create window");m.popup.document.title=document.title+" AnimSystemGUI",m.popup.blur(),m.popup.AnimSystemGUI=m}},e.exports=m;var _="2.2.0-alpha.5"},{"./AnimSystemGUI/Guides":437,"./AnimSystemGUI/InfoPanel":438,"./AnimSystemGUI/Styles":443,"./Model/AnimSystemModel":448,"@marcom/ac-event-emitter-micro":160,"@marcom/sm-math-utils":497,"d3/build/d3.min":516}],436:[function(t,e,n){"use strict";var i={hasInitialized:!1,init:function(t){i.hasInitialized||(i.hasInitialized=!0,this.parentDocument=t,this.element=this.parentDocument.querySelector("textarea"),this.element||(this.element=this.parentDocument.createElement("textarea"),this.element.style.opacity=0,this.element.style.fontSize="12pt",this.element.style.border="0",this.element.style.padding="0",this.element.style.margin="0",this.element.style.zIndex=-1,this.element.style.position="absolute",this.element.setAttribute("readonly",""),this.element.style.top=0,this.parentDocument.body.appendChild(this.element)))},copyToClipboard:function(t){this.element.value=t,this.element.innerHTML=t,this.element.select();try{return this.parentDocument.execCommand("copy")}catch(e){return!1}}};e.exports=i},{}],437:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this.setupHTML(),this.keyframe=null,this.clearButton=e,this.clearButton.on("click",this.clearGuides.bind(this))}return r(t,[{key:"update",value:function(t){t&&(this.keyframe=t),this._update()}},{key:"_update",value:function(){if(this.keyframe){var t=this.keyframe.controller.group.convertTValueToScrollPosition(this.keyframe.start),e=this.keyframe.controller.group.convertTValueToScrollPosition(this.keyframe.end);this.element.style.display="block",this.start.style.transform=this.translate(t),this.end.style.transform=this.translate(e)}}},{key:"clearGuides",value:function(){this.keyframe=null,
this.element.style.display="none"}},{key:"translate",value:function(t){return"translate(0,"+t+"px)"}},{key:"setupHTML",value:function(){var t='\n<style>\n.anim-system-gui-marker-container {\n    position: absolute;\n    top: 0;\n    width: 100vw;\n    z-index: 100001;\n    display: none;\n}\n.anim-system-gui-marker-container .marker {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 5px;\n    background-color: red;\n    transition: transform 0.5s;\n}\n.anim-system-gui-marker-container .start { background-color: #1CE2B2; }\n.anim-system-gui-marker-container .end { background-color: #FF1461; }\n</style>\n            <div class="marker start"></div>\n            <div class="marker end"></div>\n        ',e=document.createElement("div");e.classList.add("anim-system-gui-marker-container"),e.innerHTML=t,this.element=document.body.appendChild(e),this.start=this.element.querySelector(".start"),this.end=this.element.querySelector(".end")}}]),t}();e.exports=o},{}],438:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./KeyframeModel"),s=t("./ClipboardHelper"),a=t("d3/build/d3.min"),l=function(){function t(e){i(this,t),this.document=e,s.init(e),this.gui=null,this.keyframe=null,this.keyframeGroup=null,this.keyframeModel=new o;var n=this.document.body.querySelector(".panel-container");n&&this.document.body.removeChild(n),this.container=a.select(this.document.body).append("div").classed("panel-container",!0).append("div").classed("panel",!0),this.createPanelBackground(),this.documentSelection=a.select(this.document),this.update=this.update.bind(this),this._update()}return r(t,[{key:"createPanelBackground",value:function(){this.container.append("div").classed("header",!0).text("Properties"),this.buttonContainer=this.container.append("div").classed("button-container",!0),this.clearGuidesButton=this.buttonContainer.append("div").classed("button",!0).text("CLEAR GUIDES"),this.exportButton=this.buttonContainer.append("div").classed("button",!0).classed("export",!0).text("EXPORT KEYFRAME").on("click",this.exportKeyframe.bind(this))}},{key:"exportKeyframe",value:function(){if(this.keyframe){var t=this.keyframeModel.exportKeyframe(this.keyframe),e="";a.event.shiftKey?(e=Object.keys(t).map(function(e){return e+":"+JSON.stringify(t[e])}).join(","),e="{"+e+"}"):e="'"+JSON.stringify(t)+"'",s.copyToClipboard(e)}}},{key:"updateHighlight",value:function(t){var e=this,n=this.keyframe;if(t!==this.keyframeGroup){this.keyframeGroup&&this.keyframeGroup.parentElement.parentElement&&a.select(this.keyframeGroup.parentElement.parentElement).selectAll("g.animation").filter(function(t){return t===e.keyframeGroup.__data__}).selectAll("line,path").transition().duration(200).style("fill","").style("stroke","");var i=this.documentSelection.selectAll("g.controller").filter(function(e){return e===t.__data__.controller}).selectAll("g.animation").filter(function(t){return t===n});i.selectAll("line,path").transition().duration(200).style("fill","red").style("stroke","red")}}},{key:"update",value:function(t,e){this.keyframe=e,this.updateHighlight(t),this.keyframeGroup=t,this.keyframeModel.updateModel(e),this._update()}},{key:"_update",value:function(){var t=this,e=this,n=[{categoryName:"Timing",keys:["start","end"]},{categoryName:"Easing",keys:["ease","easeFunction"]},{categoryName:"",keys:["relativeTo"]},{categoryName:"",keys:["event"]},{categoryName:"",keys:["cssClass"]},{categoryName:"",keys:["breakpointMask"]},{categoryName:"",keys:["disabledWhen"]},{categoryName:"",keys:["hold"]},{categoryName:"",keys:["snapAtCreation"]},{categoryName:"",keys:["toggle"]}];n.forEach(function(e,i){n[i].keys=e.keys.map(function(e){return t.keyframeModel.data.find(function(t){return t.path===e})}).filter(function(t){return void 0!==t})}),n=n.filter(function(t){return 0!==t.keys.length}),n.forEach(function(t,e){""===n[e].categoryName&&(n[e].categoryName=n[e].keys[0].friendlyName)});var i=this.keyframeModel.data.filter(function(t){return t.isAnimValue}),r=[];if(i.forEach(function(t){var e=r.find(function(e){return e.categoryName===t.friendlyName});e||(e={categoryName:t.friendlyName,keys:[]},r.push(e)),e.keys.push(t)}),r.length>0){r.unshift({categoryName:"Animated Values",keys:[]});var o=[1,0].concat(r);Array.prototype.splice.apply(n,o)}var s=this.container.selectAll(".category").data(n,function(t){return t.categoryName}),l=function(t,e){return 40*e+300};s.exit().transition(a.easeSinInOut).duration(l).style("opacity",0).style("transform",this.scale(1.2)).transition().duration(l).style("height",0).style("padding-top",0).style("padding-bottom",0).style("margin-top",0).remove();var c=s.enter().append("div").attr("class",function(t){var e=t.keys.filter(function(t){return"boolean"==typeof t.value}).length>0,n=t.keys.filter(function(t){return t.isAnimValue}).length>0;return"category has-"+t.keys.length+"-inputs "+(e?"radio-button-container":"")+" "+(n?"anim-value-container":"")});c.style("visibility","hidden").style("transform","scale(0)").style("height",0).style("margin-top",0).each(function(){var t=this;requestAnimationFrame(function(){return t.dataset.height=t.clientHeight})}),c.append("h2"),requestAnimationFrame(function(){c.style("visibility","visible").transition(a.easeCubicInOut).duration(l).style("transform","scale(1)").style("margin-top",10).style("height",function(){this.dataset.height})}),s=s.enter().merge(s),s.selectAll("h2").text(function(t){return t.categoryName});var u=this.container.selectAll(".category").selectAll("input").data(function(t){return t.keys}),h=u.enter().append("input").attr("spellcheck",!1).merge(u).style("background-color",null).attr("class",function(t){return t.path}).attr("type",function(t){return"boolean"==typeof t.value?"checkbox":"input"}).property("checked",function(t){return typeof t.value===!0||"true"===t.value}).property("value",function(t,e){return void 0===t.value?"":String(t.value)});h.filter(function(t){return"input"===this.getAttribute("type")}).on("keydown",function(t){"Enter"===a.event.code&&e.onInputChanged()}),h.filter(function(t){return"checkbox"===this.getAttribute("type")}).on("click",function(t){this.value=this.checked,e.onInputChanged()})}},{key:"capitalize",value:function(t){return t[0].toUpperCase()+t.slice(1,t.length)}},{key:"onInputChanged",value:function(){if(this.keyframe){var t=this.keyframe;this.container.selectAll(".category input").style("background-color",null).filter(function(e){return!e.validator(t,e.path,this.value)}).style("background-color","rgba(255,0,0,0.1)"),this.container.selectAll(".category input").filter(function(e){return e.validator(t,e.path,this.value)}).each(function(e){e.value=this.value,e.updateKeyframe(t)});var e=this.keyframeModel.exportKeyframe(this.keyframe);this.keyframe.overwriteProps(e)}}},{key:"translate",value:function(t,e){return"translate("+t+"px,"+e+"px)"}},{key:"scale",value:function(t){return"scale("+t+","+t+")"}},{key:"flash",value:function(t){a.select(t).transition().duration(100).style("background-color","#FF9C95").transition().duration(500).style("background-color","white")}}]),t}();e.exports=l},{"./ClipboardHelper":436,"./KeyframeModel":442,"d3/build/d3.min":516}],439:[function(t,e,n){"use strict";var i=t("../Model/AnimSystemModel"),r={noop:function(t,e){return e},propertyValue:function(t,e){return"null"===e&&(e=null),e},bool:function(t,e){return"true"===e?e=!0:"false"===e&&(e=!1),e},disabledWhen:function(t,e){return Array.isArray(e)?e:("string"==typeof e&&(e=e.split(",")),0===e.length?i.KeyframeDefaults.disabledWhen:e)}};e.exports=r},{"../Model/AnimSystemModel":448}],440:[function(t,e,n){"use strict";var i=t("../Model/EasingFunctions"),r=t("../Model/UnitBezier"),o={noop:function(){return!0},timingValue:function(t,e,n){try{var i=t.controller.group.expressionParser.parseExpression(t,n);return"number"==typeof i}catch(r){return!1}},propertyValue:function(t,e,n){n="null"===n?null:n;var i=o.timingValue(t,e,n);if(!i)return!1;if(null!==n)return!0;var r=/(.*)\[([0-9.]+)\]/g.exec(e);if(!r)return!1;var s=r[1],a=Number(r[2]),l=t.controller.keyframes[s],c=l.indexOf(t);if(c===-1)return!1;var u=0===a?l[c-1]:l[c+1];if(!u)return!1;var h=0===a?1:0,f=null!==u.jsonProps[s][h];return f},ease:function(t,e,n){var i=parseFloat(n),r="number"==typeof i&&!isNaN(i);return!!r&&(i>=0&&i<=1)},easeFunction:function(t,e,n){var o=i.hasOwnProperty(n);if(o)return!0;try{return void 0!==r.fromCSSString(n)}catch(s){return!1}},breakpointMask:function(t,e,n){n=n.toLowerCase();var i=["smlx","smxl","slmx","slxm","sxml","sxlm","msxl","mslx","mlxs","mlsx","mxls","mxsl","lsmx","lsxm","lmsx","lmxs","lxsm","lxms","xslm","xsml","xmls","xmsl","xlms","xlsm"];return i.filter(function(t){return t.indexOf(n)!==-1}).length>0},disabledWhen:function(t,e,n){return Array.isArray(n),!0},relativeTo:function(t,e,n){if(""===n)return!0;try{return t.controller.group.element.querySelector(n)||document.querySelector(n)}catch(i){return!1}},isBoolean:function(t,e,n){return"true"===n||"false"===n}};e.exports=o},{"../Model/EasingFunctions":449,"../Model/UnitBezier":453}],441:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n,r,o,s){i(this,t),this.friendlyName=e,this.path=n,this.value=r,this.validator=o,this.sanitizer=s,this.isAnimValue=n.indexOf("[")!==-1}return r(t,[{key:"updateModel",value:function(t){var e=this.parsePath(t),n=e.ref,i=e.key;this.value=n[i]}},{key:"updateKeyframe",value:function(t){t.controller.group.expressionParser.isUnitlessNumber(this.value)&&(this.value=parseFloat(this.value)),this.value=this.sanitizer(this,this.value);var e=this.parsePath(t),n=e.ref,i=e.key;n[i]=this.value}},{key:"parsePath",value:function(t){for(var e=this.path.split(/\.|(\[\d+\])/g).filter(function(t){return void 0!==t&&""!==t}),n=t.jsonProps,i=e[0],r=0;r<e.length;r++)i=e[r],i.indexOf("[")!==-1&&(i=parseInt(/\d+/g.exec(i)[0])),r!==e.length-1&&(n=n[i]);return{ref:n,key:i}}},{key:"clone",value:function(){return new t(this.friendlyName,this.path,this.value,this.validator)}}]),t}();e.exports=o},{}],442:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../Model/AnimSystemModel.js"),s=t("./InputValidators"),a=t("./InputSanitizers"),l=t("./KeyValueStore"),c=function(){function t(){i(this,t),this.data=[new l("Start","start","",s.timingValue,a.noop),new l("End","end","",s.timingValue,a.noop),new l("Ease","ease",1,s.ease,a.noop),new l("Ease Function","easeFunction","linear",s.easeFunction,a.noop),new l("Hold","hold",(!1),s.isBoolean,a.bool),new l("Snap At Creation","snapAtCreation",(!1),s.isBoolean,a.bool),new l("Event","event","",s.noop,a.noop),new l("Breakpoint Mask","breakpointMask","",s.breakpointMask,a.noop),new l("Relative To","relativeTo","",s.noop,a.noop),new l("CSS Class","cssClass","",s.noop,a.noop),new l("Toggle","toggle",(!1),s.isBoolean,a.bool),new l("Disabled When","disabledWhen","",s.noop,a.disabledWhen)],this.defaultData=this.data.map(function(t){return t.clone()})}return r(t,[{key:"deleteKey",value:function(t){var e=this.data.findIndex(function(e){return e.path===t});e!==-1&&this.data.splice(e,1)}},{key:"addKeyIfNotExist",value:function(t){var e=this.data.find(function(e){return e.path===t});if(!e){var n=this.defaultData.find(function(e){return e.path===t});this.data.push(n.clone())}}},{key:"addAnimValues",value:function(t){for(var e in t.jsonProps)if(o.KeyframeJSONReservedWords.indexOf(e)===-1){var n=t.jsonProps[e];Array.isArray(n)&&(this.data.push(new l(e,e+"[0]",0,s.propertyValue,a.propertyValue)),this.data.push(new l(e,e+"[1]",0,s.propertyValue,a.propertyValue)))}}},{key:"updateModel",value:function(t){t.keyframeType===o.KeyframeTypes.CSSClass?(this.deleteKey("ease"),this.deleteKey("easeFunction"),this.deleteKey("hold"),this.deleteKey("event"),this.addKeyIfNotExist("cssClass"),this.addKeyIfNotExist("toggle"),this.data=this.data.filter(function(t){return!t.isAnimValue})):t.keyframeType===o.KeyframeTypes.Event?(this.deleteKey("ease"),this.deleteKey("easeFunction"),this.deleteKey("cssClass"),this.deleteKey("toggle"),this.deleteKey("hold"),this.data=this.data.filter(function(t){return!t.isAnimValue}),this.addKeyIfNotExist("event")):(this.addKeyIfNotExist("ease"),this.addKeyIfNotExist("easeFunction"),this.addKeyIfNotExist("hold"),this.addKeyIfNotExist("event"),this.deleteKey("cssClass"),this.deleteKey("toggle"),this.data=this.data.filter(function(t){return!t.isAnimValue}),this.addAnimValues(t)),this.data.forEach(function(e){return e.updateModel(t)})}},{key:"exportKeyframe",value:function(t){this.data.forEach(function(e){return e.updateKeyframe(t)});var e={};for(var n in t.jsonProps)void 0!==t.jsonProps[n]&&""!==t.jsonProps[n]&&t.jsonProps[n]!==o.KeyframeDefaults[n]&&("disabledWhen"===n&&0===t.jsonProps[n].length||(e[n]=t.jsonProps[n]));return e.end===e.start&&delete e.end,e}}]),t}();e.exports=c},{"../Model/AnimSystemModel.js":448,"./InputSanitizers":439,"./InputValidators":440,"./KeyValueStore":441}],443:[function(t,e,n){"use strict";var i={timelineMarkerStrokeColor:"#000000",containerBackgroundColor:"#E6E6E5",leftBorderColor:"#808080",headerColor:"#505C6A",headerBackgroundColor:"#D3D3D3"},r="\nhtml {\n  box-sizing: border-box; \n}\n*, *:before, *:after {\n  box-sizing: inherit;\n}\n::-webkit-scrollbar {\n    width: 0px;\n    background: transparent; /* make scrollbar transparent */\n}\n\nbody {\n\tmargin : 0;\n\tbackground-color : black;\n}\ntext {\n\tfont-family : menlo, monospace;\n\tfont-size : 12px;\n\tfill : #4e4e4e;\n\tdominant-baseline : central;\n}\n\nsvg .header {\n    transform: translate(0, -20px);\n}\n\n.header rect {\n\tcursor : pointer;\n\tfill : #2f4256;\n}\n.header.odd rect {\n\tfill : #29313a;\n}\n.header text {\n\tdominant-baseline : central;\n\ttext-anchor : start;\n\tfont-size : 15px;\n\tfill : #8ea8a8;\n  user-select: none;\n}\n.header.odd text {\n\tfill : #9fb0b3;\n}\nsvg:last-child {\n}\n.sm-ac-gui-main-canvas {\n\tbottom : 0px;\n\tbackground-color : #111111;\n\tz-index : 12;\n}\n.sm-ac-gui-controller-label {\n}\n.tick line {\n\tstroke : #3b526b;\n}\n.tick text {\n\tdominant-baseline : central;\n}\n.timeline-backgrounds rect {\n    cursor : pointer;\n}\n.even.timeline-backgrounds rect {\n\tfill : #282828;\n}\n.odd.timeline-backgrounds rect {\n\tfill : #222222;\n}\n.timeline-backgrounds .attribute-label {\n\tdominant-baseline : central;\n}\n.animation {\n\tpointer-events : none;\n}\n.animation .keyframe {\n\tstroke : none;\n}\n.animation line {\n\tstroke-width : 3;\n}\n.animation.trigger line {\n\tstroke-width : 7;\n}\n.timeline-backgrounds, .playhead {\n    cursor: -webkit-grab;\n}\n.playhead .label {\n\tdominant-baseline : central;\n\ttext-anchor : middle;\n}\n.playhead rect {\n\tfill : #8c8c8c;\n}\n.playhead line {\n\tstroke-width : 1;\n\tstroke : #8c8c8c;\n}\n\n.timeline-marker {\n    stroke: "+i.timelineMarkerStrokeColor+";\n}\n.panel-container {\n    right: 0;\n    height: 100%;\n    background-color: "+i.containerBackgroundColor+";\n    border-left: 2px solid "+i.leftBorderColor+";\n    overflow-y: scroll;\n    position: fixed;\n}\n.panel {\n    top: 0;\n    right: 0;\n    width: 250px;\n    padding-bottom: 20px;\n}\n.controller-text-container {\n    cursor: pointer;\n}\n\n.panel .button-container {\n    padding-left: 5px;\n    padding-top: 15px;\n}\n\n.panel .button {\n    text-align: right;\n    padding-left: 10px;\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;\n    font-weight: 200;\n    font-size: 12px;\n    cursor: pointer;\n    display: inline-block;\n    color: #8c8c8c;\n}\n.panel .button.export {\n    padding-left: 40px;\n}\n\n.panel .header {\n    background-color: "+i.headerBackgroundColor+";\n    height: 40px;\n    text-align: center;\n    padding: 2%;\n    box-sizing: border-box;\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;\n    font-size: 24px;\n    font-weight: 700;\n    color: "+i.headerColor+";\n}\n.category {\n    padding-left: 10px;\n    // display: flex;\n    // justify-content: flex-end;\n    // align-items: center;\n}\n\n.category input {\n    display: inline-block;\n    height: 25px;\n    background: #FFFFFF;\n    color: #4e4e4e;\n    border: transparent;\n    font-size: 12px;\n    font-family: menlo;\n    text-align: center;\n    \n}\n\n\n.category.has-2-inputs input {\n    width: calc(50% - 12px);\n    margin-left: 3px;\n    margin-right: 6px;\n}\n\n.category.has-2-inputs input.ease { width: 20%; }\n.category.has-2-inputs input.easeFunction { width: 70%; }\n\n.category h2 {\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;\n    font-size: 18px;\n    font-weight: 700;\n    -webkit-margin-before: 0;\n    -webkit-margin-after: 0;\n    padding-right: 15px;\n    \n}\n\n.category.has-1-inputs input {\n    padding-left: 10px;\n    text-align:left;\n    width: 100%;\n}\n\n.category.has-1-inputs {\n    width: calc(100% - 10px);\n    margin-right: 10px;\n}\n.category.has-0-inputs {\n    // padding-top: 10px;\n}\n\n.category.anim-value-container h2 {\n    font-size: 14px;\n    font-weight: 600;\n    padding-left: 5%;\n}\n\n.category.radio-button-container h2 {\n    margin-top: 0;\n}\n.category.radio-button-container input {\n    width: auto;\n}\n.category.radio-button-container {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    flex-direction: row-reverse;\n}\n.category h3 {\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;;\n    font-size: 14px;\n    font-weight: 600;\n    padding-left: 5%;\n    margin-bottom: 5px;\n    margin-top: 5px;\n}\n.relativeTo input {\n    padding-left: 10px;\n    font-size: 10px;\n}\n.unselectable {\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    pointer-events:none;\n}\n",o=function(t){var e=t.createElement("style");return e.innerHTML=r,t.head.appendChild(e),e};e.exports={Inject:o,KeyframeColor:{}}},{}],444:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function y(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:y(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./Model/AnimSystemModel"),c=(t("./Keyframes/Keyframe"),t("./Keyframes/KeyframeCSSClass")),u=t("./Model/InferKeyframeFromProps"),h=t("./utils/arrayToObject"),f=t("./Model/UUID"),d=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,p=t("@marcom/decompose-css-transform"),m={update:t("@marcom/ac-raf-emitter/update"),external:t("@marcom/ac-raf-emitter/external"),draw:t("@marcom/ac-raf-emitter/draw")},_=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.uuid=f(),o.group=t,o.element=n,o._ownerIsElement=o.element instanceof Element,o._ownerIsElement?o.friendlyName=o.element.tagName+"."+Array.from(o.element.classList).join("."):o.friendlyName=o.element.friendlyName||o.uuid,o.element._animInfo=o.element._animInfo||new l.AnimInfo(t,o),o.element._animInfo.controller=o,o.tweenProps={},o.eventObject=new l.EventObject(o),o.needsStyleUpdate=!1,o.needsClassUpdate=!1,o.elementMetrics=o.group.metrics.add(o.element),o._parentElementMetrics=null,o.attributes=[],o.keyframes={},o._allKeyframes=[],o._activeKeyframes=[],o.keyframesRequiringDispatch=[],o.updateCachedValuesFromElement(),o.boundsMin=0,o.boundsMax=0,o}return o(e,t),s(e,[{key:"destroy",value:function(){this.element._animInfo&&this.element._animInfo.controller===this&&(this.element._animInfo.controller=null,this.element._animInfo=null),this._parentElementMetrics=null,this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var t=0;t<this._allKeyframes.length;t++)this._allKeyframes[t].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){if(this._ownerIsElement){var t=getComputedStyle(this.element),e=p(this.element,!0),n=l.KeyframeDefaults.epsilon,i=!1;this.tweenProps.x=new l.TargetValue(e.translation[0],n,i),this.tweenProps.y=new l.TargetValue(e.translation[1],n,i),this.tweenProps.z=new l.TargetValue(e.translation[2],n,i),this.tweenProps.rotation=new l.TargetValue(e.eulerRotation[2],n,i),this.tweenProps.scale=new l.TargetValue(e.scale[0],n,i),this.tweenProps.scaleX=new l.TargetValue(e.scale[0],n,i),this.tweenProps.scaleY=new l.TargetValue(e.scale[1],n,i),this.tweenProps.opacity=new l.TargetValue(parseFloat(t.opacity),n,i)}}},{key:"addKeyframe",value:function(t){var e=u(t);if(!e)throw new Error("AnimSystem Cannot create keyframe for from options `"+t+"`");var n=new e(this,t);return n.parseOptions(t),n.id=this._allKeyframes.length,this._allKeyframes.push(n),n}},{key:"needsUpdate",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t],i=this.tweenProps[n],r=Math.abs(i.current-i.target);if(r>i.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(t){for(var e=0,n=this.attributes.length;e<n;e++){var i=this.attributes[e],r=this.keyframes[this.attributes[e]];if(1!==r.length){var o=this.getNearestKeyframeForAttribute(t,i);o&&o.updateLocalProgress(t)}else r[0].updateLocalProgress(t)}}},{key:"reconcile",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t],i=this.getNearestKeyframeForAttribute(this.group.timelines.local,n);i.updateLocalProgress(this.group.timelines.local),i.snapAtCreation&&i.reconcile(n)}}},{key:"determineActiveKeyframes",value:function(t){var e=this;t=t||h(Array.from(document.documentElement.classList));var n=this._activeKeyframes,i=this.attributes;this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var r=0;r<this._allKeyframes.length;r++){var o=this._allKeyframes[r];if(o.setEnabled(t)){this._activeKeyframes.push(o);for(var s in o.animValues)this.keyframes[s]=this.keyframes[s]||[],this.keyframes[s].push(o),this.attributes.indexOf(s)===-1&&this.attributes.push(s)}}var a=n.filter(function(t){return e._activeKeyframes.indexOf(t)===-1});if(0!==a.length){var l=i.filter(function(t){return e.attributes.indexOf(t)===-1});0!==l.length&&this._ownerIsElement&&m.external(function(){var t=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],n=l.filter(function(e){return t.indexOf(e)!==-1});n.length!==-1&&e.element.style.removeProperty("transform");for(var i=0,r=l.length;i<r;++i){var o=l[i],s=e.tweenProps[o];s.current=s.target=s.initialValue,"opacity"===o&&e.element.style.removeProperty("opacity")}for(var u=0,h=a.length;u<h;++u){var f=a[u];f instanceof c&&f._unapply()}},!0)}}},{key:"onDOMRead",value:function(t){for(var e=0,n=this.attributes.length;e<n;e++){var i=this.attributes[e],r=this.getNearestKeyframeForAttribute(t.local,i);r&&r.onDOMRead(i)}}},{key:"onDOMWrite",value:function(){this._ownerIsElement?this.onDOMWriteForElement():this.onDOMWriteForObject(),this.handleEventDispatch()}},{key:"onDOMWriteForObject",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t];this.element[n]=this.tweenProps[n].current}}},{key:"onDOMWriteForElement",value:function(){var t=this.tweenProps,e="";if("undefined"!=typeof this.keyframes.z?e+="translate3d("+t.x.current+"px,"+t.y.current+"px, "+t.z.current+"px)":"undefined"==typeof this.keyframes.x&&"undefined"==typeof this.keyframes.y||(e+="translate("+t.x.current+"px,"+t.y.current+"px)"),"undefined"!=typeof this.keyframes.rotation?e+="rotate("+t.rotation.current+"deg) ":("undefined"!=typeof this.keyframes.rotationX&&(e+="rotateX("+t.rotationX.current+"deg) "),"undefined"!=typeof this.keyframes.rotationY&&(e+="rotateY("+t.rotationY.current+"deg) "),"undefined"!=typeof this.keyframes.rotationZ&&(e+="rotateZ("+t.rotationZ.current+"deg) ")),"undefined"!=typeof this.keyframes.scale)e+="scale("+t.scale.current+","+t.scale.current+") ";else{var n="undefined"!=typeof this.keyframes.scaleX,i="undefined"!=typeof this.keyframes.scaleY;(n||i)&&(e+="scale("+t.scaleX.current+","+t.scaleY.current+") ")}if(""!==e&&(this.element.style.transform=e),"undefined"!=typeof this.keyframes.opacity&&(this.element.style.opacity=t.opacity.current),this.needsStyleUpdate){for(var r in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[r]&&(this.element.style[r]=this.tweenProps.targetStyles[r]),this.tweenProps.targetStyles[r]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var t=0,e=this.keyframesRequiringDispatch.length;t<e;t++){var n=this.keyframesRequiringDispatch[t];n.needsEventDispatch=!1,this.eventObject.keyframe=n,this.eventObject.pageMetrics=l.pageMetrics,this.eventObject.event=n.event,this.trigger(n.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}}},{key:"updateAnimationConstraints",value:function(){for(var t=this,e=0,n=this._activeKeyframes.length;e<n;e++)this._activeKeyframes[e].updateAnimationConstraints();this.attributes.forEach(function(e){1!==t.keyframes[e].length&&t.keyframes[e].sort(l.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var t=this,e=this._activeKeyframes.map(function(t){return t.relativeTo}),n=new Set(e);n.add(this.element),n.forEach(function(e){return t.group.metrics.refreshMetrics(e)}),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t],i=this.keyframes[n],r=i[0];if(!(r.keyframeType>l.KeyframeTypes.InterpolationForward))for(var o=0,s=i.length;o<s;o++){var a=i[o];if(null===a.jsonProps[n][0]){if(0===o)throw new RangeError("AnimSystem - earliest keyframe cannot defer it's beginning value! "+n+":[null,"+a.jsonProps[n][1]+"]");a.animValues[n][0]=i[o-1].animValues[n][1]}if(null===a.jsonProps[n][1]){if(o===s-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! "+n+":["+a.jsonProps[n][0]+",null]");a.animValues[n][1]=i[o+1].animValues[n][0]}}}}},{key:"getBounds",value:function(t){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var e=0,n=this.attributes.length;e<n;e++)for(var i=this.keyframes[this.attributes[e]],r=0;r<i.length;r++){var o=i[r];this.boundsMin=Math.min(o.start,this.boundsMin),this.boundsMax=Math.max(o.end,this.boundsMax),t.min=Math.min(o.start,t.min),t.max=Math.max(o.end,t.max)}}},{key:"getNearestKeyframeForAttribute",value:function(t,e){var n=null,i=Number.POSITIVE_INFINITY,r=this.keyframes[e];if(void 0===r)return null;var o=r.length;if(0===o)return null;if(1===o)return r[0];for(var s=0;s<o;s++){var a=r[s];if(a.isInRange(t)){n=a;break}var l=Math.min(Math.abs(t-a.start),Math.abs(t-a.end));l<i&&(i=l,n=a)}return n}},{key:"getAllKeyframesForAttribute",value:function(t){return this.keyframes[t]}},{key:"updateKeyframe",value:function(t,e){var n=this;t.parseOptions(e),t.updateAnimationConstraints(),this.group.keyframesDirty=!0,m.update(function(){return n.group.trigger(l.EVENTS.ON_KEYFRAME_UPDATED,t)},!0)}},{key:"removeKeyframe",value:function(t){var e=this._allKeyframes.indexOf(t);e!==-1&&(this._allKeyframes.splice(e,1),this.group.keyframesDirty=!0)}},{key:"updateAnimation",value:function(t,e){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(t,e)}}]),e}(d);Object.defineProperty(_.prototype,"parentElementMetrics",{get:function(){return null===this._parentElementMetrics&&(this._parentElementMetrics=this.group.metrics.add(this.element.parentElement)),this._parentElementMetrics}}),e.exports=_},{"./Keyframes/Keyframe":445,"./Keyframes/KeyframeCSSClass":446,"./Model/AnimSystemModel":448,"./Model/InferKeyframeFromProps":451,"./Model/UUID":452,"./utils/arrayToObject":459,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-raf-emitter/draw":429,"@marcom/ac-raf-emitter/external":430,"@marcom/ac-raf-emitter/update":433,"@marcom/decompose-css-transform":476}],445:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../Model/AnimSystemModel"),s=t("@marcom/sm-math-utils"),a=t("../Model/EasingFunctions"),l=t("../Model/UnitBezier"),c=t("../utils/arrayToObject"),u=function(){function t(e,n){i(this,t),this.controller=e,this.relativeTo=e.element,this.jsonProps=n,this.ease=o.KeyframeDefaults.ease,this.easeFunctionString=o.KeyframeDefaults.easeFunctionString,this.easeFunction=a[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=o.KeyframeTypes.Interpolation,this.hold=!1}return r(t,[{key:"destroy",value:function(){this.controller=null,this.relativeTo=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(t){if(this.jsonProps=t,""!==t.relativeTo&&t.relativeTo?t.relativeTo&&(this.relativeTo=this.controller.group.element.querySelector(t.relativeTo)||document.querySelector(t.relativeTo),null===this.relativeTo&&(console.warn("Keyframe for",this.controller.element.className," .relativeTo failed to find "+t.relativeTo+"' via querySelector"),
this.relativeTo=this.controller.element),this.controller.group.metrics.add(this.relativeTo)):this.relativeTo=this.controller.element,t.ease?this.ease=parseFloat(t.ease):t.ease=this.ease,t.hasOwnProperty("snapAtCreation")?this.snapAtCreation=t.snapAtCreation:t.snapAtCreation=this.snapAtCreation,t.easeFunction?this.easeFunction=t.easeFunction:t.easeFunction=this.easeFunctionString,t.breakpointMask?this.breakpointMask=t.breakpointMask:t.breakpointMask=this.breakpointMask,t.disabledWhen?this.disabledWhen=Array.isArray(t.disabledWhen)?t.disabledWhen:[t.disabledWhen]:t.disabledWhen=this.disabledWhen,t.hasOwnProperty("hold")?this.hold=t.hold:t.hold=this.hold,this.easeFunction=a[t.easeFunction],!a.hasOwnProperty(t.easeFunction)){var e=l.fromCSSString(t.easeFunction);e?this.easeFunction=e:console.error("Keyframe parseOptions cannot find EasingFunction named '"+t.easingFunction+"'")}for(var n in t)if(o.KeyframeJSONReservedWords.indexOf(n)===-1){var i=t[n];if(Array.isArray(i)){if(this.animValues[n]=this.controller.group.expressionParser.parse(this,i),void 0===this.controller.tweenProps[n]||!this.controller._ownerIsElement){var r=0;this.controller._ownerIsElement||(r=this.controller.element[n]);var s=new o.TargetValue(r,o.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[n]=s}var c=this.controller.tweenProps[n];if(t.epsilon)c.epsilon=t.epsilon;else{var u=Math.abs(this.animValues[n][0]-this.animValues[n][1]),h=Math.min(.001*u,c.epsilon,o.KeyframeDefaults.epsilon);c.epsilon=Math.max(h,1e-4)}}}this.keyframeType=this.hold?o.KeyframeTypes.InterpolationForward:o.KeyframeTypes.Interpolation,t.event&&(this.event=t.event)}},{key:"overwriteProps",value:function(t){this.animValues={};var e=Object.assign({},this.jsonProps,t);this.controller.updateKeyframe(this,e)}},{key:"updateLocalProgress",value:function(t){if(this.start===this.end||t>this.end)return this.localT=1,void(this.curvedT=this.easeFunction(this.localT));var e=(t-this.start)/(this.end-this.start),n=this.hold?this.localT:0;this.localT=s.clamp(e,n,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(t){var e=this.animValues[t],n=this.controller.tweenProps[t];n.initialValue=e[0],n.target=e[0]+this.curvedT*(e[1]-e[0]),n.current!==n.target&&(n.current=n.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(t){this.localT=t||0;var e=this.ease;this.ease=1;for(var n in this.animValues)this.reconcile(n);this.ease=e}},{key:"onDOMRead",value:function(t){var e=this.animValues[t],n=this.controller.tweenProps[t];n.target=e[0]+this.curvedT*(e[1]-e[0]);var i=n.current;n.current+=(n.target-n.current)*this.ease;var r=n.current-n.target;r<n.epsilon&&r>-n.epsilon&&(n.current=n.target,r=0),""===this.event||this.needsEventDispatch||(r>n.epsilon||r<-n.epsilon||0===r&&i!==n.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(t){return t>=this.start&&t<=this.end}},{key:"setEnabled",value:function(t){t=t||c(Array.from(document.documentElement.classList));var e=this.breakpointMask.indexOf(o.pageMetrics.breakpoint)!==-1,n=!1;return this.disabledWhen.length>0&&(n=this.disabledWhen.some(function(e){return"undefined"!=typeof t[e]})),this.isEnabled=e&&!n,this.isEnabled}},{key:"updateAnimationConstraints",value:function(){this.start=this.controller.group.timeParser.parse(this,this.jsonProps.start),this.end=this.controller.group.timeParser.parse(this,this.jsonProps.end),this.updateAnimatedValueConstraints()}},{key:"updateAnimatedValueConstraints",value:function(){for(var t in this.animValues){var e=this.jsonProps[t];this.animValues[t]=this.controller.group.expressionParser.parse(this,e)}}}]),t}();u.DATA_ATTRIBUTE="data-anim-tween",e.exports=u},{"../Model/AnimSystemModel":448,"../Model/EasingFunctions":449,"../Model/UnitBezier":453,"../utils/arrayToObject":459,"@marcom/sm-math-utils":497}],446:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("./Keyframe"),c=t("../Model/AnimSystemModel.js"),u=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.keyframeType=c.KeyframeTypes.CSSClass,o._triggerType=e.TRIGGER_TYPE_CSS_CLASS,o.cssClass="",o.friendlyName="",o.style={on:null,off:null},o.toggle=!1,o.isApplied=!1,o}return o(e,t),a(e,[{key:"parseOptions",value:function(t){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(t.x=void 0,t.y=void 0,t.scale=void 0,t.scaleX=void 0,t.scaleY=void 0,t.rotation=void 0,t.opacity=void 0,t.hold=void 0,void 0!==t.toggle&&(this.toggle=t.toggle),void 0!==t.cssClass)this._triggerType=e.TRIGGER_TYPE_CSS_CLASS,this.cssClass=t.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===t.style||!this.isValidStyleProperty(t.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=e.TRIGGER_TYPE_STYLE_PROPERTY,this.style=t.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var n in this.style.on)this.style.off[n]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===t.end&&(t.end=t.start),t.toggle=this.toggle,this._triggerType===e.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var i=getComputedStyle(this.controller.element);this.isApplied=!0;for(var r in this.style.on)if(i[r]!==this.style.on[r]){this.isApplied=!1;break}}l.prototype.parseOptions.call(this,t),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new c.TargetValue(0,1,(!1))),this.keyframeType=c.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(t){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&t>=this.start&&t<=this.end?this._apply():this.isApplied&&this.toggle&&(t<this.start||t>this.end)&&this._unapply():!this.isApplied&&t>=this.start?this._apply():this.isApplied&&this.toggle&&t<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===e.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var t in this.style.on)this.controller.tweenProps.targetStyles[t]=this.style.on[t];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===e.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var t in this.style.off)this.controller.tweenProps.targetStyles[t]=this.style.off[t];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(t){if(!t.hasOwnProperty("on"))return!1;if("object"!==s(t.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&t.hasOwnProperty("off")&&"object"!==s(t.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(t,e){}},{key:"onDOMRead",value:function(t,e){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),e}(l);u.TRIGGER_TYPE_CSS_CLASS=0,u.TRIGGER_TYPE_STYLE_PROPERTY=1,u.DATA_ATTRIBUTE="data-anim-classname",e.exports=u},{"../Model/AnimSystemModel.js":448,"./Keyframe":445}],447:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:h(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./Keyframe"),c=t("../Model/AnimSystemModel.js"),u=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.keyframeType=c.KeyframeTypes.Event,o.isApplied=!1,o.hasDuration=!1,o.isCurrentlyInRange=!1,o}return o(e,t),s(e,[{key:"parseOptions",value:function(t){t.x=void 0,t.y=void 0,t.scale=void 0,t.scaleX=void 0,t.scaleY=void 0,t.rotation=void 0,t.style=void 0,t.cssClass=void 0,t.rotation=void 0,t.opacity=void 0,t.hold=void 0,void 0===t.end&&(t.end=t.start),this.event=t.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new c.TargetValue(0,1,(!1))),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parseOptions",this).call(this,t),this.keyframeType=c.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(t){if(this.hasDuration){var e=this.isCurrentlyInRange,n=t>=this.start&&t<=this.end;if(e===n)return;return n&&!e?this._trigger(this.event+":enter"):e&&!n&&this._trigger(this.event+":exit"),void(this.isCurrentlyInRange=n)}!this.isApplied&&t>=this.start?(this._trigger(this.event),this.isApplied=!0):this.isApplied&&t<this.start&&(this._trigger(this.event+":reverse"),this.isApplied=!1)}},{key:"_trigger",value:function(t){this.controller.eventObject.event=t,this.controller.eventObject.keyframe=this,this.controller.trigger(t,this.controller.eventObject)}},{key:"updateAnimationConstraints",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateAnimationConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"onDOMRead",value:function(t,e){}},{key:"reconcile",value:function(t,e){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),e}(l);u.DATA_ATTRIBUTE="data-anim-event",e.exports=u},{"../Model/AnimSystemModel.js":448,"./Keyframe":445}],448:[function(t,e,n){"use strict";var i={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"GuiPosition-0"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",longName:"small",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",longName:"medium",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",longName:"xlarge",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",longName:"large",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var t=0;t<i.BREAKPOINTS.length;t++){var e=i.BREAKPOINTS[t],n=window.matchMedia(e.mediaQuery);if(n.matches)return e.name}},KeyframeDefaults:{ease:.1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","relativeTo","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TargetValue:function(t,e,n){this.epsilon=parseFloat(e),this.snapAtCreation=n,this.initialValue=t,this.target=t,this.current=t},Timeline:function(){this.local=0,this.localUnclamped=0},ViewableRange:function(t,e){this.a=t.top-e,this.a<0&&(this.a=t.top),this.b=t.top,this.d=t.bottom,this.c=Math.max(this.d-e,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(t){this.controller=t,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(t,e){return t.start<e.start?-1:t.start>e.start?1:0},AnimInfo:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isGroup=n,this.group=t,this.controller=e}};e.exports=i},{}],449:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function o(){i(this,o),this.linear=function(t){return t},this.easeInQuad=function(t){return t*t},this.easeOutQuad=function(t){return t*(2-t)},this.easeInOutQuad=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},this.easeInSin=function(t){return 1+Math.sin(Math.PI/2*t-Math.PI/2)},this.easeOutSin=function(t){return Math.sin(Math.PI/2*t)},this.easeInOutSin=function(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2},this.easeInElastic=function(t){return 0===t?t:(.04-.04/t)*Math.sin(25*t)+1},this.easeOutElastic=function(t){return.04*t/--t*Math.sin(25*t)},this.easeInOutElastic=function(t){return(t-=.5)<0?(.02+.01/t)*Math.sin(50*t):(.02-.01/t)*Math.sin(50*t)+1},this.easeOutBack=function(t){return t-=1,t*t*(2.70158*t+1.70158)+1},this.easeInCubic=function(t){return t*t*t},this.easeOutCubic=function(t){return--t*t*t+1},this.easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},this.easeInQuart=function(t){return t*t*t*t},this.easeOutQuart=function(t){return 1- --t*t*t*t},this.easeInOutQuart=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},this.easeInQuint=function(t){return t*t*t*t*t},this.easeOutQuint=function(t){return 1+--t*t*t*t*t},this.easeInOutQuint=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};e.exports=new r},{}],450:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./AnimSystemModel"),s=function(t,e){return void 0===t||null===t?e:t},a=window.Symbol||function(){var t=0;return function(){return++t+""}}(),l=function(){function t(){i(this,t),this._symbols=[],this._lut={}}return r(t,[{key:"destroy",value:function(){for(var t=0,e=this._symbols.length;t<e;t++){var n=this._lut[this._symbols[t]];n.el=null}this._lut=null}},{key:"add",value:function(t){if(void 0===t._animSymbol&&(t._animSymbol=a()),void 0===this._lut[t._animSymbol]){var e=new c(t);this._refreshMetrics(e),this._lut[t._animSymbol]=e,this._symbols.push(t._animSymbol)}return this._lut[t._animSymbol]}},{key:"get",value:function(t){if(void 0===t._animSymbol)throw"ElementMetricsLookup Attempting to retrieve info on element which is not being tracked.";return this._lut[t._animSymbol]}},{key:"refreshAll",value:function(){for(var t=0,e=this._symbols.length;t<e;t++){var n=this._lut[this._symbols[t]];this._refreshMetrics(n)}}},{key:"refreshMetrics",value:function(t){var e=this.get(t);return e?this._refreshMetrics(e):null}},{key:"_refreshMetrics",value:function(t){var e=t.el;if(!(e instanceof Element))return t.width=s(e.width,0),t.height=s(e.height,0),t.top=s(e.top,0),t.left=s(e.left,0),t.right=t.left+t.width,void(t.bottom=t.top+t.height);if(void 0===e.offsetWidth){var n=e.getBoundingClientRect();return t.width=n.width,t.height=n.height,t.top=o.pageMetrics.scrollY+n.top,t.left=o.pageMetrics.scrollX+n.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=o.pageMetrics.documentOffsetY,t.left=o.pageMetrics.documentOffsetX;for(var i=e;i;)t.top+=i.offsetTop,t.left+=i.offsetLeft,i=i.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),t}(),c=function(){function t(e){i(this,t),this.el=e,this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return r(t,[{key:"toString",value:function(){return"top:"+this.top+", bottom:"+this.bottom+", left:"+this.left+", right:"+this.right+", height:"+this.height+", width:"+this.width}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}},{key:"destroy",value:function(){this.el=null}}]),t}();e.exports=l},{"./AnimSystemModel":448}],451:[function(t,e,n){"use strict";var i=t("./AnimSystemModel"),r=t("../Keyframes/Keyframe"),o=t("../Keyframes/KeyframeDiscreteEvent"),s=t("../Keyframes/KeyframeCSSClass"),a=function(t){for(var e in t){var n=t[e];if(i.KeyframeJSONReservedWords.indexOf(e)===-1&&Array.isArray(n))return!0}return!1};e.exports=function(t){if(void 0!==t.cssClass||void 0!==t.style){if(a(t))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return s}if(a(t))return r;if(t.event)return o;throw"Could not determine tween type based on "+JSON.stringify(t)}},{"../Keyframes/Keyframe":445,"../Keyframes/KeyframeCSSClass":446,"../Keyframes/KeyframeDiscreteEvent":447,"./AnimSystemModel":448}],452:[function(t,e,n){"use strict";e.exports=function(){for(var t="",e=0;e<8;e++){var n=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&n|8:n).toString(16)}return t}},{}],453:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=1e-5,s=Math.abs,a=5,l=function(){function t(e,n,r,o){i(this,t),this.cp=new Float32Array(6),this.cp[0]=3*e,this.cp[1]=3*(r-e)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*n,this.cp[4]=3*(o-n)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return r(t,[{key:"sampleCurveX",value:function(t){return((this.cp[2]*t+this.cp[1])*t+this.cp[0])*t}},{key:"sampleCurveY",value:function(t){return((this.cp[5]*t+this.cp[4])*t+this.cp[3])*t}},{key:"sampleCurveDerivativeX",value:function(t){return(3*this.cp[2]*t+2*this.cp[1])*t+this.cp[0]}},{key:"solveCurveX",value:function(t){var e,n,i,r,l,c;for(i=t,c=0;c<a;c++){if(r=this.sampleCurveX(i)-t,s(r)<o)return i;if(l=this.sampleCurveDerivativeX(i),s(l)<o)break;i-=r/l}if(e=0,n=1,i=t,i<e)return e;if(i>n)return n;for(;e<n;){if(r=this.sampleCurveX(i),s(r-t)<o)return i;t>r?e=i:n=i,i=.5*(n-e)+e}return i}},{key:"solve",value:function(t){return this.sampleCurveY(this.solveCurveX(t))}}]),t}(),c=/\d*\.?\d+/g;l.fromCSSString=function(t){var e=t.match(c);if(4!==e.length)throw"UnitBezier could not convert "+t+" to cubic-bezier";var n=e.map(Number),i=new l(n[0],n[1],n[2],n[3]);return i.solve.bind(i)},e.exports=l},{}],454:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../Model/AnimSystemModel"),s=t("./Operations"),a=/([-|\+])?(\d+\.?\d*)(px|vh|vw|pw|ph|\%w|\%h|rw|rh|\%)?|(-|\+|\*|\/)/g,l=/^[-+]?(?:[0-9]{0,30}\.)?[0-9]{1,30}(?:[Ee][-+]?[1-2]?[0-9])?$/g,c=function(){function t(e){i(this,t),this.group=e}return r(t,[{key:"parse",value:function(t,e){if(Array.isArray(e))return this.parseArray(t,e);throw new Error("Keyframe value `"+e+"` is not supported. Only arrays in the form of [start,end] are currently supported")}},{key:"parseArray",value:function(t,e){var n=this.parseExpression(t,e[0]),i=this.parseExpression(t,e[1]);return[n,i]}},{key:"parseExpression",value:function(t,e){if(null===e)return 0;if("number"==typeof e)return e;for(var n=5,i=void 0;(i=e.indexOf("("))!==-1&&--n>0;){var r=this.captureParenthesis(e,i),o=this.parseExpression(t,r);e=e.replace("("+r+")",o)}for(var l=void 0,c=[];null!==(l=a.exec(e));)if(l.index===a.lastIndex&&a.lastIndex++,l[4])c.push(s.GetOpCode(l[4]));else{var u=l[1],h=parseFloat(l[2]),f=l[3];"-"===u&&(h*=-1);var d=this.parseSplitUnit(t,h,f);c.push(d)}var p=c.length;if(3===p&&"function"==typeof c[1])return c[1](c[0],c[2]);for(var m=0;m<p;m++)if("function"==typeof c[m]&&1===c[m].priority){var _=c[m-1],y=c[m+1],g=c[m](_,y);c[m-1]=null,c[m+0]=null,c[m+1]=g,m+=1}for(var v=0;null==c[v]&&v<p;)v+=1;var b=c[v],w=null,E=null;for(v+=1;v<p;v++)null!==c[v]?c[v]instanceof Function?w=c[v]:(null===E&&(E=c[v]),null!==E&&(w=w||s.add,b=w(b,E),w=null,E=null)):v+=1;return b}},{key:"parseSplitUnit",value:function(t,e,n){if("undefined"==typeof n)return parseFloat(e);switch(n){case"vh":return.01*e*o.pageMetrics.windowHeight;case"%":return.01*e*t.controller.elementMetrics.height;case"px":return e;case"rh":return.01*e*this.group.metrics.get(t.relativeTo).height;case"vw":return.01*e*o.pageMetrics.windowWidth;case"rw":return.01*e*this.group.metrics.get(t.relativeTo).width;case"%w":return.01*e*t.controller.elementMetrics.width;case"%h":return.01*e*t.controller.elementMetrics.height;case"pw":return.01*e*t.controller.parentElementMetrics.width;case"ph":return.01*e*t.controller.parentElementMetrics.height;default:throw new Error("ExpressionParser: no strategy found for unit `"+n+"` only `vh, vw, %, ph, pw` are supported")}}},{key:"captureParenthesis",value:function(t,e){for(var n="",i=0,r=!1,o=t.length,s=e;s<o;s++)if("("===t[s]?(i+=1,r&&(n+=t[s]),r=!0):")"===t[s]?(i-=1,0!==i&&(n+=t[s])):r&&(n+=t[s]),r&&0===i)return n}},{key:"isUnitlessNumber",value:function(t){return String(t).match(l)}},{key:"destroy",value:function(){this.group=null}},{key:"logParts",value:function(t){console.log(t.reduce(function(t,e){return"function"==typeof e?t+e.friendlyName+" ":t+(e+" ")},""))}}]),t}();e.exports=c},{"../Model/AnimSystemModel":448,"./Operations":455}],455:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function o(){i(this,o),this.add=function(t,e){return t+e},this.sub=function(t,e){return t-e},this.mul=function(t,e){return t*e},this.div=function(t,e){return t/e},this.add.friendlyName="add",this.sub.friendlyName="sub",this.mul.friendlyName="mul",this.div.friendlyName="div",this.add.priority=0,this.sub.priority=0,this.mul.priority=1,this.div.priority=1,this.GetOpCode=function(t){switch(t){case"-":return this.sub;case"+":return this.add;case"*":return this.mul;case"/":return this.div;default:throw new Error('AnimSystem.parsing.Operations - op code "'+t+"\" was found. Only '+ - * /' are supported. Check expression for typos/spacing issues")}}};e.exports=new r},{}],456:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),this.group=e,this.groupIsTimeBased=n}return r(t,[{key:"parse",value:function(t,e){if("number"==typeof e)return e;var n=this.groupIsTimeBased?0:this.group.metrics.get(t.relativeTo).top,i=this.group.expressionParser.parseExpression(t,e),r=i+n;return this.group.convertScrollPositionToTValue(r)}},{key:"destroy",value:function(){this.group=null}}]),t}();e.exports=o},{}],457:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:g(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=t("@marcom/sm-math-utils"),u=t("./utils/arrayToObject"),h=t("./Model/AnimSystemModel"),f=t("./Model/ElementMetricsLookup"),d=t("./Parsing/ExpressionParser"),p=t("./Parsing/TimeParser"),m=t("./KeyframeController"),_={create:t("@marcom/ac-raf-emitter/RAFEmitter"),update:t("@marcom/ac-raf-emitter/update"),draw:t("@marcom/ac-raf-emitter/draw")},y=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.anim=n,o.element=t,o.name=o.name||t.getAttribute("data-anim-scroll-group"),o.isEnabled=!0,o.timelines=new h.Timeline,o.metrics=new f,o.metrics.add(o.element),o.expressionParser=new d(o),o.timeParser=new p(o),o.boundsMin=0,o.boundsMax=0,o.lastPosition=0,o.timelineUpdateRequired=!1,o._keyframesDirty=!1,o.viewableRange=o.createViewableRange(),o.keyframeControllers=[],o.updateProgress(o.getPosition()),o.onDOMRead=o.onDOMRead.bind(o),o.onDOMWrite=o.onDOMWrite.bind(o),o.gui=null,o.finalizeInit(),o}return o(e,t),s(e,[{key:"finalizeInit",value:function(){this.element._animInfo=new h.AnimInfo(this,null,(!0)),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null,this.timeParser.destroy(),this.timeParser=null;for(var t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].destroy();this.timelines=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element=null,this.isEnabled=!1,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(t){var e=this;this.keyframeControllers.includes(t)&&(t._allKeyframes=[],this.keyframesDirty=!0,_.update(function(){var n=e.keyframeControllers.indexOf(t);n!==-1&&(e.keyframeControllers.splice(n,1),t.destroy(),e.gui&&e.gui.create())}))}},{key:"remove",value:function(){this.anim.removeGroup(this)}},{key:"setupRAFEmitter",value:function(t){this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=t||new _.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite)}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].onDOMRead(this.timelines)}},{key:"onDOMWrite",value:function(){for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].onDOMWrite(this.timelines);this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var t=0,e=this.keyframeControllers.length;t<e;t++)if(this.keyframeControllers[t].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(t,e){var n=this.anim.getControllerForTarget(t);return null===n&&(n=new m(this,t),this.keyframeControllers.push(n)),this.keyframesDirty=!0,n.addKeyframe(e)}},{key:"forceUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.recalculateActiveKeyframes,n=void 0!==e&&e,i=t.waitForNextUpdate,r=void 0===i||i;this.isEnabled&&(n&&this.determineActiveKeyframes(),this.metrics.refreshAll(),this.viewableRange=this.createViewableRange(),this.hasDuration()&&(this.timelineUpdateRequired=!0,r?this.keyframesDirty=!0:this.onKeyframesDirty()))}},{key:"onKeyframesDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.preventOnScroll,n=void 0!==e&&e;this.determineActiveKeyframes();for(var i=0,r=this.keyframeControllers.length;i<r;i++)this.keyframeControllers[i].updateAnimationConstraints();this.updateProgress(this.getPosition()),this.updateBounds(),n||this._onScroll(),this.gui&&this.gui.create(),this.keyframesDirty=!1}},{key:"reconcile",value:function(){for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].reconcile()}},{key:"determineActiveKeyframes",value:function(t){t=t||u(Array.from(document.documentElement.classList));for(var e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].determineActiveKeyframes(t)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].getBounds(t);var i=this.convertTValueToScrollPosition(t.min),r=this.convertTValueToScrollPosition(t.max);r-i<h.pageMetrics.windowHeight?(t.min=this.convertScrollPositionToTValue(i-.5*h.pageMetrics.windowHeight),t.max=this.convertScrollPositionToTValue(r+.5*h.pageMetrics.windowHeight)):(t.min-=.001,t.max+=.001),this.boundsMin=t.min,this.boundsMax=t.max,this.timelineUpdateRequired=!0}},{key:"_onBreakpointChange",value:function(t,e){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(t){return this.hasDuration()?void(this.timelines.localUnclamped=(t-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a)):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].updateLocalProgress(this.timelines.local);this.trigger(h.EVENTS.ON_TIMELINE_UPDATE,this.timelines.local),this.timelineUpdateRequired=!1,
this.lastPosition!==this.timelines.local&&(this.lastPosition<=this.boundsMin&&this.timelines.localUnclamped>this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START,this):this.lastPosition>=this.boundsMin&&this.timelines.localUnclamped<this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START+":reverse",this):this.lastPosition<=this.boundsMax&&this.timelines.localUnclamped>this.boundsMax?this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE,this):this.lastPosition>=this.boundsMax&&this.timelines.localUnclamped<this.boundsMax&&this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.timelines)}},{key:"_onScroll",value:function(t){if(!this.isEnabled)return!1;void 0===t&&(t=this.getPosition()),this.updateProgress(t);var e=this.lastPosition===this.boundsMin||this.lastPosition===this.boundsMax,n=this.timelines.localUnclamped===this.boundsMin||this.timelines.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&e&&n)return void(this.timelines.local=this.timelines.localUnclamped);if(this.timelineUpdateRequired||this.timelines.localUnclamped>this.boundsMin&&this.timelines.localUnclamped<this.boundsMax)return this.timelines.local=c.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped);var i=this.lastPosition>this.boundsMin&&this.lastPosition<this.boundsMax,r=this.timelines.localUnclamped<=this.boundsMin||this.timelines.localUnclamped>=this.boundsMax;return i&&r?(this.timelines.local=c.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped)):void(null!==this.gui&&this.gui.onScrollUpdate(this.timelines))}},{key:"convertScrollPositionToTValue",value:function(t){return this.hasDuration()?c.map(t,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(t){return this.hasDuration()?c.map(t,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return h.pageMetrics.scrollY}},{key:"createViewableRange",value:function(){return new h.ViewableRange(this.metrics.get(this.element),h.pageMetrics.windowHeight)}},{key:"getControllerForTarget",value:function(t){return this.anim.getControllerForTarget(t)}},{key:"trigger",value:function(t,e){if("undefined"!=typeof this._events[t])for(var n=this._events[t].length-1;n>=0;n--)void 0!==e?this._events[t][n](e):this._events[t][n]()}},{key:"keyframesDirty",set:function(t){this._keyframesDirty=t,this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}},{key:"keyFrames",get:function(){return this.viewableRange}}]),e}(l);e.exports=y},{"./KeyframeController":444,"./Model/AnimSystemModel":448,"./Model/ElementMetricsLookup":450,"./Parsing/ExpressionParser":454,"./Parsing/TimeParser":456,"./utils/arrayToObject":459,"@marcom/ac-event-emitter-micro":160,"@marcom/ac-raf-emitter/RAFEmitter":423,"@marcom/ac-raf-emitter/draw":429,"@marcom/ac-raf-emitter/update":433,"@marcom/sm-math-utils":497}],458:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function d(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./ScrollGroup"),c=t("@marcom/sm-math-utils"),u=0,h={create:t("@marcom/ac-raf-emitter/RAFEmitter")},f=function(t){function e(t,n){i(this,e),t||(t=document.createElement("div"),t.className="TimeGroup-"+u++);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.name=o.name||t.getAttribute("data-anim-time-group"),o.timeParser.groupIsTimeBased=!0,o._isPaused=!0,o._repeats=0,o._isReversed=!1,o._timeScale=1,o}return o(e,t),s(e,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(t){if(void 0===t)return 0===this.boundsMax?0:this.timelines.local/this.boundsMax;var e=t*this.boundsMax;this._onScroll(e)}},{key:"time",value:function(t){return void 0===t?this.timelines.local:(t=c.clamp(t,this.boundsMin,this.boundsMax),void this._onScroll(t))}},{key:"play",value:function(t){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(t),this._playheadEmitter.run()}},{key:"reverse",value:function(t){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(t),this._playheadEmitter.run()}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse()):(this.progress(0),this.play())}},{key:"pause",value:function(t){this.time(t),this._isPaused=!0}},{key:"paused",value:function(t){return void 0===t?this._isPaused:(this._isPaused=t,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(t){if(!this._isPaused){var n=c.clamp(t.delta/1e3,0,.5);this._isReversed&&(n=-n);var i=this.time(),r=i+n*this._timeScale;if(this._repeats===e.REPEAT_FOREVER||this._repeats>0){var o=!1;!this._isReversed&&r>this.boundsMax?(r-=this.boundsMax,o=!0):this._isReversed&&r<0&&(r=this.boundsMax+r,o=!0),o&&(this._repeats=this._repeats===e.REPEAT_FOREVER?e.REPEAT_FOREVER:this._repeats-1)}this.time(r),this._playheadEmitter.run()}}},{key:"updateProgress",value:function(t){return this.hasDuration()?void(this.timelines.localUnclamped=t):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].getBounds(t);this.boundsMin=0,this.boundsMax=t.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(t){this._playheadEmitter=new h.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setupRAFEmitter",this).call(this,t)}},{key:"timeScale",value:function(t){return void 0===t?this._timeScale:(this._timeScale=t,this)}},{key:"repeats",value:function(t){return void 0===t?this._repeats:(this._repeats=t,this)}},{key:"reversed",value:function(t){return void 0===t?this._isReversed:(this._isReversed=t,this)}},{key:"getPosition",value:function(){return this.timelines.local}},{key:"convertScrollPositionToTValue",value:function(t){return t}},{key:"convertTValueToScrollPosition",value:function(t){return t}},{key:"hasDuration",value:function(){return this.boundsMax>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.boundsMax}}]),e}(l);f.REPEAT_FOREVER=-1,e.exports=f},{"./ScrollGroup":457,"@marcom/ac-raf-emitter/RAFEmitter":423,"@marcom/sm-math-utils":497}],459:[function(t,e,n){"use strict";var i=function(t){return t.reduce(function(t,e){return t[e]=e,t},{})};e.exports=i},{}],460:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./SourceTemplate.js"),s=t("@marcom/xhr-request"),a=Object.freeze({responseType:"blob"}),l=function(){function t(e){i(this,t),e=Object.assign({},e),this._requestOptions=Object.assign({},a,e.xhr),this._template=new o(e),this._evtObserver=null,this._state={viewport:e.viewport,resolution:e.resolution,request:null,objectUrl:""},this._requestCache=new Map,this._history=[],this._initialize()}return r(t,null,[{key:"convertToResolution",value:function(t){return"boolean"!=typeof t?null:t?"2x":"1x"}},{key:"convertViewportName",value:function(t,e){return"L"===t||e!==!0&&"xlarge"===t?"large":"M"===t?"medium":"S"===t?"small":t}}]),r(t,[{key:"load",value:function(){var t=this,e=this._state.request,n=e.xhr.response,i=!n,r=void 0;return r=i?e.send():200===e.xhr.status?Promise.resolve({response:n}):Promise.reject({error:this._state.requestErr}),r.then(function(e){var n=e.response;return"blob"===t._requestOptions.responseType&&(t._state.objectUrl=n=window.URL.createObjectURL(e.response),t._updateHistory()),Promise.resolve(n)},function(e){var n=t._state.requestErr=e.error;return Promise.reject(n)})}},{key:"change",value:function(e,n){e=e.toLowerCase(),"viewport"!==e&&"resolution"!==e||("viewport"===e?n=t.convertViewportName(n):"boolean"==typeof n&&(n=t.convertToResolution(n)),this._state[e]=n,this._createOpenRequest())}},{key:"abortLoad",value:function(){this._state.request.xhr.abort()}},{key:"revokeLastObjectUrl",value:function(){if("blob"===this._requestOptions.responseType){var t=this._history.length,e=2,n=t-e;if(n<0)return;var i=this._history[n];window.URL.revokeObjectURL(i.objectUrl)}}},{key:"_createOpenRequest",value:function(){var t=this._state,e=t.viewport+"_"+t.resolution,n=this._requestCache.get(e);if(!n){var i=this._template.createPath(t.viewport,t.resolution);n=new s(i,this._requestOptions),this._requestCache.set(e,n),n.open()}t.request=n}},{key:"_initialize",value:function(){this._createOpenRequest()}},{key:"_updateHistory",value:function(){this._history.push(Object.assign({},this._state))}},{key:"_revokeAllObjectUrls",value:function(){"blob"===this._requestOptions.responseType&&this._history.forEach(function(t){window.URL.revokeObjectURL(t.objectUrl)})}},{key:"request",get:function(){return this._state.request}},{key:"assetUrl",get:function(){return this._state.request.requestUrl}},{key:"objectUrl",get:function(){return this._state.objectUrl}},{key:"viewport",get:function(){return this._state.viewport}},{key:"resolution",get:function(){return this._state.resolution}},{key:"requestCache",get:function(){return this._requestCache}},{key:"history",get:function(){return this._history}}]),t}();e.exports=l},{"./SourceTemplate.js":461,"@marcom/xhr-request":513}],461:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e=new Map;return t.forEach(function(t,n){e.set(n,t)}),e}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./model"),a=function(){function t(e){i(this,t),e=Object.assign({},e),this._template="",this._model=e.model||s,this._state={viewport:"",resolution:""},this._initialize(e)}return o(t,null,[{key:"formatPathSegment",value:function(t){var e=/^\s*\/*\s*|\s*\/*\s*$/g;return"/"+t.replace(e,"")}}]),o(t,[{key:"createPath",value:function(t,e){this._updateState(t,e);var n=this._model.TEMPLATE_PLACEHOLDERS;return e="1x"===e?"":"_"+e,this._template.replace(n.viewport,t).replace(n.resolution,e)}},{key:"changeViewport",value:function(t){return this.createPath(t,this._state.resolution)}},{key:"changeResolution",value:function(t){return this.createPath(this._state.viewport,t)}},{key:"_initialize",value:function(t){var e=this._setSegmentValues(t);this._template=this._createTemplate(e)}},{key:"_setSegmentValues",value:function(t){var e=t.el,n=this._model,i=r(n.SEGMENT_MAP);return i.forEach(function(i,r,o){var s=t[r];i=s?s:i;var a=n.ATTRIB[r];i=a&&e&&e.hasAttribute(a)?e.getAttribute(a):i,o.set(r,i)}),i}},{key:"_createTemplate",value:function(e){var n="",i=this._model.TEMPLATE_PLACEHOLDERS;return e.forEach(function(e,r){n+="viewport"===r?t.formatPathSegment(i.viewport):"resolution"===r?i.resolution:"format"===r?"."+e:t.formatPathSegment(e)}),n}},{key:"_updateState",value:function(t,e){this._state.viewport=t,this._state.resolution=e}},{key:"viewport",get:function(){return this._state.viewport}},{key:"resolution",get:function(){return this._state.resolution}}]),t}();e.exports=a},{"./model":462}],462:[function(t,e,n){"use strict";function i(){var t=new Map;return t.set("basePath","/105/media/"),t.set("locale","us"),t.set("path",""),t.set("name",""),t.set("viewport",""),t.set("resolution",""),t.set("format","mp4"),t}e.exports={ATTRIB:{resolution:"data-source-resolution",viewport:"data-source-viewport",basePath:"data-source-basePath",locale:"data-source-locale",path:"data-source-path",name:"data-source-name"},TEMPLATE_PLACEHOLDERS:{viewport:"{{viewport}}",resolution:"{{resolution}}"},SEGMENT_MAP:i()}},{}],463:[function(t,e,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],464:[function(t,e,n){arguments[4][2][0].apply(n,arguments)},{"./sharedRAFEmitterIDGeneratorInstance":470,"./sharedRAFExecutorInstance":471,"@marcom/ac-event-emitter-micro":160,dup:2}],465:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":161,dup:3}],466:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{"./SingleCallRAFEmitter":468,dup:4}],467:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{"./RAFInterface":466,dup:5}],468:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./RAFEmitter":464,dup:6}],469:[function(t,e,n){arguments[4][429][0].apply(n,arguments)},{"./RAFInterfaceController":467,dup:429}],470:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"../.release-info.js":463,"@marcom/ac-shared-instance":287,dup:8}],471:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"../.release-info.js":463,"./RAFExecutor":465,"@marcom/ac-shared-instance":287,dup:9}],472:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./RAFInterfaceController":467,dup:10}],473:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function d(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,c={create:t("@marcom/ac-raf-emitter/RAFEmitter"),update:t("@marcom/ac-raf-emitter/update"),draw:t("@marcom/ac-raf-emitter/draw")},u=function(){},h=0,f=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.el=t.el,n.gum=t.gum,n._keyframeController=null,n}return o(e,t),s(e,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(t){var e=t.el||this.el;return this.anim.addKeyframe(e,t)}},{key:"addDiscreteEvent",value:function(t){t.event=t.event||"Generic-Event-Name-"+h++;var e=void 0!==t.end&&t.end!==t.start,n=this.addKeyframe(t);return e?(this._addCallbackIfNotNull(n,t.event+":enter",t.onEnter),this._addCallbackIfNotNull(n,t.event+":exit",t.onExit)):(this._addCallbackIfNotNull(n,t.event,t.onEvent),this._addCallbackIfNotNull(n,t.event+":reverse",t.onEventReverse)),n}},{key:"addRAFLoop",value:function(t){var e=["start","end"];if(!e.every(function(e){return t.hasOwnProperty(e)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+e.join(" "));var n=new c.create;n.on("update",t.onUpdate||u),n.on("draw",t.onDraw||u),n.on("draw",function(){return n.run()});var i=t.onEnter,r=t.onExit;return t.onEnter=function(){n.run(),i?i():0},t.onExit=function(){n.cancel(),r?r():0},this.addDiscreteEvent(t)}},{key:"addContinuousEvent",value:function(t){t.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),t.event=t.event||"Generic-Event-Name-"+h++;var e=this.addKeyframe(t);return e.controller.on(t.event,t.onDraw),e}},{key:"mounted",value:function(){if(this.onComponentWillAppear||this.onComponentWillDisappear){this.onComponentWillAppear=this.onComponentWillAppear?this.onComponentWillAppear.bind(this):void 0,this.onComponentWillDisappear=this.onComponentWillDisappear?this.onComponentWillDisappear.bind(this):void 0;var t={start:"-100vh - 1px",end:"100% + 1px",event:"_appear"+h++};t.onEnter=this.onComponentWillAppear,t.onExit=this.onComponentWillDisappear,this.addDiscreteEvent(t)}}},{key:"_addCallbackIfNotNull",value:function(t,e,n){return!!n&&(t.controller.on(e,n),!0)}},{key:"onResizeImmediate",value:function(t){}},{key:"onResizeDebounced",value:function(t){}},{key:"onBreakpointChange",value:function(t){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}}]),e}(l);e.exports=f},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-raf-emitter/RAFEmitter":464,"@marcom/ac-raf-emitter/draw":469,"@marcom/ac-raf-emitter/update":472}],474:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=t("@marcom/delayed-initializer"),c=t("@marcom/anim-system"),u=t("@marcom/anim-system/Model/AnimSystemModel"),h=t("./ComponentMap"),f={},d=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.el=t,n.anim=c,n.components=[],n.el.getAttribute("data-anim-scroll-group")||n.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),c.on(u.EVENTS.ON_DOM_GROUPS_CREATED,function(t){n.componentsInitialized=!1,n.initComponents(),n.setupEvents()}),c.on(u.EVENTS.ON_DOM_KEYFRAMES_CREATED,function(){n.components.forEach(function(t){return t.mounted()}),n.trigger(e.EVENTS.DOM_COMPONENTS_MOUNTED)}),l.add(function(){return c.initialize()}),n}return o(e,t),s(e,[{key:"initComponents",value:function(){var t=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("[data-component-list]")&&t.push(this.el);for(var e=0;e<t.length;e++)for(var n=t[e],i=n.getAttribute("data-component-list"),r=i.split(" "),o=0,s=r.length;o<s;o++){var a=r[o];""!==a&&" "!==a&&this.addComponent({el:n,componentName:a})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),c.on(u.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),c.on(u.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),c.on(u.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(t){var n=t.el,i=t.componentName,r=t.data;if(!h.hasOwnProperty(i))throw"BubbleGum::addComponent could not add component to"+n.className+" no component type '"+i+"'found!";var o=h[i];if(!e.componentIsSupported(o,i))return void 0===f[i]&&(console.log("BubbleGum::addComponent unsupported component '"+i+"'. Reason: '"+i+".IS_SUPPORTED' returned false"),f[i]=!0),null;var s=n.dataset.componentList||"";s.includes(i)||(n.dataset.componentList=s.split(" ").concat(i).join(" "));var a=new o({el:n,data:r,gum:this,pageMetrics:u.pageMetrics});return this.components.push(a),this.componentsInitialized&&a.mounted(),a}},{key:"removeComponent",value:function(t){var e=this.components.indexOf(t);e!==-1&&(this.components.splice(e,1),t.el.dataset.componentList=t.el.dataset.componentList.replace(t.constructor.name,""),t.destroy())}},{key:"getComponentOfType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+t+"]",i=e.matches(n)?e:e.querySelector(n);return i?this.components.find(function(e){return e instanceof h[t]&&e.el===i}):null}},{key:"getComponentsOfType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+t+"]",i=e.matches(n)?[e]:Array.from(e.querySelectorAll(n));return this.components.filter(function(e){return e instanceof h[t]&&i.includes(e.el)})}},{key:"getComponentsForElement",value:function(t){return this.components.filter(function(e){return e.el===t})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(t){return t.onResizeImmediate(u.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(t){return t.onResizeDebounced(u.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(t){return t.onBreakpointChange(u.pageMetrics)})}}],[{key:"componentIsSupported",value:function(t,e){var n=t.IS_SUPPORTED;if(void 0===n)return!0;if("function"!=typeof n)return console.error('BubbleGum::addComponent error in "'+e+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var i=t.IS_SUPPORTED();return void 0===i?(console.error('BubbleGum::addComponent error in "'+e+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):i}}]),e}(a);d.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},e.exports=d},{"./ComponentMap":475,"@marcom/ac-event-emitter-micro":160,"@marcom/anim-system":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/delayed-initializer":477}],475:[function(t,e,n){"use strict";e.exports={BaseComponent:t("./BaseComponent")}},{"./BaseComponent":473}],476:[function(t,e,n){"use strict";var i={create:t("gl-mat4/create"),invert:t("gl-mat4/invert"),clone:t("gl-mat4/clone"),transpose:t("gl-mat4/transpose")},r={create:t("gl-vec3/create"),dot:t("gl-vec3/dot"),normalize:t("gl-vec3/normalize"),length:t("gl-vec3/length"),cross:t("gl-vec3/cross"),fromValues:t("gl-vec3/fromValues")},o={create:t("gl-vec4/create"),transformMat4:t("gl-vec4/transformMat4"),fromValues:t("gl-vec4/fromValues")},s=(Math.PI/180,180/Math.PI),a=0,l=1,c=3,u=4,h=5,f=7,d=11,p=12,m=13,_=15,y=function(t,e){e=e||!1;for(var n=i.clone(t),a=r.create(),l=r.create(),u=r.create(),h=o.create(),p=o.create(),m=(r.create(),0);m<16;m++)n[m]/=n[_];var y=i.clone(n);y[c]=0,y[f]=0,y[d]=0,y[_]=1;var w=(n[3],n[7],n[11],n[12]),E=n[13],x=n[14],S=(n[15],o.create());if(b(n[c])&&b(n[f])&&b(n[d]))h=o.fromValues(0,0,0,1);else{S[0]=n[c],S[1]=n[f],S[2]=n[d],S[3]=n[_];var k=i.invert(i.create(),y),T=i.transpose(i.create(),k);h=o.transformMat4(h,S,T)}a[0]=w,a[1]=E,a[2]=x;var C=[r.create(),r.create(),r.create()];C[0][0]=n[0],C[0][1]=n[1],C[0][2]=n[2],C[1][0]=n[4],C[1][1]=n[5],C[1][2]=n[6],C[2][0]=n[8],C[2][1]=n[9],C[2][2]=n[10],l[0]=r.length(C[0]),r.normalize(C[0],C[0]),u[0]=r.dot(C[0],C[1]),C[1]=g(C[1],C[0],1,-u[0]),l[1]=r.length(C[1]),r.normalize(C[1],C[1]),u[0]/=l[1],u[1]=r.dot(C[0],C[2]),C[2]=g(C[2],C[0],1,-u[1]),u[2]=r.dot(C[1],C[2]),C[2]=g(C[2],C[1],1,-u[2]),l[2]=r.length(C[2]),r.normalize(C[2],C[2]),u[1]/=l[2],u[2]/=l[2];var A=r.cross(r.create(),C[1],C[2]);if(r.dot(C[0],A)<0)for(m=0;m<3;m++)l[m]*=-1,C[m][0]*=-1,C[m][1]*=-1,C[m][2]*=-1;p[0]=.5*Math.sqrt(Math.max(1+C[0][0]-C[1][1]-C[2][2],0)),p[1]=.5*Math.sqrt(Math.max(1-C[0][0]+C[1][1]-C[2][2],0)),p[2]=.5*Math.sqrt(Math.max(1-C[0][0]-C[1][1]+C[2][2],0)),p[3]=.5*Math.sqrt(Math.max(1+C[0][0]+C[1][1]+C[2][2],0)),C[2][1]>C[1][2]&&(p[0]=-p[0]),C[0][2]>C[2][0]&&(p[1]=-p[1]),C[1][0]>C[0][1]&&(p[2]=-p[2]);var P=o.fromValues(p[0],p[1],p[2],2*Math.acos(p[3])),M=v(p);return e&&(u[0]=Math.round(u[0]*s*100)/100,u[1]=Math.round(u[1]*s*100)/100,u[2]=Math.round(u[2]*s*100)/100,M[0]=Math.round(M[0]*s*100)/100,M[1]=Math.round(M[1]*s*100)/100,M[2]=Math.round(M[2]*s*100)/100,P[3]=Math.round(P[3]*s*100)/100),{translation:a,scale:l,skew:u,perspective:h,quaternion:p,eulerRotation:M,axisAngle:P}},g=function(t,e,n,i){var o=r.create();return o[0]=n*t[0]+i*e[0],o[1]=n*t[1]+i*e[1],o[2]=n*t[2]+i*e[2],o},v=function(t){var e,n,i,o=t[3]*t[3],s=t[0]*t[0],a=t[1]*t[1],l=t[2]*t[2],c=s+a+l+o,u=t[0]*t[1]+t[2]*t[3];return u>.499*c?(n=2*Math.atan2(t[0],t[3]),i=Math.PI/2,e=0,r.fromValues(e,n,i)):u<-.499*c?(n=-2*Math.atan2(t[0],t[3]),i=-Math.PI/2,e=0,r.fromValues(e,n,i)):(n=Math.atan2(2*t[1]*t[3]-2*t[0]*t[2],s-a-l+o),i=Math.asin(2*u/c),e=Math.atan2(2*t[0]*t[3]-2*t[1]*t[2],-s+a-l+o),r.fromValues(e,n,i))},b=function(t){return Math.abs(t)<1e-4},w=function(t){var e=String(getComputedStyle(t).transform).trim(),n=i.create();if("none"===e||""===e)return n;var r,o,s=e.slice(0,e.indexOf("("));if("matrix3d"===s)for(r=e.slice(9,-1).split(","),o=0;o<r.length;o++)n[o]=parseFloat(r[o]);else{if("matrix"!==s)throw new TypeError("Invalid Matrix Value");for(r=e.slice(7,-1).split(","),o=r.length;o--;)r[o]=parseFloat(r[o]);n[a]=r[0],n[l]=r[1],n[p]=r[4],n[u]=r[2],n[h]=r[3],n[m]=r[5]}return n};e.exports=function(t,e){var n=w(t);return y(n,e)}},{"gl-mat4/clone":517,"gl-mat4/create":518,"gl-mat4/invert":521,"gl-mat4/transpose":529,"gl-vec3/create":530,"gl-vec3/cross":531,"gl-vec3/dot":532,"gl-vec3/fromValues":533,"gl-vec3/length":534,"gl-vec3/normalize":535,"gl-vec4/create":536,"gl-vec4/fromValues":537,"gl-vec4/transformMat4":538}],477:[function(t,e,n){"use strict";var i=!1,r=!1,o=[];e.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(t){var e=this;if(r&&t(),o.push(t),!i){i=!0;var n=document.documentElement.scrollHeight,s=0,a=function l(){var t=document.documentElement.scrollHeight;if(n!==t)s=0;else if(s++,s>=e.NUMBER_OF_FRAMES_TO_WAIT)return void o.forEach(function(t){return t()});n=t,requestAnimationFrame(l)};requestAnimationFrame(a)}}}},{}],478:[function(t,e,n){"use strict";e.exports={getContentDimensions:t("./getContentDimensions"),getDimensions:t("./getDimensions"),getMaxScrollPosition:t("./getMaxScrollPosition"),getPagePosition:t("./getPagePosition"),getPercentInViewport:t("./getPercentInViewport"),getPixelsInViewport:t("./getPixelsInViewport"),getPosition:t("./getPosition"),getScrollPosition:t("./getScrollPosition"),getViewportPosition:t("./getViewportPosition"),isInViewport:t("./isInViewport")}},{"./getContentDimensions":479,"./getDimensions":480,"./getMaxScrollPosition":481,"./getPagePosition":482,"./getPercentInViewport":483,"./getPixelsInViewport":484,"./getPosition":485,"./getScrollPosition":486,"./getViewportPosition":487,"./isInViewport":488}],479:[function(t,e,n){"use strict";e.exports=function(t,e){var n=1;return e&&(n=t.getBoundingClientRect().width/t.offsetWidth),{width:t.scrollWidth*n,height:t.scrollHeight*n}}},{}],480:[function(t,e,n){"use strict";e.exports=function(t,e){var n;return e?(n=t.getBoundingClientRect(),{width:n.width,height:n.height}):{width:t.offsetWidth,height:t.offsetHeight}}},{}],481:[function(t,e,n){"use strict";function i(t,e){return"x"===e?t.scrollWidth-t.clientWidth:t.scrollHeight-t.clientHeight}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports=function(t,e){var n="undefined"==typeof t?"undefined":r(t);return e="string"===n?t:e,t=t&&"string"!==n&&t!==window?t:document.documentElement,e&&/^[xy]$/i.test(e)?i(t,e):{x:i(t,"x"),y:i(t,"y")}}},{}],482:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./getScrollPosition");e.exports=function(t,e){var n;if(e){var o=r(),s=t.getBoundingClientRect();n={top:s.top+o.y,right:s.right+o.x,bottom:s.bottom+o.y,left:s.left+o.x}}else{var a=i(t);for(n={top:t.offsetTop,right:a.width,bottom:a.height,left:t.offsetLeft};t=t.offsetParent;)n.top+=t.offsetTop,n.left+=t.offsetLeft;n.right+=n.left,n.bottom+=n.top}var l=document.documentElement.offsetTop,c=document.documentElement.offsetLeft;return{top:n.top+l,right:n.right+c,bottom:n.bottom+l,left:n.left+c}}},{"./getDimensions":480,"./getScrollPosition":486}],483:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./getPixelsInViewport");e.exports=function(t,e){var n=r(t,e),o=i(t,e);return{x:n.x/o.width,y:n.y/o.height}}},{"./getDimensions":480,"./getPixelsInViewport":484}],484:[function(t,e,n){"use strict";var i=t("./getViewportPosition");e.exports=function(t,e){var n=window.innerWidth,r=window.innerHeight,o=i(t,e),s={x:o.right-o.left,y:o.bottom-o.top};return o.top<0&&(s.y+=o.top),o.bottom>r&&(s.y-=o.bottom-r),o.left<0&&(s.x+=o.left),o.right>n&&(s.x-=o.right-n),s.x=s.x<0?0:s.x,s.y=s.y<0?0:s.y,s}},{"./getViewportPosition":487}],485:[function(t,e,n){"use strict";var i=t("./getDimensions");e.exports=function(t,e){var n,r,o,s,a,l,c;return e?(n=t.getBoundingClientRect(),r=n.top,o=n.left,s=n.width,a=n.height,t.offsetParent&&(l=t.offsetParent.getBoundingClientRect(),r-=l.top,o-=l.left)):(c=i(t,e),r=t.offsetTop,o=t.offsetLeft,s=c.width,a=c.height),{top:r,right:o+s,bottom:r+a,left:o}}},{"./getDimensions":480}],486:[function(t,e,n){"use strict";function i(t){return"x"===t?window.scrollX||window.pageXOffset:window.scrollY||window.pageYOffset}function r(t,e,n){return"x"===e?n?i("x"):t.scrollLeft:n?i("y"):t.scrollTop}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports=function(t,e){var n="undefined"==typeof t?"undefined":o(t);e="string"===n?t:e,t=t&&"string"!==n?t:window;var i=t===window;return e&&/^[xy]$/i.test(e)?r(t,e,i):{x:r(t,"x",i),y:r(t,"y",i)}}},{}],487:[function(t,e,n){"use strict";var i=t("./getPagePosition"),r=t("./getScrollPosition");
e.exports=function(t,e){var n;if(e)return n=t.getBoundingClientRect(),{top:n.top,right:n.right,bottom:n.bottom,left:n.left};n=i(t);var o=r();return{top:n.top-o.y,right:n.right-o.x,bottom:n.bottom-o.y,left:n.left-o.x}}},{"./getPagePosition":482,"./getScrollPosition":486}],488:[function(t,e,n){"use strict";function i(t,e,n){var i={x:0,y:0};if(!e)return i;var o="undefined"==typeof e?"undefined":r(e);e="number"===o||"string"===o?{x:e,y:e}:Object.assign(i,e);var a;return Object.keys(i).forEach(function(i){var r=e[i];if("string"==typeof r||r>1){a=a||s(t,n);var o=parseInt(r,10)||0;r=o/("x"===i?a.width:a.height)}e[i]=r}),e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("./getPercentInViewport"),s=t("./getDimensions");e.exports=function(t,e,n){var r=o(t,e);return n=i(t,n,e),r.y>0&&r.y>=n.y&&r.x>0&&r.x>=n.x}},{"./getDimensions":480,"./getPercentInViewport":483}],489:[function(t,e,n){"use strict";e.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],490:[function(t,e,n){"use strict";var i=t("./helpers/globals");e.exports=function(){var t=i.getWindow();return"devicePixelRatio"in t&&t.devicePixelRatio>=1.5}},{"./helpers/globals":489}],491:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./model").controls,s=t("@marcom/ac-console/warn"),a=function(){function t(e,n){i(this,t),n=Object.assign({},n),this._model=n.model||o,this._container=e,this._ctrls=new Map,this._state={arePresent:!1}}return r(t,[{key:"initialize",value:function(){var t=this,e=this._container;if(e){var n=this._model.SELECTOR_MAP;n.forEach(function(n,i){if("container"!==i){var r=e.querySelector(n);r&&(t._ctrls.set(i,r),t._state.arePresent=!0)}})}}},{key:"isPresent",value:function(t){return!!this._ctrls.get(t)}},{key:"getElement",value:function(t){var e=this._ctrls.get(t);return e||null}},{key:"enable",value:function(t){this._setDisabled(t,!1)}},{key:"disable",value:function(t){this._setDisabled(t,!0)}},{key:"_setDisabled",value:function(t,e){var n=this._ctrls,i=function(i,r){var o=n.get(i);o?o.disabled=r:s("Unable to "+(e?"disable":"enable")+" the "+t+" control. The element does not exist.")};"string"==typeof t?i(t,e):Array.isArray(t)&&t.forEach(function(t){i(t,e)})}},{key:"disableAll",value:function(){var t=this;this._ctrls.forEach(function(e,n){t.disable(n)})}},{key:"attach",value:function(t,e){var n=this._ctrls.get(t);return n&&"function"==typeof e?void n.addEventListener("click",e):void s("Unable to attach "+t+" control.")}},{key:"remove",value:function(t,e){var n=this._ctrls.get(t);return"string"!=typeof t&&"function"!=typeof e||!this._ctrls.get(t)?void s("Unable to remove "+t+" control."):void n.removeEventListener("click",e)}},{key:"arePresent",get:function(){return this._state.arePresent}},{key:"allElements",get:function(){return this._ctrls}}]),t}();e.exports=a},{"./model":496,"@marcom/ac-console/warn":81}],492:[function(t,e,n){"use strict";"use stric";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./model").frames,s=t("@marcom/ac-console/warn"),a=function(){function t(e,n){i(this,t),n=Object.assign({},n),this._model=n.model||o,this._container=e,this._frames=new Map,this._promise={},this._state={arePresent:!1}}return r(t,[{key:"isPresent",value:function(t){return!!this._frames.get(t)}},{key:"isActive",value:function(t){return this._state[t].active}},{key:"getElement",value:function(t){var e=this._frames.get(t);return e?e:(s("The "+t+"Frame does not appear to exist."),null)}},{key:"initialize",value:function(){var t=this,e=this._container;if(e){var n=this._model.SELECTOR_MAP;n.forEach(function(n,i){if("container"!==i){var r=e.querySelector(n);r&&(t._frames.set(i,r),t._state.arePresent=!0,t._state[i]={},t._state[i].active=r.classList.contains(t._model.CLASS.active),t._state[i].hasCSSTransition=t._checkForCSSTransition(r,i),t._promise[i]={},t._promise[i].activate=null,t._promise[i].deactivate=null)}})}}},{key:"activate",value:function(t){return this._setActivity(t,!0)}},{key:"deactivate",value:function(t){return this._setActivity(t,!1)}},{key:"deactivateAll",value:function(){var t=this,e=[];return this._frames.forEach(function(n,i){e.push(t.deactivate(i))}),Promise.all(e)}},{key:"_checkForCSSTransition",value:function(t,e){var n=window.getComputedStyle(t)["transition-duration"],i=n&&"0s"!==n;return i||s("InlineVideo : Frames : "+(e?e+"Frame":t)+" does not have a valid CSS transition for (de)activation"),i}},{key:"_toggleActivity",value:function(t,e){e||(e=this.getElement(t)),e.classList.toggle(this._model.CLASS.active),this._state[t].active=!this._state[t].active}},{key:"_setActivity",value:function(t,e){var n=this,i=this._frames.get(t);if(!i)return Promise.reject("The "+t+"Frame element does not exist");var r=e?"activate":"deactivate",o=e?"deactivate":"activate",s=this._promise[t][r];if(s)return s;var a=this._promise[t][o]||Promise.resolve();return a.then(function(){return n._promise[t][o]=null,n._promise[t][r]=new Promise(function(o,s){var a=n._state[t].active;if(!(e&&!a||!e&&a))return n._promise[t][r]=null,void o();var l=!!i.offsetHeight;if(n._state[t].hasCSSTransition&&l){var c=function u(){i.removeEventListener("transitionend",u),n._promise[t][r]=null,o()};i.addEventListener("transitionend",c),n._toggleActivity(t,i)}else n._toggleActivity(t,i),n._promise[t][r]=null,o()})})}},{key:"arePresent",get:function(){return this._state.arePresent}}]),t}();e.exports=a},{"./model":496,"@marcom/ac-console/warn":81}],493:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./model").indicators,s=t("@marcom/ac-console/warn"),a=function(){function t(e,n){i(this,t),n=Object.assign({},n),this._model=n.model||o,this._container=e,this._indicators=new Map,this._state={arePresent:!1}}return r(t,[{key:"initialize",value:function(){var t=this,e=this._container;if(e){var n=this._model.SELECTOR_MAP;n.forEach(function(n,i){if("container"!==i){var r=e.querySelector(n);r&&(t._indicators.set(i,r),t._state.arePresent=!0,t._state[i]={},t._state[i].active=r.classList.contains(t._model.CLASS.active))}})}}},{key:"isPresent",value:function(t){return!!this._indicators.get(t)}},{key:"isActive",value:function(t){return this._state[t].active}},{key:"getElement",value:function(t){var e=this._indicators.get(t);return e||null}},{key:"activate",value:function(t){this._setActivity(t,!1)}},{key:"deactivate",value:function(t){this._setActivity(t,!0)}},{key:"_setActivity",value:function(t,e){var n=this._indicators.get(t);if(!n)return void s("Unable to "+(e?"deactivate":"activate")+" the "+t+" indicator. The element does not exist.");var i=e?"remove":"add";this._state[t].active=!e,n.classList[i](this._model.CLASS.active)}},{key:"arePresent",get:function(){return this._state.arePresent}},{key:"allElements",get:function(){return this._indicators}}]),t}();e.exports=a},{"./model":496,"@marcom/ac-console/warn":81}],494:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function _(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:_(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./Video"),c=t("./Controls"),u=t("./Frames"),h=t("./Indicators"),f=t("./model"),d=t("@marcom/ac-console/warn"),p=t("@marcom/ac-console/Error"),m=function(t){function e(t,n){i(this,e),n=Object.assign({},n),n.model=n.model||f,n.model=Object.assign({},n.model,n.model.video),delete n.model.video;var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o._controls={},o._frames={},o._indicators={},o}return o(e,t),s(e,[{key:"initialize",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this);var t=this._container;if(!t)return void p("InlineVideo Error : A video element was passed as the containing element. InlineVideo class expects a container element holding the video, optional frames, and optional controls.");var n=t.querySelector(this._model.controls.SELECTOR_MAP.get("container")),i=t.querySelector(this._model.frames.SELECTOR_MAP.get("container"))||t,r=t.querySelector(this._model.indicators.SELECTOR_MAP.get("container")),o=this._model;n&&(this._controls=new c(n,{model:o.controls}),this._controls.initialize(),this._controls.arePresent&&this._attachControls()),i&&(this._frames=new u(i,{model:o.frames}),this._frames.initialize(),this._frames.arePresent||d("No inline-video frames appear to be present. At minimum, a static frame should be present for fallback.")),r&&(this._indicators=new h(r,{model:o.indicators}),this._indicators.initialize())}},{key:"load",value:function(){var t=this._state,n=this._indicators,i="loading";return t.loaded||t.loaded||!n.arePresent||n.activate(i),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"load",this).call(this)}},{key:"play",value:function(){var t=this,n=this._frames,i=this._controls,r=n.isPresent("end")&&n.isActive("end")?n.deactivate("end"):Promise.resolve(),o=this._promise.load;return i.arePresent&&o&&o.then(function(){i.disable(["play","replay"]),i.enable("pause")}),r.then(function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",t).call(t)},function(t){d(t)})}},{key:"pause",value:function(){var t=this._controls;return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pause",this).call(this).then(function(){t.arePresent&&(t.disable("pause"),t.enable("play"))},function(t){d(t)})}},{key:"reset",value:function(){var t=this._controls;return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this).then(function(){t.arePresent&&(t.disable("pause"),t.enable("play"))},function(t){d(t)})}},{key:"replay",value:function(){var t=this._controls,n=t.arePresent;return n&&(t.disable("replay"),t.enable("pause")),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replay",this).call(this)["catch"](function(t){d(t)})}},{key:"_attachControls",value:function(){var t=this,e=this._controls,n=e.allElements;n.forEach(function(n,i){var r=t[i];r?e.attach(i,r):d("Unable to attach "+i+" control. No equivalent video method.")})}},{key:"_onLoadSuccess",value:function(t){var n=this._controls,i=this._frames,r=this._indicators,o="loading";return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onLoadSuccess",this).call(this,t).then(function(){return r.arePresent&&r.deactivate(o),n.arePresent&&n.enable("play"),i.arePresent?i.deactivateAll():Promise.resolve()})["catch"](function(t){d(t)}).then(function(){return Promise.resolve()})}},{key:"_onLoadFailure",value:function(t){var n=this,i=this._controls,r=this._frames,o=this._indicators,s="loading";return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onLoadFailure",this).call(this,t)["catch"](function(t){}).then(function(){return o.arePresent&&o.deactivate(s),i.arePresent&&i.disableAll(),r.arePresent?r.activate("static"):Promise.resolve()}).then(function(){var t=r.deactivate("end"),e=r.deactivate("start");return Promise.all([t,e])})["catch"](function(t){d(t)}).then(function(){var e=n._el;return e.getAttribute("src")&&(e.setAttribute("src",""),n._video.source.revokeLastObjectUrl()),Promise.reject(t)})}},{key:"_onEnded",value:function(t){var n=this,i=this._controls,r=this._frames;i.arePresent&&(i.disable("pause"),i.isPresent("replay")?i.enable("replay"):i.isPresent("play")&&i.enable("play"));var o=r.isPresent("end")&&!r.isActive("end")?r.activate("end"):Promise.resolve();return o["catch"](function(t){d(t)}).then(function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onEnded",n).call(n,t)})}},{key:"frames",get:function(){return this._frames}},{key:"controls",get:function(){return this._controls}},{key:"indicators",get:function(){return this._indicators}}]),e}(l);e.exports=m},{"./Controls":491,"./Frames":492,"./Indicators":493,"./Video":495,"./model":496,"@marcom/ac-console/Error":78,"@marcom/ac-console/warn":81}],495:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./model").video,s=t("@marcom/asset-source/AssetSource"),a=t("@marcom/ac-console/error"),l=function(){function t(e,n){i(this,t),n=Object.assign({},n),this._model=n.model||o,delete n.model,this._options=n;var r="VIDEO"===e.tagName;this._container=r?null:e,this._el=r?e:null,this._source=null,this._promise={load:null,nativePlay:null},this._state={loading:!1,loaded:!1,hasPlayed:!1,assetUrl:""},this.load=this.load.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.reset=this.reset.bind(this),this.replay=this.replay.bind(this)}return r(t,null,[{key:"convertToResolution",value:function(t){return s.convertToResolution(t)}},{key:"convertViewportName",value:function(t,e){return s.convertViewportName(t,e)}}]),r(t,[{key:"initialize",value:function(){var t=this._container;t&&(this._el=this._container.querySelector(this._model.SELECTOR.video)),this._options.el=this._el,this._source=new s(this._options)}},{key:"load",value:function(){var t=this;return this._promise.load&&this._state.assetUrl===this._source.assetUrl?this._promise.load:(this._state.loaded=!1,this._state.loading=!0,this._promise.load=this._source.load().then(function(e){return t._onLoadSuccess(e)},function(e){return t._onLoadFailure(e)}))}},{key:"play",value:function(){var t=this,e=this._promise.load;return e&&!this._promise.nativePlay&&this._el.paused?e.then(function(){return new Promise(function(e,n){t._el.onended=function(){return t._onEnded(e)};var i=t._el.play();t._promise.nativePlay=i=i?i:Promise.resolve(),i.then(function(){t._state.hasPlayed=!0,t._promise.nativePlay=null},function(t){n(t)})})},function(t){return Promise.reject(t)}):Promise.reject("Unable to play.")}},{key:"pause",value:function(){var t=this,e=this._promise.nativePlay;return e=e?e:Promise.resolve(),e.then(function(){return!t._el.paused&&t._state.loaded&&t._el.pause(),Promise.resolve()},function(t){return Promise.reject(t)})}},{key:"reset",value:function(){var t=this,e=this._promise.nativePlay;return e=e?e:Promise.resolve(),e.then(function(){return t._state.loaded&&(t._el.paused||t._el.pause(),t._el.currentTime=0),Promise.resolve()},function(t){return Promise.reject(t)})}},{key:"replay",value:function(){return this.reset().then(this.play)}},{key:"_onLoadSuccess",value:function(t){var e=this;return new Promise(function(n,i){var r=function o(){return e._el.removeEventListener("loadeddata",o),e._onFirstFrameLoaded(n)};e._el.addEventListener("loadeddata",r),e._el.setAttribute("src",t),e._el.load()})}},{key:"_onFirstFrameLoaded",value:function(t){return this._state.assetUrl=this._source.assetUrl,this._state.loaded=!0,this._state.loading=!1,this._source.revokeLastObjectUrl(),t()}},{key:"_onLoadFailure",value:function(t){return a("inline-video load error:",t),this._state.loaded=!1,this._state.loading=!1,Promise.reject(t)}},{key:"_onEnded",value:function(t){return t()}},{key:"el",get:function(){return this._el}},{key:"source",get:function(){return this._source}},{key:"state",get:function(){return this._state}}]),t}();e.exports=l},{"./model":496,"@marcom/ac-console/error":78,"@marcom/asset-source/AssetSource":460}],496:[function(t,e,n){"use strict";var i={video:{SELECTOR:{video:"video",mediaContainer:".inline-video-media"}},frames:{SELECTOR_MAP:new Map,CLASS:{active:"frame-active"}},controls:{SELECTOR_MAP:new Map},indicators:{SELECTOR_MAP:new Map,CLASS:{active:"indicator-active"}}},r=i.frames,o=i.controls,s=i.indicators;r.SELECTOR_MAP.set("container",".inline-video-media"),r.SELECTOR_MAP.set("static",".inline-video-frame-static"),r.SELECTOR_MAP.set("start",".inline-video-frame-start"),r.SELECTOR_MAP.set("end",".inline-video-frame-end"),o.SELECTOR_MAP.set("container",".inline-video-controls-panel"),o.SELECTOR_MAP.set("play",".inline-video-controls-play"),o.SELECTOR_MAP.set("replay",".inline-video-controls-replay"),o.SELECTOR_MAP.set("pause",".inline-video-controls-pause"),o.SELECTOR_MAP.set("reset",".inline-video-controls-reset"),s.SELECTOR_MAP.set("container",".inline-video-indicators"),s.SELECTOR_MAP.set("loading",".inline-video-indicators-loading"),e.exports=i},{}],497:[function(t,e,n){"use strict";e.exports={lerp:function(t,e,n){return e+(n-e)*t},map:function(t,e,n,i,r){return i+(r-i)*(t-e)/(n-e)},mapClamp:function(t,e,n,i,r){var o=i+(r-i)*(t-e)/(n-e);return Math.max(i,Math.min(r,o))},norm:function(t,e,n){return(t-e)/(n-e)},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},randFloat:function(t,e){return Math.random()*(e-t)+t},randInt:function(t,e){return Math.floor(Math.random()*(e-t)+t)}}},{}],498:[function(t,e,n){"use strict";e.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},{}],499:[function(t,e,n){"use strict";e.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(t){return t.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===t.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(t){return t.ua.indexOf("Safari")>-1&&t.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(t){return t.ua.indexOf("IE")>-1||t.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var t=!1;return document.documentMode&&(t=parseInt(document.documentMode,10)),t}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(t){return t.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(t){return t.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(t){return t.ua.indexOf("iPhone")>-1||t.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(t){return(t.ua.indexOf("Linux")>-1||t.platform.indexOf("Linux")>-1)&&t.ua.indexOf("Android")===-1}},{name:"fireos",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(t){return t.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},{}],500:[function(t,e,n){"use strict";function i(t){return new RegExp(t+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function r(t,e){if("function"==typeof t.parseVersion)return t.parseVersion(e);var n=t.version||t.userAgent;"string"==typeof n&&(n=[n]);for(var r,o=n.length,s=0;s<o;s++)if(r=e.match(i(n[s])),r&&r.length>1)return r[1].replace(/_/g,".");return!1}function o(t,e,n){for(var i,o,s=t.length,a=0;a<s;a++)if("function"==typeof t[a].test?t[a].test(n)===!0&&(i=t[a].name):n.ua.indexOf(t[a].userAgent)>-1&&(i=t[a].name),i){if(e[i]=!0,o=r(t[a],n.ua),"string"==typeof o){var l=o.split(".");e.version.string=o,l&&l.length>0&&(e.version.major=parseInt(l[0]||0),e.version.minor=parseInt(l[1]||0),e.version.patch=parseInt(l[2]||0))}else"edge"===i&&(e.version.string="12.0.0",e.version.major="12",e.version.minor="0",e.version.patch="0");return"function"==typeof t[a].parseDocumentMode&&(e.version.documentMode=t[a].parseDocumentMode()),e}return e}function s(t){var e={};return e.browser=o(l.browser,a.browser,t),e.os=o(l.os,a.os,t),e}var a=t("./defaults"),l=t("./dictionary");e.exports=s},{"./defaults":498,"./dictionary":499}],501:[function(t,e,n){"use strict";var i={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};e.exports=t("./parseUserAgent")(i)},{"./parseUserAgent":500}],502:[function(t,e,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],503:[function(t,e,n){arguments[4][2][0].apply(n,arguments)},{"./sharedRAFEmitterIDGeneratorInstance":508,"./sharedRAFExecutorInstance":509,"@marcom/ac-event-emitter-micro":160,dup:2}],504:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":161,dup:3}],505:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{"./SingleCallRAFEmitter":507,dup:4}],506:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{"./RAFInterface":505,dup:5}],507:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./RAFEmitter":503,dup:6}],508:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"../.release-info.js":502,"@marcom/ac-shared-instance":287,dup:8}],509:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"../.release-info.js":502,"./RAFExecutor":504,"@marcom/ac-shared-instance":287,dup:9}],510:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./RAFInterfaceController":506,dup:10}],511:[function(t,e,n){"use strict";function i(t,e){r.call(this),this._id=t||s.ID,this._options=Object.assign({},s.OPTIONS,e),this._allowDOMEventDispatch=!1,this._allowElementStateData=!1,this._options.removeNamespace="boolean"!=typeof this._options.removeNamespace||this._options.removeNamespace,this._el=this._initViewportEl(this._id),this._resizing=!1,this._mediaQueryLists={resolution:{retina:window.matchMedia(c.RETINA)},orientation:{portrait:window.matchMedia(c.PORTRAIT),landscape:window.matchMedia(c.LANDSCAPE)}},this._viewport=this._getViewport(this._options.removeNamespace),this._retina=this._getRetina(this._mediaQueryLists.resolution.retina),this._orientation=this._initOrientation(),this._addListeners(),this._updateElementStateData()}var r=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=t("@marcom/ac-raf-emitter/update"),s={ID:"viewport-emitter",OPTIONS:{removeNamespace:!0}},a={DOM_DISPATCH:"data-viewport-emitter-dispatch",STATE:"data-viewport-emitter-state"},l="::before",c={RETINA:"only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",PORTRAIT:"only screen and (orientation: portrait)",LANDSCAPE:"only screen and (orientation: landscape)"},u={any:"change:any",orientation:"change:orientation",retina:"change:retina",viewport:"change:viewport"};Object.defineProperty(i,"DOM_DISPATCH_ATTRIBUTE",{get:function(){return a.DOM_DISPATCH}}),Object.defineProperty(i,"DOM_STATE_ATTRIBUTE",{get:function(){return a.STATE}});var h=i.prototype=Object.create(r.prototype);Object.defineProperty(h,"id",{get:function(){return this._id}}),Object.defineProperty(h,"element",{get:function(){return this._el}}),Object.defineProperty(h,"mediaQueryLists",{get:function(){return this._mediaQueryLists}}),Object.defineProperty(h,"viewport",{get:function(){return this._viewport}}),Object.defineProperty(h,"retina",{get:function(){return this._retina}}),Object.defineProperty(h,"orientation",{get:function(){return this._orientation}}),Object.defineProperty(h,"hasDomDispatch",{get:function(){return this._allowDOMEventDispatch}}),h.destroy=function(){this._removeListeners();for(var t in this._options)this._options[t]=null;for(var e in this._mediaQueryLists){var n=this._mediaQueryLists[e];for(var i in n)n[i]=null}this._id=null,this._el=null,this._viewport=null,this._retina=null,this._orientation=null,r.prototype.destroy.call(this)},h._initViewportEl=function(t){var e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,e=document.body.appendChild(e)),e.hasAttribute(a.DOM_DISPATCH)||(e.setAttribute(a.DOM_DISPATCH,""),this._allowDOMEventDispatch=!0),e.hasAttribute(a.STATE)||(this._allowElementStateData=!0),e},h._dispatch=function(t,e){var n={viewport:this._viewport,orientation:this._orientation,retina:this._retina};if(this._allowDOMEventDispatch){var i=new CustomEvent(t,{detail:e}),r=new CustomEvent(u.any,{detail:n});this._el.dispatchEvent(i),this._el.dispatchEvent(r)}this.trigger(t,e),this.trigger(u.any,n)},h._addListeners=function(){this._onOrientationChange=this._onOrientationChange.bind(this),this._onRetinaChange=this._onRetinaChange.bind(this),this._onViewportChange=this._onViewportChange.bind(this),this._onViewportChangeUpdate=this._onViewportChangeUpdate.bind(this),this._mediaQueryLists.orientation.portrait.addListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.addListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.addListener(this._onRetinaChange),window.addEventListener("resize",this._onViewportChange)},h._removeListeners=function(){this._mediaQueryLists.orientation.portrait.removeListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.removeListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.removeListener(this._onRetinaChange),window.removeEventListener("resize",this._onViewportChange)},h._updateElementStateData=function(){if(this._allowElementStateData){var t=JSON.stringify({viewport:this._viewport,orientation:this._orientation,retina:this._retina});this._el.setAttribute(a.STATE,t)}},h._getViewport=function(t){var e=window.getComputedStyle(this._el,l).content;return e?(e=e.replace(/["']/g,""),t?e.split(":").pop():e):null},h._getRetina=function(t){return t.matches},h._getOrientation=function(t){var e=this._orientation;if(t.matches){var n=/portrait|landscape/;return t.media.match(n)[0]}return e},h._initOrientation=function(){var t=this._getOrientation(this._mediaQueryLists.orientation.portrait);return t?t:this._getOrientation(this._mediaQueryLists.orientation.landscape)},h._onViewportChange=function(){this._resizing||(this._resizing=!0,o(this._onViewportChangeUpdate))},h._onViewportChangeUpdate=function(){var t=this._viewport;if(this._viewport=this._getViewport(this._options.removeNamespace),t!==this._viewport){var e={from:t,to:this._viewport};this._updateElementStateData(),this._dispatch(u.viewport,e)}this._resizing=!1},h._onRetinaChange=function(t){var e=this._retina;if(this._retina=this._getRetina(t),e!==this._retina){var n={from:e,to:this._retina};this._updateElementStateData(),this._dispatch(u.retina,n)}},h._onOrientationChange=function(t){var e=this._orientation;if(this._orientation=this._getOrientation(t),e!==this._orientation){var n={from:e,to:this._orientation};this._updateElementStateData(),this._dispatch(u.orientation,n)}},e.exports=i},{"@marcom/ac-event-emitter-micro":160,"@marcom/ac-raf-emitter/update":510}],512:[function(t,e,n){"use strict";var i=t("./ViewportEmitter");e.exports=new i},{"./ViewportEmitter":511}],513:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("@marcom/ac-url/parseURL"),s=t("@marcom/ac-console/error"),a=t("@marcom/ac-console/log"),l={requestMethod:"GET",timeout:3e4},c={response:null,xhr:null},u={error:null,xhr:null},h="href",f=function(){function t(e,n){return i(this,t),e||"string"==typeof e?(this._src=o(e)[h],this._opts=Object.assign(l,n),this._xhr=new XMLHttpRequest,this._promise=null,this._metrics={progress:0,totalAssetSize:0,time:{requested:0,load:{start:0,end:0,total:0}}},this._onLoadStart=this._onLoadStart.bind(this),this._onProgress=this._onProgress.bind(this),void(this._rejectData=this._rejectData.bind(this))):void s("createXhr(src, opts), a src is required to create an XMLHttpRequest")}return r(t,null,[{key:"isCORSRequest",value:function(t){return window.location.hostname!==o(t).hostname}},{key:"IS_SUPPORTED",get:function(){var t=window.XMLHttpRequest,e=window.Promise,n=t&&"function"==typeof t,i=e&&"function"==typeof e;return n&&i}}]),r(t,[{key:"open",value:function(){0===this._xhr.readyState&&(this._xhr.open(this._opts.requestMethod,this._src,!0,this._opts.user,this._opts.password),this._setXhrProps(),a("XmlHttpRequest opened and properties set"))}},{key:"send",value:function(t){var e=this;return t=void 0===t?null:t,this._promise?this._promise:this._promise=new Promise(function(n,i){e._xhr.onprogress=e._onProgress,e._xhr.onloadstart=e._onLoadStart,e._xhr.onload=function(){return e._onLoad(n,i)},e._xhr.ontimeout=function(t){return e._rejectData(i,t)},e._xhr.onerror=function(t){return e._rejectData(i,t)},e._xhr.onabort=function(t){return e._rejectData(i,t)},e._metrics.time.requested=new Date,e._xhr.send(t),a("XmlHttpRequest sent")})}},{key:"destroy",value:function(){var t=this;return 4!==this._xhr.readyState&&this._xhr.abort(),this._promise=this._promise||Promise.resolve(),this._promise.then(function(){t._nullifyConstructorProps()})}},{key:"_nullifyConstructorProps",value:function(){this._src=null,this._metrics={progress:null,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,total:null}}}}},{key:"_calcTotalLoadTime",value:function(){this._metrics.time.load.end=Date.now(),this._metrics.time.load.total=this._metrics.time.load.end-this._metrics.time.load.start}},{key:"_setXhrProps",value:function(){var t=this;Object.keys(this._opts).forEach(function(e){e in t._xhr&&"function"!=typeof t._xhr[e]&&(t._xhr[e]=t._opts[e])})}},{key:"_onLoadStart",value:function(){this._metrics.time.load.start=new Date,this._metrics.progress=0,a("XmlHttpRequest loading")}},{key:"_onLoad",value:function(t,e){var n=this._xhr.status;if(200!==n&&4===this._xhr.readyState)return this._rejectData(e,n);this._calcTotalLoadTime();var i=Object.assign({},c,{response:this._xhr.response,xhr:this._xhr});return a("XmlHttpRequest loaded"),t(i)}},{key:"_onProgress",value:function(t){this._metrics.totalAssetSize||(this._metrics.totalAssetSize=t.total),this._metrics.progress=t.total?t.loaded/t.total:0}},{key:"_rejectData",value:function(t,e){var n=Object.assign({},u,{error:e,xhr:this._xhr});return s("XhrRequest failed due to",n),t(n)}},{key:"xhr",get:function(){return this._xhr}},{key:"requestUrl",get:function(){return this._src}},{key:"progress",get:function(){return this._metrics.progress;
}},{key:"totalAssetSize",get:function(){return this._metrics.totalAssetSize}},{key:"requestedAtTime",get:function(){return this._metrics.time.requested}},{key:"loadStartTime",get:function(){return this._metrics.time.load.start}},{key:"loadEndTime",get:function(){return this._metrics.time.load.end}},{key:"totalLoadTime",get:function(){return this._metrics.time.load.total}}]),t}();e.exports=f},{"@marcom/ac-console/error":78,"@marcom/ac-console/log":80,"@marcom/ac-url/parseURL":342}],514:[function(t,e,n){e.exports.EventEmitter=t("./ac-event-emitter/EventEmitter")},{"./ac-event-emitter/EventEmitter":515}],515:[function(t,e,n){"use strict";var i="EventEmitter:propagation",r=function(t){t&&(this.context=t)},o=r.prototype,s=function(){return this.hasOwnProperty("_events")||"object"==typeof this._events||(this._events={}),this._events},a=function(t,e){var n=t[0],i=t[1],r=t[2];if("string"!=typeof n&&"object"!=typeof n||null===n||Array.isArray(n))throw new TypeError("Expecting event name to be a string or object.");if("string"==typeof n&&!i)throw new Error("Expecting a callback function to be provided.");if(i&&"function"!=typeof i){if("object"!=typeof n||"object"!=typeof i)throw new TypeError("Expecting callback to be a function.");r=i}if("object"==typeof n)for(var o in n)e.call(this,o,n[o],r);"string"==typeof n&&(n=n.split(" "),n.forEach(function(t){e.call(this,t,i,r)},this))},l=function(t,e){var n,i,r;if(n=s.call(this)[t],n&&0!==n.length)for(n=n.slice(),this._stoppedImmediatePropagation=!1,i=0,r=n.length;i<r&&(!this._stoppedImmediatePropagation&&!e(n[i],i));i++);},c=function(t,e,n){var i=-1;l.call(this,e,function(t,e){if(t.callback===n)return i=e,!0}),i!==-1&&t[e].splice(i,1)};o.on=function(){var t=s.call(this);return a.call(this,arguments,function(e,n,i){t[e]=t[e]||(t[e]=[]),t[e].push({callback:n,context:i})}),this},o.once=function(){return a.call(this,arguments,function(t,e,n){var i=function(r){e.call(n||this,r),this.off(t,i)};this.on(t,i,this)}),this},o.off=function(t,e){var n=s.call(this);if(0===arguments.length)this._events={};else if(!t||"string"!=typeof t&&"object"!=typeof t||Array.isArray(t))throw new TypeError("Expecting event name to be a string or object.");if("object"==typeof t)for(var i in t)c.call(this,n,i,t[i]);if("string"==typeof t){var r=t.split(" ");1===r.length?e?c.call(this,n,t,e):n[t]=[]:r.forEach(function(t){n[t]=[]})}return this},o.trigger=function(t,e,n){if(!t)throw new Error("trigger method requires an event name");if("string"!=typeof t)throw new TypeError("Expecting event names to be a string.");if(n&&"boolean"!=typeof n)throw new TypeError("Expecting doNotPropagate to be a boolean.");return t=t.split(" "),t.forEach(function(t){l.call(this,t,function(t){t.callback.call(t.context||this.context||this,e)}.bind(this)),n||l.call(this,i,function(n){var i=t;n.prefix&&(i=n.prefix+i),n.emitter.trigger(i,e)})},this),this},o.propagateTo=function(t,e){var n=s.call(this);n[i]||(this._events[i]=[]),n[i].push({emitter:t,prefix:e})},o.stopPropagatingTo=function(t){var e=s.call(this);if(!t)return void(e[i]=[]);var n,r=e[i],o=r.length;for(n=0;n<o;n++)if(r[n].emitter===t){r.splice(n,1);break}},o.stopImmediatePropagation=function(){this._stoppedImmediatePropagation=!0},o.has=function(t,e,n){var i=s.call(this),r=i[t];if(0===arguments.length)return Object.keys(i);if(!r)return!1;if(!e)return r.length>0;for(var o=0,a=r.length;o<a;o++){var l=r[o];if(n&&e&&l.context===n&&l.callback===e)return!0;if(e&&!n&&l.callback===e)return!0}return!1},e.exports=r},{}],516:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){return 1===t.length&&(t=function(t){return function(n,i){return e(t(n),i)}}(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}function i(t,e){return[t,e]}function r(t){return null===t?NaN:+t}function o(t,e){var n,i,o=t.length,s=0,a=-1,l=0,c=0;if(null==e)for(;++a<o;)isNaN(n=r(t[a]))||(c+=(i=n-l)*(n-(l+=i/++s)));else for(;++a<o;)isNaN(n=r(e(t[a],a,t)))||(c+=(i=n-l)*(n-(l+=i/++s)));if(s>1)return c/(s-1)}function s(t,e){var n=o(t,e);return n?Math.sqrt(n):n}function a(t,e){var n,i,r,o=t.length,s=-1;if(null==e){for(;++s<o;)if(null!=(n=t[s])&&n>=n)for(i=r=n;++s<o;)null!=(n=t[s])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++s<o;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=r=n;++s<o;)null!=(n=e(t[s],s,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}function l(t){return function(){return t}}function c(t){return t}function u(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}function h(t,e,n){var i,r,o,s,a=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(s=f(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(r=Math.ceil(e-t+1));++a<r;)o[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(r=Math.ceil(t-e+1));++a<r;)o[a]=(t-a)/s;return i&&o.reverse(),o}function f(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=Hc?10:o>=qc?5:o>=Wc?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=Hc?10:o>=qc?5:o>=Wc?2:1)}function d(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=Hc?r*=10:o>=qc?r*=5:o>=Wc&&(r*=2),e<t?-r:r}function p(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function m(t,e,n){if(null==n&&(n=r),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,s=Math.floor(o),a=+n(t[s],s,t);return a+(+n(t[s+1],s+1,t)-a)*(o-s)}}function _(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}function y(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(i=n;++o<r;)null!=(n=t[o])&&i>n&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&i>n&&(i=n);return i}function g(t){if(!(r=t.length))return[];for(var e=-1,n=y(t,v),i=new Array(n);++e<n;)for(var r,o=-1,s=i[e]=new Array(r);++o<r;)s[o]=t[o][e];return i}function v(t){return t.length}function b(t){return t}function w(t){return"translate("+(t+.5)+",0)"}function E(t){return"translate(0,"+(t+.5)+")"}function x(){return!this.__axis}function S(t,e){function n(n){var f=null==r?e.ticks?e.ticks.apply(e,i):e.domain():r,d=null==o?e.tickFormat?e.tickFormat.apply(e,i):b:o,p=Math.max(s,0)+l,m=e.range(),_=+m[0]+.5,y=+m[m.length-1]+.5,g=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),v=n.selection?n.selection():n,w=v.selectAll(".domain").data([null]),E=v.selectAll(".tick").data(f,e).order(),S=E.exit(),k=E.enter().append("g").attr("class","tick"),T=E.select("line"),C=E.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),E=E.merge(k),T=T.merge(k.append("line").attr("stroke","#000").attr(u+"2",c*s)),C=C.merge(k.append("text").attr("fill","#000").attr(u,c*p).attr("dy",t===Gc?"0em":t===Xc?"0.71em":"0.32em")),n!==v&&(w=w.transition(n),E=E.transition(n),T=T.transition(n),C=C.transition(n),S=S.transition(n).attr("opacity",Zc).attr("transform",function(t){return isFinite(t=g(t))?h(t):this.getAttribute("transform")}),k.attr("opacity",Zc).attr("transform",function(t){var e=this.parentNode.__axis;return h(e&&isFinite(e=e(t))?e:g(t))})),S.remove(),w.attr("d",t===Qc||t==Yc?"M"+c*a+","+_+"H0.5V"+y+"H"+c*a:"M"+_+","+c*a+"V0.5H"+y+"V"+c*a),E.attr("opacity",1).attr("transform",function(t){return h(g(t))}),T.attr(u+"2",c*s),C.attr(u,c*p).text(d),v.filter(x).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Yc?"start":t===Qc?"end":"middle"),v.each(function(){this.__axis=g})}var i=[],r=null,o=null,s=6,a=6,l=3,c=t===Gc||t===Qc?-1:1,u=t===Qc||t===Yc?"x":"y",h=t===Gc||t===Xc?w:E;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return i=Kc.call(arguments),n},n.tickArguments=function(t){return arguments.length?(i=null==t?[]:Kc.call(t),n):i.slice()},n.tickValues=function(t){return arguments.length?(r=null==t?null:Kc.call(t),n):r&&r.slice()},n.tickFormat=function(t){return arguments.length?(o=t,n):o},n.tickSize=function(t){return arguments.length?(s=a=+t,n):s},n.tickSizeInner=function(t){return arguments.length?(s=+t,n):s},n.tickSizeOuter=function(t){return arguments.length?(a=+t,n):a},n.tickPadding=function(t){return arguments.length?(l=+t,n):l},n}function k(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new T(i)}function T(t){this._=t}function C(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Jc,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}function A(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),tu.hasOwnProperty(e)?{space:tu[e],local:t}:t}function P(t){var e=A(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$c&&e.documentElement.namespaceURI===$c?e.createElement(t):e.createElementNS(n,t)}})(e)}function M(){}function O(t){return null==t?M:function(){return this.querySelector(t)}}function I(){return[]}function L(t){return null==t?I:function(){return this.querySelectorAll(t)}}function D(t){return new Array(t.length)}function R(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function F(t,e,n,i,r,o){for(var s,a=0,l=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new R(t,o[a]);for(;a<l;++a)(s=e[a])&&(r[a]=s)}function N(t,e,n,i,r,o,s){var a,l,c,u={},h=e.length,f=o.length,d=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(d[a]=c=ou+s.call(l,l.__data__,a,e),c in u?r[a]=l:u[c]=l);for(a=0;a<f;++a)(l=u[c=ou+s.call(t,o[a],a,o)])?(i[a]=l,l.__data__=o[a],u[c]=null):n[a]=new R(t,o[a]);for(a=0;a<h;++a)(l=e[a])&&u[d[a]]===l&&(r[a]=l)}function j(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function B(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function U(t,e){return t.style.getPropertyValue(e)||B(t).getComputedStyle(t,null).getPropertyValue(e)}function V(t){return t.trim().split(/^|\s+/)}function z(t){return t.classList||new H(t)}function H(t){this._node=t,this._names=V(t.getAttribute("class")||"")}function q(t,e){for(var n=z(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function W(t,e){for(var n=z(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function K(){this.textContent=""}function G(){this.innerHTML=""}function Y(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Q(){return null}function Z(){var t=this.parentNode;t&&t.removeChild(this)}function J(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function $(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function tt(t,e,n){return t=et(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function et(e,n,i){return function(r){var o=t.event;t.event=r;try{e.call(this,this.__data__,n,i)}finally{t.event=o}}}function nt(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function it(t,e,n){var i=su.hasOwnProperty(t.type)?tt:et;return function(r,o,s){var a,l=this.__on,c=i(e,o,s);if(l)for(var u=0,h=l.length;u<h;++u)if((a=l[u]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=n),void(a.value=e);this.addEventListener(t.type,c,n),a={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(a):this.__on=[a]}}function rt(e,n,i,r){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,r)}finally{t.event=o}}function ot(t,e,n){var i=B(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function st(t,e){this._groups=t,this._parents=e}function at(){return new st([[document.documentElement]],au)}function lt(t){return"string"==typeof t?new st([[document.querySelector(t)]],[document.documentElement]):new st([[t]],au)}function ct(){return new ut}function ut(){this._="@"+(++lu).toString(36)}function ht(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function ft(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function dt(t){var e=ht();return e.changedTouches&&(e=e.changedTouches[0]),ft(t,e)}function pt(t,e,n){arguments.length<3&&(n=e,e=ht().changedTouches);for(var i,r=0,o=e?e.length:0;r<o;++r)if((i=e[r]).identifier===n)return ft(t,i);return null}function mt(){t.event.stopImmediatePropagation()}function _t(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function yt(t){var e=t.document.documentElement,n=lt(t).on("dragstart.drag",_t,!0);"onselectstart"in e?n.on("selectstart.drag",_t,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function gt(t,e){var n=t.document.documentElement,i=lt(t).on("dragstart.drag",null);e&&(i.on("click.drag",_t,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function vt(t){return function(){return t}}function bt(t,e,n,i,r,o,s,a,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=s,this.dx=a,this.dy=l,this._=c}function wt(){return!t.event.button}function Et(){return this.parentNode}function xt(e){return null==e?{x:t.event.x,y:t.event.y}:e}function St(){return"ontouchstart"in this}function kt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Tt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ct(){}function At(t){var e;return t=(t+"").trim().toLowerCase(),(e=fu.exec(t))?(e=parseInt(e[1],16),new Lt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=du.exec(t))?Pt(parseInt(e[1],16)):(e=pu.exec(t))?new Lt(e[1],e[2],e[3],1):(e=mu.exec(t))?new Lt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=_u.exec(t))?Mt(e[1],e[2],e[3],e[4]):(e=yu.exec(t))?Mt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=gu.exec(t))?Dt(e[1],e[2]/100,e[3]/100,1):(e=vu.exec(t))?Dt(e[1],e[2]/100,e[3]/100,e[4]):bu.hasOwnProperty(t)?Pt(bu[t]):"transparent"===t?new Lt(NaN,NaN,NaN,0):null}function Pt(t){return new Lt(t>>16&255,t>>8&255,255&t,1)}function Mt(t,e,n,i){return i<=0&&(t=e=n=NaN),new Lt(t,e,n,i)}function Ot(t){return t instanceof Ct||(t=At(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function It(t,e,n,i){return 1===arguments.length?Ot(t):new Lt(t,e,n,null==i?1:i)}function Lt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Dt(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ft(t,e,n,i)}function Rt(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ft)return new Ft(t.h,t.s,t.l,t.opacity);if(t instanceof Ct||(t=At(t)),!t)return new Ft;if(t instanceof Ft)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new Ft(s,a,l,t.opacity)}(t):new Ft(t,e,n,null==i?1:i)}function Ft(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Nt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function jt(t){if(t instanceof Ut)return new Ut(t.l,t.a,t.b,t.opacity);if(t instanceof Kt){var e=t.h*wu;return new Ut(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Lt||(t=Ot(t));var n=qt(t.r),i=qt(t.g),r=qt(t.b),o=Vt((.4124564*n+.3575761*i+.1804375*r)/xu),s=Vt((.2126729*n+.7151522*i+.072175*r)/Su);return new Ut(116*s-16,500*(o-s),200*(s-Vt((.0193339*n+.119192*i+.9503041*r)/ku)),t.opacity)}function Bt(t,e,n,i){return 1===arguments.length?jt(t):new Ut(t,e,n,null==i?1:i)}function Ut(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Vt(t){return t>Pu?Math.pow(t,1/3):t/Au+Tu}function zt(t){return t>Cu?t*t*t:Au*(t-Tu)}function Ht(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function qt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Wt(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Kt)return new Kt(t.h,t.c,t.l,t.opacity);t instanceof Ut||(t=jt(t));var e=Math.atan2(t.b,t.a)*Eu;return new Kt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Kt(t,e,n,null==i?1:i)}function Kt(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Gt(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Yt)return new Yt(t.h,t.s,t.l,t.opacity);t instanceof Lt||(t=Ot(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Ru*i+Lu*e-Du*n)/(Ru+Lu-Du),o=i-r,s=(Iu*(n-r)-Mu*o)/Ou,a=Math.sqrt(s*s+o*o)/(Iu*r*(1-r)),l=a?Math.atan2(s,o)*Eu-120:NaN;return new Yt(l<0?l+360:l,a,r,t.opacity)}(t):new Yt(t,e,n,null==i?1:i)}function Yt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Xt(t,e,n,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*i+s*r)/6}function Qt(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],s=i>0?t[i-1]:2*r-o,a=i<e-1?t[i+2]:2*o-r;return Xt((n-i/e)*e,s,r,o,a)}}function Zt(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],a=t[(i+2)%e];return Xt((n-i/e)*e,r,o,s,a)}}function Jt(t){return function(){return t}}function $t(t,e){return function(n){return t+n*e}}function te(t,e){var n=e-t;return n?$t(t,n>180||n<-180?n-360*Math.round(n/360):n):Jt(isNaN(t)?e:t)}function ee(t){return 1==(t=+t)?ne:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Jt(isNaN(e)?n:e)}}function ne(t,e){var n=e-t;return n?$t(t,n):Jt(isNaN(t)?e:t)}function ie(t){return function(e){var n,i,r=e.length,o=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=It(e[n]),o[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return o=t(o),s=t(s),a=t(a),i.opacity=1,function(t){return i.r=o(t),i.g=s(t),i.b=a(t),i+""}}}function re(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=ce(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}function oe(t,e){var n=new Date;return t=+t,e-=t,function(i){return n.setTime(t+e*i),n}}function se(t,e){return t=+t,e-=t,function(n){return t+e*n}}function ae(t,e){var n,i={},r={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?i[n]=ce(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}function le(t,e){var n,i,r,o=Wu.lastIndex=Ku.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=Wu.exec(t))&&(i=Ku.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:se(n,i)})),o=Ku.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function ce(t,e){var n,i=typeof e;return null==e||"boolean"===i?Jt(e):("number"===i?se:"string"===i?(n=At(e))?(e=n,zu):le:e instanceof At?zu:e instanceof Date?oe:Array.isArray(e)?re:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ae:se)(t,e)}function ue(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}function he(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Gu,skewX:Math.atan(l)*Gu,scaleX:s,scaleY:a}}function fe(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],l=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:se(t,r)},{i:l-2,x:se(i,o)})}else(r||o)&&s.push("translate("+r+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:se(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,s.rotate,a,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:se(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,s.skewX,a,l),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:se(t,n)},{i:a-2,x:se(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}function de(t){return((t=Math.exp(t))+1/t)/2}function pe(t,e){var n,i,r=t[0],o=t[1],s=t[2],a=e[0],l=e[1],c=e[2],u=a-r,h=l-o,f=u*u+h*h;if(f<th)i=Math.log(c/s)/Zu,n=function(t){return[r+t*u,o+t*h,s*Math.exp(Zu*t*i)]};else{var d=Math.sqrt(f),p=(c*c-s*s+$u*f)/(2*s*Ju*d),m=(c*c-s*s-$u*f)/(2*c*Ju*d),_=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(m*m+1)-m);i=(y-_)/Zu,n=function(t){var e=t*i,n=de(_),a=s/(Ju*d)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Zu*e+_)-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[r+a*u,o+a*h,s*n/de(Zu*e+_)]}}return n.duration=1e3*i,n}function me(t){return function(e,n){var i=t((e=Rt(e)).h,(n=Rt(n)).h),r=ne(e.s,n.s),o=ne(e.l,n.l),s=ne(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=o(t),e.opacity=s(t),e+""}}}function _e(t){return function(e,n){var i=t((e=Wt(e)).h,(n=Wt(n)).h),r=ne(e.c,n.c),o=ne(e.l,n.l),s=ne(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=o(t),e.opacity=s(t),e+""}}}function ye(t){return function e(n){function i(e,i){var r=t((e=Gt(e)).h,(i=Gt(i)).h),o=ne(e.s,i.s),s=ne(e.l,i.l),a=ne(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}function ge(){return fh||(mh(ve),fh=ph.now()+dh)}function ve(){fh=0}function be(){this._call=this._time=this._next=null}function we(t,e,n){var i=new be;return i.restart(t,e,n),i}function Ee(){ge(),++ah;for(var t,e=Uu;e;)(t=fh-e._time)>=0&&e._call.call(null,t),e=e._next;--ah}function xe(){fh=(hh=ph.now())+dh,ah=lh=0;try{Ee()}finally{ah=0,function(){for(var t,e,n=Uu,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Uu=e);Vu=t,ke(i)}(),fh=0}}function Se(){var t=ph.now(),e=t-hh;e>uh&&(dh-=e,hh=t)}function ke(t){ah||(lh&&(lh=clearTimeout(lh)),t-fh>24?(t<1/0&&(lh=setTimeout(xe,t-ph.now()-dh)),ch&&(ch=clearInterval(ch))):(ch||(hh=ph.now(),ch=setInterval(Se,uh)),ah=1,mh(xe)))}function Te(t,e,n){var i=new be;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i}function Ce(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){function i(l){var c,u,h,f;if(n.state!==vh)return o();for(c in a)if((f=a[c]).name===n.name){if(f.state===wh)return Te(i);f.state===Eh?(f.state=Sh,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete a[c]):+c<e&&(f.state=Sh,f.timer.stop(),delete a[c])}if(Te(function(){n.state===wh&&(n.state=Eh,n.timer.restart(r,n.delay,n.time),r(l))}),n.state=bh,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bh){for(n.state=wh,s=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(s[++u]=f);s.length=u+1}}function r(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=xh,1),r=-1,a=s.length;++r<a;)s[r].call(null,i);n.state===xh&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=Sh,n.timer.stop(),delete a[e];for(var i in a)return;delete t.__transition}var s,a=t.__transition;a[e]=n,n.timer=we(function(t){n.state=vh,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:r,on:_h,tween:yh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:gh})}function Ae(t,e){var n=Me(t,e);if(n.state>gh)throw new Error("too late; already scheduled");return n}function Pe(t,e){var n=Me(t,e);if(n.state>bh)throw new Error("too late; already started");return n}function Me(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Oe(t,e){var n,i,r,o=t.__transition,s=!0;if(o){e=null==e?null:e+"";for(r in o)(n=o[r]).name===e?(i=n.state>bh&&n.state<xh,n.state=Sh,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition}}function Ie(t,e,n){var i=t._id;return t.each(function(){var t=Pe(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Me(t,i).value[e]}}function Le(t,e){var n;return("number"==typeof e?se:e instanceof At?zu:(n=At(e))?(e=n,zu):le)(t,e)}function De(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Re(t){return at().transition(t)}function Fe(){return++Th}function Ne(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function je(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Be(t){return(1-Math.cos(Oh*t))/2}function Ue(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Ve(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function ze(t){return(t=+t)<Lh?zh*t*t:t<Rh?zh*(t-=Dh)*t+Fh:t<jh?zh*(t-=Nh)*t+Bh:zh*(t-=Uh)*t+Vh}function He(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Qh.time=ge(),Qh;return n}function qe(t){return function(){return t}}function We(){t.event.stopImmediatePropagation()}function Ke(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Ge(t){return{type:t}}function Ye(){return!t.event.button}function Xe(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Qe(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ze(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Je(e){function n(t){var n=t.property("__brush",a).selectAll(".overlay").data([Ge("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",sf.overlay).merge(n).each(function(){var t=Qe(this).extent;lt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Ge("selection")]).enter().append("rect").attr("class","selection").attr("cursor",sf.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return sf[t.type]}),t.each(i).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",s)}function i(){var t=lt(this),e=Qe(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-f/2:e[0][0]-f/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-f/2:e[0][1]-f/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+f:f}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+f:f})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function r(t,e){return t.__brush.emitter||new o(t,e)}function o(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function s(){function n(){var t=dt(E);!D||b||w||(Math.abs(t[0]-F[0])>Math.abs(t[1]-F[1])?w=!0:b=!0),F=t,v=!0,Ke(),o()}function o(){var t;switch(y=F[0]-R[0],g=F[1]-R[1],S){case $h:case Jh:k&&(y=Math.max(M-a,Math.min(I-d,y)),c=a+y,p=d+y),T&&(g=Math.max(O-h,Math.min(L-m,g)),f=h+g,_=m+g);break;case tf:k<0?(y=Math.max(M-a,Math.min(I-a,y)),c=a+y,p=d):k>0&&(y=Math.max(M-d,Math.min(I-d,y)),c=a,p=d+y),T<0?(g=Math.max(O-h,Math.min(L-h,g)),f=h+g,_=m):T>0&&(g=Math.max(O-m,Math.min(L-m,g)),f=h,_=m+g);break;case ef:k&&(c=Math.max(M,Math.min(I,a-y*k)),p=Math.max(M,Math.min(I,d+y*k))),T&&(f=Math.max(O,Math.min(L,h-g*T)),_=Math.max(O,Math.min(L,m+g*T)))}p<c&&(k*=-1,t=a,a=d,d=t,t=c,c=p,p=t,x in af&&B.attr("cursor",sf[x=af[x]])),_<f&&(T*=-1,t=h,h=m,m=t,t=f,f=_,_=t,x in lf&&B.attr("cursor",sf[x=lf[x]])),C.selection&&(P=C.selection),b&&(c=P[0][0],p=P[1][0]),w&&(f=P[0][1],_=P[1][1]),P[0][0]===c&&P[0][1]===f&&P[1][0]===p&&P[1][1]===_||(C.selection=[[c,f],[p,_]],i.call(E),N.brush())}function s(){if(We(),t.event.touches){if(t.event.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500),j.on("touchmove.brush touchend.brush touchcancel.brush",null)}else gt(t.event.view,v),U.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),B.attr("cursor",sf.overlay),C.selection&&(P=C.selection),Ze(P)&&(C.selection=null,i.call(E)),N.end()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return Ke()}else if(l)return;if(u.apply(this,arguments)){var a,c,h,f,d,p,m,_,y,g,v,b,w,E=this,x=t.event.target.__data__.type,S="selection"===(t.event.metaKey?x="overlay":x)?Jh:t.event.altKey?ef:tf,k=e===rf?null:cf[x],T=e===nf?null:uf[x],C=Qe(E),A=C.extent,P=C.selection,M=A[0][0],O=A[0][1],I=A[1][0],L=A[1][1],D=k&&T&&t.event.shiftKey,R=dt(E),F=R,N=r(E,arguments).beforestart();"overlay"===x?C.selection=P=[[a=e===rf?M:R[0],h=e===nf?O:R[1]],[d=e===rf?I:a,m=e===nf?L:h]]:(a=P[0][0],h=P[0][1],d=P[1][0],m=P[1][1]),c=a,f=h,p=d,_=m;var j=lt(E).attr("pointer-events","none"),B=j.selectAll(".overlay").attr("cursor",sf[x]);if(t.event.touches)j.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",s,!0);else{var U=lt(t.event.view).on("keydown.brush",function(){switch(t.event.keyCode){case 16:D=k&&T;break;case 18:S===tf&&(k&&(d=p-y*k,a=c+y*k),T&&(m=_-g*T,h=f+g*T),S=ef,o());break;case 32:S!==tf&&S!==ef||(k<0?d=p-y:k>0&&(a=c-y),T<0?m=_-g:T>0&&(h=f-g),S=$h,B.attr("cursor",sf.selection),o());break;default:return}Ke()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:D&&(b=w=D=!1,o());break;case 18:S===ef&&(k<0?d=p:k>0&&(a=c),T<0?m=_:T>0&&(h=f),S=tf,o());break;case 32:S===$h&&(t.event.altKey?(k&&(d=p-y*k,a=c+y*k),T&&(m=_-g*T,h=f+g*T),S=ef):(k<0?d=p:k>0&&(a=c),T<0?m=_:T>0&&(h=f),S=tf),B.attr("cursor",sf[x]),o());break;default:return}Ke()},!0).on("mousemove.brush",n,!0).on("mouseup.brush",s,!0);yt(t.event.view)}We(),Oe(E),i.call(E),N.start()}}function a(){var t=this.__brush||{selection:null};return t.extent=c.apply(this,arguments),t.dim=e,t}var l,c=Xe,u=Ye,h=k(n,"start","brush","end"),f=6;return n.move=function(t,n){t.selection?t.on("start.brush",function(){r(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){
r(this,arguments).end()}).tween("brush",function(){function t(t){s.selection=1===t&&Ze(c)?null:u(t),i.call(o),a.brush()}var o=this,s=o.__brush,a=r(o,arguments),l=s.selection,c=e.input("function"==typeof n?n.apply(this,arguments):n,s.extent),u=ce(l,c);return l&&c?t:t(1)}):t.each(function(){var t=arguments,o=this.__brush,s=e.input("function"==typeof n?n.apply(this,t):n,o.extent),a=r(this,t).beforestart();Oe(this),o.selection=null==s||Ze(s)?null:s,i.call(this),a.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){rt(new function(t,e,n){this.target=t,this.type=e,this.selection=n}(n,t,e.output(this.state.selection)),h.apply,h,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(c="function"==typeof t?t:qe([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):c},n.filter=function(t){return arguments.length?(u="function"==typeof t?t:qe(!!t),n):u},n.handleSize=function(t){return arguments.length?(f=+t,n):f},n.on=function(){var t=h.on.apply(h,arguments);return t===h?n:t},n}function $e(t){return function(){return t}}function tn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function en(){return new tn}function nn(t){return t.source}function rn(t){return t.target}function on(t){return t.radius}function sn(t){return t.startAngle}function an(t){return t.endAngle}function ln(){}function cn(t,e){var n=new ln;if(t instanceof ln)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(i=t[r],r,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}function un(){return{}}function hn(t,e,n){t[e]=n}function fn(){return cn()}function dn(t,e,n){t.set(e,n)}function pn(){}function mn(t,e){var n=new pn;if(t instanceof pn)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}function _n(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function yn(t){function e(t,e){function n(){if(c)return xf;if(u)return u=!1,Ef;var e,n,i=a;if(t.charCodeAt(i)===Sf){for(;a++<s&&t.charCodeAt(a)!==Sf||t.charCodeAt(++a)===Sf;);return(e=a)>=s?c=!0:(n=t.charCodeAt(a++))===kf?u=!0:n===Tf&&(u=!0,t.charCodeAt(a)===kf&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<s;){if((n=t.charCodeAt(e=a++))===kf)u=!0;else if(n===Tf)u=!0,t.charCodeAt(a)===kf&&++a;else if(n!==o)continue;return t.slice(i,e)}return c=!0,t.slice(i,s)}var i,r=[],s=t.length,a=0,l=0,c=s<=0,u=!1;for(t.charCodeAt(s-1)===kf&&--s,t.charCodeAt(s-1)===Tf&&--s;(i=n())!==xf;){for(var h=[];i!==Ef&&i!==xf;)h.push(i),i=n();e&&null==(h=e(h,l++))||r.push(h)}return r}function n(e){return e.map(i).join(t)}function i(t){return null==t?"":r.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var r=new RegExp('["'+t+"\n\r]"),o=t.charCodeAt(0);return{parse:function(t,n){var i,r,o=e(t,function(t,e){return i?i(t,e-1):(r=t,void(i=n?function(t,e){var n=_n(t);return function(i,r){return e(n(i),r,t)}}(t,n):_n(t)))});return o.columns=r||[],o},parseRows:e,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}(e)),[n.map(i).join(t)].concat(e.map(function(e){return n.map(function(t){return i(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(n).join("\n")}}}function gn(t){return function(){return t}}function vn(){return 1e-6*(Math.random()-.5)}function bn(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,s,a,l,c,u,h,f,d=t._root,p={data:i},m=t._x0,_=t._y0,y=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(m+y)/2))?m=o:y=o,(u=n>=(s=(_+g)/2))?_=s:g=s,r=d,!(d=d[h=u<<1|c]))return r[h]=p,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&n===l)return p.next=d,r?r[h]=p:t._root=p,t;do r=r?r[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+y)/2))?m=o:y=o,(u=n>=(s=(_+g)/2))?_=s:g=s;while((h=u<<1|c)==(f=(l>=s)<<1|a>=o));return r[f]=d,r[h]=p,t}function wn(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function En(t){return t[0]}function xn(t){return t[1]}function Sn(t,e,n){var i=new kn(null==e?En:e,null==n?xn:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function kn(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Tn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function Cn(t){return t.x+t.vx}function An(t){return t.y+t.vy}function Pn(t){return t.index}function Mn(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function On(t){return t.x}function In(t){return t.y}function Ln(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Dn(t){return(t=Ln(Math.abs(t)))?t[1]:NaN}function Rn(t,e){var n=Ln(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array((-r)).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}function Fn(t){return new Nn(t)}function Nn(t){if(!(e=zf.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",o=e[4]||"",s=!!e[5],a=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";"n"===u?(l=!0,u="g"):Vf[u]||(u=""),(s||"0"===n&&"="===i)&&(s=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=o,this.zero=s,this.width=a,this.comma=l,this.precision=c,this.type=u}function jn(t){return t}function Bn(t){function e(t){function e(t){var e,i,s,u=_,b=y;if("c"===m)b=g(t)+b,t="";else{var w=(t=+t)<0;if(t=g(Math.abs(t),p),w&&0==+t&&(w=!1),u=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+u,b=("s"===m?qf[8+jf/3]:"")+b+(w&&"("===c?")":""),v)for(e=-1,i=t.length;++e<i;)if(48>(s=t.charCodeAt(e))||s>57){b=(46===s?r+t.slice(e+1):t.slice(e))+b,t=t.slice(0,e);break}}d&&!h&&(t=n(t,1/0));var E=u.length+t.length+b.length,x=E<f?new Array(f-E+1).join(a):"";switch(d&&h&&(t=n(x+t,x.length?f-b.length:1/0),x=""),l){case"<":t=u+t+b+x;break;case"=":t=u+x+t+b;break;case"^":t=x.slice(0,E=x.length>>1)+u+t+b+x.slice(E);break;default:t=x+u+t+b}return o(t)}var a=(t=Fn(t)).fill,l=t.align,c=t.sign,u=t.symbol,h=t.zero,f=t.width,d=t.comma,p=t.precision,m=t.type,_="$"===u?i[0]:"#"===u&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===u?i[1]:/[%p]/.test(m)?s:"",g=Vf[m],v=!m||/[defgprs%]/.test(m);return p=null==p?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}var n=t.grouping&&t.thousands?function(t,e){return function(n,i){for(var r=n.length,o=[],s=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):jn,i=t.currency,r=t.decimal,o=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):jn,s=t.percent||"%";return{format:e,formatPrefix:function(t,n){var i=e((t=Fn(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Dn(n)/3))),o=Math.pow(10,-r),s=qf[8+r/3];return function(t){return i(o*t)+s}}}}function Un(e){return Hf=Bn(e),t.format=Hf.format,t.formatPrefix=Hf.formatPrefix,Hf}function Vn(t){return Math.max(0,-Dn(Math.abs(t)))}function zn(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Dn(e)/3)))-Dn(Math.abs(t)))}function Hn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Dn(e)-Dn(t))+1}function qn(){return new Wn}function Wn(){this.reset()}function Kn(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}function Gn(t){return t>1?0:t<-1?kd:Math.acos(t)}function Yn(t){return t>1?Td:t<-1?-Td:Math.asin(t)}function Xn(t){return(t=Bd(t/2))*t}function Qn(){}function Zn(t,e){t&&qd.hasOwnProperty(t.type)&&qd[t.type](t,e)}function Jn(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function $n(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Jn(t[n],e,1);e.polygonEnd()}function ti(t,e){t&&Hd.hasOwnProperty(t.type)?Hd[t.type](t,e):Zn(t,e)}function ei(){Gd.point=ii}function ni(){ri(Wf,Kf)}function ii(t,e){Gd.point=ri,Wf=t,Kf=e,Gf=t*=Md,Yf=Dd(e=(e*=Md)/2+Cd),Xf=Bd(e)}function ri(t,e){e=(e*=Md)/2+Cd;var n=(t*=Md)-Gf,i=n>=0?1:-1,r=i*n,o=Dd(e),s=Bd(e),a=Xf*s,l=Yf*o+a*Dd(r),c=a*i*Bd(r);Wd.add(Ld(c,l)),Gf=t,Yf=o,Xf=s}function oi(t){return[Ld(t[1],t[0]),Yn(t[2])]}function si(t){var e=t[0],n=t[1],i=Dd(n);return[i*Dd(e),i*Bd(e),Bd(n)]}function ai(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function li(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ci(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ui(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function hi(t){var e=Vd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function fi(t,e){rd.push(od=[Qf=t,Jf=t]),e<Zf&&(Zf=e),e>$f&&($f=e)}function di(t,e){var n=si([t*Md,e*Md]);if(id){var i=li(id,n),r=li([i[1],-i[0],0],i);hi(r),r=oi(r);var o,s=t-td,a=s>0?1:-1,l=r[0]*Pd*a,c=Od(s)>180;c^(a*td<l&&l<a*t)?(o=r[1]*Pd)>$f&&($f=o):(l=(l+360)%360-180,c^(a*td<l&&l<a*t)?(o=-r[1]*Pd)<Zf&&(Zf=o):(e<Zf&&(Zf=e),e>$f&&($f=e))),c?t<td?vi(Qf,t)>vi(Qf,Jf)&&(Jf=t):vi(t,Jf)>vi(Qf,Jf)&&(Qf=t):Jf>=Qf?(t<Qf&&(Qf=t),t>Jf&&(Jf=t)):t>td?vi(Qf,t)>vi(Qf,Jf)&&(Jf=t):vi(t,Jf)>vi(Qf,Jf)&&(Qf=t)}else rd.push(od=[Qf=t,Jf=t]);e<Zf&&(Zf=e),e>$f&&($f=e),id=n,td=t}function pi(){Xd.point=di}function mi(){od[0]=Qf,od[1]=Jf,Xd.point=fi,id=null}function _i(t,e){if(id){var n=t-td;Yd.add(Od(n)>180?n+(n>0?360:-360):n)}else ed=t,nd=e;Gd.point(t,e),di(t,e)}function yi(){Gd.lineStart()}function gi(){_i(ed,nd),Gd.lineEnd(),Od(Yd)>xd&&(Qf=-(Jf=180)),od[0]=Qf,od[1]=Jf,id=null}function vi(t,e){return(e-=t)<0?e+360:e}function bi(t,e){return t[0]-e[0]}function wi(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Ei(t,e){t*=Md;var n=Dd(e*=Md);xi(n*Dd(t),n*Bd(t),Bd(e))}function xi(t,e,n){ld+=(t-ld)/++sd,cd+=(e-cd)/sd,ud+=(n-ud)/sd}function Si(){Qd.point=ki}function ki(t,e){t*=Md;var n=Dd(e*=Md);vd=n*Dd(t),bd=n*Bd(t),wd=Bd(e),Qd.point=Ti,xi(vd,bd,wd)}function Ti(t,e){t*=Md;var n=Dd(e*=Md),i=n*Dd(t),r=n*Bd(t),o=Bd(e),s=Ld(Vd((s=bd*o-wd*r)*s+(s=wd*i-vd*o)*s+(s=vd*r-bd*i)*s),vd*i+bd*r+wd*o);ad+=s,hd+=s*(vd+(vd=i)),fd+=s*(bd+(bd=r)),dd+=s*(wd+(wd=o)),xi(vd,bd,wd)}function Ci(){Qd.point=Ei}function Ai(){Qd.point=Mi}function Pi(){Oi(yd,gd),Qd.point=Ei}function Mi(t,e){yd=t,gd=e,t*=Md,e*=Md,Qd.point=Oi;var n=Dd(e);vd=n*Dd(t),bd=n*Bd(t),wd=Bd(e),xi(vd,bd,wd)}function Oi(t,e){t*=Md;var n=Dd(e*=Md),i=n*Dd(t),r=n*Bd(t),o=Bd(e),s=bd*o-wd*r,a=wd*i-vd*o,l=vd*r-bd*i,c=Vd(s*s+a*a+l*l),u=Yn(c),h=c&&-u/c;pd+=h*s,md+=h*a,_d+=h*l,ad+=u,hd+=u*(vd+(vd=i)),fd+=u*(bd+(bd=r)),dd+=u*(wd+(wd=o)),xi(vd,bd,wd)}function Ii(t){return function(){return t}}function Li(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Di(t,e){return[t>kd?t-Ad:t<-kd?t+Ad:t,e]}function Ri(t,e,n){return(t%=Ad)?e||n?Li(Ni(t),ji(e,n)):Ni(t):e||n?ji(e,n):Di}function Fi(t){return function(e,n){return e+=t,[e>kd?e-Ad:e<-kd?e+Ad:e,n]}}function Ni(t){var e=Fi(t);return e.invert=Fi(-t),e}function ji(t,e){function n(t,e){var n=Dd(e),a=Dd(t)*n,l=Bd(t)*n,c=Bd(e),u=c*i+a*r;return[Ld(l*o-u*s,a*i-c*r),Yn(u*o+l*s)]}var i=Dd(t),r=Bd(t),o=Dd(e),s=Bd(e);return n.invert=function(t,e){var n=Dd(e),a=Dd(t)*n,l=Bd(t)*n,c=Bd(e),u=c*o-l*s;return[Ld(l*o+c*s,a*i+u*r),Yn(u*i-a*r)]},n}function Bi(t){function e(e){return e=t(e[0]*Md,e[1]*Md),e[0]*=Pd,e[1]*=Pd,e}return t=Ri(t[0]*Md,t[1]*Md,t.length>2?t[2]*Md:0),e.invert=function(e){return e=t.invert(e[0]*Md,e[1]*Md),e[0]*=Pd,e[1]*=Pd,e},e}function Ui(t,e,n,i,r,o){if(n){var s=Dd(e),a=Bd(e),l=i*n;null==r?(r=e+i*Ad,o=e-l/2):(r=Vi(s,r),o=Vi(s,o),(i>0?r<o:r>o)&&(r+=i*Ad));for(var c,u=r;i>0?u>o:u<o;u-=l)c=oi([s,-a*Dd(u),-a*Bd(u)]),t.point(c[0],c[1])}}function Vi(t,e){(e=si(e))[0]-=t,hi(e);var n=Gn(-e[1]);return((-e[2]<0?-n:n)+Ad-xd)%Ad}function zi(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Qn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Hi(t,e){return Od(t[0]-e[0])<xd&&Od(t[1]-e[1])<xd}function qi(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Wi(t,e,n,i,r){var o,s,a=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(Hi(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new qi(i,t,null,(!0))),l.push(n.o=new qi(i,null,n,(!1))),a.push(n=new qi(s,t,null,(!1))),l.push(n.o=new qi(s,null,n,(!0)))}}),a.length){for(l.sort(e),Ki(a),Ki(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var c,u,h=a[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,s=c.length;o<s;++o)r.point((u=c[o])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(c=f.p.z,o=c.length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);r.lineEnd()}}}function Ki(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Gi(t,e){var n=e[0],i=e[1],r=[Bd(n),-Dd(n),0],o=0,s=0;lp.reset();for(var a=0,l=t.length;a<l;++a)if(u=(c=t[a]).length)for(var c,u,h=c[u-1],f=h[0],d=h[1]/2+Cd,p=Bd(d),m=Dd(d),_=0;_<u;++_,f=g,p=b,m=w,h=y){var y=c[_],g=y[0],v=y[1]/2+Cd,b=Bd(v),w=Dd(v),E=g-f,x=E>=0?1:-1,S=x*E,k=S>kd,T=p*b;if(lp.add(Ld(T*x*Bd(S),m*w+T*Dd(S))),o+=k?E+x*Ad:E,k^f>=n^g>=n){var C=li(si(h),si(y));hi(C);var A=li(r,C);hi(A);var P=(k^E>=0?-1:1)*Yn(A[2]);(i>P||i===P&&(C[0]||C[1]))&&(s+=k^E>=0?1:-1)}}return(o<-xd||o<xd&&lp<-xd)^1&s}function Yi(t,e,n,i){return function(r){function o(e,n){t(e,n)&&r.point(e,n)}function s(t,e){m.point(t,e)}function a(){b.point=s,m.lineStart()}function l(){b.point=o,m.lineEnd()}function c(t,e){p.push([t,e]),g.point(t,e)}function u(){g.lineStart(),p=[]}function h(){c(p[0][0],p[0][1]),g.lineEnd();var t,e,n,i,o=g.clean(),s=y.result(),a=s.length;if(p.pop(),f.push(p),p=null,a)if(1&o){if(n=s[0],(e=n.length-1)>0){for(v||(r.polygonStart(),v=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else a>1&&2&o&&s.push(s.pop().concat(s.shift())),d.push(s.filter(Xi))}var f,d,p,m=e(r),y=zi(),g=e(y),v=!1,b={point:o,lineStart:a,lineEnd:l,polygonStart:function(){b.point=c,b.lineStart=u,b.lineEnd=h,d=[],f=[]},polygonEnd:function(){b.point=o,b.lineStart=a,b.lineEnd=l,d=_(d);var t=Gi(f,i);d.length?(v||(r.polygonStart(),v=!0),Wi(d,Qi,t,n,r)):t&&(v||(r.polygonStart(),v=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),v&&(r.polygonEnd(),v=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};return b}}function Xi(t){return t.length>1}function Qi(t,e){return((t=t.x)[0]<0?t[1]-Td-xd:Td-t[1])-((e=e.x)[0]<0?e[1]-Td-xd:Td-e[1])}function Zi(t){function e(t,e){return Dd(t)*Dd(e)>r}function n(t,e,n){var i=[1,0,0],o=li(si(t),si(e)),s=ai(o,o),a=o[0],l=s-a*a;if(!l)return!n&&t;var c=r*s/l,u=-r*a/l,h=li(i,o),f=ui(i,c);ci(f,ui(o,u));var d=h,p=ai(f,d),m=ai(d,d),_=p*p-m*(ai(f,f)-1);if(!(_<0)){var y=Vd(_),g=ui(d,(-p-y)/m);if(ci(g,f),g=oi(g),!n)return g;var v,b=t[0],w=e[0],E=t[1],x=e[1];w<b&&(v=b,b=w,w=v);var S=w-b,k=Od(S-kd)<xd;if(!k&&x<E&&(v=E,E=x,x=v),k||S<xd?k?E+x>0^g[1]<(Od(g[0]-b)<xd?E:x):E<=g[1]&&g[1]<=x:S>kd^(b<=g[0]&&g[0]<=w)){var T=ui(d,(-p+y)/m);return ci(T,f),[g,oi(T)]}}}function i(e,n){var i=s?t:kd-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var r=Dd(t),o=6*Md,s=r>0,a=Od(r)>xd;return Yi(e,function(t){var r,o,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,f){var d,p=[h,f],m=e(h,f),_=s?m?0:i(h,f):m?i(h+(h<0?kd:-kd),f):0;if(!r&&(c=l=m)&&t.lineStart(),m!==l&&(!(d=n(r,p))||Hi(r,d)||Hi(p,d))&&(p[0]+=xd,p[1]+=xd,m=e(p[0],p[1])),m!==l)u=0,m?(t.lineStart(),d=n(p,r),t.point(d[0],d[1])):(d=n(r,p),t.point(d[0],d[1]),t.lineEnd()),r=d;else if(a&&r&&s^m){var y;_&o||!(y=n(p,r,!0))||(u=0,s?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||r&&Hi(r,p)||t.point(p[0],p[1]),r=p,l=m,o=_},lineEnd:function(){l&&t.lineEnd(),r=null},clean:function(){return u|(c&&l)<<1}}},function(e,n,i,r){Ui(r,t,o,i,e,n)},s?[0,-t]:[-kd,t-kd])}function Ji(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,c){var u=0,h=0;if(null==r||(u=s(r,a))!==(h=s(o,a))||l(r,o)<0^a>0){do c.point(0===u||3===u?t:n,u>1?i:e);while((u=(u+a+4)%4)!==h)}else c.point(o[0],o[1])}function s(i,r){return Od(i[0]-t)<xd?r>0?0:3:Od(i[0]-n)<xd?r>0?2:1:Od(i[1]-e)<xd?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t,e){r(t,e)&&E.point(t,e)}function c(o,s){var a=r(o,s);if(h&&f.push([o,s]),b)d=o,p=s,m=a,b=!1,a&&(E.lineStart(),E.point(o,s));else if(a&&v)E.point(o,s);else{var l=[y=Math.max(hp,Math.min(up,y)),g=Math.max(hp,Math.min(up,g))],c=[o=Math.max(hp,Math.min(up,o)),s=Math.max(hp,Math.min(up,s))];!function(t,e,n,i,r,o){var s,a=t[0],l=t[1],c=0,u=1,h=e[0]-a,f=e[1]-l;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<c)return;s<u&&(u=s)}else if(h>0){if(s>u)return;s>c&&(c=s)}if(s=r-a,h||!(s<0)){if(s/=h,h<0){if(s>u)return;s>c&&(c=s)}else if(h>0){if(s<c)return;s<u&&(u=s)}if(s=i-l,f||!(s>0)){if(s/=f,f<0){if(s<c)return;s<u&&(u=s)}else if(f>0){if(s>u)return;s>c&&(c=s)}if(s=o-l,f||!(s<0)){if(s/=f,f<0){if(s>u)return;s>c&&(c=s)}else if(f>0){if(s<c)return;s<u&&(u=s)}return c>0&&(t[0]=a+c*h,t[1]=l+c*f),u<1&&(e[0]=a+u*h,e[1]=l+u*f),!0}}}}}(l,c,t,e,n,i)?a&&(E.lineStart(),E.point(o,s),w=!1):(v||(E.lineStart(),E.point(l[0],l[1])),E.point(c[0],c[1]),a||E.lineEnd(),w=!1)}y=o,g=s,v=a}var u,h,f,d,p,m,y,g,v,b,w,E=s,x=zi(),S={point:l,lineStart:function(){S.point=c,h&&h.push(f=[]),b=!0,v=!1,y=g=NaN},lineEnd:function(){u&&(c(d,p),m&&v&&x.rejoin(),u.push(x.result())),S.point=l,v&&E.lineEnd()},polygonStart:function(){E=x,u=[],h=[],w=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=h.length;n<r;++n)for(var o,s,a=h[n],l=1,c=a.length,u=a[0],f=u[0],d=u[1];l<c;++l)o=f,s=d,f=(u=a[l])[0],d=u[1],s<=i?d>i&&(f-o)*(i-s)>(d-s)*(t-o)&&++e:d<=i&&(f-o)*(i-s)<(d-s)*(t-o)&&--e;return e}(),n=w&&e,r=(u=_(u)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&Wi(u,a,e,o,s),s.polygonEnd()),E=s,u=h=f=null}};return S}}function $i(){dp.point=dp.lineEnd=Qn}function tr(t,e){Zd=t*=Md,Jd=Bd(e*=Md),$d=Dd(e),dp.point=er}function er(t,e){t*=Md;var n=Bd(e*=Md),i=Dd(e),r=Od(t-Zd),o=Dd(r),s=i*Bd(r),a=$d*n-Jd*i*o,l=Jd*n+$d*i*o;fp.add(Ld(Vd(s*s+a*a),l)),Zd=t,Jd=n,$d=i}function nr(t){return fp.reset(),ti(t,dp),+fp}function ir(t,e){return pp[0]=t,pp[1]=e,nr(mp)}function rr(t,e){return!(!t||!yp.hasOwnProperty(t.type))&&yp[t.type](t,e)}function or(t,e){return 0===ir(t,e)}function sr(t,e){var n=ir(t[0],t[1]);return ir(t[0],e)+ir(e,t[1])<=n+xd}function ar(t,e){return!!Gi(t.map(lr),cr(e))}function lr(t){return(t=t.map(cr)).pop(),t}function cr(t){return[t[0]*Md,t[1]*Md]}function ur(t,e,n){var i=u(t,e-xd,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function hr(t,e,n){var i=u(t,e-xd,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function fr(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return u(Rd(o/y)*y,r,y).map(d).concat(u(Rd(c/g)*g,l,g).map(p)).concat(u(Rd(i/m)*m,n,m).filter(function(t){return Od(t%y)>xd}).map(h)).concat(u(Rd(a/_)*_,s,_).filter(function(t){return Od(t%g)>xd}).map(f))}var n,i,r,o,s,a,l,c,h,f,d,p,m=10,_=m,y=90,g=360,v=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(p(l).slice(1),d(r).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],c=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),c>l&&(e=c,c=l,l=e),t.precision(v)):[[o,c],[r,l]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(v)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(y=+e[0],g=+e[1],t):[y,g]},t.stepMinor=function(e){return arguments.length?(m=+e[0],_=+e[1],t):[m,_]},t.precision=function(e){return arguments.length?(v=+e,h=ur(a,s,90),f=hr(i,n,v),d=ur(c,l,90),p=hr(o,r,v),t):v},t.extentMajor([[-180,-90+xd],[180,90-xd]]).extentMinor([[-180,-80-xd],[180,80+xd]])}function dr(t){return t}function pr(){bp.point=mr}function mr(t,e){bp.point=_r,tp=np=t,ep=ip=e}function _r(t,e){vp.add(ip*t-np*e),np=t,ip=e}function yr(){_r(tp,ep)}function gr(t,e){Tp+=t,Cp+=e,++Ap}function vr(){Rp.point=br}function br(t,e){Rp.point=wr,gr(sp=t,ap=e)}function wr(t,e){var n=t-sp,i=e-ap,r=Vd(n*n+i*i);Pp+=r*(sp+t)/2,Mp+=r*(ap+e)/2,Op+=r,gr(sp=t,ap=e)}function Er(){Rp.point=gr}function xr(){Rp.point=kr}function Sr(){Tr(rp,op)}function kr(t,e){Rp.point=Tr,gr(rp=sp=t,op=ap=e)}function Tr(t,e){var n=t-sp,i=e-ap,r=Vd(n*n+i*i);Pp+=r*(sp+t)/2,Mp+=r*(ap+e)/2,Op+=r,Ip+=(r=ap*t-sp*e)*(sp+t),Lp+=r*(ap+e),Dp+=3*r,gr(sp=t,ap=e)}function Cr(t){this._context=t}function Ar(t,e){zp.point=Pr,Np=Bp=t,jp=Up=e}function Pr(t,e){Bp-=t,Up-=e,Vp.add(Vd(Bp*Bp+Up*Up)),Bp=t,Up=e}function Mr(){this._string=[]}function Or(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ir(t){return function(e){var n=new Lr;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Lr(){}function Dr(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),ti(n,t.stream(kp)),e(kp.result()),null!=i&&t.clipExtent(i),t}function Rr(t,e,n){return Dr(t,function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),s=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])},n)}function Fr(t,e,n){return Rr(t,[[0,0],e],n)}function Nr(t,e,n){return Dr(t,function(n){var i=+e,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,s=-r*n[0][1];t.scale(150*r).translate([o,s])},n)}function jr(t,e,n){return Dr(t,function(n){var i=+e,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],s=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,s])},n)}function Br(t,e){return+e?function(t,e){function n(i,r,o,s,a,l,c,u,h,f,d,p,m,_){var y=c-i,g=u-r,v=y*y+g*g;if(v>4*e&&m--){var b=s+f,w=a+d,E=l+p,x=Vd(b*b+w*w+E*E),S=Yn(E/=x),k=Od(Od(E)-1)<xd||Od(o-h)<xd?(o+h)/2:Ld(w,b),T=t(k,S),C=T[0],A=T[1],P=C-i,M=A-r,O=g*P-y*M;(O*O/v>e||Od((y*P+g*M)/v-.5)>.3||s*f+a*d+l*p<qp)&&(n(i,r,o,s,a,l,C,A,k,b/=x,w/=x,E,m,_),_.point(C,A),n(C,A,k,b,w,E,c,u,h,f,d,p,m,_))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){y=NaN,E.point=o,e.lineStart()}function o(i,r){var o=si([i,r]),s=t(i,r);n(y,g,_,v,b,w,y=s[0],g=s[1],_=i,v=o[0],b=o[1],w=o[2],Hp,e),e.point(y,g)}function s(){E.point=i,e.lineEnd()}function a(){r(),E.point=l,E.lineEnd=c}function l(t,e){o(u=t,e),h=y,f=g,d=v,p=b,m=w,E.point=o}function c(){n(y,g,_,v,b,w,h,f,u,d,p,m,Hp,e),E.lineEnd=s,s()}var u,h,f,d,p,m,_,y,g,v,b,w,E={point:i,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),E.lineStart=a},polygonEnd:function(){e.polygonEnd(),E.lineStart=r}};return E}}(t,e):function(t){return Ir({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}function Ur(t){return Vr(function(){return t})()}function Vr(t){function e(t){return t=c(t[0]*Md,t[1]*Md),[t[0]*m+s,a-t[1]*m]}function n(t,e){return t=o(t,e),[t[0]*m+s,a-t[1]*m]}function i(){c=Li(l=Ri(b,w,E),o);var t=o(g,v);return s=_-t[0]*m,a=y+t[1]*m,r()}function r(){return d=p=null,e}var o,s,a,l,c,u,h,f,d,p,m=150,_=480,y=250,g=0,v=0,b=0,w=0,E=0,x=null,S=cp,k=null,T=dr,C=.5,A=Br(n,C);return e.stream=function(t){return d&&p===t?d:d=Wp(function(t){return Ir({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(l)(S(A(T(p=t)))))},e.preclip=function(t){return arguments.length?(S=t,x=void 0,r()):S},e.postclip=function(t){return arguments.length?(T=t,k=u=h=f=null,r()):T},e.clipAngle=function(t){return arguments.length?(S=+t?Zi(x=t*Md):(x=null,cp),r()):x*Pd},e.clipExtent=function(t){return arguments.length?(T=null==t?(k=u=h=f=null,dr):Ji(k=+t[0][0],u=+t[0][1],h=+t[1][0],f=+t[1][1]),r()):null==k?null:[[k,u],[h,f]]},e.scale=function(t){return arguments.length?(m=+t,i()):m},e.translate=function(t){return arguments.length?(_=+t[0],y=+t[1],i()):[_,y]},e.center=function(t){return arguments.length?(g=t[0]%360*Md,v=t[1]%360*Md,i()):[g*Pd,v*Pd]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Md,w=t[1]%360*Md,E=t.length>2?t[2]%360*Md:0,i()):[b*Pd,w*Pd,E*Pd]},e.precision=function(t){return arguments.length?(A=Br(n,C=t*t),r()):Vd(C)},e.fitExtent=function(t,n){return Rr(e,t,n)},e.fitSize=function(t,n){return Fr(e,t,n)},e.fitWidth=function(t,n){return Nr(e,t,n)},e.fitHeight=function(t,n){return jr(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-s)/m,(a-t[1])/m))&&[t[0]*Pd,t[1]*Pd]},i()}}function zr(t){var e=0,n=kd/3,i=Vr(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Md,n=t[1]*Md):[e*Pd,n*Pd]},r}function Hr(t,e){function n(t,e){var n=Vd(o-2*r*Bd(e))/r;return[n*Bd(t*=r),s-n*Dd(t)]}var i=Bd(t),r=(i+Bd(e))/2;if(Od(r)<xd)return function(t){function e(t,e){return[t*n,Bd(e)/n]}var n=Dd(t);return e.invert=function(t,e){return[t/n,Yn(e*n)]},e}(t);var o=1+i*(2*r-i),s=Vd(o)/r;return n.invert=function(t,e){var n=s-e;return[Ld(t,Od(n))/r*Ud(n),Yn((o-(t*t+n*n)*r*r)/(2*r))]},n}function qr(){return zr(Hr).scale(155.424).center([0,33.6442])}function Wr(){return qr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Kr(t){return function(e,n){var i=Dd(e),r=Dd(n),o=t(i*r);return[o*r*Bd(e),o*Bd(n)]}}function Gr(t){return function(e,n){var i=Vd(e*e+n*n),r=t(i),o=Bd(r),s=Dd(r);return[Ld(e*o,i*s),Yn(i&&n*o/i)]}}function Yr(t,e){return[t,Nd(zd((Td+e)/2))]}function Xr(t){function e(){var e=kd*a(),s=o(Bi(o.rotate()).invert([0,0]));return c(null==u?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===Yr?[[Math.max(s[0]-e,u),n],[Math.min(s[0]+e,i),r]]:[[u,Math.max(s[1]-e,n)],[i,Math.min(s[1]+e,r)]])}var n,i,r,o=Ur(t),s=o.center,a=o.scale,l=o.translate,c=o.clipExtent,u=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(l(t),e()):l()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?u=n=i=r=null:(u=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),e()):null==u?null:[[u,n],[i,r]]},e()}function Qr(t){return zd((Td+t)/2)}function Zr(t,e){function n(t,e){o>0?e<-Td+xd&&(e=-Td+xd):e>Td-xd&&(e=Td-xd);var n=o/jd(Qr(e),r);return[n*Bd(r*t),o-n*Dd(r*t)]}var i=Dd(t),r=t===e?Bd(t):Nd(i/Dd(e))/Nd(Qr(e)/Qr(t)),o=i*jd(Qr(t),r)/r;return r?(n.invert=function(t,e){var n=o-e,i=Ud(r)*Vd(t*t+n*n);return[Ld(t,Od(n))/r*Ud(n),2*Id(jd(o/i,1/r))-Td]},n):Yr}function Jr(t,e){return[t,e]}function $r(t,e){function n(t,e){var n=o-e,i=r*t;return[n*Bd(i),o-n*Dd(i)]}var i=Dd(t),r=t===e?Bd(t):(i-Dd(e))/(e-t),o=i/r+t;return Od(r)<xd?Jr:(n.invert=function(t,e){var n=o-e;return[Ld(t,Od(n))/r*Ud(n),o-Ud(r)*Vd(t*t+n*n)]},n)}function to(t,e){var n=Dd(e),i=Dd(t)*n;return[n*Bd(t)/i,Bd(e)/i]}function eo(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?dr:Ir({point:function(r,o){this.stream.point(r*t+n,o*e+i)}})}function no(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function io(t,e){return[Dd(e)*Bd(t),Bd(e)]}function ro(t,e){var n=Dd(e),i=1+Dd(t)*n;return[n*Bd(t)/i,Bd(e)/i]}function oo(t,e){return[Nd(zd((Td+e)/2)),-t]}function so(t,e){return t.parent===e.parent?1:2}function ao(t,e){return t+e.x}function lo(t,e){return Math.max(t,e.y)}function co(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function uo(t,e){var n,i,r,o,s,a=new mo(t),l=+t.value&&(a.value=t.value),c=[a];for(null==e&&(e=ho);n=c.pop();)if(l&&(n.value=+n.data.value),(r=e(n.data))&&(s=r.length))for(n.children=new Array(s),o=s-1;o>=0;--o)c.push(i=n.children[o]=new mo(r[o])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(po)}function ho(t){return t.children}function fo(t){t.data=t.data.data}function po(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function mo(t){this.data=t,this.depth=this.height=0,this.parent=null}function _o(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Yp.call(t))).length,o=[];i<r;)e=t[i],n&&go(n,e)?++i:(n=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return bo(t[0],t[1]);case 3:return wo(t[0],t[1],t[2])}}(o=function(t,e){var n,i;if(vo(e,t))return[e];for(n=0;n<t.length;++n)if(yo(e,t[n])&&vo(bo(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(yo(bo(t[n],t[i]),e)&&yo(bo(t[n],e),t[i])&&yo(bo(t[i],e),t[n])&&vo(wo(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}(o,e)),i=0);return n}function yo(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function go(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function vo(t,e){for(var n=0;n<e.length;++n)if(!go(t,e[n]))return!1;return!0}function bo(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,s=e.y,a=e.r,l=o-n,c=s-i,u=a-r,h=Math.sqrt(l*l+c*c);return{x:(n+o+l/h*u)/2,y:(i+s+c/h*u)/2,r:(h+r+a)/2}}function wo(t,e,n){var i=t.x,r=t.y,o=t.r,s=e.x,a=e.y,l=e.r,c=n.x,u=n.y,h=n.r,f=i-s,d=i-c,p=r-a,m=r-u,_=l-o,y=h-o,g=i*i+r*r-o*o,v=g-s*s-a*a+l*l,b=g-c*c-u*u+h*h,w=d*p-f*m,E=(p*b-m*v)/(2*w)-i,x=(m*_-p*y)/w,S=(d*v-f*b)/(2*w)-r,k=(f*y-d*_)/w,T=x*x+k*k-1,C=2*(o+E*x+S*k),A=E*E+S*S-o*o,P=-(T?(C+Math.sqrt(C*C-4*T*A))/(2*T):A/C);return{x:i+E+x*P,y:r+S+k*P,r:P}}function Eo(t,e,n){var i=t.x,r=t.y,o=e.r+n.r,s=t.r+n.r,a=e.x-i,l=e.y-r,c=a*a+l*l;if(c){var u=.5+((s*=s)-(o*=o))/(2*c),h=Math.sqrt(Math.max(0,2*o*(s+c)-(s-=c)*s-o*o))/(2*c);n.x=i+u*a+h*l,n.y=r+u*l-h*a}else n.x=i+s,n.y=r}function xo(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-1e-6>n*n+i*i}function So(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return r*r+o*o}function ko(t){this._=t,this.next=null,this.previous=null}function To(t){if(!(r=t.length))return 0;var e,n,i,r,o,s,a,l,c,u,h;if(e=t[0],e.x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;Eo(n,e,i=t[2]),e=new ko(e),n=new ko(n),i=new ko(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(a=3;a<r;++a){Eo(e._,n._,i=t[a]),i=new ko(i),l=n.next,c=e.previous,u=n._.r,h=e._.r;do if(u<=h){if(xo(l._,i._)){n=l,e.next=n,n.previous=e,--a;continue t}u+=l._.r,l=l.next}else{if(xo(c._,i._)){(e=c).next=n,n.previous=e,--a;continue t}h+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,o=So(e);(i=i.next)!==n;)(s=So(i))<o&&(e=i,o=s);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=_o(e),a=0;a<r;++a)e=t[a],e.x-=i.x,e.y-=i.y;return i.r}function Co(t){if("function"!=typeof t)throw new Error;return t}function Ao(){return 0}function Po(t){return function(){return t}}function Mo(t){return Math.sqrt(t.value)}function Oo(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Io(t,e){return function(n){if(i=n.children){var i,r,o,s=i.length,a=t(n)*e||0;if(a)for(r=0;r<s;++r)i[r].r+=a;if(o=To(i),a)for(r=0;r<s;++r)i[r].r-=a;n.r=o+a}}}function Lo(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y);
}}function Do(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Ro(t,e,n,i,r){for(var o,s=t.children,a=-1,l=s.length,c=t.value&&(i-e)/t.value;++a<l;)(o=s[a]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*c}function Fo(t){return t.id}function No(t){return t.parentId}function jo(t,e){return t.parent===e.parent?1:2}function Bo(t){var e=t.children;return e?e[0]:t.t}function Uo(t){var e=t.children;return e?e[e.length-1]:t.t}function Vo(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function zo(t,e,n){return t.a.parent===e.parent?t.a:n}function Ho(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function qo(t,e,n,i,r){for(var o,s=t.children,a=-1,l=s.length,c=t.value&&(r-n)/t.value;++a<l;)(o=s[a]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*c}function Wo(t,e,n,i,r,o){for(var s,a,l,c,u,h,f,d,p,m,_,y=[],g=e.children,v=0,b=0,w=g.length,E=e.value;v<w;){l=r-n,c=o-i;do u=g[b++].value;while(!u&&b<w);for(h=f=u,_=u*u*(m=Math.max(c/l,l/c)/(E*t)),p=Math.max(f/_,_/h);b<w;++b){if(u+=a=g[b].value,a<h&&(h=a),a>f&&(f=a),_=u*u*m,(d=Math.max(f/_,_/h))>p){u-=a;break}p=d}y.push(s={value:u,dice:l<c,children:g.slice(v,b)}),s.dice?Ro(s,n,i,r,E?i+=c*u/E:o):qo(s,n,i,E?n+=l*u/E:r,o),E-=u,v=b}return y}function Ko(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Go(t,e){return t[0]-e[0]||t[1]-e[1]}function Yo(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;++r){for(;i>1&&Ko(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Xo(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Qo(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,r=n[i];n[i]=function(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Zo(t,n):(t._data[e]=i,t._waiting?Qo(t):Jo(t))))}}(t,e),--t._waiting,++t._active,n=r.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||nm)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])Zo(t,e);else if(!t._data)throw e}}function Zo(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,Jo(t)}function Jo(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function $o(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new Xo(t)}function ts(){return Math.random()}function es(t,e){function n(t){var e,n=c.status;if(!n&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||n>=200&&n<300||304===n){if(o)try{e=o.call(i,c)}catch(t){return void a.call("error",i,t)}else e=c;a.call("load",i,e)}else a.call("error",i,t)}var i,r,o,s,a=k("beforesend","progress","load","error"),l=cn(),c=new XMLHttpRequest,u=null,h=null,f=0;if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=n:c.onreadystatechange=function(t){c.readyState>3&&n(t)},c.onprogress=function(t){a.call("progress",i,t)},i={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),i)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",i):r},responseType:function(t){return arguments.length?(s=t,i):s},timeout:function(t){return arguments.length?(f=+t,i):f},user:function(t){return arguments.length<1?u:(u=null==t?null:t+"",i)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",i)},response:function(t){return o=t,i},get:function(t,e){return i.send("GET",t,e)},post:function(t,e){return i.send("POST",t,e)},send:function(e,n,o){return c.open(e,t,!0,u,h),null==r||l.has("accept")||l.set("accept",r+",*/*"),c.setRequestHeader&&l.each(function(t,e){c.setRequestHeader(e,t)}),null!=r&&c.overrideMimeType&&c.overrideMimeType(r),null!=s&&(c.responseType=s),f>0&&(c.timeout=f),null==o&&"function"==typeof n&&(o=n,n=null),null!=o&&1===o.length&&(o=function(t){return function(e,n){t(null==e?n:null)}}(o)),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),a.call("beforesend",i,c),c.send(null==n?null:n),i},abort:function(){return c.abort(),i},on:function(){var t=a.on.apply(a,arguments);return t===a?i:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return i.get(e)}return i}function ns(t,e){return function(n,i){var r=es(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return r.get(i)}return r}}function is(t,e){return function(n,i,r){arguments.length<3&&(r=i,i=null);var o=es(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(function(t,e){return function(n){return t(n.responseText,e)}}(e,i=t)):i},o.row(i),r?o.get(r):o}}function rs(t){function e(e){var o=e+"",s=n.get(o);if(!s){if(r!==gm)return r;n.set(o,s=i.push(e))}return t[(s-1)%t.length]}var n=cn(),i=[],r=gm;return t=null==t?[]:ym.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],n=cn();for(var r,o,s=-1,a=t.length;++s<a;)n.has(o=(r=t[s])+"")||n.set(o,i.push(r));return e},e.range=function(n){return arguments.length?(t=ym.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(r=t,e):r},e.copy=function(){return rs().domain(i).range(t).unknown(r)},e}function os(){function t(){var t=r().length,i=s[1]<s[0],f=s[i-0],d=s[1-i];e=(d-f)/Math.max(1,t-l+2*c),a&&(e=Math.floor(e)),f+=(d-f-e*(t-l))*h,n=e*(1-l),a&&(f=Math.round(f),n=Math.round(n));var p=u(t).map(function(t){return f+e*t});return o(i?p.reverse():p)}var e,n,i=rs().unknown(void 0),r=i.domain,o=i.range,s=[0,1],a=!1,l=0,c=0,h=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(r(e),t()):r()},i.range=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s.slice()},i.rangeRound=function(e){return s=[+e[0],+e[1]],a=!0,t()},i.bandwidth=function(){return n},i.step=function(){return e},i.round=function(e){return arguments.length?(a=!!e,t()):a},i.padding=function(e){return arguments.length?(l=c=Math.max(0,Math.min(1,e)),t()):l},i.paddingInner=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},i.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},i.align=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},i.copy=function(){return os().domain(r()).range(s).round(a).paddingInner(l).paddingOuter(c).align(h)},t()}function ss(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ss(e())},t}function as(t){return function(){return t}}function ls(t){return+t}function cs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:as(e)}function us(t,e,n,i){var r=t[0],o=t[1],s=e[0],a=e[1];return o<r?(r=n(o,r),s=i(a,s)):(r=n(r,o),s=i(s,a)),function(t){return s(r(t))}}function hs(t,e,n,i){var r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)o[a]=n(t[a],t[a+1]),s[a]=i(e[a],e[a+1]);return function(e){var n=jc(t,e,1,r)-1;return s[n](o[n](e))}}function fs(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function ds(t,e){function n(){return r=Math.min(a.length,l.length)>2?hs:us,o=s=null,i}function i(e){return(o||(o=r(a,l,u?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}(t):t,c)))(+e)}var r,o,s,a=vm,l=vm,c=ce,u=!1;return i.invert=function(t){return(s||(s=r(l,a,cs,u?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}(e):e)))(+t)},i.domain=function(t){return arguments.length?(a=_m.call(t,ls),n()):a.slice()},i.range=function(t){return arguments.length?(l=ym.call(t),n()):l.slice()},i.rangeRound=function(t){return l=ym.call(t),c=ue,n()},i.clamp=function(t){return arguments.length?(u=!!t,n()):u},i.interpolate=function(t){return arguments.length?(c=t,n()):c},n()}function ps(e){var n=e.domain;return e.ticks=function(t){var e=n();return h(e[0],e[e.length-1],null==t?10:t)},e.tickFormat=function(e,i){return function(e,n,i){var r,o=e[0],s=e[e.length-1],a=d(o,s,null==n?10:n);switch((i=Fn(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(o),Math.abs(s));return null!=i.precision||isNaN(r=zn(a,l))||(i.precision=r),t.formatPrefix(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Hn(a,Math.max(Math.abs(o),Math.abs(s))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=Vn(a))||(i.precision=r-2*("%"===i.type))}return t.format(i)}(n(),e,i)},e.nice=function(t){null==t&&(t=10);var i,r=n(),o=0,s=r.length-1,a=r[o],l=r[s];return l<a&&(i=a,a=l,l=i,i=o,o=s,s=i),(i=f(a,l,t))>0?i=f(a=Math.floor(a/i)*i,l=Math.ceil(l/i)*i,t):i<0&&(i=f(a=Math.ceil(a*i)/i,l=Math.floor(l*i)/i,t)),i>0?(r[o]=Math.floor(a/i)*i,r[s]=Math.ceil(l/i)*i,n(r)):i<0&&(r[o]=Math.ceil(a*i)/i,r[s]=Math.floor(l*i)/i,n(r)),e},e}function ms(){var t=ds(cs,se);return t.copy=function(){return fs(t,ms())},ps(t)}function _s(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=_m.call(n,ls),t):e.slice()},t.copy=function(){return _s().domain(e)},ps(t)}function ys(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],s=t[r];return s<o&&(n=i,i=r,r=n,n=o,o=s,s=n),t[i]=e.floor(o),t[r]=e.ceil(s),t}function gs(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:as(e)}function vs(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function bs(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ws(t){return 10===t?bs:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Es(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function xs(t){return function(e){return-t(-e)}}function Ss(){function e(){return o=Es(r),s=ws(r),i()[0]<0&&(o=xs(o),s=xs(s)),n}var n=ds(gs,vs).domain([1,10]),i=n.domain,r=10,o=Es(10),s=ws(10);return n.base=function(t){return arguments.length?(r=+t,e()):r},n.domain=function(t){return arguments.length?(i(t),e()):i()},n.ticks=function(t){var e,n=i(),a=n[0],l=n[n.length-1];(e=l<a)&&(d=a,a=l,l=d);var c,u,f,d=o(a),p=o(l),m=null==t?10:+t,_=[];if(!(r%1)&&p-d<m){if(d=Math.round(d)-1,p=Math.round(p)+1,a>0){for(;d<p;++d)for(u=1,c=s(d);u<r;++u)if(!((f=c*u)<a)){if(f>l)break;_.push(f)}}else for(;d<p;++d)for(u=r-1,c=s(d);u>=1;--u)if(!((f=c*u)<a)){if(f>l)break;_.push(f)}}else _=h(d,p,Math.min(p-d,m)).map(s);return e?_.reverse():_},n.tickFormat=function(e,i){if(null==i&&(i=10===r?".0e":","),"function"!=typeof i&&(i=t.format(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,r*e/n.ticks().length);return function(t){var e=t/s(Math.round(o(t)));return e*r<r-.5&&(e*=r),e<=a?i(t):""}},n.nice=function(){return i(ys(i(),{floor:function(t){return s(Math.floor(o(t)))},ceil:function(t){return s(Math.ceil(o(t)))}}))},n.copy=function(){return fs(n,Ss().base(r))},n}function ks(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Ts(){var t=1,e=ds(function(e,n){return(n=ks(n,t)-(e=ks(e,t)))?function(i){return(ks(i,t)-e)/n}:as(n)},function(e,n){return n=ks(n,t)-(e=ks(e,t)),function(i){return ks(e+n*i,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return fs(e,Ts().exponent(t))},ps(e)}function Cs(){function t(){var t=0,e=Math.max(1,r.length);for(o=new Array(e-1);++t<e;)o[t-1]=m(i,t/e);return n}function n(t){if(!isNaN(t=+t))return r[jc(o,t)]}var i=[],r=[],o=[];return n.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:i[0],e<o.length?o[e]:i[i.length-1]]},n.domain=function(n){if(!arguments.length)return i.slice();i=[];for(var r,o=0,s=n.length;o<s;++o)null==(r=n[o])||isNaN(r=+r)||i.push(r);return i.sort(e),t()},n.range=function(e){return arguments.length?(r=ym.call(e),t()):r.slice()},n.quantiles=function(){return o.slice()},n.copy=function(){return Cs().domain(i).range(r)},n}function As(){function t(t){if(t<=t)return s[jc(o,t,0,r)]}function e(){var e=-1;for(o=new Array(r);++e<r;)o[e]=((e+1)*i-(e-r)*n)/(r+1);return t}var n=0,i=1,r=1,o=[.5],s=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e()):[n,i]},t.range=function(t){return arguments.length?(r=(s=ym.call(t)).length-1,e()):s.slice()},t.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=r?[o[r-1],i]:[o[e-1],o[e]]},t.copy=function(){return As().domain([n,i]).range(s)},ps(t)}function Ps(){function t(t){if(t<=t)return n[jc(e,t,0,i)]}var e=[.5],n=[0,1],i=1;return t.domain=function(r){return arguments.length?(e=ym.call(r),i=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(r){return arguments.length?(n=ym.call(r),i=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},t.copy=function(){return Ps().domain(e).range(n)},t}function Ms(t,e,n,i){function r(e){return t(e=new Date((+e))),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date((+t)),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var s,a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return a;do a.push(s=new Date((+n))),e(n,o),t(n);while(s<n&&n<i);return a},r.filter=function(n){return Ms(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return bm.setTime(+e),wm.setTime(+i),t(bm),t(wm),Math.floor(n(bm,wm))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}function Os(t){return Ms(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sm)/km})}function Is(t){return Ms(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/km})}function Ls(t){if(0<=t.y&&t.y<100){var e=new Date((-1),t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ds(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rs(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Fs(t){function e(t,e){return function(n){var i,r,o,s=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date((+n)));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(r=x_[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),s.push(i),l=a+1);return s.push(t.slice(l,a)),s.join("")}}function n(t,e){return function(n){var r,o,s=Rs(1900);if(i(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("p"in s&&(s.H=s.H%12+12*s.p),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(o=(r=Ds(Rs(s.y))).getUTCDay())>4||0===o?o_.ceil(r):o_(r),r=n_.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(r=(o=(r=e(Rs(s.y))).getDay())>4||0===o?Rm.ceil(r):Rm(r),r=Im.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),o="Z"in s?Ds(Rs(s.y)).getUTCDay():e(Rs(s.y)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(o+5)%7:s.w+7*s.U-(o+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Ds(s)):e(s)}}function i(t,e,n,i){for(var r,o,s=0,a=e.length,l=n.length;s<a;){if(i>=l)return-1;if(37===(r=e.charCodeAt(s++))){if(r=e.charAt(s++),!(o=S[r in x_?e.charAt(s++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var r=t.dateTime,o=t.date,s=t.time,a=t.periods,l=t.days,c=t.shortDays,u=t.months,h=t.shortMonths,f=Bs(a),d=Us(a),p=Bs(l),m=Us(l),_=Bs(c),y=Us(c),g=Bs(u),v=Us(u),b=Bs(h),w=Us(h),E={a:function(t){return c[t.getDay()]},A:function(t){return l[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:sa,e:sa,f:ha,H:aa,I:la,j:ca,L:ua,m:fa,M:da,p:function(t){return a[+(t.getHours()>=12)]},Q:Va,s:za,S:pa,u:ma,U:_a,V:ya,w:ga,W:va,x:null,X:null,y:ba,Y:wa,Z:Ea,"%":Ua},x={a:function(t){return c[t.getUTCDay()]},A:function(t){return l[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:xa,e:xa,f:Aa,H:Sa,I:ka,j:Ta,L:Ca,m:Pa,M:Ma,p:function(t){return a[+(t.getUTCHours()>=12)]},Q:Va,s:za,S:Oa,u:Ia,U:La,V:Da,w:Ra,W:Fa,x:null,X:null,y:Na,Y:ja,Z:Ba,"%":Ua},S={a:function(t,e,n){var i=_.exec(e.slice(n));return i?(t.w=y[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=m[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=b.exec(e.slice(n));return i?(t.m=w[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=v[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,e,n){return i(t,r,e,n)},d:Qs,e:Qs,f:na,H:Js,I:Js,j:Zs,L:ea,m:Xs,M:$s,p:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.p=d[i[0].toLowerCase()],n+i[0].length):-1},Q:ra,s:oa,S:ta,u:zs,U:Hs,V:qs,w:Vs,W:Ws,x:function(t,e,n){return i(t,o,e,n)},X:function(t,e,n){return i(t,s,e,n)},y:Gs,Y:Ks,Z:Ys,"%":ia};return E.x=e(o,E),E.X=e(s,E),E.c=e(r,E),x.x=e(o,x),x.X=e(s,x),x.c=e(r,x),{format:function(t){var n=e(t+="",E);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",Ls);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",x);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,Ds);return e.toString=function(){return t},e}}}function Ns(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function js(t){return t.replace(T_,"\\$&")}function Bs(t){return new RegExp("^(?:"+t.map(js).join("|")+")","i")}function Us(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Vs(t,e,n){var i=S_.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function zs(t,e,n){var i=S_.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Hs(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function qs(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Ws(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Ks(t,e,n){var i=S_.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Gs(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Ys(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Xs(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Qs(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Zs(t,e,n){var i=S_.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Js(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function $s(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function ta(t,e,n){var i=S_.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ea(t,e,n){var i=S_.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function na(t,e,n){var i=S_.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function ia(t,e,n){var i=k_.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function ra(t,e,n){var i=S_.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function oa(t,e,n){var i=S_.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function sa(t,e){return Ns(t.getDate(),e,2)}function aa(t,e){return Ns(t.getHours(),e,2)}function la(t,e){return Ns(t.getHours()%12||12,e,2)}function ca(t,e){return Ns(1+Im.count(Qm(t),t),e,3)}function ua(t,e){return Ns(t.getMilliseconds(),e,3)}function ha(t,e){return ua(t,e)+"000"}function fa(t,e){return Ns(t.getMonth()+1,e,2)}function da(t,e){return Ns(t.getMinutes(),e,2)}function pa(t,e){return Ns(t.getSeconds(),e,2)}function ma(t){var e=t.getDay();return 0===e?7:e}function _a(t,e){return Ns(Dm.count(Qm(t),t),e,2)}function ya(t,e){var n=t.getDay();return t=n>=4||0===n?jm(t):jm.ceil(t),Ns(jm.count(Qm(t),t)+(4===Qm(t).getDay()),e,2)}function ga(t){return t.getDay()}function va(t,e){return Ns(Rm.count(Qm(t),t),e,2)}function ba(t,e){return Ns(t.getFullYear()%100,e,2)}function wa(t,e){return Ns(t.getFullYear()%1e4,e,4)}function Ea(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ns(e/60|0,"0",2)+Ns(e%60,"0",2)}function xa(t,e){return Ns(t.getUTCDate(),e,2)}function Sa(t,e){return Ns(t.getUTCHours(),e,2)}function ka(t,e){return Ns(t.getUTCHours()%12||12,e,2)}function Ta(t,e){return Ns(1+n_.count(b_(t),t),e,3)}function Ca(t,e){return Ns(t.getUTCMilliseconds(),e,3)}function Aa(t,e){return Ca(t,e)+"000"}function Pa(t,e){return Ns(t.getUTCMonth()+1,e,2)}function Ma(t,e){return Ns(t.getUTCMinutes(),e,2)}function Oa(t,e){return Ns(t.getUTCSeconds(),e,2)}function Ia(t){var e=t.getUTCDay();return 0===e?7:e}function La(t,e){return Ns(r_.count(b_(t),t),e,2)}function Da(t,e){var n=t.getUTCDay();return t=n>=4||0===n?l_(t):l_.ceil(t),Ns(l_.count(b_(t),t)+(4===b_(t).getUTCDay()),e,2)}function Ra(t){return t.getUTCDay()}function Fa(t,e){return Ns(o_.count(b_(t),t),e,2)}function Na(t,e){return Ns(t.getUTCFullYear()%100,e,2)}function ja(t,e){return Ns(t.getUTCFullYear()%1e4,e,4)}function Ba(){return"+0000"}function Ua(){return"%"}function Va(t){return+t}function za(t){return Math.floor(+t/1e3)}function Ha(e){return w_=Fs(e),t.timeFormat=w_.format,t.timeParse=w_.parse,t.utcFormat=w_.utcFormat,t.utcParse=w_.utcParse,w_}function qa(t){return new Date(t)}function Wa(t){return t instanceof Date?+t:+new Date((+t))}function Ka(t,e,i,r,o,s,a,l,c){function u(n){return(a(n)<n?_:s(n)<n?y:o(n)<n?g:r(n)<n?v:e(n)<n?i(n)<n?b:w:t(n)<n?E:x)(n)}function h(e,i,r,o){if(null==e&&(e=10),"number"==typeof e){var s=Math.abs(r-i)/e,a=n(function(t){return t[2]}).right(S,s);a===S.length?(o=d(i/F_,r/F_,e),e=t):a?(o=(a=S[s/S[a-1][2]<S[a][2]/s?a-1:a])[1],e=a[0]):(o=Math.max(d(i,r,e),1),e=l)}return null==o?e:e.every(o)}var f=ds(cs,se),p=f.invert,m=f.domain,_=c(".%L"),y=c(":%S"),g=c("%I:%M"),v=c("%I %p"),b=c("%a %d"),w=c("%b %d"),E=c("%B"),x=c("%Y"),S=[[a,1,M_],[a,5,5*M_],[a,15,15*M_],[a,30,30*M_],[s,1,O_],[s,5,5*O_],[s,15,15*O_],[s,30,30*O_],[o,1,I_],[o,3,3*I_],[o,6,6*I_],[o,12,12*I_],[r,1,L_],[r,2,2*L_],[i,1,D_],[e,1,R_],[e,3,3*R_],[t,1,F_]];return f.invert=function(t){return new Date(p(t))},f.domain=function(t){return arguments.length?m(_m.call(t,Wa)):m().map(qa)},f.ticks=function(t,e){var n,i=m(),r=i[0],o=i[i.length-1],s=o<r;return s&&(n=r,r=o,o=n),n=h(t,r,o,e),n=n?n.range(r,o+1):[],s?n.reverse():n},f.tickFormat=function(t,e){return null==e?u:c(e)},f.nice=function(t,e){var n=m();return(t=h(t,n[0],n[n.length-1],e))?m(ys(n,t)):f},f.copy=function(){return fs(f,Ka(t,e,i,r,o,s,a,l,c))},f}function Ga(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}function Ya(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Xa(t){function e(e){var o=(e-n)/(i-n);return t(r?Math.max(0,Math.min(1,o)):o)}var n=0,i=1,r=!1;return e.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.clamp=function(t){return arguments.length?(r=!!t,e):r},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return Xa(t).domain([n,i]).clamp(r)},ps(e)}function Qa(t){return function(){return t}}function Za(t){return t>=1?ry:t<=-1?-ry:Math.asin(t)}function Ja(t){return t.innerRadius}function $a(t){return t.outerRadius}function tl(t){return t.startAngle}function el(t){return t.endAngle}function nl(t){return t&&t.padAngle}function il(t,e,n,i,r,o,s){var a=t-n,l=e-i,c=(s?o:-o)/ey(a*a+l*l),u=c*l,h=-c*a,f=t+u,d=e+h,p=n+u,m=i+h,_=(f+p)/2,y=(d+m)/2,g=p-f,v=m-d,b=g*g+v*v,w=r-o,E=f*m-p*d,x=(v<0?-1:1)*ey(J_(0,w*w*b-E*E)),S=(E*v-g*x)/b,k=(-E*g-v*x)/b,T=(E*v+g*x)/b,C=(-E*g+v*x)/b,A=S-_,P=k-y,M=T-_,O=C-y;return A*A+P*P>M*M+O*O&&(S=T,k=C),{cx:S,cy:k,x01:-u,y01:-h,x11:S*(r/w-1),y11:k*(r/w-1)}}function rl(t){this._context=t}function ol(t){return new rl(t)}function sl(t){return t[0]}function al(t){return t[1]}function ll(){function t(t){var a,l,c,u=t.length,h=!1;for(null==r&&(s=o(c=en())),a=0;a<=u;++a)!(a<u&&i(l=t[a],a,t))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(l,a,t),+n(l,a,t));if(c)return s=null,c+""||null}var e=sl,n=al,i=Qa(!0),r=null,o=ol,s=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Qa(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:Qa(!!e),t):i},t.curve=function(e){return arguments.length?(o=e,null!=r&&(s=o(r)),t):o},t.context=function(e){return arguments.length?(null==e?r=s=null:s=o(r=e),t):r},t}function cl(){function t(t){var e,u,h,f,d,p=t.length,m=!1,_=new Array(p),y=new Array(p);for(null==a&&(c=l(d=en())),e=0;e<=p;++e){if(!(e<p&&s(f=t[e],e,t))===m)if(m=!m)u=e,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),h=e-1;h>=u;--h)c.point(_[h],y[h]);c.lineEnd(),c.areaEnd()}m&&(_[e]=+n(f,e,t),y[e]=+r(f,e,t),c.point(i?+i(f,e,t):_[e],o?+o(f,e,t):y[e]))}if(d)return c=null,d+""||null}function e(){return ll().defined(s).curve(l).context(a)}var n=sl,i=null,r=Qa(0),o=al,s=Qa(!0),a=null,l=ol,c=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),i=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Qa(+e),t):i},t.y=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),o=null,t):r},t.y0=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),t):r},t.y1=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:Qa(+e),t):o},t.lineX0=t.lineY0=function(){return e().x(n).y(r)},t.lineY1=function(){return e().x(n).y(o)},t.lineX1=function(){return e().x(i).y(r)},t.defined=function(e){return arguments.length?(s="function"==typeof e?e:Qa(!!e),t):s},t.curve=function(e){return arguments.length?(l=e,null!=a&&(c=l(a)),t):l},t.context=function(e){return arguments.length?(null==e?a=c=null:c=l(a=e),t):a},t}function ul(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function hl(t){return t}function fl(t){this._curve=t}function dl(t){function e(e){return new fl(t(e))}return e._curve=t,e}function pl(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(dl(t)):e()._curve},t}function ml(){return pl(ll().curve(sy))}function _l(){var t=cl().curve(sy),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return pl(n())},delete t.lineX0,t.lineEndAngle=function(){return pl(i())},delete t.lineX1,t.lineInnerRadius=function(){return pl(r())},delete t.lineY0,t.lineOuterRadius=function(){return pl(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(dl(t)):e()._curve},t}function yl(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function gl(t){return t.source}function vl(t){return t.target}function bl(t){function e(){var e,a=ay.call(arguments),l=n.apply(this,a),c=i.apply(this,a);if(s||(s=e=en()),t(s,+r.apply(this,(a[0]=l,a)),+o.apply(this,a),+r.apply(this,(a[0]=c,a)),+o.apply(this,a)),e)return s=null,e+""||null}var n=gl,i=vl,r=sl,o=al,s=null;return e.source=function(t){return arguments.length?(n=t,e):n},e.target=function(t){return arguments.length?(i=t,e):i},e.x=function(t){return arguments.length?(r="function"==typeof t?t:Qa(+t),e):r},e.y=function(t){return arguments.length?(o="function"==typeof t?t:Qa(+t),e):o},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}function wl(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function El(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function xl(t,e,n,i,r){var o=yl(e,n),s=yl(e,n=(n+r)/2),a=yl(i,n),l=yl(i,r);t.moveTo(o[0],o[1]),t.bezierCurveTo(s[0],s[1],a[0],a[1],l[0],l[1])}function Sl(){}function kl(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Tl(t){this._context=t}function Cl(t){this._context=t}function Al(t){this._context=t}function Pl(t,e){this._basis=new Tl(t),this._beta=e}function Ml(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ol(t,e){this._context=t,this._k=(1-e)/6}function Il(t,e){this._context=t,this._k=(1-e)/6}function Ll(t,e){this._context=t,this._k=(1-e)/6}function Dl(t,e,n){var i=t._x1,r=t._y1,o=t._x2,s=t._y2;if(t._l01_a>ny){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ny){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,s,t._x2,t._y2)}function Rl(t,e){this._context=t,this._alpha=e}function Fl(t,e){this._context=t,this._alpha=e}function Nl(t,e){this._context=t,this._alpha=e}function jl(t){this._context=t}function Bl(t){return t<0?-1:1}function Ul(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),s=(n-t._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(Bl(o)+Bl(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Vl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function zl(t,e,n){var i=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-i)/3;t._context.bezierCurveTo(i+a,r+a*e,o-a,s-a*n,o,s)}function Hl(t){this._context=t}function ql(t){this._context=new Wl(t)}function Wl(t){this._context=t}function Kl(t){this._context=t}function Gl(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),s=new Array(i);for(r[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(r[i-1]=s[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(s[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function Yl(t,e){this._context=t,this._t=e}function Xl(t,e){if((r=t.length)>1)for(var n,i,r,o=1,s=t[e[0]],a=s.length;o<r;++o)for(i=s,s=t[e[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Ql(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Zl(t,e){return t[e]}function Jl(t){var e=t.map($l);return Ql(t).sort(function(t,n){return e[t]-e[n]})}function $l(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}function tc(t){return function(){return t}}function ec(t){return t[0]}function nc(t){return t[1]}function ic(){this._=null}function rc(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function oc(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function sc(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ac(t){for(;t.L;)t=t.L;return t}function lc(t,e,n,i){var r=[null,null],o=Fy.push(r)-1;return r.left=t,r.right=e,n&&uc(r,t,e,n),i&&uc(r,e,t,i),Dy[t.index].halfedges.push(o),Dy[e.index].halfedges.push(o),r}function cc(t,e,n){var i=[e,n];return i.left=t,i}function uc(t,e,n,i){
t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function hc(t,e,n,i,r){var o,s=t[0],a=t[1],l=s[0],c=s[1],u=0,h=1,f=a[0]-l,d=a[1]-c;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>u&&(u=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<h&&(h=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>u&&(u=o)}if(o=r-c,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(t[0]=[l+u*f,c+u*d]),h<1&&(t[1]=[l+h*f,c+h*d]),!0)}}}}}function fc(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,l=t[0],c=t.left,u=t.right,h=c[0],f=c[1],d=u[0],p=u[1],m=(h+d)/2,_=(f+p)/2;if(p===f){if(m<e||m>=i)return;if(h>d){if(l){if(l[1]>=r)return}else l=[m,n];o=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];o=[m,n]}}else if(s=(h-d)/(p-f),a=_-s*m,s<-1||s>1)if(h>d){if(l){if(l[1]>=r)return}else l=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(l){if(l[1]<n)return}else l=[(r-a)/s,r];o=[(n-a)/s,n]}else if(f<p){if(l){if(l[0]>=i)return}else l=[e,s*e+a];o=[i,s*i+a]}else{if(l){if(l[0]<e)return}else l=[i,s*i+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function dc(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function pc(t,e){return e[+(e.left!==t.site)]}function mc(t,e){return e[+(e.left===t.site)]}function _c(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],l=i[0]-s,c=i[1]-a,u=o[0]-s,h=o[1]-a,f=2*(l*h-c*u);if(!(f>=-Uy)){var d=l*l+c*c,p=u*u+h*h,m=(h*d-c*p)/f,_=(l*p-u*d)/f,y=Ny.pop()||new function(){rc(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=t,y.site=r,y.x=m+s,y.y=(y.cy=_+a)+Math.sqrt(m*m+_*_),t.circle=y;for(var g=null,v=Ry._;v;)if(y.y<v.y||y.y===v.y&&y.x<=v.x){if(!v.L){g=v.P;break}v=v.L}else{if(!v.R){g=v;break}v=v.R}Ry.insert(g,y),g||(Iy=y)}}}}function yc(t){var e=t.circle;e&&(e.P||(Iy=e.N),Ry.remove(e),Ny.push(e),rc(e),t.circle=null)}function gc(t){var e=jy.pop()||new function(){rc(this),this.edge=this.site=this.circle=null};return e.site=t,e}function vc(t){yc(t),Ly.remove(t),jy.push(t),rc(t)}function bc(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];vc(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<By&&Math.abs(i-l.circle.cy)<By;)o=l.P,a.unshift(l),vc(l),l=o;a.unshift(l),yc(l);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<By&&Math.abs(i-c.circle.cy)<By;)s=c.N,a.push(c),vc(c),c=s;a.push(c),yc(c);var u,h=a.length;for(u=1;u<h;++u)c=a[u],l=a[u-1],uc(c.edge,l.site,c.site,r);l=a[0],(c=a[h-1]).edge=lc(l.site,c.site,null,r),_c(l),_c(c)}function wc(t){for(var e,n,i,r,o=t[0],s=t[1],a=Ly._;a;)if((i=Ec(a,s)-o)>By)a=a.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return Ec(n,e);var i=t.site;return i[1]===e?i[0]:1/0}(a,s))>By)){i>-By?(e=a.P,n=a):r>-By?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Dy[t.index]={site:t,halfedges:[]}}(t);var l=gc(t);if(Ly.insert(e,l),e||n){if(e===n)return yc(e),n=gc(e.site),Ly.insert(l,n),l.edge=n.edge=lc(e.site,l.site),_c(e),void _c(n);if(n){yc(e),yc(n);var c=e.site,u=c[0],h=c[1],f=t[0]-u,d=t[1]-h,p=n.site,m=p[0]-u,_=p[1]-h,y=2*(f*_-d*m),g=f*f+d*d,v=m*m+_*_,b=[(_*g-d*v)/y+u,(f*v-m*g)/y+h];uc(n.edge,c,p,b),l.edge=lc(c,t,null,b),n.edge=lc(t,p,null,b),_c(e),_c(n)}else l.edge=lc(e.site,l.site)}}function Ec(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],c=l-e;if(!c)return a;var u=a-i,h=1/o-1/c,f=u/c;return h?(-f+Math.sqrt(f*f-2*h*(u*u/(-2*c)-l+c/2+r-o/2)))/h+i:(i+a)/2}function xc(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Sc(t,e){return e[1]-t[1]||e[0]-t[0]}function kc(t,e){var n,i,r,o=t.sort(Sc).pop();for(Fy=[],Dy=new Array(t.length),Ly=new ic,Ry=new ic;;)if(r=Iy,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(wc(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;bc(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Dy.length;r<o;++r)if((t=Dy[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=dc(t,Fy[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var r,o=Fy.length;o--;)fc(r=Fy[o],t,e,n,i)&&hc(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>By||Math.abs(r[0][1]-r[1][1])>By)||delete Fy[o]}(s,a,l,c),function(t,e,n,i){var r,o,s,a,l,c,u,h,f,d,p,m,_=Dy.length,y=!0;for(r=0;r<_;++r)if(o=Dy[r]){for(s=o.site,a=(l=o.halfedges).length;a--;)Fy[l[a]]||l.splice(a,1);for(a=0,c=l.length;a<c;)p=(d=mc(o,Fy[l[a]]))[0],m=d[1],h=(u=pc(o,Fy[l[++a%c]]))[0],f=u[1],(Math.abs(p-h)>By||Math.abs(m-f)>By)&&(l.splice(a,0,Fy.push(cc(s,d,Math.abs(p-t)<By&&i-m>By?[t,Math.abs(h-t)<By?f:i]:Math.abs(m-i)<By&&n-p>By?[Math.abs(f-i)<By?h:n,i]:Math.abs(p-n)<By&&m-e>By?[n,Math.abs(h-n)<By?f:e]:Math.abs(m-e)<By&&p-t>By?[Math.abs(f-e)<By?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var g,v,b,w=1/0;for(r=0,y=null;r<_;++r)(o=Dy[r])&&(b=(g=(s=o.site)[0]-t)*g+(v=s[1]-e)*v)<w&&(w=b,y=o);if(y){var E=[t,e],x=[t,i],S=[n,i],k=[n,e];y.halfedges.push(Fy.push(cc(s=y.site,E,x))-1,Fy.push(cc(s,x,S))-1,Fy.push(cc(s,S,k))-1,Fy.push(cc(s,k,E))-1)}}for(r=0;r<_;++r)(o=Dy[r])&&(o.halfedges.length||delete Dy[r])}(s,a,l,c)}this.edges=Fy,this.cells=Dy,Ly=Ry=Fy=Dy=null}function Tc(t){return function(){return t}}function Cc(t,e,n){this.k=t,this.x=e,this.y=n}function Ac(t){return t.__zoom||Vy}function Pc(){t.event.stopImmediatePropagation()}function Mc(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Oc(){return!t.event.button}function Ic(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function Lc(){return this.__zoom||Vy}function Dc(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function Rc(){return"ontouchstart"in this}function Fc(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}var Nc=n(e),jc=Nc.right,Bc=Nc.left,Uc=Array.prototype,Vc=Uc.slice,zc=Uc.map,Hc=Math.sqrt(50),qc=Math.sqrt(10),Wc=Math.sqrt(2),Kc=Array.prototype.slice,Gc=1,Yc=2,Xc=3,Qc=4,Zc=1e-6,Jc={value:function(){}};T.prototype=k.prototype={constructor:T,on:function(t,e){var n,i=this._,r=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",i),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=r[o]).type)i[n]=C(i[n],t.name,e);else if(null==e)for(n in i)i[n]=C(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=r[o]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new T(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var $c="http://www.w3.org/1999/xhtml",tu={svg:"http://www.w3.org/2000/svg",xhtml:$c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},eu=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var nu=document.documentElement;if(!nu.matches){var iu=nu.webkitMatchesSelector||nu.msMatchesSelector||nu.mozMatchesSelector||nu.oMatchesSelector;eu=function(t){return function(){return iu.call(this,t)}}}}var ru=eu;R.prototype={constructor:R,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ou="$";H.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var su={};t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(su={mouseenter:"mouseover",mouseleave:"mouseout"}));var au=[null];st.prototype=at.prototype={constructor:st,select:function(t){"function"!=typeof t&&(t=O(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],l=a.length,c=i[r]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new st(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=L(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(i.push(t.call(s,s.__data__,c,a)),r.push(s));return new st(i,r)},filter:function(t){"function"!=typeof t&&(t=ru(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new st(i,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?N:F,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],h=r[c],f=h.length,d=t.call(u,u&&u.__data__,c,i),p=d.length,m=a[c]=new Array(p),_=s[c]=new Array(p);n(u,h,m,_,l[c]=new Array(f),d,e);for(var y,g,v=0,b=0;v<p;++v)if(y=m[v]){for(v>=b&&(b=v+1);!(g=_[b])&&++b<p;);y._next=g||null}}return s=new st(s,i),s._enter=a,s._exit=l,s},enter:function(){return new st(this._enter||this._groups.map(D),this._parents)},exit:function(){return new st(this._exit||this._groups.map(D),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,c=e[a],u=n[a],h=c.length,f=s[a]=new Array(h),d=0;d<h;++d)(l=c[d]||u[d])&&(f[d]=l);for(;a<i;++a)s[a]=e[a];return new st(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=j);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(e)}return new st(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=A(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):U(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=V(t+"");if(arguments.length<2){for(var i=z(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?q:W)(this,t)}}:e?function(t){return function(){q(this,t)}}:function(t){return function(){W(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?K:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?G:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Y)},lower:function(){return this.each(X)},append:function(t){var e="function"==typeof t?t:P(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:P(t),i=null==e?Q:"function"==typeof e?e:O(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Z)},clone:function(t){return this.select(t?$:J)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?it:nt,null==n&&(n=!1),i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(i=0,l=a[c];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return ot(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return ot(this,t,e)}})(t,e))}};var lu=0;ut.prototype=ct.prototype={constructor:ut,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},bt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var cu="\\s*([+-]?\\d+)\\s*",uu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",hu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fu=/^#([0-9a-f]{3})$/,du=/^#([0-9a-f]{6})$/,pu=new RegExp("^rgb\\("+[cu,cu,cu]+"\\)$"),mu=new RegExp("^rgb\\("+[hu,hu,hu]+"\\)$"),_u=new RegExp("^rgba\\("+[cu,cu,cu,uu]+"\\)$"),yu=new RegExp("^rgba\\("+[hu,hu,hu,uu]+"\\)$"),gu=new RegExp("^hsl\\("+[uu,hu,hu]+"\\)$"),vu=new RegExp("^hsla\\("+[uu,hu,hu,uu]+"\\)$"),bu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kt(Ct,At,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),kt(Lt,It,Tt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),kt(Ft,Rt,Tt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ft(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ft(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Lt(Nt(t>=240?t-240:t+120,r,i),Nt(t,r,i),Nt(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var wu=Math.PI/180,Eu=180/Math.PI,xu=.95047,Su=1,ku=1.08883,Tu=4/29,Cu=6/29,Au=3*Cu*Cu,Pu=Cu*Cu*Cu;kt(Ut,Bt,Tt(Ct,{brighter:function(t){return new Ut(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ut(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=Su*zt(t),e=xu*zt(e),n=ku*zt(n),new Lt(Ht(3.2404542*e-1.5371385*t-.4985314*n),Ht(-.969266*e+1.8760108*t+.041556*n),Ht(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),kt(Kt,Wt,Tt(Ct,{brighter:function(t){return new Kt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Kt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return jt(this).rgb()}}));var Mu=-.29227,Ou=-.90649,Iu=1.97294,Lu=Iu*Ou,Du=1.78277*Iu,Ru=1.78277*Mu- -.14861*Ou;kt(Yt,Gt,Tt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Yt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Yt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*wu,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Lt(255*(e+n*(-.14861*i+1.78277*r)),255*(e+n*(Mu*i+Ou*r)),255*(e+n*(Iu*i)),this.opacity)}}));var Fu,Nu,ju,Bu,Uu,Vu,zu=function zy(t){function e(t,e){var i=n((t=It(t)).r,(e=It(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=ne(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}var n=ee(t);return e.gamma=zy,e}(1),Hu=ie(Qt),qu=ie(Zt),Wu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ku=new RegExp(Wu.source,"g"),Gu=180/Math.PI,Yu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Xu=fe(function(t){return"none"===t?Yu:(Fu||(Fu=document.createElement("DIV"),Nu=document.documentElement,ju=document.defaultView),Fu.style.transform=t,t=ju.getComputedStyle(Nu.appendChild(Fu),null).getPropertyValue("transform"),Nu.removeChild(Fu),t=t.slice(7,-1).split(","),he(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Qu=fe(function(t){return null==t?Yu:(Bu||(Bu=document.createElementNS("http://www.w3.org/2000/svg","g")),Bu.setAttribute("transform",t),(t=Bu.transform.baseVal.consolidate())?(t=t.matrix,he(t.a,t.b,t.c,t.d,t.e,t.f)):Yu)},", ",")",")"),Zu=Math.SQRT2,Ju=2,$u=4,th=1e-12,eh=me(te),nh=me(ne),ih=_e(te),rh=_e(ne),oh=ye(te),sh=ye(ne),ah=0,lh=0,ch=0,uh=1e3,hh=0,fh=0,dh=0,ph="object"==typeof performance&&performance.now?performance:Date,mh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};be.prototype=we.prototype={constructor:be,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ge():+n)+(null==e?0:+e),this._next||Vu===this||(Vu?Vu._next=this:Uu=this,Vu=this),this._call=t,this._time=n,ke()},stop:function(){this._call&&(this._call=null,this._time=1/0,ke())}};var _h=k("start","end","interrupt"),yh=[],gh=0,vh=1,bh=2,wh=3,Eh=4,xh=5,Sh=6,kh=at.prototype.constructor,Th=0,Ch=at.prototype;De.prototype=Re.prototype={constructor:De,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=O(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,l,c=i[s],u=c.length,h=o[s]=new Array(u),f=0;f<u;++f)(a=c[f])&&(l=t.call(a,a.__data__,f,c))&&("__data__"in a&&(l.__data__=a.__data__),h[f]=l,Ce(h[f],e,n,f,h,Me(a,n)));return new De(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=L(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l,c=i[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var f,d=t.call(l,l.__data__,h,c),p=Me(l,n),m=0,_=d.length;m<_;++m)(f=d[m])&&Ce(f,e,n,m,d,p);o.push(d),s.push(l)}return new De(o,s,e,n)},filter:function(t){"function"!=typeof t&&(t=ru(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new De(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,c=e[a],u=n[a],h=c.length,f=s[a]=new Array(h),d=0;d<h;++d)(l=c[d]||u[d])&&(f[d]=l);for(;a<i;++a)s[a]=e[a];return new De(s,this._parents,this._name,this._id)},selection:function(){return new kh(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Fe(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=Me(s,e);Ce(s,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new De(i,this._parents,t,n)},call:Ch.call,nodes:Ch.nodes,node:Ch.node,size:Ch.size,empty:Ch.empty,each:Ch.each,on:function(t,e){var n=this._id;return arguments.length<2?Me(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Ae:Pe;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}(n,t,e))},attr:function(t,e){var n=A(t),i="transform"===n?Qu:Le;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var i,r,o;return function(){var s,a=n(this);return null!=a?(s=this.getAttributeNS(t.space,t.local))===a?null:s===i&&a===r?o:o=e(i=s,r=a):void this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var i,r,o;return function(){var s,a=n(this);return null!=a?(s=this.getAttribute(t))===a?null:s===i&&a===r?o:o=e(i=s,r=a):void this.removeAttribute(t)}})(n,i,Ie(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var i,r;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?r:r=e(i=o,n)}}:function(t,e,n){var i,r;return function(){var o=this.getAttribute(t);return o===n?null:o===i?r:r=e(i=o,n)}})(n,i,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=A(t);return this.tween(n,(i.local?function(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n})(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Xu:Le;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=U(this,t),s=(this.style.removeProperty(t),U(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var i,r,o;return function(){var s=U(this,t),a=n(this);return null==a&&(this.style.removeProperty(t),a=U(this,t)),s===a?null:s===i&&a===r?o:o=e(i=s,r=a)}}(t,i,Ie(this,"style."+t,e)):function(t,e,n){var i,r;return function(){var o=U(this,t);return o===n?null:o===i?r:r=e(i=o,n)}}(t,i,e+""),n)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.style.setProperty(t,r(e),n)}}return i._value=e,i}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ie(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Me(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?function(t,e){var n,i;return function(){var r=Pe(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i}}:function(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Pe(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}o.tween=r}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ae(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ae(this,t).delay=e}})(e,t)):Me(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Pe(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Pe(this,t).duration=e}})(e,t)):Me(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Pe(this,t).ease=e}}(e,t)):Me(this.node(),e).ease}};var Ah=function Hy(t){function e(e){return Math.pow(e,t)}return t=+t,e.exponent=Hy,e}(3),Ph=function qy(t){function e(e){return 1-Math.pow(1-e,t)}return t=+t,e.exponent=qy,e}(3),Mh=function Wy(t){function e(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,e.exponent=Wy,e}(3),Oh=Math.PI,Ih=Oh/2,Lh=4/11,Dh=6/11,Rh=8/11,Fh=.75,Nh=9/11,jh=10/11,Bh=.9375,Uh=21/22,Vh=63/64,zh=1/Lh/Lh,Hh=function Ky(t){function e(e){return e*e*((t+1)*e-t)}return t=+t,e.overshoot=Ky,e}(1.70158),qh=function Gy(t){function e(e){return--e*e*((t+1)*e+t)+1}return t=+t,e.overshoot=Gy,e}(1.70158),Wh=function Yy(t){function e(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,e.overshoot=Yy,e}(1.70158),Kh=2*Math.PI,Gh=function Xy(t,e){function n(n){return t*Math.pow(2,10*--n)*Math.sin((i-n)/e)}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Kh);return n.amplitude=function(t){return Xy(t,e*Kh)},n.period=function(e){return Xy(t,e)},n}(1,.3),Yh=function Qy(t,e){function n(n){return 1-t*Math.pow(2,-10*(n=+n))*Math.sin((n+i)/e)}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Kh);return n.amplitude=function(t){return Qy(t,e*Kh)},n.period=function(e){return Qy(t,e)},n}(1,.3),Xh=function Zy(t,e){function n(n){return((n=2*n-1)<0?t*Math.pow(2,10*n)*Math.sin((i-n)/e):2-t*Math.pow(2,-10*n)*Math.sin((i+n)/e))/2}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Kh);return n.amplitude=function(t){return Zy(t,e*Kh)},n.period=function(e){return Zy(t,e)},n}(1,.3),Qh={time:null,delay:0,duration:250,ease:je};at.prototype.interrupt=function(t){return this.each(function(){Oe(this,t)})},at.prototype.transition=function(t){var e,n;t instanceof De?(e=t._id,t=t._name):(e=Fe(),(n=Qh).time=ge(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)(s=a[c])&&Ce(s,t,e,c,a,n||He(s,e));return new De(i,this._parents,t,e)};var Zh=[null],Jh={name:"drag"},$h={name:"space"},tf={name:"handle"},ef={name:"center"},nf={name:"x",handles:["e","w"].map(Ge),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},rf={name:"y",handles:["n","s"].map(Ge),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},of={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Ge),input:function(t){return t},output:function(t){return t}},sf={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",
sw:"nesw-resize"},af={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},lf={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},cf={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},uf={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},hf=Math.cos,ff=Math.sin,df=Math.PI,pf=df/2,mf=2*df,_f=Math.max,yf=Array.prototype.slice,gf=Math.PI,vf=2*gf,bf=vf-1e-6;tn.prototype=en.prototype={constructor:tn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,s=this._y1,a=n-t,l=i-e,c=o-t,u=s-e,h=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(u*a-l*c)>1e-6&&r){var f=n-o,d=i-s,p=a*a+l*l,m=f*f+d*d,_=Math.sqrt(p),y=Math.sqrt(h),g=r*Math.tan((gf-Math.acos((p+h-m)/(2*_*y)))/2),v=g/y,b=g/_;Math.abs(v-1)>1e-6&&(this._+="L"+(t+v*c)+","+(e+v*u)),this._+="A"+r+","+r+",0,0,"+ +(u*f>c*d)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,o){t=+t,e=+e;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),l=t+s,c=e+a,u=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%vf+vf),h>bf?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=gf)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},ln.prototype=cn.prototype={constructor:ln,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var wf=cn.prototype;pn.prototype=mn.prototype={constructor:pn,has:wf.has,add:function(t){return t+="",this["$"+t]=t,this},remove:wf.remove,clear:wf.clear,values:wf.keys,size:wf.size,empty:wf.empty,each:wf.each};var Ef={},xf={},Sf=34,kf=10,Tf=13,Cf=yn(","),Af=Cf.parse,Pf=Cf.parseRows,Mf=Cf.format,Of=Cf.formatRows,If=yn("\t"),Lf=If.parse,Df=If.parseRows,Rf=If.format,Ff=If.formatRows,Nf=Sn.prototype=kn.prototype;Nf.copy=function(){var t,e,n=new kn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Tn(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=Tn(e));return n},Nf.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return bn(this.cover(e,n),e,n,t)},Nf.addAll=function(t){var e,n,i,r,o=t.length,s=new Array(o),a=new Array(o),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=i,a[n]=r,i<l&&(l=i),i>u&&(u=i),r<c&&(c=r),r>h&&(h=r));for(u<l&&(l=this._x0,u=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(l,c).cover(u,h),n=0;n<o;++n)bn(this,s[n],a[n],t[n]);return this},Nf.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{if(!(n>t||t>r||i>e||e>o))return this;var s,a,l=r-n,c=this._root;switch(a=(e<(i+o)/2)<<1|t<(n+r)/2){case 0:do s=new Array(4),s[a]=c,c=s;while(l*=2,r=n+l,o=i+l,t>r||e>o);break;case 1:do s=new Array(4),s[a]=c,c=s;while(l*=2,n=r-l,o=i+l,n>t||e>o);break;case 2:do s=new Array(4),s[a]=c,c=s;while(l*=2,r=n+l,i=o-l,t>r||i>e);break;case 3:do s=new Array(4),s[a]=c,c=s;while(l*=2,n=r-l,i=o-l,n>t||i>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Nf.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},Nf.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Nf.find=function(t,e,n){var i,r,o,s,a,l,c,u=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new wn(m,u,h,f,d)),null==n?n=1/0:(u=t-n,h=e-n,f=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>f||(o=l.y0)>d||(s=l.x1)<u||(a=l.y1)<h))if(m.length){var _=(r+s)/2,y=(o+a)/2;p.push(new wn(m[3],_,y,s,a),new wn(m[2],r,y,_,a),new wn(m[1],_,o,s,y),new wn(m[0],r,o,_,y)),(c=(e>=y)<<1|t>=_)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var g=t-+this._x.call(null,m.data),v=e-+this._y.call(null,m.data),b=g*g+v*v;if(b<n){var w=Math.sqrt(n=b);u=t-w,h=e-w,f=t+w,d=e+w,i=m.data}}return i},Nf.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,r,o,s,a,l,c,u,h,f,d=this._root,p=this._x0,m=this._y0,_=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(a=(p+_)/2))?p=a:_=a,(u=s>=(l=(m+y)/2))?m=l:y=l,e=d,!(d=d[h=u<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},Nf.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Nf.root=function(){return this._root},Nf.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},Nf.visit=function(t){var e,n,i,r,o,s,a=[],l=this._root;for(l&&a.push(new wn(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,s=e.y1)&&l.length){var c=(i+o)/2,u=(r+s)/2;(n=l[3])&&a.push(new wn(n,c,u,o,s)),(n=l[2])&&a.push(new wn(n,i,u,c,s)),(n=l[1])&&a.push(new wn(n,c,r,o,u)),(n=l[0])&&a.push(new wn(n,i,r,c,u))}return this},Nf.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new wn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,s=e.x0,a=e.y0,l=e.x1,c=e.y1,u=(s+l)/2,h=(a+c)/2;(o=r[0])&&n.push(new wn(o,s,a,u,h)),(o=r[1])&&n.push(new wn(o,u,a,l,h)),(o=r[2])&&n.push(new wn(o,s,h,u,c)),(o=r[3])&&n.push(new wn(o,u,h,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Nf.x=function(t){return arguments.length?(this._x=t,this):this._x},Nf.y=function(t){return arguments.length?(this._y=t,this):this._y};var jf,Bf=10,Uf=Math.PI*(3-Math.sqrt(5)),Vf={"":function(t,e){t:for(var n,i=(t=t.toPrecision(e)).length,r=1,o=-1;r<i;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Rn(100*t,e)},r:Rn,s:function(t,e){var n=Ln(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(jf=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ln(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},zf=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Fn.prototype=Nn.prototype,Nn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Hf,qf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Un({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Wn.prototype={constructor:Wn,reset:function(){this.s=this.t=0},add:function(t){Kn(Ed,t,this.t),Kn(this,Ed.s,this.s),this.s?this.t+=Ed.t:this.s=Ed.t},valueOf:function(){return this.s}};var Wf,Kf,Gf,Yf,Xf,Qf,Zf,Jf,$f,td,ed,nd,id,rd,od,sd,ad,ld,cd,ud,hd,fd,dd,pd,md,_d,yd,gd,vd,bd,wd,Ed=new Wn,xd=1e-6,Sd=1e-12,kd=Math.PI,Td=kd/2,Cd=kd/4,Ad=2*kd,Pd=180/kd,Md=kd/180,Od=Math.abs,Id=Math.atan,Ld=Math.atan2,Dd=Math.cos,Rd=Math.ceil,Fd=Math.exp,Nd=Math.log,jd=Math.pow,Bd=Math.sin,Ud=Math.sign||function(t){return t>0?1:t<0?-1:0},Vd=Math.sqrt,zd=Math.tan,Hd={Feature:function(t,e){Zn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Zn(n[i].geometry,e)}},qd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Jn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Jn(n[i],e,0)},Polygon:function(t,e){$n(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)$n(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Zn(n[i],e)}},Wd=qn(),Kd=qn(),Gd={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){Wd.reset(),Gd.lineStart=ei,Gd.lineEnd=ni},polygonEnd:function(){var t=+Wd;Kd.add(t<0?Ad+t:t),this.lineStart=this.lineEnd=this.point=Qn},sphere:function(){Kd.add(Ad)}},Yd=qn(),Xd={point:fi,lineStart:pi,lineEnd:mi,polygonStart:function(){Xd.point=_i,Xd.lineStart=yi,Xd.lineEnd=gi,Yd.reset(),Gd.polygonStart()},polygonEnd:function(){Gd.polygonEnd(),Xd.point=fi,Xd.lineStart=pi,Xd.lineEnd=mi,Wd<0?(Qf=-(Jf=180),Zf=-($f=90)):Yd>xd?$f=90:Yd<-xd&&(Zf=-90),od[0]=Qf,od[1]=Jf}},Qd={sphere:Qn,point:Ei,lineStart:Si,lineEnd:Ci,polygonStart:function(){Qd.lineStart=Ai,Qd.lineEnd=Pi},polygonEnd:function(){Qd.lineStart=Si,Qd.lineEnd=Ci}};Di.invert=Di;var Zd,Jd,$d,tp,ep,np,ip,rp,op,sp,ap,lp=qn(),cp=Yi(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?kd:-kd,l=Od(o-n);Od(l-kd)<xd?(t.point(n,i=(i+s)/2>0?Td:-Td),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&l>=kd&&(Od(n-r)<xd&&(n-=r*xd),Od(o-a)<xd&&(o-=a*xd),i=function(t,e,n,i){var r,o,s=Bd(t-n);return Od(s)>xd?Id((Bd(e)*(o=Dd(i))*Bd(n)-Bd(i)*(r=Dd(e))*Bd(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*Td,i.point(-kd,r),i.point(0,r),i.point(kd,r),i.point(kd,0),i.point(kd,-r),i.point(0,-r),i.point(-kd,-r),i.point(-kd,0),i.point(-kd,r);else if(Od(t[0]-e[0])>xd){var o=t[0]<e[0]?kd:-kd;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-kd,-Td]),up=1e9,hp=-up,fp=qn(),dp={sphere:Qn,point:Qn,lineStart:function(){dp.point=tr,dp.lineEnd=$i},lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn},pp=[null,null],mp={type:"LineString",coordinates:pp},_p={Feature:function(t,e){return rr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(rr(n[i].geometry,e))return!0;return!1}},yp={Sphere:function(){return!0},Point:function(t,e){return or(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(or(n[i],e))return!0;return!1},LineString:function(t,e){return sr(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(sr(n[i],e))return!0;return!1},Polygon:function(t,e){return ar(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(ar(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(rr(n[i],e))return!0;return!1}},gp=qn(),vp=qn(),bp={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){bp.lineStart=pr,bp.lineEnd=yr},polygonEnd:function(){bp.lineStart=bp.lineEnd=bp.point=Qn,gp.add(Od(vp)),vp.reset()},result:function(){var t=gp/2;return gp.reset(),t}},wp=1/0,Ep=wp,xp=-wp,Sp=xp,kp={point:function(t,e){t<wp&&(wp=t),t>xp&&(xp=t),e<Ep&&(Ep=e),e>Sp&&(Sp=e)},lineStart:Qn,lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn,result:function(){var t=[[wp,Ep],[xp,Sp]];return xp=Sp=-(Ep=wp=1/0),t}},Tp=0,Cp=0,Ap=0,Pp=0,Mp=0,Op=0,Ip=0,Lp=0,Dp=0,Rp={point:gr,lineStart:vr,lineEnd:Er,polygonStart:function(){Rp.lineStart=xr,Rp.lineEnd=Sr},polygonEnd:function(){Rp.point=gr,Rp.lineStart=vr,Rp.lineEnd=Er},result:function(){var t=Dp?[Ip/Dp,Lp/Dp]:Op?[Pp/Op,Mp/Op]:Ap?[Tp/Ap,Cp/Ap]:[NaN,NaN];return Tp=Cp=Ap=Pp=Mp=Op=Ip=Lp=Dp=0,t}};Cr.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ad)}},result:Qn};var Fp,Np,jp,Bp,Up,Vp=qn(),zp={point:Qn,lineStart:function(){zp.point=Ar},lineEnd:function(){Fp&&Pr(Np,jp),zp.point=Qn},polygonStart:function(){Fp=!0},polygonEnd:function(){Fp=null},result:function(){var t=+Vp;return Vp.reset(),t}};Mr.prototype={_radius:4.5,_circle:Or(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Or(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Lr.prototype={constructor:Lr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Hp=16,qp=Dd(30*Md),Wp=Ir({point:function(t,e){this.stream.point(t*Md,e*Md)}}),Kp=Kr(function(t){return Vd(2/(1+t))});Kp.invert=Gr(function(t){return 2*Yn(t/2)});var Gp=Kr(function(t){return(t=Gn(t))&&t/Bd(t)});Gp.invert=Gr(function(t){return t}),Yr.invert=function(t,e){return[t,2*Id(Fd(e))-Td]},Jr.invert=Jr,to.invert=Gr(Id),no.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,s=o*o;i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Od(n)>xd&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},io.invert=Gr(Yn),ro.invert=Gr(function(t){return 2*Id(t)}),oo.invert=function(t,e){return[-e,2*Id(Fd(t))-Td]},mo.prototype=uo.prototype={constructor:mo,count:function(){return this.eachAfter(co)},each:function(t){var e,n,i,r,o=this,s=[o];do for(e=s.reverse(),s=[];o=e.pop();)if(t(o),n=o.children)for(i=0,r=n.length;i<r;++i)s.push(n[i]);while(s.length);return this},eachAfter:function(t){for(var e,n,i,r=this,o=[r],s=[];r=o.pop();)if(s.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n]);for(;r=s.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return uo(this).eachBefore(fo)}};var Yp=Array.prototype.slice,Xp="$",Qp={depth:-1},Zp={};Ho.prototype=Object.create(mo.prototype);var Jp=(1+Math.sqrt(5))/2,$p=function Jy(t){function e(e,n,i,r,o){Wo(t,e,n,i,r,o)}return e.ratio=function(t){return Jy((t=+t)>1?t:1)},e}(Jp),tm=function $y(t){function e(e,n,i,r,o){if((s=e._squarify)&&s.ratio===t)for(var s,a,l,c,u,h=-1,f=s.length,d=e.value;++h<f;){for(l=(a=s[h]).children,c=a.value=0,u=l.length;c<u;++c)a.value+=l[c].value;a.dice?Ro(a,n,i,r,i+=(o-i)*a.value/d):qo(a,n,i,n+=(r-n)*a.value/d,o),d-=a.value}else e._squarify=s=Wo(t,e,n,i,r,o),s.ratio=t}return e.ratio=function(t){return $y((t=+t)>1?t:1)},e}(Jp),em=[].slice,nm={};Xo.prototype=$o.prototype={constructor:Xo,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=em.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Qo(this),this},abort:function(){return null==this._error&&Zo(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},Jo(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,Jo(this),this}};var im=function tg(t){function e(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return e.source=tg,e}(ts),rm=function eg(t){function e(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var o;if(null!=i)o=i,i=null;else do i=2*t()-1,o=2*t()-1,r=i*i+o*o;while(!r||r>1);return e+n*o*Math.sqrt(-2*Math.log(r)/r)}}return e.source=eg,e}(ts),om=function ng(t){function e(){var e=rm.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return e.source=ng,e}(ts),sm=function ig(t){function e(e){return function(){for(var n=0,i=0;i<e;++i)n+=t();return n}}return e.source=ig,e}(ts),am=function rg(t){function e(e){var n=sm.source(t)(e);return function(){return n()/e}}return e.source=rg,e}(ts),lm=function og(t){function e(e){return function(){return-Math.log(1-t())/e}}return e.source=og,e}(ts),cm=ns("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),um=ns("application/json",function(t){return JSON.parse(t.responseText)}),hm=ns("text/plain",function(t){return t.responseText}),fm=ns("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),dm=is("text/csv",Af),pm=is("text/tab-separated-values",Lf),mm=Array.prototype,_m=mm.map,ym=mm.slice,gm={name:"implicit"},vm=[0,1],bm=new Date,wm=new Date,Em=Ms(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Em.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Ms(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Em:null};var xm=Em.range,Sm=6e4,km=6048e5,Tm=Ms(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Cm=Tm.range,Am=Ms(function(t){t.setTime(Math.floor(t/Sm)*Sm)},function(t,e){t.setTime(+t+e*Sm)},function(t,e){return(e-t)/Sm},function(t){return t.getMinutes()}),Pm=Am.range,Mm=Ms(function(t){var e=t.getTimezoneOffset()*Sm%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Om=Mm.range,Im=Ms(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sm)/864e5},function(t){return t.getDate()-1}),Lm=Im.range,Dm=Os(0),Rm=Os(1),Fm=Os(2),Nm=Os(3),jm=Os(4),Bm=Os(5),Um=Os(6),Vm=Dm.range,zm=Rm.range,Hm=Fm.range,qm=Nm.range,Wm=jm.range,Km=Bm.range,Gm=Um.range,Ym=Ms(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Xm=Ym.range,Qm=Ms(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Qm.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ms(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Zm=Qm.range,Jm=Ms(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Sm)},function(t,e){return(e-t)/Sm},function(t){return t.getUTCMinutes()}),$m=Jm.range,t_=Ms(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),e_=t_.range,n_=Ms(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),i_=n_.range,r_=Is(0),o_=Is(1),s_=Is(2),a_=Is(3),l_=Is(4),c_=Is(5),u_=Is(6),h_=r_.range,f_=o_.range,d_=s_.range,p_=a_.range,m_=l_.range,__=c_.range,y_=u_.range,g_=Ms(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),v_=g_.range,b_=Ms(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});b_.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ms(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var w_,E_=b_.range,x_={"-":"",_:" ",0:"0"},S_=/^\s*\d+/,k_=/^%/,T_=/[\\^$*+?|[\]().{}]/g;Ha({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var C_="%Y-%m-%dT%H:%M:%S.%LZ",A_=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(C_),P_=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse(C_),M_=1e3,O_=60*M_,I_=60*O_,L_=24*I_,D_=7*L_,R_=30*L_,F_=365*L_,N_=Ga("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),j_=Ga("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),B_=Ga("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),U_=Ga("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),V_=sh(Gt(300,.5,0),Gt(-240,.5,1)),z_=sh(Gt(-100,.75,.35),Gt(80,1.5,.8)),H_=sh(Gt(260,.75,.35),Gt(80,1.5,.8)),q_=Gt(),W_=Ya(Ga("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),K_=Ya(Ga("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),G_=Ya(Ga("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Y_=Ya(Ga("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),X_=Math.abs,Q_=Math.atan2,Z_=Math.cos,J_=Math.max,$_=Math.min,ty=Math.sin,ey=Math.sqrt,ny=1e-12,iy=Math.PI,ry=iy/2,oy=2*iy;rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var sy=dl(ol);fl.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var ay=Array.prototype.slice,ly={draw:function(t,e){var n=Math.sqrt(e/iy);t.moveTo(n,0),t.arc(0,0,n,0,oy)}},cy={draw:function(t,e){
var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},uy=Math.sqrt(1/3),hy=2*uy,fy={draw:function(t,e){var n=Math.sqrt(e/hy),i=n*uy;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},dy=Math.sin(iy/10)/Math.sin(7*iy/10),py=Math.sin(oy/10)*dy,my=-Math.cos(oy/10)*dy,_y={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=py*n,r=my*n;t.moveTo(0,-n),t.lineTo(i,r);for(var o=1;o<5;++o){var s=oy*o/5,a=Math.cos(s),l=Math.sin(s);t.lineTo(l*n,-a*n),t.lineTo(a*i-l*r,l*i+a*r)}t.closePath()}},yy={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},gy=Math.sqrt(3),vy={draw:function(t,e){var n=-Math.sqrt(e/(3*gy));t.moveTo(0,2*n),t.lineTo(-gy*n,-n),t.lineTo(gy*n,-n),t.closePath()}},by=Math.sqrt(3)/2,wy=1/Math.sqrt(12),Ey=3*(wy/2+1),xy={draw:function(t,e){var n=Math.sqrt(e/Ey),i=n/2,r=n*wy,o=i,s=n*wy+n,a=-o,l=s;t.moveTo(i,r),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(-.5*i-by*r,by*i+-.5*r),t.lineTo(-.5*o-by*s,by*o+-.5*s),t.lineTo(-.5*a-by*l,by*a+-.5*l),t.lineTo(-.5*i+by*r,-.5*r-by*i),t.lineTo(-.5*o+by*s,-.5*s-by*o),t.lineTo(-.5*a+by*l,-.5*l-by*a),t.closePath()}},Sy=[ly,cy,fy,yy,_y,vy,xy];Tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kl(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Cl.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:kl(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Al.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:kl(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Pl.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],s=t[n]-r,a=e[n]-o,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*s),this._beta*e[l]+(1-this._beta)*(o+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ky=function sg(t){function e(e){return 1===t?new Tl(e):new Pl(e,t)}return e.beta=function(t){return sg(+t)},e}(.85);Ol.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ml(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ml(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ty=function ag(t){function e(e){return new Ol(e,t)}return e.tension=function(t){return ag(+t)},e}(0);Il.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ml(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cy=function lg(t){function e(e){return new Il(e,t)}return e.tension=function(t){return lg(+t)},e}(0);Ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ml(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ay=function cg(t){function e(e){return new Ll(e,t)}return e.tension=function(t){return cg(+t)},e}(0);Rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Dl(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Py=function ug(t){function e(e){return t?new Rl(e,t):new Ol(e,0)}return e.alpha=function(t){return ug(+t)},e}(.5);Fl.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Dl(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var My=function hg(t){function e(e){return t?new Fl(e,t):new Il(e,0)}return e.alpha=function(t){return hg(+t)},e}(.5);Nl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Dl(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Oy=function fg(t){function e(e){return t?new Nl(e,t):new Ll(e,0)}return e.alpha=function(t){return fg(+t)},e}(.5);jl.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Hl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zl(this,this._t0,Vl(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,zl(this,Vl(this,n=Ul(this,t,e)),n);break;default:zl(this,this._t0,n=Ul(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ql.prototype=Object.create(Hl.prototype)).point=function(t,e){Hl.prototype.point.call(this,e,t)},Wl.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},Kl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Gl(t),r=Gl(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Yl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},ic.prototype={constructor:ic,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ac(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(oc(this,n),n=(t=n).U),n.C=!1,i.C=!0,sc(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(sc(this,n),n=(t=n).U),n.C=!1,i.C=!0,oc(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?ac(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,oc(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,sc(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,oc(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,sc(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,oc(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,sc(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Iy,Ly,Dy,Ry,Fy,Ny=[],jy=[],By=1e-6,Uy=1e-12;kc.prototype={constructor:kc,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return pc(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a=n.site,l=-1,c=e[r[o-1]],u=c.left===a?c.right:c.left;++l<o;)s=u,u=(c=e[r[l]]).left===a?c.right:c.left,s&&u&&i<s.index&&i<u.index&&xc(a,s,u)<0&&t.push([a.data,s.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var l=t-r.site[0],c=e-r.site[1],u=l*l+c*c;do r=o.cells[i=s],s=null,r.halfedges.forEach(function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var l=t-a[0],c=e-a[1],h=l*l+c*c;h<u&&(u=h,s=a.index)}});while(null!==s);return o._found=i,null==n||u<=n*n?r.site:null}},Cc.prototype={constructor:Cc,scale:function(t){return 1===t?this:new Cc(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Cc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vy=new Cc(1,0,0);Ac.prototype=Cc.prototype,t.version="4.13.0",t.bisect=jc,t.bisectRight=jc,t.bisectLeft=Bc,t.ascending=e,t.bisector=n,t.cross=function(t,e,n){var r,o,s,a,l=t.length,c=e.length,u=new Array(l*c);for(null==n&&(n=i),r=s=0;r<l;++r)for(a=t[r],o=0;o<c;++o,++s)u[s]=n(a,e[o]);return u},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=s,t.extent=a,t.histogram=function(){function t(t){var r,o,s=t.length,a=new Array(s);for(r=0;r<s;++r)a[r]=e(t[r],r,t);var l=n(a),c=l[0],h=l[1],f=i(a,c,h);Array.isArray(f)||(f=d(c,h,f),f=u(Math.ceil(c/f)*f,Math.floor(h/f)*f,f));for(var p=f.length;f[0]<=c;)f.shift(),--p;for(;f[p-1]>h;)f.pop(),--p;var m,_=new Array(p+1);for(r=0;r<=p;++r)(m=_[r]=[]).x0=r>0?f[r-1]:c,m.x1=r<p?f[r]:h;for(r=0;r<s;++r)c<=(o=a[r])&&o<=h&&_[jc(f,o,0,p)].push(t[r]);return _}var e=c,n=a,i=p;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:l(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:l([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:l(Array.isArray(e)?Vc.call(e):e),t):i},t},t.thresholdFreedmanDiaconis=function(t,n,i){return t=zc.call(t,r).sort(e),Math.ceil((i-n)/(2*(m(t,.75)-m(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*s(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=p,t.max=function(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(i=n;++o<r;)null!=(n=t[o])&&n>i&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&n>i&&(i=n);return i},t.mean=function(t,e){var n,i=t.length,o=i,s=-1,a=0;if(null==e)for(;++s<i;)isNaN(n=r(t[s]))?--o:a+=n;else for(;++s<i;)isNaN(n=r(e(t[s],s,t)))?--o:a+=n;if(o)return a/o},t.median=function(t,n){var i,o=t.length,s=-1,a=[];if(null==n)for(;++s<o;)isNaN(i=r(t[s]))||a.push(i);else for(;++s<o;)isNaN(i=r(n(t[s],s,t)))||a.push(i);return m(a.sort(e),.5)},t.merge=_,t.min=y,t.pairs=function(t,e){null==e&&(e=i);for(var n=0,r=t.length-1,o=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(o,o=t[++n]);return s},t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.quantile=m,t.range=u,t.scan=function(t,n){if(i=t.length){var i,r,o=0,s=0,a=t[s];for(null==n&&(n=e);++o<i;)(n(r=t[o],a)<0||0!==n(a,a))&&(a=r,s=o);return 0===n(a,a)?s:void 0}},t.shuffle=function(t,e,n){for(var i,r,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},t.sum=function(t,e){var n,i=t.length,r=-1,o=0;if(null==e)for(;++r<i;)(n=+t[r])&&(o+=n);else for(;++r<i;)(n=+e(t[r],r,t))&&(o+=n);return o},t.ticks=h,t.tickIncrement=f,t.tickStep=d,t.transpose=g,t.variance=o,t.zip=function(){return g(arguments)},t.axisTop=function(t){return S(Gc,t)},t.axisRight=function(t){return S(Yc,t)},t.axisBottom=function(t){return S(Xc,t)},t.axisLeft=function(t){return S(Qc,t)},t.brush=function(){return Je(of)},t.brushX=function(){return Je(nf)},t.brushY=function(){return Je(rf)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.chord=function(){function t(t){var o,s,a,l,c,h,f=t.length,d=[],p=u(f),m=[],_=[],y=_.groups=new Array(f),g=new Array(f*f);for(o=0,c=-1;++c<f;){for(s=0,h=-1;++h<f;)s+=t[c][h];d.push(s),m.push(u(f)),o+=s}for(n&&p.sort(function(t,e){return n(d[t],d[e])}),i&&m.forEach(function(e,n){e.sort(function(e,r){return i(t[n][e],t[n][r])})}),l=(o=_f(0,mf-e*f)/o)?e:mf/f,s=0,c=-1;++c<f;){for(a=s,h=-1;++h<f;){var v=p[c],b=m[v][h],w=t[v][b],E=s,x=s+=w*o;g[b*f+v]={index:v,subindex:b,startAngle:E,endAngle:x,value:w}}y[v]={index:v,startAngle:a,endAngle:s,value:d[v]},s+=l}for(c=-1;++c<f;)for(h=c-1;++h<f;){var S=g[h*f+c],k=g[c*f+h];(S.value||k.value)&&_.push(S.value<k.value?{source:k,target:S}:{source:S,target:k})}return r?_.sort(r):_}var e=0,n=null,i=null,r=null;return t.padAngle=function(n){return arguments.length?(e=_f(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(i=e,t):i},t.sortChords=function(e){return arguments.length?(null==e?r=null:(r=function(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}(e))._=e,t):r&&r._},t},t.ribbon=function(){function t(){var t,a=yf.call(arguments),l=e.apply(this,a),c=n.apply(this,a),u=+i.apply(this,(a[0]=l,a)),h=r.apply(this,a)-pf,f=o.apply(this,a)-pf,d=u*hf(h),p=u*ff(h),m=+i.apply(this,(a[0]=c,a)),_=r.apply(this,a)-pf,y=o.apply(this,a)-pf;if(s||(s=t=en()),s.moveTo(d,p),s.arc(0,0,u,h,f),h===_&&f===y||(s.quadraticCurveTo(0,0,m*hf(_),m*ff(_)),s.arc(0,0,m,_,y)),s.quadraticCurveTo(0,0,d,p),s.closePath(),t)return s=null,t+""||null}var e=nn,n=rn,i=on,r=sn,o=an,s=null;return t.radius=function(e){return arguments.length?(i="function"==typeof e?e:$e(+e),t):i},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:$e(+e),t):r},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:$e(+e),t):o},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(s=null==e?null:e,t):s},t},t.nest=function(){function t(e,r,s,a){if(r>=o.length)return null!=n&&e.sort(n),null!=i?i(e):e;for(var l,c,u,h=-1,f=e.length,d=o[r++],p=cn(),m=s();++h<f;)(u=p.get(l=d(c=e[h])+""))?u.push(c):p.set(l,[c]);return p.each(function(e,n){a(m,n,t(e,r,s,a))}),m}function e(t,n){if(++n>o.length)return t;var r,a=s[n-1];return null!=i&&n>=o.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=a?r.sort(function(t,e){return a(t.key,e.key)}):r}var n,i,r,o=[],s=[];return r={object:function(e){return t(e,0,un,hn)},map:function(e){return t(e,0,fn,dn)},entries:function(n){return e(t(n,0,fn,dn),0)},key:function(t){return o.push(t),r},sortKeys:function(t){return s[o.length-1]=t,r},sortValues:function(t){return n=t,r},rollup:function(t){return i=t,r}}},t.set=mn,t.map=cn,t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.color=At,t.rgb=It,t.hsl=Rt,t.lab=Bt,t.hcl=Wt,t.cubehelix=Gt,t.dispatch=k,t.drag=function(){function e(t){t.on("mousedown.drag",n).filter(_).on("touchstart.drag",o).on("touchmove.drag",s).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!f&&d.apply(this,arguments)){var e=l("mouse",p.apply(this,arguments),dt,this,arguments);e&&(lt(t.event.view).on("mousemove.drag",i,!0).on("mouseup.drag",r,!0),yt(t.event.view),mt(),h=!1,c=t.event.clientX,u=t.event.clientY,e("start"))}}function i(){if(_t(),!h){var e=t.event.clientX-c,n=t.event.clientY-u;h=e*e+n*n>b}y.mouse("drag")}function r(){lt(t.event.view).on("mousemove.drag mouseup.drag",null),gt(t.event.view,h),_t(),y.mouse("end")}function o(){if(d.apply(this,arguments)){var e,n,i=t.event.changedTouches,r=p.apply(this,arguments),o=i.length;for(e=0;e<o;++e)(n=l(i[e].identifier,r,pt,this,arguments))&&(mt(),n("start"))}}function s(){var e,n,i=t.event.changedTouches,r=i.length;for(e=0;e<r;++e)(n=y[i[e].identifier])&&(_t(),n("drag"))}function a(){var e,n,i=t.event.changedTouches,r=i.length;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),e=0;e<r;++e)(n=y[i[e].identifier])&&(mt(),n("end"))}function l(n,i,r,o,s){var a,l,c,u=r(i,n),h=g.copy();if(rt(new bt(e,"beforestart",a,n,v,u[0],u[1],0,0,h),function(){return null!=(t.event.subject=a=m.apply(o,s))&&(l=a.x-u[0]||0,c=a.y-u[1]||0,!0)}))return function f(t){var d,p=u;switch(t){case"start":y[n]=f,d=v++;break;case"end":delete y[n],--v;case"drag":u=r(i,n),d=v}rt(new bt(e,t,a,n,d,u[0]+l,u[1]+c,u[0]-p[0],u[1]-p[1],h),h.apply,h,[t,o,s])}}var c,u,h,f,d=wt,p=Et,m=xt,_=St,y={},g=k("start","drag","end"),v=0,b=0;return e.filter=function(t){return arguments.length?(d="function"==typeof t?t:vt(!!t),e):d},e.container=function(t){return arguments.length?(p="function"==typeof t?t:vt(t),e):p},e.subject=function(t){return arguments.length?(m="function"==typeof t?t:vt(t),e):m},e.touchable=function(t){return arguments.length?(_="function"==typeof t?t:vt(!!t),e):_},e.on=function(){var t=g.on.apply(g,arguments);return t===g?e:t},e.clickDistance=function(t){return arguments.length?(b=(t=+t)*t,e):Math.sqrt(b)},e},t.dragDisable=yt,t.dragEnable=gt,t.dsvFormat=yn,t.csvParse=Af,t.csvParseRows=Pf,t.csvFormat=Mf,t.csvFormatRows=Of,t.tsvParse=Lf,t.tsvParseRows=Df,t.tsvFormat=Rf,t.tsvFormatRows=Ff,t.easeLinear=function(t){return+t},t.easeQuad=Ne,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Ne,t.easeCubic=je,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=je,t.easePoly=Mh,t.easePolyIn=Ah,t.easePolyOut=Ph,t.easePolyInOut=Mh,t.easeSin=Be,t.easeSinIn=function(t){return 1-Math.cos(t*Ih)},t.easeSinOut=function(t){return Math.sin(t*Ih)},t.easeSinInOut=Be,t.easeExp=Ue,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Ue,t.easeCircle=Ve,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=Ve,t.easeBounce=ze,t.easeBounceIn=function(t){return 1-ze(1-t)},t.easeBounceOut=ze,t.easeBounceInOut=function(t){return((t*=2)<=1?1-ze(1-t):ze(t-1)+1)/2},t.easeBack=Wh,t.easeBackIn=Hh,t.easeBackOut=qh,t.easeBackInOut=Wh,t.easeElastic=Yh,t.easeElasticIn=Gh,t.easeElasticOut=Yh,t.easeElasticInOut=Xh,t.forceCenter=function(t,e){function n(){var n,r,o=i.length,s=0,a=0;for(n=0;n<o;++n)s+=(r=i[n]).x,a+=r.y;for(s=s/o-t,a=a/o-e,n=0;n<o;++n)(r=i[n]).x-=s,r.y-=a}var i;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){i=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},t.forceCollide=function(t){function e(){for(var t,e,i,l,c,u,h,f=r.length,d=0;d<a;++d)for(e=Sn(r,Cn,An).visitAfter(n),t=0;t<f;++t)i=r[t],u=o[i.index],h=u*u,l=i.x+i.vx,c=i.y+i.vy,e.visit(function(t,e,n,r,o){var a=t.data,f=t.r,d=u+f;if(!a)return e>l+d||r<l-d||n>c+d||o<c-d;if(a.index>i.index){var p=l-a.x-a.vx,m=c-a.y-a.vy,_=p*p+m*m;_<d*d&&(0===p&&(p=vn(),_+=p*p),0===m&&(m=vn(),_+=m*m),_=(d-(_=Math.sqrt(_)))/_*s,i.vx+=(p*=_)*(d=(f*=f)/(h+f)),i.vy+=(m*=_)*d,a.vx-=p*(d=1-d),a.vy-=m*d)}})}function n(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function i(){if(r){var e,n,i=r.length;for(o=new Array(i),e=0;e<i;++e)n=r[e],o[n.index]=+t(n,e,r)}}var r,o,s=1,a=1;return"function"!=typeof t&&(t=gn(null==t?1:+t)),e.initialize=function(t){r=t,i()},e.iterations=function(t){return arguments.length?(a=+t,e):a},e.strength=function(t){return arguments.length?(s=+t,e):s},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:gn(+n),i(),e):t},e},t.forceLink=function(t){function e(e){for(var n=0,i=t.length;n<d;++n)for(var r,a,l,u,h,f,p,m=0;m<i;++m)a=(r=t[m]).source,u=(l=r.target).x+l.vx-a.x-a.vx||vn(),h=l.y+l.vy-a.y-a.vy||vn(),u*=f=((f=Math.sqrt(u*u+h*h))-s[m])/f*e*o[m],h*=f,l.vx-=u*(p=c[m]),l.vy-=h*p,a.vx+=u*(p=1-p),a.vy+=h*p}function n(){if(a){var e,n,h=a.length,f=t.length,d=cn(a,u);for(e=0,l=new Array(h);e<f;++e)(n=t[e]).index=e,"object"!=typeof n.source&&(n.source=Mn(d,n.source)),"object"!=typeof n.target&&(n.target=Mn(d,n.target)),l[n.source.index]=(l[n.source.index]||0)+1,l[n.target.index]=(l[n.target.index]||0)+1;for(e=0,c=new Array(f);e<f;++e)n=t[e],c[e]=l[n.source.index]/(l[n.source.index]+l[n.target.index]);o=new Array(f),i(),s=new Array(f),r()}}function i(){if(a)for(var e=0,n=t.length;e<n;++e)o[e]=+h(t[e],e,t)}function r(){if(a)for(var e=0,n=t.length;e<n;++e)s[e]=+f(t[e],e,t)}var o,s,a,l,c,u=Pn,h=function(t){return 1/Math.min(l[t.source.index],l[t.target.index])},f=gn(30),d=1;return null==t&&(t=[]),e.initialize=function(t){a=t,n()},e.links=function(i){return arguments.length?(t=i,n(),e):t},e.id=function(t){return arguments.length?(u=t,e):u},e.iterations=function(t){return arguments.length?(d=+t,e):d},e.strength=function(t){return arguments.length?(h="function"==typeof t?t:gn(+t),i(),e):h},e.distance=function(t){return arguments.length?(f="function"==typeof t?t:gn(+t),r(),e):f},e},t.forceManyBody=function(){function t(t){var e,a=r.length,l=Sn(r,On,In).visitAfter(n);for(s=t,e=0;e<a;++e)o=r[e],l.visit(i)}function e(){if(r){var t,e,n=r.length;for(a=new Array(n),t=0;t<n;++t)e=r[t],a[e.index]=+l(e,t,r)}}function n(t){var e,n,i,r,o,s=0,l=0;if(t.length){for(i=r=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,i+=n*e.x,r+=n*e.y);t.x=i/l,t.y=r/l}else{(e=t).x=e.data.x,e.y=e.data.y;do s+=a[e.data.index];while(e=e.next)}t.value=s}function i(t,e,n,i){if(!t.value)return!0;var r=t.x-o.x,l=t.y-o.y,f=i-e,d=r*r+l*l;if(f*f/h<d)return d<u&&(0===r&&(r=vn(),d+=r*r),0===l&&(l=vn(),d+=l*l),d<c&&(d=Math.sqrt(c*d)),o.vx+=r*t.value*s/d,o.vy+=l*t.value*s/d),!0;if(!(t.length||d>=u)){(t.data!==o||t.next)&&(0===r&&(r=vn(),d+=r*r),0===l&&(l=vn(),d+=l*l),d<c&&(d=Math.sqrt(c*d)));do t.data!==o&&(f=a[t.data.index]*s/d,o.vx+=r*f,o.vy+=l*f);while(t=t.next)}}var r,o,s,a,l=gn(-30),c=1,u=1/0,h=.81;return t.initialize=function(t){r=t,e()},t.strength=function(n){return arguments.length?(l="function"==typeof n?n:gn(+n),e(),t):l},t.distanceMin=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.distanceMax=function(e){return arguments.length?(u=e*e,t):Math.sqrt(u)},t.theta=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t},t.forceRadial=function(t,e,n){function i(t){for(var i=0,r=o.length;i<r;++i){var l=o[i],c=l.x-e||1e-6,u=l.y-n||1e-6,h=Math.sqrt(c*c+u*u),f=(a[i]-h)*s[i]*t/h;l.vx+=c*f,l.vy+=u*f}}function r(){if(o){var e,n=o.length;for(s=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(o[e],e,o),s[e]=isNaN(a[e])?0:+l(o[e],e,o)}}var o,s,a,l=gn(.1);return"function"!=typeof t&&(t=gn(+t)),null==e&&(e=0),null==n&&(n=0),i.initialize=function(t){o=t,r()},i.strength=function(t){return arguments.length?(l="function"==typeof t?t:gn(+t),r(),i):l},i.radius=function(e){return arguments.length?(t="function"==typeof e?e:gn(+e),r(),i):t},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(t){return arguments.length?(n=+t,i):n},i},t.forceSimulation=function(t){function e(){n(),d.call("tick",o),s<a&&(f.stop(),d.call("end",o))}function n(){var e,n,i=t.length;for(s+=(c-s)*l,h.each(function(t){t(s)}),e=0;e<i;++e)null==(n=t[e]).fx?n.x+=n.vx*=u:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=u:(n.y=n.fy,n.vy=0)}function i(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var r=Bf*Math.sqrt(n),o=n*Uf;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function r(e){return e.initialize&&e.initialize(t),e}var o,s=1,a=.001,l=1-Math.pow(a,1/300),c=0,u=.6,h=cn(),f=we(e),d=k("tick","end");return null==t&&(t=[]),i(),o={tick:n,restart:function(){return f.restart(e),o},stop:function(){return f.stop(),o},nodes:function(e){return arguments.length?(t=e,i(),h.each(r),o):t},alpha:function(t){return arguments.length?(s=+t,o):s},alphaMin:function(t){return arguments.length?(a=+t,o):a},alphaDecay:function(t){return arguments.length?(l=+t,o):+l},alphaTarget:function(t){return arguments.length?(c=+t,o):c},velocityDecay:function(t){return arguments.length?(u=1-t,o):1-u},force:function(t,e){return arguments.length>1?(null==e?h.remove(t):h.set(t,r(e)),o):h.get(t)},find:function(e,n,i){var r,o,s,a,l,c=0,u=t.length;for(null==i?i=1/0:i*=i,c=0;c<u;++c)(s=(r=e-(a=t[c]).x)*r+(o=n-a.y)*o)<i&&(l=a,i=s);return l},on:function(t,e){return arguments.length>1?(d.on(t,e),o):d.on(t)}}},t.forceX=function(t){function e(t){for(var e,n=0,s=i.length;n<s;++n)(e=i[n]).vx+=(o[n]-e.x)*r[n]*t}function n(){if(i){var e,n=i.length;for(r=new Array(n),o=new Array(n),e=0;e<n;++e)r[e]=isNaN(o[e]=+t(i[e],e,i))?0:+s(i[e],e,i)}}var i,r,o,s=gn(.1);return"function"!=typeof t&&(t=gn(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(s="function"==typeof t?t:gn(+t),n(),e):s},e.x=function(i){return arguments.length?(t="function"==typeof i?i:gn(+i),n(),e):t},e},t.forceY=function(t){function e(t){for(var e,n=0,s=i.length;n<s;++n)(e=i[n]).vy+=(o[n]-e.y)*r[n]*t;
}function n(){if(i){var e,n=i.length;for(r=new Array(n),o=new Array(n),e=0;e<n;++e)r[e]=isNaN(o[e]=+t(i[e],e,i))?0:+s(i[e],e,i)}}var i,r,o,s=gn(.1);return"function"!=typeof t&&(t=gn(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(s="function"==typeof t?t:gn(+t),n(),e):s},e.y=function(i){return arguments.length?(t="function"==typeof i?i:gn(+i),n(),e):t},e},t.formatDefaultLocale=Un,t.formatLocale=Bn,t.formatSpecifier=Fn,t.precisionFixed=Vn,t.precisionPrefix=zn,t.precisionRound=Hn,t.geoArea=function(t){return Kd.reset(),ti(t,Gd),2*Kd},t.geoBounds=function(t){var e,n,i,r,o,s,a;if($f=Jf=-(Qf=Zf=1/0),rd=[],ti(t,Xd),n=rd.length){for(rd.sort(bi),e=1,o=[i=rd[0]];e<n;++e)wi(i,(r=rd[e])[0])||wi(i,r[1])?(vi(i[0],r[1])>vi(i[0],i[1])&&(i[1]=r[1]),vi(r[0],i[1])>vi(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(a=vi(i[1],r[0]))>s&&(s=a,Qf=r[0],Jf=i[1])}return rd=od=null,Qf===1/0||Zf===1/0?[[NaN,NaN],[NaN,NaN]]:[[Qf,Zf],[Jf,$f]]},t.geoCentroid=function(t){sd=ad=ld=cd=ud=hd=fd=dd=pd=md=_d=0,ti(t,Qd);var e=pd,n=md,i=_d,r=e*e+n*n+i*i;return r<Sd&&(e=hd,n=fd,i=dd,ad<xd&&(e=ld,n=cd,i=ud),(r=e*e+n*n+i*i)<Sd)?[NaN,NaN]:[Ld(n,e)*Pd,Yn(i/Vd(r))*Pd]},t.geoCircle=function(){function t(){var t=i.apply(this,arguments),a=r.apply(this,arguments)*Md,l=o.apply(this,arguments)*Md;return e=[],n=Ri(-t[0]*Md,-t[1]*Md,0).invert,Ui(s,a,l,1),t={type:"Polygon",coordinates:[e]},e=n=null,t}var e,n,i=Ii([0,0]),r=Ii(90),o=Ii(6),s={point:function(t,i){e.push(t=n(t,i)),t[0]*=Pd,t[1]*=Pd}};return t.center=function(e){return arguments.length?(i="function"==typeof e?e:Ii([+e[0],+e[1]]),t):i},t.radius=function(e){return arguments.length?(r="function"==typeof e?e:Ii(+e),t):r},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:Ii(+e),t):o},t},t.geoClipAntimeridian=cp,t.geoClipCircle=Zi,t.geoClipExtent=function(){var t,e,n,i=0,r=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=Ji(i,r,o,s)(e=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,n):[[i,r],[o,s]]}}},t.geoClipRectangle=Ji,t.geoContains=function(t,e){return(t&&_p.hasOwnProperty(t.type)?_p[t.type]:rr)(t,e)},t.geoDistance=ir,t.geoGraticule=fr,t.geoGraticule10=function(){return fr()()},t.geoInterpolate=function(t,e){var n=t[0]*Md,i=t[1]*Md,r=e[0]*Md,o=e[1]*Md,s=Dd(i),a=Bd(i),l=Dd(o),c=Bd(o),u=s*Dd(n),h=s*Bd(n),f=l*Dd(r),d=l*Bd(r),p=2*Yn(Vd(Xn(o-i)+s*l*Xn(r-n))),m=Bd(p),_=p?function(t){var e=Bd(t*=p)/m,n=Bd(p-t)/m,i=n*u+e*f,r=n*h+e*d,o=n*a+e*c;return[Ld(r,i)*Pd,Ld(o,Vd(i*i+r*r))*Pd]}:function(){return[n*Pd,i*Pd]};return _.distance=p,_},t.geoLength=nr,t.geoPath=function(t,e){function n(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),ti(t,i(r))),r.result()}var i,r,o=4.5;return n.area=function(t){return ti(t,i(bp)),bp.result()},n.measure=function(t){return ti(t,i(zp)),zp.result()},n.bounds=function(t){return ti(t,i(kp)),kp.result()},n.centroid=function(t){return ti(t,i(Rp)),Rp.result()},n.projection=function(e){return arguments.length?(i=null==e?(t=null,dr):(t=e).stream,n):t},n.context=function(t){return arguments.length?(r=null==t?(e=null,new Mr):new Cr(e=t),"function"!=typeof o&&r.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),n):o},n.projection(t).context(e)},t.geoAlbers=Wr,t.geoAlbersUsa=function(){function t(t){var e=t[0],n=t[1];return a=null,r.point(e,n),a||(o.point(e,n),a)||(s.point(e,n),a)}function e(){return n=i=null,t}var n,i,r,o,s,a,l=Wr(),c=qr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=qr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){a=[t,e]}};return t.invert=function(t){var e=l.scale(),n=l.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?c:r>=.166&&r<.234&&i>=-.214&&i<-.115?u:l).invert(t)},t.stream=function(t){return n&&i===t?n:n=function(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([l.stream(i=t),c.stream(t),u.stream(t)])},t.precision=function(t){return arguments.length?(l.precision(t),c.precision(t),u.precision(t),e()):l.precision()},t.scale=function(e){return arguments.length?(l.scale(e),c.scale(.35*e),u.scale(e),t.translate(l.translate())):l.scale()},t.translate=function(t){if(!arguments.length)return l.translate();var n=l.scale(),i=+t[0],a=+t[1];return r=l.translate(t).clipExtent([[i-.455*n,a-.238*n],[i+.455*n,a+.238*n]]).stream(h),o=c.translate([i-.307*n,a+.201*n]).clipExtent([[i-.425*n+xd,a+.12*n+xd],[i-.214*n-xd,a+.234*n-xd]]).stream(h),s=u.translate([i-.205*n,a+.212*n]).clipExtent([[i-.214*n+xd,a+.166*n+xd],[i-.115*n-xd,a+.234*n-xd]]).stream(h),e()},t.fitExtent=function(e,n){return Rr(t,e,n)},t.fitSize=function(e,n){return Fr(t,e,n)},t.fitWidth=function(e,n){return Nr(t,e,n)},t.fitHeight=function(e,n){return jr(t,e,n)},t.scale(1070)},t.geoAzimuthalEqualArea=function(){return Ur(Kp).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Kp,t.geoAzimuthalEquidistant=function(){return Ur(Gp).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Gp,t.geoConicConformal=function(){return zr(Zr).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Zr,t.geoConicEqualArea=qr,t.geoConicEqualAreaRaw=Hr,t.geoConicEquidistant=function(){return zr($r).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=$r,t.geoEquirectangular=function(){return Ur(Jr).scale(152.63)},t.geoEquirectangularRaw=Jr,t.geoGnomonic=function(){return Ur(to).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=to,t.geoIdentity=function(){function t(){return r=o=null,s}var e,n,i,r,o,s,a=1,l=0,c=0,u=1,h=1,f=dr,d=null,p=dr;return s={stream:function(t){return r&&o===t?r:r=f(p(o=t))},postclip:function(r){return arguments.length?(p=r,d=e=n=i=null,t()):p},clipExtent:function(r){return arguments.length?(p=null==r?(d=e=n=i=null,dr):Ji(d=+r[0][0],e=+r[0][1],n=+r[1][0],i=+r[1][1]),t()):null==d?null:[[d,e],[n,i]]},scale:function(e){return arguments.length?(f=eo((a=+e)*u,a*h,l,c),t()):a},translate:function(e){return arguments.length?(f=eo(a*u,a*h,l=+e[0],c=+e[1]),t()):[l,c]},reflectX:function(e){return arguments.length?(f=eo(a*(u=e?-1:1),a*h,l,c),t()):u<0},reflectY:function(e){return arguments.length?(f=eo(a*u,a*(h=e?-1:1),l,c),t()):h<0},fitExtent:function(t,e){return Rr(s,t,e)},fitSize:function(t,e){return Fr(s,t,e)},fitWidth:function(t,e){return Nr(s,t,e)},fitHeight:function(t,e){return jr(s,t,e)}}},t.geoProjection=Ur,t.geoProjectionMutator=Vr,t.geoMercator=function(){return Xr(Yr).scale(961/Ad)},t.geoMercatorRaw=Yr,t.geoNaturalEarth1=function(){return Ur(no).scale(175.295)},t.geoNaturalEarth1Raw=no,t.geoOrthographic=function(){return Ur(io).scale(249.5).clipAngle(90+xd)},t.geoOrthographicRaw=io,t.geoStereographic=function(){return Ur(ro).scale(250).clipAngle(142)},t.geoStereographicRaw=ro,t.geoTransverseMercator=function(){var t=Xr(oo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=oo,t.geoRotation=Bi,t.geoStream=ti,t.geoTransform=function(t){return{stream:Ir(t)}},t.cluster=function(){function t(t){var o,s=0;t.eachAfter(function(t){var n=t.children;n?(t.x=function(t){return t.reduce(ao,0)/t.length}(n),t.y=function(t){return 1+t.reduce(lo,0)}(n)):(t.x=o?s+=e(t,o):0,t.y=0,o=t)});var a=function(t){for(var e;e=t.children;)t=e[0];return t}(t),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(t),c=a.x-e(a,l)/2,u=l.x+e(l,a)/2;return t.eachAfter(r?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*i}:function(e){e.x=(e.x-c)/(u-c)*n,e.y=(1-(t.y?e.y/t.y:1))*i})}var e=so,n=1,i=1,r=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(r=!1,n=+e[0],i=+e[1],t):r?null:[n,i]},t.nodeSize=function(e){return arguments.length?(r=!0,n=+e[0],i=+e[1],t):r?[n,i]:null},t},t.hierarchy=uo,t.pack=function(){function t(t){return t.x=n/2,t.y=i/2,e?t.eachBefore(Oo(e)).eachAfter(Io(r,.5)).eachBefore(Lo(1)):t.eachBefore(Oo(Mo)).eachAfter(Io(Ao,1)).eachAfter(Io(r,t.r/Math.min(n,i))).eachBefore(Lo(Math.min(n,i)/(2*t.r))),t}var e=null,n=1,i=1,r=Ao;return t.radius=function(n){return arguments.length?(e=function(t){return null==t?null:Co(t)}(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.padding=function(e){return arguments.length?(r="function"==typeof e?e:Po(+e),t):r},t},t.packSiblings=function(t){return To(t),t},t.packEnclose=_o,t.partition=function(){function t(t){var o=t.height+1;return t.x0=t.y0=i,t.x1=e,t.y1=n/o,t.eachBefore(function(t,e){return function(n){n.children&&Ro(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,s=n.x1-i,a=n.y1-i;s<r&&(r=s=(r+s)/2),a<o&&(o=a=(o+a)/2),n.x0=r,n.y0=o,n.x1=s,n.y1=a}}(n,o)),r&&t.eachBefore(Do),t}var e=1,n=1,i=0,r=!1;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(i){return arguments.length?(e=+i[0],n=+i[1],t):[e,n]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},t.stratify=function(){function t(t){var i,r,o,s,a,l,c,u=t.length,h=new Array(u),f={};for(r=0;r<u;++r)i=t[r],a=h[r]=new mo(i),null!=(l=e(i,r,t))&&(l+="")&&(f[c=Xp+(a.id=l)]=c in f?Zp:a);for(r=0;r<u;++r)if(a=h[r],null!=(l=n(t[r],r,t))&&(l+="")){if(!(s=f[Xp+l]))throw new Error("missing: "+l);if(s===Zp)throw new Error("ambiguous: "+l);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=Qp,o.eachBefore(function(t){t.depth=t.parent.depth+1,--u}).eachBefore(po),o.parent=null,u>0)throw new Error("cycle");return o}var e=Fo,n=No;return t.id=function(n){return arguments.length?(e=Co(n),t):e},t.parentId=function(e){return arguments.length?(n=Co(e),t):n},t},t.tree=function(){function t(t){var l=function(t){for(var e,n,i,r,o,s=new Ho(t,0),a=[s];e=a.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)a.push(n=e.children[r]=new Ho(i[r],r)),n.parent=e;return(s.parent=new Ho(null,0)).children=[s],s}(t);if(l.eachAfter(e),l.parent.m=-l.z,l.eachBefore(n),a)t.eachBefore(i);else{var c=t,u=t,h=t;t.eachBefore(function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>h.depth&&(h=t)});var f=c===u?1:r(c,u)/2,d=f-c.x,p=o/(u.x+f+d),m=s/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+r(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+r(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,o=t,s=t,a=e,l=o.parent.children[0],c=o.m,u=s.m,h=a.m,f=l.m;a=Uo(a),o=Bo(o),a&&o;)l=Bo(l),(s=Uo(s)).a=t,(i=a.z+h-o.z-c+r(a._,o._))>0&&(Vo(zo(a,t,n),t,i),c+=i,u+=i),h+=a.m,c+=o.m,f+=l.m,u+=s.m;a&&!Uo(s)&&(s.t=a,s.m+=h-u),o&&!Bo(l)&&(l.t=o,l.m+=c-f,n=t)}return n}(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t){t.x*=o,t.y=t.depth*s}var r=jo,o=1,s=1,a=null;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(a=!1,o=+e[0],s=+e[1],t):a?null:[o,s]},t.nodeSize=function(e){return arguments.length?(a=!0,o=+e[0],s=+e[1],t):a?[o,s]:null},t},t.treemap=function(){function t(t){return t.x0=t.y0=0,t.x1=r,t.y1=o,t.eachBefore(e),s=[0],i&&t.eachBefore(Do),t}function e(t){var e=s[t.depth],i=t.x0+e,r=t.y0+e,o=t.x1-e,f=t.y1-e;o<i&&(i=o=(i+o)/2),f<r&&(r=f=(r+f)/2),t.x0=i,t.y0=r,t.x1=o,t.y1=f,t.children&&(e=s[t.depth+1]=a(t)/2,i+=h(t)-e,r+=l(t)-e,o-=c(t)-e,f-=u(t)-e,o<i&&(i=o=(i+o)/2),f<r&&(r=f=(r+f)/2),n(t,i,r,o,f))}var n=$p,i=!1,r=1,o=1,s=[0],a=Ao,l=Ao,c=Ao,u=Ao,h=Ao;return t.round=function(e){return arguments.length?(i=!!e,t):i},t.size=function(e){return arguments.length?(r=+e[0],o=+e[1],t):[r,o]},t.tile=function(e){return arguments.length?(n=Co(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:Po(+e),t):a},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(l="function"==typeof e?e:Po(+e),t):l},t.paddingRight=function(e){return arguments.length?(c="function"==typeof e?e:Po(+e),t):c},t.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:Po(+e),t):u},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:Po(+e),t):h},t},t.treemapBinary=function(t,e,n,i,r){function o(t,e,n,i,r,s,a){if(t>=e-1){var c=l[t];return c.x0=i,c.y0=r,c.x1=s,void(c.y1=a)}for(var h=u[t],f=n/2+h,d=t+1,p=e-1;d<p;){var m=d+p>>>1;u[m]<f?d=m+1:p=m}f-u[d-1]<u[d]-f&&t+1<d&&--d;var _=u[d]-h,y=n-_;if(s-i>a-r){var g=(i*y+s*_)/n;o(t,d,_,i,r,g,a),o(d,e,y,g,r,s,a)}else{var v=(r*y+a*_)/n;o(t,d,_,i,r,s,v),o(d,e,y,i,v,s,a)}}var s,a,l=t.children,c=l.length,u=new Array(c+1);for(u[0]=a=s=0;s<c;++s)u[s+1]=a+=l[s].value;o(0,c,t.value,e,n,i,r)},t.treemapDice=Ro,t.treemapSlice=qo,t.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?qo:Ro)(t,e,n,i,r)},t.treemapSquarify=$p,t.treemapResquarify=tm,t.interpolate=ce,t.interpolateArray=re,t.interpolateBasis=Qt,t.interpolateBasisClosed=Zt,t.interpolateDate=oe,t.interpolateNumber=se,t.interpolateObject=ae,t.interpolateRound=ue,t.interpolateString=le,t.interpolateTransformCss=Xu,t.interpolateTransformSvg=Qu,t.interpolateZoom=pe,t.interpolateRgb=zu,t.interpolateRgbBasis=Hu,t.interpolateRgbBasisClosed=qu,t.interpolateHsl=eh,t.interpolateHslLong=nh,t.interpolateLab=function(t,e){var n=ne((t=Bt(t)).l,(e=Bt(e)).l),i=ne(t.a,e.a),r=ne(t.b,e.b),o=ne(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=o(e),t+""}},t.interpolateHcl=ih,t.interpolateHclLong=rh,t.interpolateCubehelix=oh,t.interpolateCubehelixLong=sh,t.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},t.path=en,t.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2},t.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,o=0,s=0,a=t[r-1],l=0;++i<r;)e=a,a=t[i],l+=n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return l*=3,[o/l,s/l]},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Go),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var o=Yo(i),s=Yo(r),a=s[0]===o[0],l=s[s.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[i[o[e]][2]]);for(e=+a;e<s.length-l;++e)c.push(t[i[s[e]][2]]);return c},t.polygonContains=function(t,e){for(var n,i,r=t.length,o=t[r-1],s=e[0],a=e[1],l=o[0],c=o[1],u=!1,h=0;h<r;++h)n=(o=t[h])[0],(i=o[1])>a!=c>a&&s<(l-n)*(a-i)/(c-i)+n&&(u=!u),l=n,c=i;return u},t.polygonLength=function(t){for(var e,n,i=-1,r=t.length,o=t[r-1],s=o[0],a=o[1],l=0;++i<r;)e=s,n=a,e-=s=(o=t[i])[0],n-=a=o[1],l+=Math.sqrt(e*e+n*n);return l},t.quadtree=Sn,t.queue=$o,t.randomUniform=im,t.randomNormal=rm,t.randomLogNormal=om,t.randomBates=am,t.randomIrwinHall=sm,t.randomExponential=lm,t.request=es,t.html=cm,t.json=um,t.text=hm,t.xml=fm,t.csv=dm,t.tsv=pm,t.scaleBand=os,t.scalePoint=function(){return ss(os().paddingInner(1))},t.scaleIdentity=_s,t.scaleLinear=ms,t.scaleLog=Ss,t.scaleOrdinal=rs,t.scaleImplicit=gm,t.scalePow=Ts,t.scaleSqrt=function(){return Ts().exponent(.5)},t.scaleQuantile=Cs,t.scaleQuantize=As,t.scaleThreshold=Ps,t.scaleTime=function(){return Ka(Qm,Ym,Dm,Im,Mm,Am,Tm,Em,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Ka(b_,g_,r_,n_,t_,Jm,Tm,Em,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=N_,t.schemeCategory20b=j_,t.schemeCategory20c=B_,t.schemeCategory20=U_,t.interpolateCubehelixDefault=V_,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return q_.h=360*t-100,q_.s=1.5-1.5*e,q_.l=.8-.9*e,q_+""},t.interpolateWarm=z_,t.interpolateCool=H_,t.interpolateViridis=W_,t.interpolateMagma=K_,t.interpolateInferno=G_,t.interpolatePlasma=Y_,t.scaleSequential=Xa,t.create=function(t){return lt(P(t).call(document.documentElement))},t.creator=P,t.local=ct,t.matcher=ru,t.mouse=dt,t.namespace=A,t.namespaces=tu,t.clientPoint=ft,t.select=lt,t.selectAll=function(t){return"string"==typeof t?new st([document.querySelectorAll(t)],[document.documentElement]):new st([null==t?[]:t],au)},t.selection=at,t.selector=O,t.selectorAll=L,t.style=U,t.touch=pt,t.touches=function(t,e){null==e&&(e=ht().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=ft(t,e[n]);return r},t.window=B,t.customEvent=rt,t.arc=function(){function t(){var t,c,u=+e.apply(this,arguments),h=+n.apply(this,arguments),f=o.apply(this,arguments)-ry,d=s.apply(this,arguments)-ry,p=X_(d-f),m=d>f;if(l||(l=t=en()),h<u&&(c=h,h=u,u=c),h>ny)if(p>oy-ny)l.moveTo(h*Z_(f),h*ty(f)),l.arc(0,0,h,f,d,!m),u>ny&&(l.moveTo(u*Z_(d),u*ty(d)),l.arc(0,0,u,d,f,m));else{var _,y,g=f,v=d,b=f,w=d,E=p,x=p,S=a.apply(this,arguments)/2,k=S>ny&&(r?+r.apply(this,arguments):ey(u*u+h*h)),T=$_(X_(h-u)/2,+i.apply(this,arguments)),C=T,A=T;if(k>ny){var P=Za(k/u*ty(S)),M=Za(k/h*ty(S));(E-=2*P)>ny?(P*=m?1:-1,b+=P,w-=P):(E=0,b=w=(f+d)/2),(x-=2*M)>ny?(M*=m?1:-1,g+=M,v-=M):(x=0,g=v=(f+d)/2)}var O=h*Z_(g),I=h*ty(g),L=u*Z_(w),D=u*ty(w);if(T>ny){var R=h*Z_(v),F=h*ty(v),N=u*Z_(b),j=u*ty(b);if(p<iy){var B=E>ny?function(t,e,n,i,r,o,s,a){var l=n-t,c=i-e,u=s-r,h=a-o,f=(u*(e-o)-h*(t-r))/(h*l-u*c);return[t+f*l,e+f*c]}(O,I,N,j,R,F,L,D):[L,D],U=O-B[0],V=I-B[1],z=R-B[0],H=F-B[1],q=1/ty(function(t){return t>1?0:t<-1?iy:Math.acos(t)}((U*z+V*H)/(ey(U*U+V*V)*ey(z*z+H*H)))/2),W=ey(B[0]*B[0]+B[1]*B[1]);C=$_(T,(u-W)/(q-1)),A=$_(T,(h-W)/(q+1))}}x>ny?A>ny?(_=il(N,j,O,I,h,A,m),y=il(R,F,L,D,h,A,m),l.moveTo(_.cx+_.x01,_.cy+_.y01),A<T?l.arc(_.cx,_.cy,A,Q_(_.y01,_.x01),Q_(y.y01,y.x01),!m):(l.arc(_.cx,_.cy,A,Q_(_.y01,_.x01),Q_(_.y11,_.x11),!m),l.arc(0,0,h,Q_(_.cy+_.y11,_.cx+_.x11),Q_(y.cy+y.y11,y.cx+y.x11),!m),l.arc(y.cx,y.cy,A,Q_(y.y11,y.x11),Q_(y.y01,y.x01),!m))):(l.moveTo(O,I),l.arc(0,0,h,g,v,!m)):l.moveTo(O,I),u>ny&&E>ny?C>ny?(_=il(L,D,R,F,u,-C,m),y=il(O,I,N,j,u,-C,m),l.lineTo(_.cx+_.x01,_.cy+_.y01),C<T?l.arc(_.cx,_.cy,C,Q_(_.y01,_.x01),Q_(y.y01,y.x01),!m):(l.arc(_.cx,_.cy,C,Q_(_.y01,_.x01),Q_(_.y11,_.x11),!m),l.arc(0,0,u,Q_(_.cy+_.y11,_.cx+_.x11),Q_(y.cy+y.y11,y.cx+y.x11),m),l.arc(y.cx,y.cy,C,Q_(y.y11,y.x11),Q_(y.y01,y.x01),!m))):l.arc(0,0,u,w,b,m):l.lineTo(L,D)}else l.moveTo(0,0);if(l.closePath(),t)return l=null,t+""||null}var e=Ja,n=$a,i=Qa(0),r=null,o=tl,s=el,a=nl,l=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-iy/2;return[Z_(i)*t,ty(i)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Qa(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.cornerRadius=function(e){return arguments.length?(i="function"==typeof e?e:Qa(+e),t):i},t.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Qa(+e),t):r},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qa(+e),t):o},t.endAngle=function(e){return arguments.length?(s="function"==typeof e?e:Qa(+e),t):s},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:Qa(+e),t):a},t.context=function(e){return arguments.length?(l=null==e?null:e,t):l},t},t.area=cl,t.line=ll,t.pie=function(){function t(t){var a,l,c,u,h,f=t.length,d=0,p=new Array(f),m=new Array(f),_=+r.apply(this,arguments),y=Math.min(oy,Math.max(-oy,o.apply(this,arguments)-_)),g=Math.min(Math.abs(y)/f,s.apply(this,arguments)),v=g*(y<0?-1:1);for(a=0;a<f;++a)(h=m[p[a]=a]=+e(t[a],a,t))>0&&(d+=h);for(null!=n?p.sort(function(t,e){return n(m[t],m[e])}):null!=i&&p.sort(function(e,n){return i(t[e],t[n])}),a=0,c=d?(y-f*v)/d:0;a<f;++a,_=u)l=p[a],u=_+((h=m[l])>0?h*c:0)+v,m[l]={data:t[l],index:a,value:h,startAngle:_,endAngle:u,padAngle:g};return m}var e=hl,n=ul,i=null,r=Qa(0),o=Qa(oy),s=Qa(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Qa(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,i=null,t):n},t.sort=function(e){return arguments.length?(i=e,n=null,t):i},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),t):r},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qa(+e),t):o},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:Qa(+e),t):s},t},t.areaRadial=_l,t.radialArea=_l,t.lineRadial=ml,t.radialLine=ml,t.pointRadial=yl,t.linkHorizontal=function(){return bl(wl)},t.linkVertical=function(){return bl(El)},t.linkRadial=function(){var t=bl(xl);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){function t(){var t;if(i||(i=t=en()),e.apply(this,arguments).draw(i,+n.apply(this,arguments)),t)return i=null,t+""||null}var e=Qa(ly),n=Qa(64),i=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:Qa(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.context=function(e){return arguments.length?(i=null==e?null:e,t):i},t},t.symbols=Sy,t.symbolCircle=ly,t.symbolCross=cy,t.symbolDiamond=fy,t.symbolSquare=yy,t.symbolStar=_y,t.symbolTriangle=vy,t.symbolWye=xy,t.curveBasisClosed=function(t){return new Cl(t)},t.curveBasisOpen=function(t){return new Al(t)},t.curveBasis=function(t){return new Tl(t)},t.curveBundle=ky,t.curveCardinalClosed=Cy,t.curveCardinalOpen=Ay,t.curveCardinal=Ty,t.curveCatmullRomClosed=My,t.curveCatmullRomOpen=Oy,t.curveCatmullRom=Py,t.curveLinearClosed=function(t){return new jl(t)},t.curveLinear=ol,t.curveMonotoneX=function(t){return new Hl(t)},t.curveMonotoneY=function(t){return new ql(t)},t.curveNatural=function(t){return new Kl(t)},t.curveStep=function(t){return new Yl(t,.5)},t.curveStepAfter=function(t){return new Yl(t,1)},t.curveStepBefore=function(t){return new Yl(t,0)},t.stack=function(){function t(t){var o,s,a=e.apply(this,arguments),l=t.length,c=a.length,u=new Array(c);for(o=0;o<c;++o){for(var h,f=a[o],d=u[o]=new Array(l),p=0;p<l;++p)d[p]=h=[0,+r(t[p],f,p,t)],h.data=t[p];d.key=f}for(o=0,s=n(u);o<c;++o)u[s[o]].index=o;return i(u,s),u}var e=Qa([]),n=Ql,i=Xl,r=Zl;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:Qa(ay.call(n)),t):e},t.value=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),t):r},t.order=function(e){return arguments.length?(n=null==e?Ql:"function"==typeof e?e:Qa(ay.call(e)),t):n},t.offset=function(e){return arguments.length?(i=null==e?Xl:e,t):i},t},t.stackOffsetExpand=function(t,e){if((i=t.length)>0){for(var n,i,r,o=0,s=t[0].length;o<s;++o){for(r=n=0;n<i;++n)r+=t[n][o][1]||0;if(r)for(n=0;n<i;++n)t[n][o][1]/=r}Xl(t,e)}},t.stackOffsetDiverging=function(t,e){if((a=t.length)>1)for(var n,i,r,o,s,a,l=0,c=t[e[0]].length;l<c;++l)for(o=s=0,n=0;n<a;++n)(r=(i=t[e[n]][l])[1]-i[0])>=0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=s,i[0]=s+=r):i[0]=o},t.stackOffsetNone=Xl,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],o=r.length;i<o;++i){for(var s=0,a=0;s<n;++s)a+=t[s][i][1]||0;r[i][1]+=r[i][0]=-a/2}Xl(t,e)}},t.stackOffsetWiggle=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,o=0,s=1;s<i;++s){for(var a=0,l=0,c=0;a<r;++a){for(var u=t[e[a]],h=u[s][1]||0,f=(h-(u[s-1][1]||0))/2,d=0;d<a;++d){var p=t[e[d]];f+=(p[s][1]||0)-(p[s-1][1]||0)}l+=h,c+=f*h}n[s-1][1]+=n[s-1][0]=o,l&&(o-=c/l)}n[s-1][1]+=n[s-1][0]=o,Xl(t,e)}},t.stackOrderAscending=Jl,t.stackOrderDescending=function(t){return Jl(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,i=t.length,r=t.map($l),o=Ql(t).sort(function(t,e){return r[e]-r[t]}),s=0,a=0,l=[],c=[];for(e=0;e<i;++e)n=o[e],s<a?(s+=r[n],l.push(n)):(a+=r[n],c.push(n));return c.reverse().concat(l)},t.stackOrderNone=Ql,t.stackOrderReverse=function(t){return Ql(t).reverse()},t.timeInterval=Ms,t.timeMillisecond=Em,t.timeMilliseconds=xm,t.utcMillisecond=Em,t.utcMilliseconds=xm,t.timeSecond=Tm,t.timeSeconds=Cm,t.utcSecond=Tm,t.utcSeconds=Cm,t.timeMinute=Am,t.timeMinutes=Pm,t.timeHour=Mm,t.timeHours=Om,t.timeDay=Im,t.timeDays=Lm,t.timeWeek=Dm,t.timeWeeks=Vm,t.timeSunday=Dm,t.timeSundays=Vm,t.timeMonday=Rm,t.timeMondays=zm,t.timeTuesday=Fm,t.timeTuesdays=Hm,t.timeWednesday=Nm,t.timeWednesdays=qm,t.timeThursday=jm,t.timeThursdays=Wm,t.timeFriday=Bm,t.timeFridays=Km,t.timeSaturday=Um,t.timeSaturdays=Gm,t.timeMonth=Ym,t.timeMonths=Xm,t.timeYear=Qm,t.timeYears=Zm,t.utcMinute=Jm,t.utcMinutes=$m,t.utcHour=t_,t.utcHours=e_,t.utcDay=n_,t.utcDays=i_,t.utcWeek=r_,t.utcWeeks=h_,t.utcSunday=r_,t.utcSundays=h_,t.utcMonday=o_,t.utcMondays=f_,t.utcTuesday=s_,t.utcTuesdays=d_,t.utcWednesday=a_,t.utcWednesdays=p_,t.utcThursday=l_,t.utcThursdays=m_,t.utcFriday=c_,t.utcFridays=__,t.utcSaturday=u_,t.utcSaturdays=y_,t.utcMonth=g_,t.utcMonths=v_,t.utcYear=b_,t.utcYears=E_,t.timeFormatDefaultLocale=Ha,t.timeFormatLocale=Fs,t.isoFormat=A_,t.isoParse=P_,t.now=ge,t.timer=we,t.timerFlush=Ee,t.timeout=Te,t.interval=function(t,e,n){var i=new be,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?ge():+n,i.restart(function o(s){s+=r,i.restart(o,r+=e,n),t(s)},e,n),i)},t.transition=Re,t.active=function(t,e){var n,i,r=t.__transition;if(r){e=null==e?null:e+"";for(i in r)if((n=r[i]).state>vh&&n.name===e)return new De([[t]],Zh,e,(+i))}return null},t.interrupt=Oe,t.voronoi=function(){function t(t){return new kc(t.map(function(i,r){var o=[Math.round(e(i,r,t)/By)*By,Math.round(n(i,r,t)/By)*By];return o.index=r,o.data=i,o}),i)}var e=ec,n=nc,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:tc(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:tc(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t},t.zoom=function(){function e(t){t.property("__zoom",Lc).on("wheel.zoom",l).on("mousedown.zoom",c).on("dblclick.zoom",u).filter(b).on("touchstart.zoom",h).on("touchmove.zoom",f).on("touchend.zoom touchcancel.zoom",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(t,e){return(e=Math.max(w[0],Math.min(w[1],e)))===t.k?t:new Cc(e,t.x,t.y)}function i(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new Cc(t.k,i,r)}function r(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,e,n){t.on("start.zoom",function(){s(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){s(this,arguments).end()}).tween("zoom",function(){var t=arguments,i=s(this,t),o=y.apply(this,t),a=n||r(o),l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=this.__zoom,u="function"==typeof e?e.apply(this,t):e,h=S(c.invert(a).concat(l/c.k),u.invert(a).concat(l/u.k));return function(t){if(1===t)t=u;else{var e=h(t),n=l/e[2];t=new Cc(n,a[0]-e[0]*n,a[1]-e[1]*n)}i.zoom(null,t)}})}function s(t,e){for(var n,i=0,r=T.length;i<r;++i)if((n=T[i]).that===t)return n;return new a(t,e)}function a(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=y.apply(t,e)}function l(){if(_.apply(this,arguments)){var t=s(this,arguments),e=this.__zoom,r=Math.max(w[0],Math.min(w[1],e.k*Math.pow(2,v.apply(this,arguments)))),o=dt(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[o,e.invert(o)],Oe(this),t.start()}Mc(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},P),t.zoom("mouse",g(i(n(e,r),t.mouse[0],t.mouse[1]),t.extent,E))}}function c(){if(!m&&_.apply(this,arguments)){var e=s(this,arguments),n=lt(t.event.view).on("mousemove.zoom",function(){if(Mc(),!e.moved){var n=t.event.clientX-o,r=t.event.clientY-a;e.moved=n*n+r*r>M}e.zoom("mouse",g(i(e.that.__zoom,e.mouse[0]=dt(e.that),e.mouse[1]),e.extent,E))},!0).on("mouseup.zoom",function(){n.on("mousemove.zoom mouseup.zoom",null),gt(t.event.view,e.moved),Mc(),e.end()},!0),r=dt(this),o=t.event.clientX,a=t.event.clientY;yt(t.event.view),Pc(),e.mouse=[r,this.__zoom.invert(r)],Oe(this),e.start()}}function u(){if(_.apply(this,arguments)){var r=this.__zoom,s=dt(this),a=r.invert(s),l=r.k*(t.event.shiftKey?.5:2),c=g(i(n(r,l),s,a),y.apply(this,arguments),E);Mc(),x>0?lt(this).transition().duration(x).call(o,c,s):lt(this).call(e.transform,c)}}function h(){if(_.apply(this,arguments)){var e,n,i,r,o=s(this,arguments),a=t.event.changedTouches,l=a.length;for(Pc(),n=0;n<l;++n)r=[r=pt(this,a,(i=a[n]).identifier),this.__zoom.invert(r),i.identifier],o.touch0?o.touch1||(o.touch1=r):(o.touch0=r,e=!0);if(p&&(p=clearTimeout(p),!o.touch1))return o.end(),void((r=lt(this).on("dblclick.zoom"))&&r.apply(this,arguments));e&&(p=setTimeout(function(){p=null},A),Oe(this),o.start())}}function f(){var e,r,o,a,l=s(this,arguments),c=t.event.changedTouches,u=c.length;for(Mc(),p&&(p=clearTimeout(p)),e=0;e<u;++e)o=pt(this,c,(r=c[e]).identifier),l.touch0&&l.touch0[2]===r.identifier?l.touch0[0]=o:l.touch1&&l.touch1[2]===r.identifier&&(l.touch1[0]=o);if(r=l.that.__zoom,l.touch1){var h=l.touch0[0],f=l.touch0[1],d=l.touch1[0],m=l.touch1[1],_=(_=d[0]-h[0])*_+(_=d[1]-h[1])*_,y=(y=m[0]-f[0])*y+(y=m[1]-f[1])*y;r=n(r,Math.sqrt(_/y)),o=[(h[0]+d[0])/2,(h[1]+d[1])/2],a=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else{if(!l.touch0)return;o=l.touch0[0],a=l.touch0[1]}l.zoom("touch",g(i(r,o,a),l.extent,E))}function d(){var e,n,i=s(this,arguments),r=t.event.changedTouches,o=r.length;for(Pc(),m&&clearTimeout(m),m=setTimeout(function(){m=null},A),e=0;e<o;++e)n=r[e],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}var p,m,_=Oc,y=Ic,g=Fc,v=Dc,b=Rc,w=[0,1/0],E=[[-1/0,-1/0],[1/0,1/0]],x=250,S=pe,T=[],C=k("start","zoom","end"),A=500,P=150,M=0;return e.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Lc),t!==n?o(t,e):n.interrupt().each(function(){s(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},e.scaleTo=function(t,o){e.transform(t,function(){var t=y.apply(this,arguments),e=this.__zoom,s=r(t),a=e.invert(s),l="function"==typeof o?o.apply(this,arguments):o;return g(i(n(e,l),s,a),t,E)})},e.translateBy=function(t,n,i){e.transform(t,function(){return g(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),y.apply(this,arguments),E)})},e.translateTo=function(t,n,i){e.transform(t,function(){var t=y.apply(this,arguments),e=this.__zoom,o=r(t);return g(Vy.translate(o[0],o[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof i?-i.apply(this,arguments):-i),t,E)})},a.prototype={start:function(){return 1==++this.active&&(this.index=T.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),
this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(T.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){rt(new function(t,e,n){this.target=t,this.type=e,this.transform=n}(e,t,this.that.__zoom),C.apply,C,[t,this.that,this.args])}},e.wheelDelta=function(t){return arguments.length?(v="function"==typeof t?t:Tc(+t),e):v},e.filter=function(t){return arguments.length?(_="function"==typeof t?t:Tc(!!t),e):_},e.touchable=function(t){return arguments.length?(b="function"==typeof t?t:Tc(!!t),e):b},e.extent=function(t){return arguments.length?(y="function"==typeof t?t:Tc([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):y},e.scaleExtent=function(t){return arguments.length?(w[0]=+t[0],w[1]=+t[1],e):[w[0],w[1]]},e.translateExtent=function(t){return arguments.length?(E[0][0]=+t[0][0],E[1][0]=+t[1][0],E[0][1]=+t[0][1],E[1][1]=+t[1][1],e):[[E[0][0],E[0][1]],[E[1][0],E[1][1]]]},e.constrain=function(t){return arguments.length?(g=t,e):g},e.duration=function(t){return arguments.length?(x=+t,e):x},e.interpolate=function(t){return arguments.length?(S=t,e):S},e.on=function(){var t=C.on.apply(C,arguments);return t===C?e:t},e.clickDistance=function(t){return arguments.length?(M=(t=+t)*t,e):Math.sqrt(M)},e},t.zoomTransform=Ac,t.zoomIdentity=Vy,Object.defineProperty(t,"__esModule",{value:!0})})},{}],517:[function(t,e,n){function i(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=i},{}],518:[function(t,e,n){function i(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=i},{}],519:[function(t,e,n){function i(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=i+i,l=r+r,c=o+o,u=i*a,h=i*l,f=i*c,d=r*l,p=r*c,m=o*c,_=s*a,y=s*l,g=s*c;return t[0]=1-(d+m),t[1]=h+g,t[2]=f-y,t[3]=0,t[4]=h-g,t[5]=1-(u+m),t[6]=p+_,t[7]=0,t[8]=f+y,t[9]=p-_,t[10]=1-(u+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}e.exports=i},{}],520:[function(t,e,n){function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=i},{}],521:[function(t,e,n){function i(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],_=e[14],y=e[15],g=n*a-i*s,v=n*l-r*s,b=n*c-o*s,w=i*l-r*a,E=i*c-o*a,x=r*c-o*l,S=u*m-h*p,k=u*_-f*p,T=u*y-d*p,C=h*_-f*m,A=h*y-d*m,P=f*y-d*_,M=g*P-v*A+b*C+w*T-E*k+x*S;return M?(M=1/M,t[0]=(a*P-l*A+c*C)*M,t[1]=(r*A-i*P-o*C)*M,t[2]=(m*x-_*E+y*w)*M,t[3]=(f*E-h*x-d*w)*M,t[4]=(l*T-s*P-c*k)*M,t[5]=(n*P-r*T+o*k)*M,t[6]=(_*b-p*x-y*v)*M,t[7]=(u*x-f*b+d*v)*M,t[8]=(s*A-a*T+c*S)*M,t[9]=(i*T-n*A-o*S)*M,t[10]=(p*E-m*b+y*g)*M,t[11]=(h*b-u*E-d*g)*M,t[12]=(a*k-s*C-l*S)*M,t[13]=(n*C-i*k+r*S)*M,t[14]=(m*v-p*w-_*g)*M,t[15]=(u*w-h*v+f*g)*M,t):null}e.exports=i},{}],522:[function(t,e,n){function i(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],_=e[13],y=e[14],g=e[15],v=n[0],b=n[1],w=n[2],E=n[3];return t[0]=v*i+b*a+w*h+E*m,t[1]=v*r+b*l+w*f+E*_,t[2]=v*o+b*c+w*d+E*y,t[3]=v*s+b*u+w*p+E*g,v=n[4],b=n[5],w=n[6],E=n[7],t[4]=v*i+b*a+w*h+E*m,t[5]=v*r+b*l+w*f+E*_,t[6]=v*o+b*c+w*d+E*y,t[7]=v*s+b*u+w*p+E*g,v=n[8],b=n[9],w=n[10],E=n[11],t[8]=v*i+b*a+w*h+E*m,t[9]=v*r+b*l+w*f+E*_,t[10]=v*o+b*c+w*d+E*y,t[11]=v*s+b*u+w*p+E*g,v=n[12],b=n[13],w=n[14],E=n[15],t[12]=v*i+b*a+w*h+E*m,t[13]=v*r+b*l+w*f+E*_,t[14]=v*o+b*c+w*d+E*y,t[15]=v*s+b*u+w*p+E*g,t}e.exports=i},{}],523:[function(t,e,n){function i(t,e,n,i){var r,o,s,a,l,c,u,h,f,d,p,m,_,y,g,v,b,w,E,x,S,k,T,C,A=i[0],P=i[1],M=i[2],O=Math.sqrt(A*A+P*P+M*M);return Math.abs(O)<1e-6?null:(O=1/O,A*=O,P*=O,M*=O,r=Math.sin(n),o=Math.cos(n),s=1-o,a=e[0],l=e[1],c=e[2],u=e[3],h=e[4],f=e[5],d=e[6],p=e[7],m=e[8],_=e[9],y=e[10],g=e[11],v=A*A*s+o,b=P*A*s+M*r,w=M*A*s-P*r,E=A*P*s-M*r,x=P*P*s+o,S=M*P*s+A*r,k=A*M*s+P*r,T=P*M*s-A*r,C=M*M*s+o,t[0]=a*v+h*b+m*w,t[1]=l*v+f*b+_*w,t[2]=c*v+d*b+y*w,t[3]=u*v+p*b+g*w,t[4]=a*E+h*x+m*S,t[5]=l*E+f*x+_*S,t[6]=c*E+d*x+y*S,t[7]=u*E+p*x+g*S,t[8]=a*k+h*T+m*C,t[9]=l*k+f*T+_*C,t[10]=c*k+d*T+y*C,t[11]=u*k+p*T+g*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}e.exports=i},{}],524:[function(t,e,n){function i(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*i,t[5]=s*r+u*i,t[6]=a*r+h*i,t[7]=l*r+f*i,t[8]=c*r-o*i,t[9]=u*r-s*i,t[10]=h*r-a*i,t[11]=f*r-l*i,t}e.exports=i},{}],525:[function(t,e,n){function i(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*i,t[1]=s*r-u*i,t[2]=a*r-h*i,t[3]=l*r-f*i,t[8]=o*i+c*r,t[9]=s*i+u*r,t[10]=a*i+h*r,t[11]=l*i+f*r,t}e.exports=i},{}],526:[function(t,e,n){function i(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*i,t[1]=s*r+u*i,t[2]=a*r+h*i,t[3]=l*r+f*i,t[4]=c*r-o*i,t[5]=u*r-s*i,t[6]=h*r-a*i,t[7]=f*r-l*i,t}e.exports=i},{}],527:[function(t,e,n){function i(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=i},{}],528:[function(t,e,n){function i(t,e,n){var i,r,o,s,a,l,c,u,h,f,d,p,m=n[0],_=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*_+e[8]*y+e[12],t[13]=e[1]*m+e[5]*_+e[9]*y+e[13],t[14]=e[2]*m+e[6]*_+e[10]*y+e[14],t[15]=e[3]*m+e[7]*_+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+a*_+h*y+e[12],t[13]=r*m+l*_+f*y+e[13],t[14]=o*m+c*_+d*y+e[14],t[15]=s*m+u*_+p*y+e[15]),t}e.exports=i},{}],529:[function(t,e,n){function i(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}e.exports=i},{}],530:[function(t,e,n){function i(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}e.exports=i},{}],531:[function(t,e,n){function i(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],l=n[2];return t[0]=r*l-o*a,t[1]=o*s-i*l,t[2]=i*a-r*s,t}e.exports=i},{}],532:[function(t,e,n){function i(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.exports=i},{}],533:[function(t,e,n){function i(t,e,n){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=n,i}e.exports=i},{}],534:[function(t,e,n){function i(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}e.exports=i},{}],535:[function(t,e,n){function i(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}e.exports=i},{}],536:[function(t,e,n){function i(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}e.exports=i},{}],537:[function(t,e,n){function i(t,e,n,i){var r=new Float32Array(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}e.exports=i},{}],538:[function(t,e,n){function i(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}e.exports=i},{}],539:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/anim-system/Model/AnimSystemModel"),c=(t("@marcom/anim-system/AnimSystem"),t("../helpers/BreakPoints")),u=t("@marcom/ac-raf-emitter/RAFEmitter"),h=t("../helpers/forcesBasicInteraction"),f=t("@marcom/ac-raf-emitter/draw"),d=["key"],p=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t.pageMetrics.breakpoint!==c.BASIC&&(n.parentContainer=document.querySelector(".scroll-container-horizontal"),n.scrollContent=document.querySelector(".scroll-container-touch"),n.router=document.querySelector(".router"),n.elements=Array.from(n.el.querySelectorAll("section [tabindex], section a, section button")),n._rafEmitter=new u,n.footNoteLinks=Array.from(n.el.querySelectorAll(".footnote")),n.footNote=n.el.querySelector(".ac-gf-sosumi"),n.elements.push(n.footNote)),n}return o(e,t),s(e,[{key:"mounted",value:function(){var t=this;this.onFocus=this.onFocus.bind(this),this.scrollY=window.scrollY,this.scrollComponent=this.gum.getComponentOfType("AutoScrollComponent"),this.parentContainer.scrollLeft=0,this.parentContainer.scrollTop=0,this.calculatePosition(),this.footNoteLinks.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),window.scrollTo(0,t.footNote.moveIntoView)})})}},{key:"onFocus",value:function(t){var e=this;l.pageMetrics.breakpoint!==c.BASIC&&d.indexOf(t.currentTarget.dataset.focusMethod)>-1&&(f(function(){e.parentContainer.scrollLeft=0,e.parentContainer.scrollTop=0}),window.scrollTo(0,t.currentTarget.moveIntoView))}},{key:"calculatePosition",value:function(){var t=this;this.vh=l.pageMetrics.windowHeight,this.vw=l.pageMetrics.windowWidth;var e=0,n=30;this._rafEmitter.on("update",function(){if(e++,e>n){var i=t.scrollComponent.content.getBoundingClientRect(),r=t.router.getBoundingClientRect();return void t.elements.forEach(function(e){var n=e.getBoundingClientRect();e.positionX=Math.abs(i.x-n.x),e.positionX<t.scrollComponent.scrollableWidth?e.moveIntoView=e.positionX-t.vw/2:(e.positionY=Math.abs(r.y-n.y)+t.vh,e.moveIntoView=Math.abs(i.x-r.x)+e.positionY-t.vh/2),e.addEventListener("focus",t.onFocus)})}t._rafEmitter.run()}),this._rafEmitter.run()}},{key:"onResizeDebounced",value:function(){l.pageMetrics.breakpoint!==c.BASIC&&this.calculatePosition()}}],[{key:"IS_SUPPORTED",value:function(){return!h&&l.pageMetrics.breakpoint!==c.BASIC}}]),e}(a);e.exports=p},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"@marcom/ac-raf-emitter/RAFEmitter":266,"@marcom/ac-raf-emitter/draw":272,"@marcom/anim-system/AnimSystem":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],540:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/src/BaseComponent"),l=(t("../helpers/BreakPoints"),t("@marcom/anim-system/Model/AnimSystemModel")),c=null,u=function(e){function n(t){i(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.analytics=c,e.PageObserver=e._initPageObserver(),e._isAnalyticsIsOk()&&(e.SectionObserver=new e.analytics.observer.Section,e.linkObserver=new e.analytics.observer.Link,e.clickObserver=new e.analytics.observer.Click,e.passiveTracker=e.analytics.passiveTracker),e.scrollDirectionMap={},e}return o(n,e),s(n,null,[{key:"IS_SUPPORTED",value:function(){try{return c=t("@marcom/ac-analytics"),null!==c}catch(e){return!1}}}]),s(n,[{key:"mounted",value:function(){var t=this;this.scrollComponent=this.gum.getComponentOfType("AutoScrollComponent"),this.scrollComponent&&this.scrollComponent.on("scrollIdentifyEvent",function(e){e.direction&&(t.scrollDirectionMap[e.direction]=t.scrollDirectionMap[e.direction]?t.scrollDirectionMap[e.direction]+1:1)})}},{key:"_isAnalyticsIsOk",value:function(){return c&&c.observer}},{key:"_getViewPortSizeInfo",value:function(){var t=l.pageMetrics.breakpoint;return t?{data:{eVar207:t}}:null}},{key:"_initPageObserver",value:function(){var t=this._getViewPortSizeInfo();return null!==t?new this.analytics.observer.Page(t):new this.analytics.observer.Page}}]),n}(a);e.exports=u},{"../helpers/BreakPoints":566,"@marcom/ac-analytics":void 0,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/src/BaseComponent":473}],541:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("../helpers/Easing"),c=t("@marcom/anim-system/Model/AnimSystemModel"),u=t("../helpers/forcesBasicInteraction"),h={update:t("@marcom/ac-raf-emitter/update"),draw:t("@marcom/ac-raf-emitter/draw")},f=t("../helpers/BreakPoints"),d={vertical:"vertical",horizontal:"horizontal"},p=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.html=document.documentElement,n.content=document.querySelector(".scroll-content"),n.ancestor=document.querySelector(".scroll-container-vertical"),n.sections=Array.from(n.content.querySelectorAll("main section")),n.router=n.content.querySelector(".router"),n.navContent=document.querySelector("#ac-globalnav .ac-gn-content"),n.isTouch=n.html.classList.contains("touch"),n.currentBreakpoint=t.pageMetrics.breakpoint,n.portableTextBlockWrap=document.querySelector(".section-portable .text-block-wrap"),n.portableTextBlock=n.portableTextBlockWrap.querySelector(".text-block"),n.isEnabled=t.pageMetrics.breakpoint!==f.BASIC,n.isRTL="rtl"===document.documentElement.getAttribute("dir"),n.bindEvents(),n.setupEasing(),c.pageMetrics.breakpoint!==f.BASIC&&n.updateDefault().then(function(){n.isRTL&&(n.easing.target=n.scrollableWidth,n.easing.current=n.scrollableWidth,n.content.style.transform="translateX(-"+(n.scrollableWidth-n.scrollY)+"px)"),n.isEnabled&&(n.verticalScroll(0),n.addListeners())}),n}return o(e,t),s(e,[{key:"mounted",value:function(){this.scrollY=window.pageYOffset,this.cachedWindowScrollY=window.pageYOffset,this.setPortableTextBlockHeight(),this.onResizeImmediate()}},{key:"bindEvents",value:function(){this.isHorizontal=!1,this.onMousewheel=this.onMousewheel.bind(this),this.onScroll=this.onScroll.bind(this),this.preventHistory=this.preventHistory.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}},{key:"setupEasing",value:function(){var t=this;this.target=0;var e=window.pageYOffset-this.boundaryTop;this.easing=new l({initPosition:e>0?e:0,callback:function(e){if(c.pageMetrics.breakpoint!==f.BASIC){var n=t.isRTL?t.scrollableWidth-e:e;t.content.style.transform="translateX("+-n+"px)";var i="hide-bagview",r=t.navContent.classList.contains(i);e>44?r||t.navContent.classList.add(i):r&&t.navContent.classList.remove(i),t.trigger("scroll",t.target)}},ease:.35}),this.easingRouter=new l({initPosition:e>0?e:0,callback:function(e){if(c.pageMetrics.breakpoint!==f.BASIC){var n=e;t.router.style.transform="translateY("+-n+"px)"}},ease:.35})}},{key:"onMousewheel",value:function(t){this.isHorizontal=this.updateDirection(t.deltaX,t.deltaY),this.isHorizontal&&this.horizontalScroll(t.deltaX)}},{key:"preventHistory",value:function(t){0!==t.deltaX&&t.preventDefault()}},{key:"onScroll",value:function(t){var e=window.scrollY-this.cachedWindowScrollY;this.outOfSyncY&&(this.outOfSyncY=!1,window.scrollTo(0,this.scrollY),e=0),this.verticalScroll(e),this.cachedWindowScrollY=window.scrollY}},{key:"setPortableTextBlockHeight",value:function(){var t=this.portableTextBlock.offsetHeight;c.pageMetrics.breakpoint!==f.BASIC?this.portableTextBlockWrap.style.minHeight=t+"px":this.portableTextBlockWrap.setAttribute("style","")}},{key:"onKeyDown",value:function(t){t.ctrlKey||t.metaKey||t.altKey||(this.isHorizontal=!1,!this.outOfSyncY||"ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),this.outOfSyncY=!1,window.scrollTo(0,this.scrollY),this.verticalScroll(0),this.cachedWindowScrollY=window.scrollY),"ArrowLeft"===t.key&&this.horizontalScroll(-40),"ArrowRight"===t.key&&this.horizontalScroll(40))}},{key:"desktopEvents",value:function(){this.content.addEventListener("mousewheel",this.onMousewheel),document.addEventListener("mousewheel",this.preventHistory),document.addEventListener("scroll",this.onScroll),document.addEventListener("keydown",this.onKeyDown)}},{key:"addListeners",value:function(){this.desktopEvents()}},{key:"removeListeners",value:function(){this.content.removeEventListener("mousewheel",this.onMousewheel),document.removeEventListener("mousewheel",this.preventHistory),document.removeEventListener("scroll",this.onScroll),document.removeEventListener("keydown",this.onKeyDown)}},{key:"clamp",value:function(t,e,n){var i=t;return i=Math.max(e,i),i=Math.min(n,i)}},{key:"updateDirection",value:function(t,e){return Math.abs(t)>Math.abs(e)}},{key:"verticalScroll",value:function(t){this.outOfSyncX=!0,this.scrollY+=t,this.target=this.clamp(this.scrollY,0,this.scrollableWidth),this.easing.setTarget(this.target),this.scrollRouter(this.scrollY),this.trigger("scrollIdentifyEvent",{direction:d.vertical}),this.scrollY>this.scrollableWidth&&this.trigger("router-animation",{x:this.scrollY-this.scrollableWidth})}},{key:"horizontalScroll",value:function(t){this.outOfSyncY=!0,this.target+=t,this.target=this.clamp(this.target,0,this.scrollableWidth),this.trigger("scrollIdentifyEvent",{direction:d.horizontal}),this.scrollY<this.scrollableWidth?this.scrollY=this.target:(this.scrollY+=t,this.scrollY=Math.min(this.scrollY,this.scrollableHeight),this.target=this.scrollableWidth,this.trigger("router-animation",{x:this.scrollY-this.scrollableWidth})),this.scrollY>=0&&this.scrollY<=110&&window.scrollTo(0,this.scrollY),this.easing.setTarget(this.target),this.scrollRouter(this.scrollY)}},{key:"scrollRouter",value:function(t){var e=t-this.scrollableWidth;e<0&&(e=0),e>this.routerHeight+100&&(e=this.routerHeight+100),this.easingRouter.setTarget(e)}},{key:"onResizeDebounced",value:function(){var t=this;this.setPortableTextBlockHeight(),c.pageMetrics.breakpoint!==f.BASIC&&this.updateDefault().then(function(){t.scrollY=window.pageYOffset,t.verticalScroll(0)})}},{key:"onBreakpointChange",value:function(t){var e=this;return this.currentBreakpoint===f.BASIC?(this.addListeners(),void(this.currentBreakpoint=t.breakpoint)):t.breakpoint===f.BASIC?(h.draw(function(){e.content.removeAttribute("style"),e.ancestor.removeAttribute("style"),e.router.removeAttribute("style"),e.removeListeners()}),void(this.currentBreakpoint=t.breakpoint)):void 0}},{key:"updateDefault",value:function(){var t=this,e=new Promise(function(e,n){h.update(function(){var n=t.sections.reduce(function(t,e){return t+e.clientWidth},0);t.routerHeight=t.router.clientHeight;var i=n+t.routerHeight-(c.pageMetrics.windowWidth-c.pageMetrics.windowHeight);h.draw(function(){t.updateContainerSizes(n,i),h.update(function(){t.scrollableWidth=t.content.clientWidth-window.innerWidth,t.scrollableHeight=i-window.innerHeight,t.boundaryTop=0,e()})})})});return e}},{key:"updateContainerSizes",value:function(t,e){this.content.style.width=t+"px",this.ancestor.style.height=e+"px"}}],[{key:"IS_SUPPORTED",value:function(){return!u&&!document.documentElement.classList.contains("touch")}}]),e}(a);e.exports=p},{"../helpers/BreakPoints":566,"../helpers/Easing":568,"../helpers/forcesBasicInteraction":569,"@marcom/ac-raf-emitter/draw":272,"@marcom/ac-raf-emitter/update":273,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],542:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./AutoScrollComponent"),c=t("@marcom/anim-system/Model/AnimSystemModel"),u=t("../helpers/forcesBasicInteraction"),h=t("../helpers/BreakPoints"),f={vertical:"vertical",horizontal:"horizontal"},d=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.touchContent=document.querySelector(".scroll-container-touch"),n.isTouch=n.html.classList.contains("touch"),n.scrollInit=!1,n}return o(e,t),s(e,[{key:"mounted",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mounted",this).call(this),this.touchContent.scrollLeft=this.scrollY}},{key:"bindEvents",value:function(){this.tmpScrollX,this.tmpScrollY,this.onTouchHorizontalScroll=this.onTouchHorizontalScroll.bind(this)}},{key:"detectScrolling",value:function(t){this.isTouch&&t>0&&!this.scrollInit&&(this.html.classList.add("site-scrolling"),this.scrollInit=!0)}},{key:"verticalScroll",value:function(){}},{key:"onTouchVerticalScroll",value:function(t){var e=window.pageYOffset;if(this.tmpScrollX!==e){this.detectScrolling(e),this.trigger("scrollIdentifyEvent",{direction:f.vertical}),this.tmpScrollY=e,this.scrollRouter(e),this.touchContent.scrollLeft=e;var n=this.clamp(e,0,this.scrollableWidth);this.easing.setTarget(n),this.tmpScrollY>this.scrollableWidth&&this.trigger("router-animation",{x:this.tmpScrollY-this.scrollableWidth})}}},{key:"onTouchHorizontalScroll",value:function(t){var e=this.touchContent.scrollLeft;this.tmpScrollY!==e&&(this.detectScrolling(e),this.isHorizontal=!0,this.trigger("scrollIdentifyEvent",{direction:f.horizontal}),this.tmpScrollX=e,this.scrollRouter(e),(window.pageYOffset<110||e<110)&&window.scrollTo(0,e),e=this.clamp(e,0,this.scrollableWidth),this.easing.setTarget(e),this.tmpScrollX>this.scrollableWidth&&this.trigger("router-animation",{x:this.tmpScrollX-this.scrollableWidth}))}},{key:"touchEvents",value:function(){this.touchContent.addEventListener("scroll",this.onTouchHorizontalScroll)}},{key:"addListeners",value:function(){this.touchEvents()}},{key:"removeListeners",value:function(){this.touchContent.removeEventListener("scroll",this.onTouchHorizontalScroll)}},{key:"onBreakpointChange",value:function(){window.location.reload()}},{key:"onResizeDebounced",value:function(){var t=this;c.pageMetrics.breakpoint!==h.BASIC&&this.updateDefault().then(function(){t.onTouchHorizontalScroll()})}},{key:"scrollRouter",value:function(t){var e=t-this.scrollableWidth;e<0&&(e=0),this.easingRouter.setTarget(e)}},{key:"updateContainerSizes",value:function(t,n){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateContainerSizes",this).call(this);var i=c.pageMetrics.windowWidth-c.pageMetrics.windowHeight,r=100;this.touchContent.children[0].style.width=n+i+r+"px",this.ancestor.removeAttribute("style")}}],[{key:"IS_SUPPORTED",value:function(){return!u&&document.documentElement.classList.contains("touch")}}]),e}(l);e.exports=d},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"./AutoScrollComponent":541,"@marcom/anim-system/Model/AnimSystemModel":448}],543:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("../helpers/forcesBasicInteraction"),c=t("../helpers/isiPadpro"),u=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.seriously=new Seriously,n.chroma=n.seriously.effect("chroma"),n.greenScreen=[0,1,0,1],n}return o(e,t),s(e,[{key:"mounted",value:function(){this.canvas=document.createElement("canvas"),this.target=this.seriously.target(this.canvas),this.target.source=this.chroma,this.chroma.screen=this.greenScreen}},{key:"loadVideo",value:function(t,e){e=e||{},this.target.width=e.width||400,this.target.height=e.height||400,this.chroma.source=t,this.chroma.balance=e.balance||.32,this.chroma.clipBlack=e.clipBlack||.14,this.chroma.clipWhite=e.clipWhite||1}},{key:"getCanvas",value:function(){return this.canvas}}],[{key:"IS_SUPPORTED",value:function(){return!(l||c)&&document.documentElement.classList.contains("webgl")}}]),e}(a);e.exports=u},{"../helpers/forcesBasicInteraction":569,"../helpers/isiPadpro":570,"@marcom/bubble-gum/BaseComponent":473}],544:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=(t("@marcom/anim-system/Model/AnimSystemModel"),t("@marcom/anim-system"),t("../helpers/BreakPoints")),c=t("../helpers/forcesBasicInteraction"),u=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return(t.pageMetrics.breakpoint===l.BASIC||c)&&(document.documentElement.classList.remove("enhanced-interaction"),document.documentElement.classList.add("basic-interaction")),n}return o(e,t),s(e,[{key:"onBreakpointChange",value:function(t){c||(t.breakpoint!==l.BASIC?(document.documentElement.classList.remove("basic-interaction"),document.documentElement.classList.add("enhanced-interaction")):(document.documentElement.classList.add("basic-interaction"),document.documentElement.classList.remove("enhanced-interaction")))}}]),e}(a);e.exports=u},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"@marcom/anim-system":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],545:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=(t("@marcom/bubble-gum/ComponentMap"),"image-senses-your-gestures-screen-eraser"),c=t("../helpers/forcesBasicInteraction"),u=t("../helpers/isiPadpro"),h=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.eraser=n.el.querySelector(".image-eraser"),n}return o(e,t),s(e,[{key:"mounted",value:function(){var t=this;document.querySelector(".scroll-content");this.chromaManager=this.gum.getComponentOfType("ChromaManager"),this.chromaManager.on("animation-reset",function(e){t.el.classList.remove("animate"),t.eraser.classList.add(l+"-down"),t.eraser.classList.remove(l+"-up")}),this.chromaManager.on("start-animation",function(e){t.el.classList.add("animate"),t.eraser.classList.add(l+"-up"),t.eraser.classList.remove(l+"-down")})}}],[{key:"IS_SUPPORTED",value:function(){return!(c||u)&&document.documentElement.classList.contains("webgl")}}]),e}(a);e.exports=h},{"../helpers/forcesBasicInteraction":569,"../helpers/isiPadpro":570,"@marcom/bubble-gum/BaseComponent":473,"@marcom/bubble-gum/ComponentMap":475}],546:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,
configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("@marcom/ac-modal-basic").Modal,c=t("@marcom/dom-metrics").getPagePosition,u=t("@marcom/dom-metrics").getScrollPosition,h=t("@marcom/ac-raf-emitter/update"),f=t("@marcom/ac-raf-emitter/draw"),d=function(t){function e(t,n){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"updateExitPagePosition",value:function(t){var e=this;h(function(){var n=c(t),i=u(t);e._scrollX=i.x,e._scrollY=n.top})}},{key:"_restoreScrollPosition",value:function(){var t=this;f(function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_restoreScrollPosition",t).call(t)})}}]),e}(l);e.exports=d},{"@marcom/ac-modal-basic":223,"@marcom/ac-raf-emitter/draw":272,"@marcom/ac-raf-emitter/update":273,"@marcom/dom-metrics":478}],547:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/ac-gallery").FadeGallery,l=function(t){function e(t,n){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return o(e,t),s(e,[{key:"_onKeyboardInteraction",value:function(t,e){t.call(null,{interactionEvent:e})}}]),e}(a);e.exports=l},{"@marcom/ac-gallery":197}],548:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/ac-raf-emitter/update"),c=t("@marcom/ac-raf-emitter/draw"),u=t("./FadeGalleryOverrideExtend"),h=t("./VideoGalleryFadeItem"),f=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._fadeGallery={instance:{},items:[]},n._state={breakpoint:t.pageMetrics.breakpoint,videoIsSupported:h.isSupported()},n.tablistEl=document.querySelector(".gestures-gallery-wrapper .tabnav-items"),n}return o(e,t),s(e,[{key:"mounted",value:function(){this._initFadeGallery()}},{key:"onResizeDebounced",value:function(t){"S"===t.breakpoint&&(this.setGalleryHeight(),this._setTabNavPositionWithScrollbar())}},{key:"onBreakpointChange",value:function(t){var e=this;this._state.breakpoint=t.breakpoint,this._state.videoIsSupported&&this.setGalleryHeight().then(function(){var n=[];return e._fadeGallery.items.forEach(function(e){var i=e.video,r=void 0;i.source.change("viewport",t.breakpoint),e.isShown&&e.isInView?i.frames.activate("start").then(function(){r=i.load()["catch"](function(){}),n.push(r)}):(r=i.load(),n.push(r))}),Promise.all[n]})["catch"](function(){})}},{key:"_initFadeGallery",value:function(){var t=this._state.videoIsSupported,e={resizeContainer:!0,touch:!0,enableArrowKeys:!1};t&&(e.itemType=h),this._fadeGallery.instance=new u(this.el,e),this._fadeGallery.items=this._fadeGallery.instance.getItems(),t&&(this._setupGalleryEvents(),this._setupAnimVideoLoad())}},{key:"_calcProperGalleryHeight",value:function(){var t=this._fadeGallery.items,e=0;return t.forEach(function(t){var n=t.getElement().querySelector(".slide-height-wrapper").clientHeight;e=n>e?n:e}),e}},{key:"setGalleryHeight",value:function(){var t=this;return new Promise(function(e,n){l(function(){var n=t._calcProperGalleryHeight()+"px";c(function(){t.el.style.height=n,e()})})})}},{key:"_setupGalleryEvents",value:function(){this._onGalleryUpdateComplete=this._onGalleryUpdateComplete.bind(this),this._fadeGallery.instance.on(u.UPDATE_COMPLETE,this._onGalleryUpdateComplete)}},{key:"_onGalleryUpdateComplete",value:function(t){var e=t.incoming[0].video,n=e.state,i=t.outgoing[0].video,r=i.state;r.loaded&&r.hasPlayed&&i.reset(),n.loaded?e.play()["catch"](function(){}):e.load().then(function(){e.play()["catch"](function(){})},function(t){})}},{key:"_setupAnimVideoLoad",value:function(){var t=this;this._fadeGallery.items.forEach(function(e){var n=e.video,i=n.state,r={start:"-250vh + 50%",end:"50% + 150vh",event:"inline-video-load",relativeTo:"#btn-modal-open"},o=t.addDiscreteEvent(r);o.controller.once(r.event+":enter",function(){i.loaded||i.loading||n.load()["catch"](function(){})})})}},{key:"_setTabNavPositionWithScrollbar",value:function(){"S"===this._state.breakpoint&&document.documentElement.classList.contains("no-touch")&&(this.tablistEl.scrollWidth>this.tablistEl.offsetWidth?this.tablistEl.classList.add("scrollbar-fix"):this.tablistEl.classList.remove("scrollbar-fix"))}},{key:"galleryInstance",get:function(){return this._fadeGallery.instance}},{key:"state",get:function(){return this._state}}]),e}(a);e.exports=f},{"./FadeGalleryOverrideExtend":547,"./VideoGalleryFadeItem":550,"@marcom/ac-raf-emitter/draw":272,"@marcom/ac-raf-emitter/update":273,"@marcom/bubble-gum/BaseComponent":473}],549:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("./BasicModal"),c=t("@marcom/ac-accessibility/CircularTab"),u=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o=n.el;return n._el={btnOpen:o.querySelector("#btn-modal-open"),content:o.querySelector("#gestures-modal-content")},n._modal={},n._circularTab=null,n._onModalOpen=n._onModalOpen.bind(n),n._onModalClose=n._onModalClose.bind(n),n}return o(e,t),s(e,[{key:"mounted",value:function(){this._initModal(),this._setupModalEvents()}},{key:"_initModal",value:function(){var t=this._el,e=document.createElement("div"),n=document.createElement("div");e.classList.add("modal-content-table"),n.classList.add("modal-content-cell"),n.appendChild(t.content),e.appendChild(n);var i={retainScrollPosition:!0},r={classNames:{modalElement:"gestures-modal"},contentElement:e,closeButton:!1};this._modal=new l(i,r),this._renderModal(),this._circularTab||(this._circularTab=new c(t.content)),this.trigger("modal:initialized")}},{key:"_renderModal",value:function(){var t=this._modal;t.render();var e=t.renderer.modalElement,n=e.firstChild,i=n.firstChild;e.setAttribute("role","dialog"),e.setAttribute("aria-label","Gestures gallery modal"),e.setAttribute("aria-hidden",!0),e.setAttribute("data-modal-close",""),n.setAttribute("data-modal-close",""),i.setAttribute("data-modal-close",""),this._el.content.classList.remove("hide-modal-content")}},{key:"_setFocusToOpenBtn",value:function(){this._el.btnOpen.focus()}},{key:"_onModalOpen",value:function(){this._modal.renderer.modalElement.setAttribute("aria-hidden",!1),this._circularTab.start()}},{key:"_onModalClose",value:function(){this._circularTab.stop(),this._modal.renderer.modalElement.setAttribute("aria-hidden",!0),this._setFocusToOpenBtn()}},{key:"_setupModalEvents",value:function(){var t=this._modal;t.on("open",this._onModalOpen),t.on("close",this._onModalClose),this._el.btnOpen.addEventListener("click",function(){t.open()})}},{key:"onBreakpointChange",value:function(t){this._modal.opened&&this._modal.updateExitPagePosition(this.el)}},{key:"modalInstance",get:function(){return this._modal}}]),e}(a);e.exports=u},{"./BasicModal":546,"@marcom/ac-accessibility/CircularTab":22,"@marcom/bubble-gum/BaseComponent":473}],550:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/ac-gallery").FadeGalleryItem,l=t("@marcom/inline-video/InlineVideo"),c=t("@marcom/viewport-emitter"),u=function(t){function e(){i(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments)),n=e.isSupported();return t._state={isSupported:n},t._video={},n&&(t._video=new l(t._el,{path:"ipad-pro/2018/cE249dd1_58dc_487a_880b_6a1bc197cc43/anim/",viewport:l.convertViewportName(c.viewport),resolution:l.convertToResolution(c.retina)}),t._video.initialize()),t}return o(e,t),s(e,null,[{key:"isSupported",value:function(){return document.documentElement.classList.contains("inline-video")}}]),s(e,[{key:"video",get:function(){return this._video}},{key:"isShown",get:function(){return this._isShown}},{key:"isSupported",get:function(){return this._state.isSupported}}]),e}(a);e.exports=u},{"@marcom/ac-gallery":197,"@marcom/inline-video/InlineVideo":494,"@marcom/viewport-emitter":512}],551:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("../helpers/forcesBasicInteraction"),c=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._components={modal:{},gallery:{}},n._onModalOpen=n._onModalOpen.bind(n),n._onModalClose=n._onModalClose.bind(n),n}return o(e,t),s(e,[{key:"mounted",value:function(){var t=this;this._components.gallery=this.gum.getComponentOfType("GesturesGallery",this.el);var e=this.el.querySelector('[data-component-list="GesturesModal"]'),n=this._components.modal=this.gum.getComponentOfType("GesturesModal",e);n.once("modal:initialized",function(){var e=n.modalInstance;e.on("open",t._onModalOpen),e.on("close",t._onModalClose)})}},{key:"_onModalOpen",value:function(){var t=this._components.gallery.galleryInstance;this._setGalleryAccessibilityFocus(t),this._activateGallery(t),this._components.gallery._setTabNavPositionWithScrollbar()}},{key:"_onModalClose",value:function(){var t=this._components.gallery.galleryInstance;this._deactivateGallery(t)}},{key:"_setGalleryAccessibilityFocus",value:function(t){var e=t.getTabNav().tabnav,n=e.el.querySelector(".current");n.focus()}},{key:"_activateGallery",value:function(t){var e=this._components.gallery;t.enableKeyboard(),e.setGalleryHeight().then(function(){if(e.state.videoIsSupported){var n=t.getCurrentItem();n.video.play()["catch"](function(){})}})["catch"]()}},{key:"_deactivateGallery",value:function(t){if(t.disableKeyboard(),this._components.gallery.state.videoIsSupported){var e=t.getCurrentItem();e.video.reset()["catch"](function(){})}}}],[{key:"IS_SUPPORTED",value:function(){return!l}}]),e}(a);e.exports=c},{"../helpers/forcesBasicInteraction":569,"@marcom/bubble-gum/BaseComponent":473}],552:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=(t("@marcom/anim-system/Model/AnimSystemModel"),t("../helpers/forcesBasicInteraction"),t("@marcom/ac-films").create),c=(t("../helpers/BreakPoints"),t("@marcom/anim-system"),function(t){function e(t){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),s(e,[{key:"mounted",value:function(){this.scrollComponent=this.gum.getComponentOfType("AutoScrollTouchComponent"),this.touchClick=this.gum.getComponentOfType("TouchClick"),this.heroBtn=document.querySelector("#hero-film");var t=[];document.documentElement.classList.contains("touch")&&this.touchClick&&t.push(this.createFakeBtn()),t.push(document.querySelector("#hero-film"));var e={modal:!0};l(t,e)}},{key:"createFakeBtn",value:function(){var t=this.scrollComponent.content.getBoundingClientRect(),e=this.heroBtn.getBoundingClientRect(),n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),r=document.createElement("a");return r.href=this.heroBtn,r.id="hero-film-overview",r.setAttribute("data-analytics-id","hero-film-overview"),r.style.position="absolute",r.style.left=Math.round(n-100)+"px",r.style.top=i+"px",r.style.width=e.width+"px",r.style.height=e.height+"px",this.touchClick.el.children[0].appendChild(r),r}}]),e}(a));e.exports=c},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"@marcom/ac-films":172,"@marcom/anim-system":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],553:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/anim-system/Model/AnimSystemModel"),c=t("@marcom/anim-system/AnimSystemGUI"),u=t("../helpers/forcesBasicInteraction"),h=t("@marcom/anim-system"),f=t("../helpers/BreakPoints"),d=function(t){function e(t){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),s(e,[{key:"mounted",value:function(){var t=this;this.scrollComponent=this.gum.getComponentOfType("AutoScrollComponent")||this.gum.getComponentOfType("AutoScrollTouchComponent"),this.group=h.getGroupForTarget(this.el),this.createOverwriteMethods(),this.onHorizontalScroll=function(){t.group._onScroll()},this.setScrollDirection(),this.group.forceUpdate({waitForNextUpdate:!1});var e=c.guides;if(e){e.end.style.width=e.start.style.width="5px",e.end.style.height=e.start.style.height="100vh",this.el.appendChild(e.element);e.translate;e.translate=function(e){var n=t.scrollComponent.isRTL?-e:e;return"translate("+n+"px, 0)"}}}},{key:"createOverwriteMethods",value:function(){var t=this;this.verticalScroll={getPosition:this.group.getPosition,createViewableRange:this.group.createViewableRange,parseTime:this.group.timeParser.parse.bind(this.group.timeParser)},this.horizontalScroll={getPosition:function(){return t.scrollComponent.easing.currentPosition+t.scrollComponent.easingRouter.currentPosition},createViewableRange:function(){var e=t.group.metrics.get(t.el),n=new l.ViewableRange(e,0);return n.a=0,n.b=n.a+l.pageMetrics.windowWidth,n.d=e.right,n.c=n.d-l.pageMetrics.windowWidth,n},parseTime:function(t,e){if("number"==typeof e)return e;var n=this.groupIsTimeBased?0:this.group.metrics.get(t.relativeTo).left,i=this.group.expressionParser.parseExpression(t,e),r=n+i;return t.jsonProps.rtl&&(r=this.group.viewableRange.d-r),this.group.convertScrollPositionToTValue(r)}.bind(this.group.timeParser)}}},{key:"onBreakpointChange",value:function(t){this.setScrollDirection()}},{key:"setScrollDirection",value:function(){var t=l.pageMetrics.breakpoint,e=t===f.BASIC?this.verticalScroll:this.horizontalScroll;this.group.getPosition=e.getPosition,this.group.createViewableRange=e.createViewableRange,this.group.timeParser.parse=e.parseTime,t!==f.BASIC?this.scrollComponent.on("scroll",this.onHorizontalScroll):this.scrollComponent.off("scroll",this.onHorizontalScroll)}}],[{key:"IS_SUPPORTED",value:function(){return!u}}]),e}(a);e.exports=d},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"@marcom/anim-system":434,"@marcom/anim-system/AnimSystemGUI":435,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],554:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=(a.prototype,t("@marcom/ac-progressive-image-loader/ProgressiveImageLoader"),t("@marcom/anim-system")),c=t("@marcom/ac-raf-emitter/draw"),u=t("../helpers/forcesBasicInteraction"),h=t("../helpers/BreakPoints"),f=t("../helpers/ClipPaths"),d=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.head=document.querySelector("head"),n}return o(e,t),s(e,[{key:"mounted",value:function(){this.setLineAnimation()}},{key:"setLineAnimation",value:function(){var t=this,e=this.el.querySelectorAll("[data-clip-anim]");e.length&&Array.from(e).forEach(function(e){var n=t._lineAnimationConstants(e),i=JSON.parse(e.getAttribute("data-clip-anim"));l.addKeyframe(e,Object.assign(i,n));var r=e._animInfo.controller,o=i.origin,s="polygon("+f()[o].collapsed+")";t._setClipPath(e,s),r.on("update-clip",function(n){var i=n.tweenProps.clipPathChange.current;s="polygon("+f(i)[o].expanded+")",t._setClipPath(e,s)})})}},{key:"_setClipPath",value:function(t,e){c(function(){t.style.cssText="-webkit-clip-path: "+e+"; clip-path: "+e+";"})}},{key:"_lineAnimationConstants",value:function(t){var e=h.ENHANCED;return t.classList.contains("basic-only")&&(e=h.BASIC),{breakpointMask:e,ease:.8,clipPathChange:[0,100],event:"update-clip"}}}],[{key:"IS_SUPPORTED",value:function(){return!u}}]),e}(a);e.exports=d},{"../helpers/BreakPoints":566,"../helpers/ClipPaths":567,"../helpers/forcesBasicInteraction":569,"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":260,"@marcom/ac-raf-emitter/draw":272,"@marcom/anim-system":434,"@marcom/bubble-gum/BaseComponent":473}],555:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=(a.prototype,t("@marcom/ac-progressive-image-loader/ProgressiveImageLoader")),c=(t("@marcom/anim-system"),t("../helpers/BreakPoints")),u=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));try{n._loadOptions=JSON.parse(n.el.getAttribute("data-progressive-image-options"))}catch(o){n._loadOptions=null}return n.imageLoader=new l({container:n.el,includeContainer:!0}),n}return o(e,t),s(e,[{key:"mounted",value:function(){var t=this;if(this.addDiscreteEvent({start:"-200vw",end:"-200vw",event:"ProgressiveImageLoad",breakpointMask:c.ENHANCED,allowRTL:!0}),this.addDiscreteEvent({start:"-200vh",end:"-200vh",event:"ProgressiveImageLoad",breakpointMask:c.BASIC}),this.el._animInfo){var e=this.el._animInfo.controller;e.on("ProgressiveImageLoad",function(){t.imageLoader.load(t._loadOptions)})}}},{key:"setupEvents",value:function(){this._onImageLoad=this._onImageLoad.bind(this),this._onComplete=this._onComplete.bind(this),this.imageLoader.on(l.Events.ImageLoad,this._onImageLoad),this.imageLoader.on(l.Events.Complete,this._onComplete)}},{key:"destroy",value:function(){this.imageLoader.destroy(),this.imageLoader=null}},{key:"_onImageLoad",value:function(t){this.section.trigger(this.Events.ImageLoad,t)}},{key:"_onComplete",value:function(){this.section.trigger(this.Events.Complete)}}]),e}(a);u.Events={ImageLoad:"progressive-image-load",Complete:"progressive-image-complete"},u.IS_SUPPORTED=function(){var t=document.documentElement;return t.classList.contains("progressive-image")},e.exports=u},{"../helpers/BreakPoints":566,"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":260,"@marcom/anim-system":434,"@marcom/bubble-gum/BaseComponent":473}],556:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/anim-system/Model/AnimSystemModel"),c=t("../helpers/forcesBasicInteraction"),u=t("@marcom/anim-system/AnimSystem"),h=t("../helpers/BreakPoints"),f=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.timeline=u.getGroupForTarget(n.el),n.router=document.querySelector(".router"),n}return o(e,t),s(e,[{key:"mounted",value:function(){this.scrollComponent=this.gum.getComponentOfType("AutoScrollComponent")||this.gum.getComponentOfType("AutoScrollTouchComponent"),this._revealRouter()}},{key:"onBreakpointChange",value:function(t){this._revealRouter()}},{key:"_revealRouter",value:function(){var t=this;l.pageMetrics.breakpoint!==h.BASIC&&this.scrollComponent.on("router-animation",function(e){var n=e.x/l.pageMetrics.windowHeight;t.timeline.progress(n),n>.4?t.router.classList.add("reveal"):t.router.classList.remove("reveal"),n>=1?t.el.classList.add("hidden"):t.el.classList.remove("hidden")})}}],[{key:"IS_SUPPORTED",value:function(){return!c}}]),e}(a);e.exports=f},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"@marcom/anim-system/AnimSystem":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],557:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/src/BaseComponent"),l=t("../helpers/BreakPoints"),c=t("@marcom/anim-system/Model/AnimSystemModel"),u=t("@marcom/bubble-gum/ComponentMap"),h=t("@marcom/ac-raf-emitter/RAFEmitter"),f={vertical:"vertical",horizontal:"horizontal"},d=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.raf=new h,n._tracking=!1,n._tracked=!1,n._exit=n._exit.bind(n),n._enter=n._enter.bind(n),n._engage=n._engage.bind(n),n._isEnabled="B"!==t.pageMetrics.breakpoint,n}return o(e,t),s(e,null,[{key:"IS_SUPPORTED",value:function(){return!0}}]),s(e,[{key:"mounted",value:function(){var t=this.el.getAttribute("data-section-custom-event-triggers"),e={start:"0",end:"100%w",relativeTo:""};if(t&&t.length>0)try{var n=JSON.parse(t);e=Object.assign(e,n)}catch(i){}this.addDiscreteEvent({start:e.start,end:e.end,relativeTo:e.relativeTo,event:"section engagement",onEnter:this._enter,onExit:this._exit,breakpointMask:l.ENHANCED});var r=document.querySelector("div.scroll-container-vertical");this.AnalyticsComponent=this.gum.getComponentsForElement(r).filter(function(t){return t instanceof u.AnalyticsComponent})[0],this.AnalyticsComponent&&(this.passiveTracker=this.AnalyticsComponent.passiveTracker,this.SectionObserver=this.AnalyticsComponent.SectionObserver,this._isEnabled&&this.SectionObserver&&this.SectionObserver.pauseElementTracking(this.el),this.stopSectionEngagement())}},{key:"stopSectionEngagement",value:function(){this.SectionObserver&&("B"!==c.pageMetrics.breakpoint?(this._isEnabled=!0,this.SectionObserver.pauseElementTracking(this.el)):(this._isEnabled=!1,this.SectionObserver.resumeElementTracking(this.el)))}},{key:"onBreakpointChange",value:function(t){this.stopSectionEngagement()}},{key:"_enter",value:function(){this.SectionObserver&&this.passiveTracker&&(this.el.entryTime=Date.now(),!this._tracked&&this._isEnabled&&this._engageAfterOneSec())}},{key:"_engageAfterOneSec",value:function(){var t=this,e=0,n=60;this.raf.on("update",function(){e++,e<n?t.raf.run():t._engage(t.el)}),this.raf.run()}},{key:"_engage",value:function(t){this.SectionObserver&&(this._tracking=!0,this.SectionObserver.startSectionEngagement(t))}},{key:"_exit",value:function(){this.SectionObserver&&this.passiveTracker&&(this.el.exitTime=Date.now(),this.el.elapsedTime=this.el.exitTime-this.el.entryTime,this._tracked||!this._isEnabled||this.el.elapsedTime<1e3||this._tracking&&this._disengage(this.el))}},{key:"_isRouterOrBuyStrip",value:function(t){var e=t.getAttribute("data-analytics-section-engagement");return!e||e.indexOf("router")>=0||e.indexOf("buy strip")>=0}},{key:"_disengage",value:function(t){var e=this.AnalyticsComponent.scrollDirectionMap,n=Object.keys(e),i=this._getScrollSummary(e,n);this._tracked=!0,this._isEnabled&&this._firePassiveTracker(this.passiveTracker,i),this.SectionObserver.endSectionEngagement(t),this.AnalyticsComponent.scrollDirectionMap={}}},{key:"_getScrollSummary",value:function(t,e){var n=[];return t[f.vertical]&&n.push(["event248="+t[f.vertical],"event250"]),t[f.horizontal]&&n.push(["event249="+t[f.horizontal],"event264"]),n.join(",")}},{key:"_firePassiveTracker",value:function(t,e){if(t&&"function"==typeof t&&e){var n={events:e};t(n)}}}]),e}(a);e.exports=d},{"../helpers/BreakPoints":566,"@marcom/ac-raf-emitter/RAFEmitter":266,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/ComponentMap":475,"@marcom/bubble-gum/src/BaseComponent":473}],558:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0
}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=(a.prototype,t("@marcom/ac-progressive-image-loader/ProgressiveImageLoader"),t("@marcom/anim-system")),c=t("../helpers/forcesBasicInteraction"),u=t("../helpers/BreakPoints"),h=function(t){function e(t){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),s(e,[{key:"mounted",value:function(){var t=this;this.group=l.getGroupForTarget(document.querySelector(".scroll-content[data-anim-scroll-group]")),this.group.addKeyframe(this.el,{start:"0%w-200vw",end:"100%w + 200vw",cssClass:"visible",toggle:!0,breakpointMask:u.ENHANCED,allowRTL:!0}),this.group.addKeyframe(this.el,{start:"-100vh",end:"100% + 100vh",cssClass:"visible",toggle:!0,breakpointMask:u.BASIC});var e=Array.from(this.el.querySelectorAll("[data-will-change]"));e.forEach(function(e){e.classList.contains("basic-only")||t.group.addKeyframe(e,{start:"0% - 200vw",end:"100%w + 200vw",cssClass:"will-change",toggle:!0,breakpointMask:u.ENHANCED,allowRTL:!0}),e.classList.contains("enhanced-only")||t.group.addKeyframe(e,{start:"-100vh",end:"100% + 100vh",cssClass:"will-change",toggle:!0,breakpointMask:u.BASIC})}),this.setSharedAnimData()}},{key:"_cloneObj",value:function(t){var e={};for(var n in t)e[n]=t[n];return e}},{key:"setSharedAnimData",value:function(){var t=this,e={"data-enhanced-anim-bare":{start:"0%w - 100vw",end:"100%w",ease:.8,x:[0,"-35%w"],breakpointMask:u.ENHANCED,allowRTL:!0},"data-enhanced-whisper-anim-lm":{start:"0%w - 100vw",end:"120%w",ease:.8,x:["120%w","-20%w"],breakpointMask:""+u.VL+u.VM,allowRTL:!0},"data-enhanced-whisper-anim-s":{start:"0%w - 100vw",end:"100%w",ease:.8,x:["100%w","0%w"],breakpointMask:u.VS,allowRTL:!0},"data-enhanced-anim":{start:"0rw - 100%w",end:"100rw",x:["30%w","65px"],ease:.8,breakpointMask:u.ENHANCED,allowRTL:!0},"data-basic-device-anim":{start:"-100vh - 100%",end:"100%",ease:.8,y:["20%","-20%"],breakpointMask:u.BASIC},"data-basic-manifesto-anim":{start:"-85vh",end:"100vh",cssClass:"fade",toggle:!0,breakpointMask:u.BASIC},"data-basic-whisper-anim":{start:"-65vh",end:"100vh",cssClass:"fade",toggle:!0,breakpointMask:u.BASIC}},n=function(n){var i=Array.from(t.el.querySelectorAll("["+n+"]"));i.forEach(function(i){var r=t._cloneObj(e[n]),o=i.getAttribute(n),s=o?JSON.parse(o):{},a=t.el.className.split(" ").join("."),c=(i.classList.contains("typography-alt-label"),i.classList.contains("image"));if(c||(r.relativeTo=a+" .text-block"),Object.keys(s).length)for(var h in s)r[h]=s[h];l.addKeyframe(i,r);var f=i.classList.contains("biggest-change");"data-enhanced-anim"!==n||f||l.addKeyframe(i,{start:"100rw + 65px",end:"100vw",x:["65px","-10%w"],relativeTo:r.relativeTo,ease:.8,breakpointMask:u.ENHANCED,allowRTL:!0})})};for(var i in e)n(i)}}]),e}(a);h.IS_SUPPORTED=function(){return!c},e.exports=h},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":260,"@marcom/anim-system":434,"@marcom/bubble-gum/BaseComponent":473}],559:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:h(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./VideoPlayer"),c=(t("../helpers/forcesBasicInteraction"),t("@marcom/ac-raf-emitter/update")),u=(t("../helpers/isiPadpro"),function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.pencilWrapper=document.querySelector(".section-pencil .pair-and-charge .pencil-pairing"),n.pill=document.querySelector(".section-pencil .pencil-pill"),n}return o(e,t),s(e,[{key:"mounted",value:function(){var t=this;a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mounted",this).call(this),this.pencilVideo=this.gum.getComponentOfType("VideoPlayer",this.pencilWrapper),c(function(){t.video.pause(),t.video.currentTime=0,t.pencilVideo.video.addEventListener("ended",function(){t.pill.classList.add("reveal"),t.playVideo()}),t.pencilVideo.video.addEventListener("play",function(){t.pill.classList.remove("reveal"),t.onExit()})})}}]),e}(l));e.exports=u},{"../helpers/forcesBasicInteraction":569,"../helpers/isiPadpro":570,"./VideoPlayer":564,"@marcom/ac-raf-emitter/update":273}],560:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=(t("@marcom/anim-system/Model/AnimSystemModel"),t("../helpers/forcesBasicInteraction")),c=(t("@marcom/ac-films").create,t("../helpers/BreakPoints"),t("@marcom/anim-system"),function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.heroBtn=document.querySelector("#hero-film"),n}return o(e,t),s(e,[{key:"mounted",value:function(){this.el.addEventListener("click",function(t){var e=t.clientX,n=t.clientY,i=document.msElementsFromPoint?document.msElementsFromPoint(e,n):document.elementsFromPoint(e,n),r=/(^a$)|(button)/;i.every(function(t){return t.localName.match(r)&&t.click(),!t.localName.match(r)})})}}],[{key:"IS_SUPPORTED",value:function(){return!l&&(document.documentElement.classList.contains("touch")&&!document.documentElement.classList.contains("basic-interaction"))}}]),e}(a));e.exports=c},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"@marcom/ac-films":172,"@marcom/anim-system":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],561:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/anim-system"),c=(t("@marcom/anim-system/Model/AnimSystemModel"),t("@marcom/ac-raf-emitter/draw")),u=(t("@marcom/ac-raf-emitter/update"),{HARDWARE:"data-hardware-image",GUTS:"data-guts-image",CALLOUT:"data-callout",ARROW:"data-arrow"}),h=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hardwareImage=n.el.querySelector("["+u.HARDWARE+"]"),n.gutsImage=n.el.querySelector("["+u.GUTS+"]"),n.calloutWrappers=n.el.querySelectorAll("["+u.CALLOUT+"]"),n.arrows=n.el.querySelectorAll("["+u.ARROW+"]"),n.arrowContainers=n.el.querySelectorAll(".arrow-container"),n.copyHeights=[],n.arrowHeights=[],n.stickyContainer=n.el.querySelector(".sticky-container"),n.calloutWrapper=n.el.querySelector(".callout-wrapper"),n.setStickyContainerWidth(),n.stickyHeight="40vh",n.offsets={L:160,M:150,S:50},n.callout1ImageOffsets={L:50,M:45,S:75},n.callout2ImageOffsets={L:0,M:25,S:60},n.callout3ImageOffsets={L:0,M:25,S:60},n.callout2OpacityOffset={L:20,M:50,S:60},n.arrow2EndOffset={L:0,M:30,S:0},n.currentBreakpoint=t.pageMetrics.breakpoint,n.calloutWrapperHeight=n.calloutWrapper.offsetHeight+n.offsets[n.currentBreakpoint],n.arrow01Animation=n.arrow01Animation.bind(n),n.arrow02Animation=n.arrow02Animation.bind(n),n.arrow03Animation=n.arrow03Animation.bind(n),n.setStickEndTopPosition=n.setStickEndTopPosition.bind(n),n.setStickTopPosition=n.setStickTopPosition.bind(n),n.setStickyDefaultTopPosition=n.setStickyDefaultTopPosition.bind(n),n._getElemTopPosition=n._getElemTopPosition.bind(n),n.calculateHeights(),n.createStickyKeyframes(),n.createGutsOpacityKeyframe(),n.createCalloutKeyframes(),n.createArrowEvents(),n.arrows[0]._animInfo.controller.on("update-arrow-1",n.arrow01Animation),n.arrows[1]._animInfo.controller.on("update-arrow-2",n.arrow02Animation),n.arrows[2]._animInfo.controller.on("update-arrow-3",n.arrow03Animation),n.stickyContainer._animInfo.controller.on("stick-end",n.setStickEndTopPosition),n.stickyContainer._animInfo.controller.on("stick-end:reverse",n.setStickTopPosition),n.stickyContainer._animInfo.controller.on("stick",n.setStickTopPosition),n.stickyContainer._animInfo.controller.on("stick:reverse",n.setStickyDefaultTopPosition),n.focusHandler=n.focusHandler.bind(n),document.addEventListener("focus",n.focusHandler,!0),n}return o(e,t),s(e,[{key:"_getElemTopPosition",value:function(t){var e=0;do isNaN(t.offsetTop)||(e+=t.offsetTop);while(t=t.offsetParent);return e}},{key:"focusHandler",value:function(t){if(t.target.hasAttribute("data-callout")){t.target.blur();var e=this._getElemTopPosition(t.target),n=t.target.offsetHeight,i=.4*window.innerHeight,r="L"===this.currentBreakpoint?100:50,o=e-i+n+r;window.scrollTo(0,o)}}},{key:"createGutsOpacityKeyframe",value:function(){this.anim.addKeyframe(this.gutsImage,{start:"-"+this.stickyHeight+" - 30vh",end:"-"+this.stickyHeight,relativeTo:".truedepth-container",opacity:[0,1],breakpointMask:"XLMS"})}},{key:"setStickyDefaultTopPosition",value:function(){var t=this;c(function(){t.stickyContainer.style.top="0px"})}},{key:"setStickTopPosition",value:function(){var t=this;c(function(){t.stickyContainer.style.top=""+t.stickyHeight})}},{key:"setStickEndTopPosition",value:function(){var t=this;c(function(){t.stickyContainer.style.top=t.calloutWrapperHeight+"px"})}},{key:"createStickyKeyframes",value:function(){this.anim.addKeyframe(this.stickyContainer,{start:"-"+this.stickyHeight,cssClass:"stick",toggle:!0,breakpointMask:"XLMS"}),this.anim.addKeyframe(this.stickyContainer,{start:"-"+this.stickyHeight,event:"stick",toggle:!0,breakpointMask:"XLMS"}),this.anim.addKeyframe(this.stickyContainer,{start:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",cssClass:"stick-end",toggle:!0,breakpointMask:"XLMS"}),this.anim.addKeyframe(this.stickyContainer,{start:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",event:"stick-end",toggle:!0,breakpointMask:"XLMS"})}},{key:"setStickyContainerWidth",value:function(){this.stickyContainer.style.width=this.stickyContainer.parentElement.offsetWidth+"px"}},{key:"arrow01Animation",value:function(t){var e=t.tweenProps.clip.current;this.arrows[0].style.cssText="-webkit-clip-path: polygon(0 "+e+"%, 100% "+e+"%, 100% 0%, 0% 0%); clip-path: polygon(0 "+e+"%, 100% "+e+"%, 100% 0%, 0% 0%);"}},{key:"arrow02Animation",value:function(t){var e=t.tweenProps.clip.current;this.arrows[1].style.cssText="-webkit-clip-path: polygon(0 "+e+"%, 100% "+e+"%, 100% 0%, 0% 0%); clip-path: polygon(0 "+e+"%, 100% "+e+"%, 100% 0%, 0% 0%);"}},{key:"arrow03Animation",value:function(t){var e=t.tweenProps.clip.current;this.arrows[2].style.cssText="-webkit-clip-path: polygon(0 "+e+"%, 100% "+e+"%, 100% 0%, 0% 0%); clip-path: polygon(0 "+e+"%, 100% "+e+"%, 100% 0%, 0% 0%);",this.arrows[2].style.height=this.calloutWrapperHeight-this.calloutWrappers[2].offsetTop+this.callout3ImageOffsets[this.currentBreakpoint]-this.copyHeights[2]+"px"}},{key:"createArrowEvents",value:function(){var t=this,e=this.calloutWrappers[0].offsetTop-this.callout1ImageOffsets[this.currentBreakpoint],n=this.calloutWrappers[1].offsetTop-this.callout2ImageOffsets[this.currentBreakpoint],i=this.calloutWrappers[2].offsetTop-this.callout3ImageOffsets[this.currentBreakpoint];this.anim.addKeyframe(this.arrows[0],{start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+this.arrowHeights[0])+"px",clip:[0,100],ease:1,event:"update-arrow-1",relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrows[0],{start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+this.arrowHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+this.arrowHeights[0]+70)+"px",clip:[100,0],ease:1,event:"update-arrow-1",relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrowContainers[0],{start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+300)+"px",y:[0,-300],ease:1,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrows[1],{start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+this.arrowHeights[1])+"px",clip:[0,100],ease:1,event:"update-arrow-2",relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrows[1],{start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+this.arrowHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+this.arrowHeights[1]+50-this.arrow2EndOffset[this.currentBreakpoint])+"px",clip:[100,0],ease:1,event:"update-arrow-2",relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrowContainers[1],{start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+300)+"px",y:[0,-300],ease:1,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrows[2],{start:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",clip:[0,100],ease:1,event:"update-arrow-3",relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrows[2],{start:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",end:"-"+this.stickyHeight+" + "+(this.calloutWrapperHeight+100)+"px",clip:[100,0],ease:1,event:"update-arrow-3",relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.arrowContainers[2],{start:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",y:[0,""+(i+this.copyHeights[2]-this.calloutWrapperHeight)],ease:1,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),c(function(){t.arrows[2].style.height=t.calloutWrapperHeight-i-t.copyHeights[2]+"px"})}},{key:"createCalloutKeyframes",value:function(){var t=this.calloutWrappers[0].offsetTop-this.callout1ImageOffsets[this.currentBreakpoint],e=this.calloutWrappers[1].offsetTop-this.callout2ImageOffsets[this.currentBreakpoint],n=this.calloutWrappers[2].offsetTop-this.callout3ImageOffsets[this.currentBreakpoint];this.anim.addKeyframe(this.calloutWrappers[0],{start:"-"+this.stickyHeight+" + "+(t+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(t+this.copyHeights[0]+100)+"px",opacity:[0,1],ease:.5,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.calloutWrappers[1],{start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[1]-this.callout2OpacityOffset[this.currentBreakpoint])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[1]+80)+"px",opacity:[0,1],ease:.5,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.calloutWrappers[2],{start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[2]+100)+"px",opacity:[0,1],ease:.5,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.calloutWrappers[0],{start:"-"+this.stickyHeight+" + "+(t+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(t+this.copyHeights[0]+100)+"px",y:[20,0],ease:.5,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.calloutWrappers[1],{start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[1]+100)+"px",y:[20,0],ease:.5,relativeTo:".truedepth-container",breakpointMask:"XLMS"}),this.anim.addKeyframe(this.calloutWrappers[2],{start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[2]+100)+"px",y:[20,0],ease:.5,relativeTo:".truedepth-container",breakpointMask:"XLMS"})}},{key:"calculateHeights",value:function(){var t=this;this.calloutWrappers.forEach(function(e,n){t.copyHeights[n]=e.offsetHeight}),this.arrows.forEach(function(e,n){t.arrowHeights[n]=e.offsetHeight})}},{key:"updateKeyframes",value:function(){var t=this.calloutWrapperHeight,e=this.calloutWrappers[0].offsetTop-this.callout1ImageOffsets[this.currentBreakpoint],n=this.calloutWrappers[1].offsetTop-this.callout2ImageOffsets[this.currentBreakpoint],i=this.calloutWrappers[2].offsetTop-this.callout3ImageOffsets[this.currentBreakpoint],r=this.anim.getControllerForTarget(this.stickyContainer),o=r.getAllKeyframesForAttribute(".stick-end"),s=r.getAllKeyframesForAttribute("stick-end"),a=r.getAllKeyframesForAttribute(".stick"),l=r.getAllKeyframesForAttribute("stick");a[0].overwriteProps({start:"-"+this.stickyHeight,end:"-"+this.stickyHeight,relativeTo:".truedepth-container"}),l[0].overwriteProps({start:"-"+this.stickyHeight,end:"-"+this.stickyHeight,relativeTo:".truedepth-container"}),o[0].overwriteProps({start:"-"+this.stickyHeight+" + "+t+"px",end:"-"+this.stickyHeight+" + "+t+"px",relativeTo:".truedepth-container"}),s[0].overwriteProps({start:"-"+this.stickyHeight+" + "+t+"px",end:"-"+this.stickyHeight+" + "+t+"px",relativeTo:".truedepth-container"}),s[0].isApplied?this.setStickEndTopPosition():l[0].isApplied?this.setStickTopPosition():this.setStickyDefaultTopPosition();var c=this.anim.getControllerForTarget(this.arrows[0]),u=this.anim.getControllerForTarget(this.arrows[1]),h=this.anim.getControllerForTarget(this.arrows[2]),f=c.getAllKeyframesForAttribute("clip"),d=u.getAllKeyframesForAttribute("clip"),p=h.getAllKeyframesForAttribute("clip");f[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+this.arrowHeights[0])+"px",relativeTo:".truedepth-container"}),f[1].overwriteProps({start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+this.arrowHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+this.arrowHeights[0]+70)+"px",relativeTo:".truedepth-container"}),d[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+this.arrowHeights[1])+"px",relativeTo:".truedepth-container"}),d[1].overwriteProps({start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+this.arrowHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+this.arrowHeights[1]+50-this.arrow2EndOffset[this.currentBreakpoint])+"px",relativeTo:".truedepth-container"}),p[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",relativeTo:".truedepth-container"}),p[1].overwriteProps({start:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",end:"-"+this.stickyHeight+" + "+(this.calloutWrapperHeight+100)+"px",relativeTo:".truedepth-container"});var m=this.anim.getControllerForTarget(this.arrowContainers[0]),_=this.anim.getControllerForTarget(this.arrowContainers[1]),y=this.anim.getControllerForTarget(this.arrowContainers[2]),g=m.getAllKeyframesForAttribute("y"),v=_.getAllKeyframesForAttribute("y"),b=y.getAllKeyframesForAttribute("y");g[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+300)+"px",relativeTo:".truedepth-container"}),v[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+300)+"px",relativeTo:".truedepth-container"}),b[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+this.calloutWrapperHeight+"px",y:[0,""+(i+this.copyHeights[2]-this.calloutWrapperHeight)],relativeTo:".truedepth-container"});var w=this.anim.getControllerForTarget(this.calloutWrappers[0]),E=this.anim.getControllerForTarget(this.calloutWrappers[1]),x=this.anim.getControllerForTarget(this.calloutWrappers[2]),S=w.getAllKeyframesForAttribute("opacity"),k=E.getAllKeyframesForAttribute("opacity"),T=x.getAllKeyframesForAttribute("opacity"),C=w.getAllKeyframesForAttribute("y"),A=E.getAllKeyframesForAttribute("y"),P=x.getAllKeyframesForAttribute("y");S[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+100)+"px",relativeTo:".truedepth-container"}),k[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]-this.callout2OpacityOffset[this.currentBreakpoint])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+80)+"px",relativeTo:".truedepth-container"}),T[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2]+100)+"px",relativeTo:".truedepth-container"}),C[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0])+"px",end:"-"+this.stickyHeight+" + "+(e+this.copyHeights[0]+100)+"px",relativeTo:".truedepth-container"}),A[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1])+"px",end:"-"+this.stickyHeight+" + "+(n+this.copyHeights[1]+100)+"px",relativeTo:".truedepth-container"}),P[0].overwriteProps({start:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2])+"px",end:"-"+this.stickyHeight+" + "+(i+this.copyHeights[2]+100)+"px",relativeTo:".truedepth-container"})}},{key:"mounted",value:function(){}},{key:"onResizeDebounced",value:function(t){this.currentBreakpoint=t.breakpoint,this.setStickyContainerWidth(),this.calloutWrapperHeight=this.calloutWrapper.offsetHeight+this.offsets[t.breakpoint],this.calculateHeights(),this.updateKeyframes(),l.forceUpdate({recalculateActiveKeyframes:!1,waitForNextUpdate:!0})}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("no-ie")&&document.documentElement.classList.contains("no-edge")&&!document.documentElement.classList.contains("aow")}}]),e}(a);e.exports=h},{"@marcom/ac-raf-emitter/draw":272,"@marcom/ac-raf-emitter/update":273,"@marcom/anim-system":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473}],562:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/ac-raf-emitter/draw"),c=t("@marcom/anim-system/Model/AnimSystemModel"),u=t("@marcom/bubble-gum/ComponentMap"),h=t("@marcom/feature-detect/isRetina"),f=(t("../helpers/forcesBasicInteraction"),{S:"small",M:"medium",L:"large"}),d=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.options=n.getOptions("data-video"),n.baseURL=n.el.getAttribute("data-video-base-url"),n.hasPlayed=!1,n.video=document.createElement("video"),n.replay=document.querySelector(".inline-video-button-replay"),n}return o(e,t),s(e,[{key:"bindEvents",value:function(){this.onPreload=this.onPreload.bind(this),this.onEnter=this.onEnter.bind(this),this.onExit=this.onExit.bind(this),this.onEnterPlay=this.onEnterPlay.bind(this)}},{key:"mounted",value:function(){var t=this;this.bindEvents();var e=document.querySelector(".scroll-content");if(this.chromaManager=this.gum.getComponentsForElement(e).filter(function(t){return t instanceof u.ChromaManager})[0],this.StartFrame=this.el.querySelector(".poster-frame-start"),this.EndFrame=this.el.querySelector(".poster-frame-end"),this.createVideoElements(),this.addDiscreteEvent({start:"-200vh",end:"-200vh",event:"preloadVideo"}),this.addDiscreteEvent({start:"-50vh",end:"100%",event:"playVideo"}),this.el._animInfo){var n=this.el._animInfo.controller;n.on("preloadVideo",this.onPreload),this.options.relativeVideo?(this.chromaManager.on("animation-reset",function(e){(e=t.options.relativeVideo)&&(t.video.pause(),t.video.currentTime=0)}),this.chromaManager.on("start-animation",function(e){(e=t.options.relativeVideo)&&t.onEnter()})):n.on("playVideo:enter",this.onEnter),n.on("playVideo:exit",this.onExit)}}},{key:"createVideoElements",value:function(){var t=this;this.replay.style.opacity=0,this.replay.disabled=!0,this.video.style.opacity=0,this.video.addEventListener("canplaythrough",function(){t.canplaythrough||(t.canplaythrough=!0,t.el.appendChild(t.video))}),this.replay.addEventListener("click",function(){t.hasPlayed=!1,t.onEnter(),t.replay.style.opacity=0}),this.video.addEventListener("ended",function(){t.hasPlayed=!0,t.onExit(),t.replay.style.opacity=1})}},{key:"onBreakpointChange",value:function(t){this.canplaythrough=!1,this.onPreload()}},{key:"getMediaFile",value:function(t){this.currentBreakpoint=c.pageMetrics.breakpoint;var e=f[this.currentBreakpoint],n=h()?"_2x":"";return""+this.baseURL+t+"/"+e+n+".mp4"}},{key:"onPreload",value:function(){this.canplaythrough&&this.currentBreakpoint===c.pageMetrics.breakpoint||(this.video.src=this.getMediaFile(this.options.src),this.video.muted=!0,this.video.playsInline=!0,this.video.load())}},{key:"onEnter",value:function(){return this.hasPlayed?(this.replay.disabled=!1,void(this.replay.style.opacity=1)):this.canplaythrough?void this.playVideo():void this.video.addEventListener("canplaythrough",this.onEnterPlay)}},{key:"onExit",value:function(){var t=this;this.video.pause(),this.animated=!0,l(function(){t.EndFrame.style.opacity=1,t.video.style.opacity=0,t.replay.disabled=!1})}},{key:"onEnterPlay",value:function(){this.canplaythrough=!0,this.playVideo(),this.video.removeEventListener("canplaythrough",this.onEnterPlay)}},{key:"playVideo",value:function(){var t=this;l(function(){t.EndFrame.style.opacity=0,t.video.style.opacity=1}),this.video.currentTime=0,this.video.play(),this.replay.disabled=!0}},{key:"getOptions",value:function(t){var e=this.el.getAttribute(t);return e?JSON.parse(e):{}}}],[{key:"IS_SUPPORTED",value:function(){return!(document.documentElement.classList.contains("aow")||document.documentElement.classList.contains("ie")||document.documentElement.classList.contains("edge"))}}]),e}(a);e.exports=d},{"../helpers/forcesBasicInteraction":569,"@marcom/ac-raf-emitter/draw":272,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473,"@marcom/bubble-gum/ComponentMap":475,"@marcom/feature-detect/isRetina":490}],563:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function _(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:_(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./VideoPlayer"),c=t("@marcom/ac-raf-emitter/RAFEmitter"),u=t("@marcom/ac-raf-emitter/draw"),h=t("@marcom/anim-system/Model/AnimSystemModel"),f=t("../helpers/BreakPoints"),d=(t("@marcom/bubble-gum/ComponentMap"),t("../helpers/forcesBasicInteraction")),p=t("../helpers/isiPadpro"),m=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.rafEmitter=new c,n}return o(e,t),s(e,[{key:"bindEvents",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bindEvents",this).call(this),this.stopChomaVideo=this.stopChomaVideo.bind(this)}},{key:"mounted",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mounted",this).call(this);document.querySelector(".scroll-content");this.chromaManager=this.gum.getComponentOfType("ChromaManager"),this.texture=this.chromaManager.seriously.source(this.video)}},{key:"createVideoElements",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createVideoElements",this).call(this),h.pageMetrics.breakpoint!==f.BASIC&&this.addVideoEvents()}},{key:"addVideoEvents",value:function(){this.video.addEventListener("ended",this.onExit),this.video.addEventListener("pause",this.onExit),this.video.style.visibility="hidden"}},{key:"removeVideoEvents",value:function(){this.video.removeEventListener("ended",this.onExit),this.video.removeEventListener("pause",this.onExit),this.video.style.visibility="visible"}},{key:"onBreakpointChange",value:function(t){t.breakpoint!==f.BASIC?this.currentBreakpoint===f.BASIC&&this.addVideoEvents():this.removeVideoEvents()}},{key:"onPreload",value:function(){if(h.pageMetrics.breakpoint!==f.BASIC){if(this.canplaythrough)return;this.video.src=this.getMediaFile(this.options.src),this.video.muted=!0,this.video.load()}}},{key:"onEnter",
value:function(){if(h.pageMetrics.breakpoint!==f.BASIC){if(!this.canplaythrough)return void this.video.addEventListener("canplaythrough",this.onEnterPlay);if(this.noReplay&&this.animated)return;this.playVideo()}else this.chromaManager.trigger("start-animation",this.options.src)}},{key:"onExit",value:function(){h.pageMetrics.breakpoint!==f.BASIC?this.canvas&&this.stopChomaVideo():a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onExit",this).call(this)}},{key:"onEnterPlay",value:function(){this.canplaythrough=!0,this.playVideo(),this.video.removeEventListener("canplaythrough",this.onEnterPlay)}},{key:"playVideo",value:function(){var t=this;this.replayBtn&&(this.replayBtn.disabled=!0),this.canvas=this.chromaManager.getCanvas(),this.el.appendChild(this.canvas),this.options.width=this.options.width||this.video.videoWidth,this.options.height=this.options.height||this.video.videoHeight,this.chromaManager.loadVideo(this.texture,this.options),this.chromaManager.trigger("animation-reset",this.options.src),this.rafEmitter.on("update",function(){t.video.currentTime>=t.options.triggerAtTime&&!t.triggered&&(t.triggered=!0,t.chromaManager.trigger("start-animation",t.options.src)),t.el.contains(t.canvas)||(console.log("video stopped",t.video.src),t.stopChomaVideo()),t.rafEmitter.run()}),this.animatePosterFrame(),this.rafEmitter.run()}},{key:"animatePosterFrame",value:function(){var t=this,e=1,n=1/60;this.rafEmitter.on("draw",function(){e-=n,e<=0&&(u(function(){t.StartFrame.style.opacity=0,t.EndFrame.style.opacity=0,t.canvas.style.opacity=1}),t.video.play(),t.chromaManager.seriously.go(),t.rafEmitter.off("draw"))})}},{key:"stopChomaVideo",value:function(){var t=this;this.replayBtn&&(this.replayBtn.disabled=!1),this.video.pause(),this.triggered=!1,this.animated=!0,this.chromaManager.seriously.stop(),u(function(){t.StartFrame.style.opacity=0,t.EndFrame.style.opacity=1,t.canvas.style.opacity=0,t.video.currentTime=0}),this.rafEmitter.off("update"),this.rafEmitter.off("draw"),this.rafEmitter.cancel()}},{key:"getMediaFile",value:function(t){return""+this.baseURL+t+"/large.mp4"}}],[{key:"IS_SUPPORTED",value:function(){return!(d||h.pageMetrics.breakpoint===f.BASIC||p)&&document.documentElement.classList.contains("webgl")}}]),e}(l);e.exports=m},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"../helpers/isiPadpro":570,"./VideoPlayer":564,"@marcom/ac-raf-emitter/RAFEmitter":266,"@marcom/ac-raf-emitter/draw":272,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/ComponentMap":475}],564:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/ac-raf-emitter/draw"),c=t("@marcom/anim-system/Model/AnimSystemModel"),u=t("../helpers/BreakPoints"),h=t("../helpers/forcesBasicInteraction"),f=t("@marcom/feature-detect/isRetina")(),d=t("../helpers/isiPadpro"),p={V_S:"medium",V_M:"medium",V_L:"large",B:"small"},m=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.options=n.getOptions("data-video"),n.noReplay=n.options.noReplay||!0,n.customURL=n.el.getAttribute("data-video-base-url"),n.defaultURL="/105/media/us/ipad-pro/2018/cE249dd1_58dc_487a_880b_6a1bc197cc43/anim/",n.baseURL=n.customURL?n.customURL:n.defaultURL,n}return o(e,t),s(e,[{key:"bindEvents",value:function(){this.onPreload=this.onPreload.bind(this),this.onEnter=this.onEnter.bind(this),this.onExit=this.onExit.bind(this),this.forcePlay=this.forcePlay.bind(this),this.onEnterPlay=this.onEnterPlay.bind(this)}},{key:"mounted",value:function(){var t=this;this.bindEvents(),this.chromaManager=this.gum.getComponentOfType("ChromaManager"),this.StartFrame=this.el.querySelector(".poster-frame.startframe"),this.EndFrame=this.el.querySelector(".poster-frame.endframe"),this.EndFrame=this.EndFrame||this.StartFrame,this.createVideoElements();var e={start:"-300vw",end:"-300vw",event:"preloadVideo",breakpointMask:u.ENHANCED},n={start:"-200vh",end:"-200vh",event:"preloadVideo",breakpointMask:u.BASIC},i={start:"-50vw",end:"100%w",event:"playVideo",breakpointMask:u.ENHANCED},r={start:"-50vh",end:"100%",event:"playVideo",breakpointMask:u.BASIC},o={preloadEnhanced:e,preloadBasic:n,playVideoEhnaced:i,playVideoBasic:r},s={preloadBasic:n,playVideoBasic:r},a={preloadEnhanced:e,playVideoEhnaced:i};if(this.options.mask||this.createEvent(o),this.options.mask===u.ENHANCED&&this.createEvent(a),this.options.mask===u.BASIC&&this.createEvent(s),this.el._animInfo){var l=this.el._animInfo.controller;l.on("preloadVideo",this.onPreload),this.options.relativeVideo?this.chromaManager&&(this.chromaManager.on("animation-reset",function(e){(e=t.options.relativeVideo)&&(t.video.pause(),t.video.currentTime=0)}),this.chromaManager.on("start-animation",function(e){(e=t.options.relativeVideo)&&(t.noReplay=!1,t.onEnter())})):l.on("playVideo:enter",this.onEnter),l.on("playVideo:exit",this.onExit),this.options.replayBtnClass?this.replayBtn=document.querySelector(this.options.replayBtnClass):this.replayBtn=this.el.querySelector(".replay-btn"),this.replayBtn&&this.replayBtn.addEventListener("click",this.forcePlay)}}},{key:"createEvent",value:function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];"playVideoEhnaced"===e&&(n=Object.assign({},t[e],this.getOptions("data-anim-play-video"))),"playVideoBasic"===e&&(n=Object.assign({},t[e],this.getOptions("data-anim-play-video-basic"))),this.addDiscreteEvent(n)}}},{key:"createVideoElements",value:function(){var t=this;this.video=document.createElement("video"),this.video.style.opacity=0,this.video.muted=!0,this.video.playsInline=!0,this.video.setAttribute("aria-hidden","true"),this.video.addEventListener("ended",this.onExit),this.el.appendChild(this.video),this.video.addEventListener("canplaythrough",function(){t.canplaythrough||(t.canplaythrough=!0)})}},{key:"getMediaFile",value:function(t){if(this.currentBreakpoint=c.pageMetrics.breakpoint,!this.options.mask||this.options.mask.indexOf(this.currentBreakpoint)>-1){var e=p[this.currentBreakpoint],n=f?"_2x":"";return""+this.baseURL+t+"/"+e+n+".mp4"}}},{key:"onPreload",value:function(){var t=this.getMediaFile(this.options.src);!t||this.canplaythrough&&this.currentBreakpoint===c.pageMetrics.breakpoint||(this.video.src=t,this.video.load())}},{key:"onEnter",value:function(){if(!this.noReplay||!this.animated){if(!this.canplaythrough)return void this.video.addEventListener("canplaythrough",this.onEnterPlay);this.video.currentTime=0,this.playVideo()}}},{key:"onExit",value:function(){var t=this;this.canplaythrough&&(this.replayBtn&&(this.replayBtn.disabled=!1),this.video.pause(),this.animated=!0,l(function(){t.EndFrame.style.opacity=1,t.video.style.opacity=0}))}},{key:"onEnterPlay",value:function(){this.canplaythrough=!0,this.playVideo(),this.video.removeEventListener("canplaythrough",this.onEnterPlay)}},{key:"playVideo",value:function(){var t=this;this.replayBtn&&(this.replayBtn.disabled=!0),l(function(){t.video.style.opacity=1,t.EndFrame.style.opacity=0,t.video.currentTime=0,l(function(){t.StartFrame.style.visibility="hidden"})}),this.video.play()}},{key:"forcePlay",value:function(){this.replayBtn.disabled||this.playVideo()}},{key:"getOptions",value:function(t){var e=this.el.getAttribute(t);return e?JSON.parse(e):{}}},{key:"onBreakpointChange",value:function(t){this.canplaythrough=!1,this.video.src=this.getMediaFile(this.options.src),this.video.load()}}],[{key:"IS_SUPPORTED",value:function(){return!(h||d)}}]),e}(a);e.exports=m},{"../helpers/BreakPoints":566,"../helpers/forcesBasicInteraction":569,"../helpers/isiPadpro":570,"@marcom/ac-raf-emitter/draw":272,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/bubble-gum/BaseComponent":473,"@marcom/feature-detect/isRetina":490}],565:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/bubble-gum/BaseComponent"),l=t("@marcom/anim-system"),c=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.gutsImage=n.el.querySelector("[data-guts-image]"),n.startAnimation=n.startAnimation.bind(n),n.updateMask=n.updateMask.bind(n),n.createTriggerKeyframes(),n.createTimeline(),n.el._animInfo.controller.once("show-guts",n.startAnimation),n.gutsImage._animInfo.controller.on("update-mask",n.updateMask),n}return o(e,t),s(e,[{key:"createTriggerKeyframes",value:function(){this.anim.addKeyframe(this.el,{start:"-50vh",event:"show-guts"}),this.anim.addKeyframe(this.el,{start:"-50vh",cssClass:"show-guts"})}},{key:"createTimeline",value:function(){this.timeline=l.createTimeGroup(),this.timeline.addKeyframe(this.gutsImage,{start:0,end:1,event:"update-mask",maskValue:[0,200],easeFunction:"easeInSin"})}},{key:"startAnimation",value:function(){this.timeline.play()}},{key:"updateMask",value:function(t){var e=t.tweenProps.maskValue.current.toFixed(0),n=0;e>=100&&(n=e-100),this.gutsImage.style.webkitMaskImage="linear-gradient(rgba(0, 0, 0, 1) "+n+"%, rgba(0, 0, 0, 0) "+e+"%)"}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("no-ie")&&document.documentElement.classList.contains("no-edge")&&!document.documentElement.classList.contains("aow")}}]),e}(a);e.exports=c},{"@marcom/anim-system":434,"@marcom/bubble-gum/BaseComponent":473}],566:[function(t,e,n){"use strict";e.exports={BASIC:"B",VS:"V_S",VM:"V_M",VL:"V_L",ENHANCED:"V_SV_MV_L"}},{}],567:[function(t,e,n){"use strict";e.exports=function(t){var e=function(t){return(t-100)*-1},n=e(t);return{"top-left":{collapsed:"0 0, 100% 0, 0 0, 0% 100%",expanded:"0 0, 100% 0, "+t+"% "+t+"%, 0% 100%"},"top-right":{collapsed:"0 0, 100% 0, 100% 100%, 100% 0",expanded:"0 0, 100% 0, 100% 100%, "+n+"% "+t+"%"},"bottom-left":{collapsed:"0 0, 0 100%, 100% 100%, 0% 100%",expanded:"0 0, "+t+"% "+n+"%, 100% 100%, 0% 100%"},"bottom-right":{collapsed:"100% 100%, 100% 0, 100% 100%, 0 100%",expanded:n+"% "+n+"%, 100% 0, 100% 100%, 0 100%"},top:{collapsed:"0 100%, 100% 100%, 100% 100%, 0% 100%",expanded:"0 100%, 100% 100%, 100% "+t+"%, 0% "+t+"%"},right:{collapsed:"100% 0, 100% 0, 100% 100%, 100% 100%",expanded:n+"% 0, 100% 0, 100% 100%, "+n+"% 100%"},bottom:{collapsed:"0 100%, 100% 100%, 100% 100%, 0% 100%",expanded:"0 "+n+"%, 100% "+n+"%, 100% 100%, 0% 100%"},left:{collapsed:"0 0, 0 0, 0 100%, 0% 100%",expanded:"0 0, "+t+"% 0, "+t+"% 100%, 0% 100%"}}}},{}],568:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("@marcom/ac-raf-emitter/RAFEmitter");e.exports=function(){function t(e){var n=this;i(this,t),this.target=0,this.current=e.initPosition||0,this.fn=e.callback||function(){},this.ease=e.ease,this._rafEmitter=new o,this._rafEmitter.on("update",function(){var t=n.target-n.current,e=1;t>.01&&(e=n.ease,n._rafEmitter.run()),n.current+=t*e}),this._rafEmitter.on("draw",function(){return n.fn(n.current,n.target)})}return r(t,[{key:"_startLoop",value:function(){this._rafEmitter.run()}},{key:"setTarget",value:function(t){this.target=t,this._startLoop()}},{key:"setChaser",value:function(t){this.current=t}},{key:"stop",value:function(){this._rafEmitter.cancel()}},{key:"currentPosition",get:function(){return this.current}}]),t}()},{"@marcom/ac-raf-emitter/RAFEmitter":266}],569:[function(t,e,n){"use strict";var i=t("@marcom/useragent-detect"),r=t("@marcom/ac-feature/touchAvailable")(),o=(i.browser.ie,document.documentElement.classList.contains("aow")),s=t("@marcom/ac-feature/prefersReducedMotion")(),a=function(){return!r||"function"==typeof document.elementsFromPoint}(),l=function(){return!!r&&"function"==typeof document.msElementsFromPoint}(),c=i.os.android,u=o||c||i.browser.ie||l||!a||s;e.exports=u},{"@marcom/ac-feature/prefersReducedMotion":170,"@marcom/ac-feature/touchAvailable":171,"@marcom/useragent-detect":501}],570:[function(t,e,n){"use strict";var i=document.documentElement.classList.contains("touch");e.exports=i&&1024===window.screen.width&&1366===window.screen.height},{}],571:[function(t,e,n){"use strict";e.exports={AutoScrollComponent:t("../components/AutoScrollComponent"),AutoScrollTouchComponent:t("../components/AutoScrollTouchComponent"),HorizontalAnimGroup:t("../components/HorizontalAnimGroup"),TouchClick:t("../components/TouchClick"),ClassManager:t("../components/ClassManager"),SectionTriggers:t("../components/SectionTriggersComponent"),LineAnimation:t("../components/LineAnimationComponent"),ProgressiveImage:t("../components/ProgressiveImageComponent"),VideoAngle:t("../components/VideoAngle"),VideoChroma:t("../components/VideoChroma"),ChromaManager:t("../components/ChromaManager"),VideoPlayer:t("../components/VideoPlayer"),SequencePlayer:t("../components/SequencePlayer"),GesturesModal:t("../components/Gestures/GesturesModal"),GesturesGallery:t("../components/Gestures/GesturesGallery"),GesturesModalGalleryManager:t("../components/GesturesModalGalleryManager"),TruedepthRevealComponent:t("../components/TruedepthRevealComponent"),XrayComponent:t("../components/XrayComponent"),RouterAnimation:t("../components/RouterAnimation"),DoubleTap:t("../components/DoubleTap"),AnalyticsComponent:t("../components/AnalyticsComponent"),SectionEngagement:t("../components/SectionEngagementComponent"),AccessibilityComponent:t("../components/AccessibilityComponent"),HeroModal:t("../components/HeroModal")}},{"../components/AccessibilityComponent":539,"../components/AnalyticsComponent":540,"../components/AutoScrollComponent":541,"../components/AutoScrollTouchComponent":542,"../components/ChromaManager":543,"../components/ClassManager":544,"../components/DoubleTap":545,"../components/Gestures/GesturesGallery":548,"../components/Gestures/GesturesModal":549,"../components/GesturesModalGalleryManager":551,"../components/HeroModal":552,"../components/HorizontalAnimGroup":553,"../components/LineAnimationComponent":554,"../components/ProgressiveImageComponent":555,"../components/RouterAnimation":556,"../components/SectionEngagementComponent":557,"../components/SectionTriggersComponent":558,"../components/SequencePlayer":559,"../components/TouchClick":560,"../components/TruedepthRevealComponent":561,"../components/VideoAngle":562,"../components/VideoChroma":563,"../components/VideoPlayer":564,"../components/XrayComponent":565}],572:[function(t,e,n){"use strict";var i=t("@marcom/bubble-gum/BubbleGum"),r=t("@marcom/bubble-gum/ComponentMap"),o=t("./model/ComponentMap"),s=(t("@marcom/anim-system/ScrollGroup"),t("@marcom/anim-system/Model/AnimSystemModel")),a=t("@marcom/anim-system/AnimSystem"),l=t("@marcom/ac-accessibility/TextZoom"),c=t("./helpers/BreakPoints"),u=t("./helpers/ClipPaths"),h=t("./helpers/isiPadpro"),f={minWidth:736},d={vs:414,vm:824,vl:1200},p=function(){var t=document.documentElement.classList.contains("webgl"),e="/ac/libs/seriously/",n=["seriously.min.js","effects/min/seriously.chroma.min.js"],i=new Promise(function(i,r){!t||h?i():n.forEach(function(t,n){var r=document.createElement("script");0===n&&r.addEventListener("load",function(){i()}),r.src=""+e+t,document.body.appendChild(r)})});return i},m=function(){var t=document.createElement("div");t.setAttribute("windowDimensionsTracker","true"),t.style.position="fixed",t.style.top="0",t.style.width="100vw",t.style.height="100vh",t.style.background="red",t.style.pointerEvents="none",t.style.visibility="hidden",t.style.zIndex="-1",document.documentElement.appendChild(t);var e=t.clientWidth,n=t.clientHeight,i=document.documentElement.classList.contains("text-zoom");a.on("ON_DOM_GROUPS_CREATED",function(){return s.pageMetrics.windowHeight=n}),a.on("ON_RESIZE_IMMEDIATE",function(){return s.pageMetrics.windowHeight=n}),window.removeEventListener("resize",a.onResizeImmediate),window.addEventListener("resize",function(r){var o=document.documentElement.classList.contains("text-zoom");i!==o&&location.reload(!1),i=o;var s=t.clientWidth,l=t.clientHeight;s===e&&l===n||(e=s,n=l,a.onResizeImmediate(r))})},_=function(){Object.assign(r,o);var t=document.querySelector("body");document.documentElement.classList.contains("text-zoom")?s.BREAKPOINTS=[{name:c.BASIC,longName:"default-wide",mediaQuery:"only screen\n\t\t\t\t\tand (min-width: 100px)"}]:s.BREAKPOINTS=[{name:c.VS,longName:"enhanced-small",mediaQuery:"only screen\n\t\t\t\t\tand (min-width: "+f.minWidth+"px)\n\t\t\t\t\tand (max-height: "+d.vs+"px)"},{name:c.VM,longName:"enhanced-medium",mediaQuery:"only screen\n\t\t\t\t\tand (min-width: "+f.minWidth+"px)\n\t\t\t\t\tand (max-height: "+d.vm+"px)"},{name:c.VM,longName:"enhanced-medium",mediaQuery:"only screen and (max-width: 1334px) and (min-width: "+f.minWidth+"px)"},{name:c.VL,longName:"enhanced-large",mediaQuery:"only screen\n\t\t\t\t\tand (min-width: "+f.minWidth+"px)\n\t\t\t\t\tand (min-height: "+(d.vm+1)+"px)"},{name:c.BASIC,longName:"default-wide",mediaQuery:"only screen\n\t\t\t\t\tand (max-width: "+(f.minWidth-1)+"px)"}];var e=new i(t);return e},y=function(t){"rtl"===document.documentElement.getAttribute("dir")&&t.on(i.EVENTS.DOM_COMPONENTS_MOUNTED,function(){var e=t.anim.getGroupForTarget(document.querySelector(".scroll-content"));e.keyframeControllers.forEach(function(t){t._allKeyframes.forEach(function(t){if(t.jsonProps.allowRTL){t.jsonProps.rtl=!0;var e=""+t.jsonProps.end,n=""+t.jsonProps.start;t.jsonProps.end===t.jsonProps.start&&(e="100%w - ("+e+")",n="100%w - ("+n+")"),t.overwriteProps({start:e,end:n,x:t.jsonProps.x?[t.jsonProps.x[0],t.jsonProps.x[1]+" * -1"]:void 0})}})})})},g=function(){var t=document.querySelector("head"),e=document.createElement("style");e.type="text/css";var n="",i=u(100),r=function(t){var e=function(e){return"polygon("+i[t][e]+")"},r=function(t){return"-webkit-clip-path: "+e(t)+"; clip-path: "+e(t)+";"},o=".clip-path-"+t+" {"+r("collapsed")+"}",s=".expanded .clip-path-"+t+" {"+r("expanded")+"}";n+=o+"\n"+s+"\n"};for(var o in i)r(o);var s=document.createTextNode(n);e.appendChild(s),t.appendChild(e)};!function(){l.detect(),m(),p().then(function(){g();var t=_(),e=document.querySelector(".ac-gf-buystrip");e&&(e.setAttribute("data-section-custom-event-triggers",'{"start": "100vh + 95rh","end":"100vh + 98rh + 35%","relativeTo": ".section-router-overview"}'),t.addComponent({componentName:"SectionEngagement",el:e})),y(t),t.on(i.EVENTS.DOM_COMPONENTS_MOUNTED,function(){document.documentElement.classList.add("loaded")})})}()},{"./helpers/BreakPoints":566,"./helpers/ClipPaths":567,"./helpers/isiPadpro":570,"./model/ComponentMap":571,"@marcom/ac-accessibility/TextZoom":23,"@marcom/anim-system/AnimSystem":434,"@marcom/anim-system/Model/AnimSystemModel":448,"@marcom/anim-system/ScrollGroup":457,"@marcom/bubble-gum/BubbleGum":474,"@marcom/bubble-gum/ComponentMap":475}]},{},[572]);