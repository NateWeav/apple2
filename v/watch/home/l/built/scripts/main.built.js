(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var Clock=require("./ac-clock/Clock"),ThrottledClock=require("./ac-clock/ThrottledClock"),sharedClockInstance=require("./ac-clock/sharedClockInstance");sharedClockInstance.Clock=Clock;sharedClockInstance.ThrottledClock=ThrottledClock;module.exports=sharedClockInstance},{"./ac-clock/Clock":2,"./ac-clock/ThrottledClock":3,"./ac-clock/sharedClockInstance":4}],2:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Function/prototype.bind");require("@marcom/ac-polyfills/requestAnimationFrame");var proto;var EventEmitter=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var pageLoadTime=(new Date).getTime();function Clock(){EventEmitter.call(this);this.lastFrameTime=null;this._animationFrame=null;this._active=false;this._startTime=null;this._boundOnAnimationFrame=this._onAnimationFrame.bind(this);this._getTime=Date.now||function(){return(new Date).getTime()}}proto=Clock.prototype=new EventEmitter(null);proto.start=function(){if(this._active){return}this._tick()};proto.stop=function(){if(this._active){window.cancelAnimationFrame(this._animationFrame)}this._animationFrame=null;this.lastFrameTime=null;this._active=false};proto.destroy=function(){this.stop();this.off();var i;for(i in this){if(this.hasOwnProperty(i)){this[i]=null}}};proto.isRunning=function(){return this._active};proto._tick=function(){if(!this._active){this._active=true}this._animationFrame=window.requestAnimationFrame(this._boundOnAnimationFrame)};proto._onAnimationFrame=function(time){if(this.lastFrameTime===null){this.lastFrameTime=time}var delta=time-this.lastFrameTime;var fps=0;if(delta>=1e3){delta=0}if(delta!==0){fps=1e3/delta}if(this._firstFrame===true){delta=0;this._firstFrame=false}if(fps===0){this._firstFrame=true}else{var data={time:time,delta:delta,fps:fps,naturalFps:fps,timeNow:this._getTime()};this.trigger("update",data);this.trigger("draw",data)}this._animationFrame=null;this.lastFrameTime=time;if(this._active!==false){this._tick()}else{this.lastFrameTime=null}};module.exports=Clock},{"@marcom/ac-event-emitter-micro":13,"@marcom/ac-polyfills/Function/prototype.bind":"@marcom/ac-polyfills/Function/prototype.bind","@marcom/ac-polyfills/requestAnimationFrame":"@marcom/ac-polyfills/requestAnimationFrame"}],3:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/requestAnimationFrame");var proto;var sharedClockInstance=require("./sharedClockInstance"),EventEmitter=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;function ThrottledClock(fps,options){if(fps===null){return}EventEmitter.call(this);options=options||{};this._fps=fps||null;this._clock=options.clock||sharedClockInstance;this._lastThrottledTime=null;this._clockEvent=null;this._boundOnClockDraw=this._onClockDraw.bind(this);this._boundOnClockUpdate=this._onClockUpdate.bind(this);this._clock.on("update",this._boundOnClockUpdate)}proto=ThrottledClock.prototype=new EventEmitter(null);proto.setFps=function(fps){this._fps=fps;return this};proto.getFps=function(){return this._fps};proto.start=function(){this._clock.start();return this};proto.stop=function(){this._clock.stop();return this};proto.isRunning=function(){return this._clock.isRunning()};proto.destroy=function(){this._clock.off("update",this._boundOnClockUpdate);this._clock.destroy.call(this)};proto._onClockUpdate=function(e){if(this._lastThrottledTime===null){this._lastThrottledTime=this._clock.lastFrameTime}var delta=e.time-this._lastThrottledTime;if(!this._fps){throw new TypeError("FPS is not defined.")}if(Math.ceil(1e3/delta)>=this._fps+2){return}this._clockEvent=e;this._clockEvent.delta=delta;this._clockEvent.fps=1e3/delta;this._lastThrottledTime=this._clockEvent.time;this._clock.once("draw",this._boundOnClockDraw);this.trigger("update",this._clockEvent)};proto._onClockDraw=function(){this.trigger("draw",this._clockEvent)};module.exports=ThrottledClock},{"./sharedClockInstance":4,"@marcom/ac-event-emitter-micro":13,"@marcom/ac-polyfills/requestAnimationFrame":"@marcom/ac-polyfills/requestAnimationFrame"}],4:[function(require,module,exports){"use strict";var Clock=require("./Clock");module.exports=new Clock},{"./Clock":2}],5:[function(require,module,exports){"use strict";module.exports={createBezier:require("./ac-easing/createBezier"),createPredefined:require("./ac-easing/createPredefined"),createStep:require("./ac-easing/createStep"),Ease:require("./ac-easing/Ease")}},{"./ac-easing/Ease":6,"./ac-easing/createBezier":7,"./ac-easing/createPredefined":8,"./ac-easing/createStep":9}],6:[function(require,module,exports){"use strict";var ERR_FUNCTION_REQUIRE="Ease expects an easing function.";function Ease(func,cssString){if(typeof func!=="function"){throw new TypeError(ERR_FUNCTION_REQUIRE)}this.easingFunction=func;this.cssString=cssString||null}var proto=Ease.prototype;proto.getValue=function(value){return this.easingFunction(value,0,1,1)};module.exports=Ease},{}],7:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.every");var Ease=require("./Ease");var KeySpline=require("./helpers/KeySpline");var ERR_BEZIER_VALUES="Bezier curve expects exactly four (4) numbers. Given: ";module.exports=function createBezier(x1,y1,x2,y2){var pts=Array.prototype.slice.call(arguments);var allNums=pts.every(function(pt){return typeof pt==="number"});if(pts.length!==4||!allNums){throw new TypeError(ERR_BEZIER_VALUES+pts)}var keySpline=new KeySpline(x1,y1,x2,y2);var easingFn=function(time,begin,change,duration){return keySpline.get(time/duration)*change+begin};var cssString="cubic-bezier("+pts.join(", ")+")";return new Ease(easingFn,cssString)}},{"./Ease":6,"./helpers/KeySpline":10,"@marcom/ac-polyfills/Array/prototype.every":"@marcom/ac-polyfills/Array/prototype.every"}],8:[function(require,module,exports){"use strict";var createStep=require("./createStep");var cssAliases=require("./helpers/cssAliases");var easingFunctions=require("./helpers/easingFunctions");var Ease=require("./Ease");var ERR_PREDEFINED='Easing function "%TYPE%" not recognized among the following: '+Object.keys(easingFunctions).join(", ");module.exports=function createPredefined(type){var easingFn;if(type==="step-start"){return createStep(1,"start")}else if(type==="step-end"){return createStep(1,"end")}else{easingFn=easingFunctions[type]}if(!easingFn){throw new Error(ERR_PREDEFINED.replace("%TYPE%",type))}return new Ease(easingFn,cssAliases[type])}},{"./Ease":6,"./createStep":9,"./helpers/cssAliases":11,"./helpers/easingFunctions":12}],9:[function(require,module,exports){"use strict";var Ease=require("./Ease");var ERR_STEP_TYPE="Step function expects a numeric value greater than zero. Given: ";var ERR_STEP_DIRECTION='Step function direction must be either "start" or "end" (default). Given: ';module.exports=function createStep(steps,direction){direction=direction||"end";if(typeof steps!=="number"||steps<1){throw new TypeError(ERR_STEP_TYPE+steps)}if(direction!=="start"&&direction!=="end"){throw new TypeError(ERR_STEP_DIRECTION+direction)}var easingFn=function(time,begin,change,duration){var length=change/steps;var step=Math[direction==="start"?"floor":"ceil"](time/duration*steps);return begin+length*step};var cssString="steps("+steps+", "+direction+")";return new Ease(easingFn,cssString)}},{"./Ease":6}],10:[function(require,module,exports){function KeySpline(mX1,mY1,mX2,mY2){this.get=function(aX){if(mX1===mY1&&mX2===mY2){return aX}return CalcBezier(GetTForX(aX),mY1,mY2)};function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function C(aA1){return 3*aA1}function CalcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT}function GetSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+C(aA1)}function GetTForX(aX){var aGuessT=aX;for(var i=0;i<4;++i){var currentSlope=GetSlope(aGuessT,mX1,mX2);if(currentSlope===0){return aGuessT}var currentX=CalcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope}return aGuessT}}module.exports=KeySpline},{}],11:[function(require,module,exports){"use strict";var aliases={linear:"cubic-bezier(0, 0, 1, 1)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)","ease-in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","ease-out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","ease-in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","ease-out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","ease-in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","ease-in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","ease-out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","ease-in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","ease-in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","ease-out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","ease-in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"};aliases["easeIn"]=aliases["ease-in"];aliases["easeOut"]=aliases["ease-out"];aliases["easeInOut"]=aliases["ease-in-out"];aliases["easeInCubic"]=aliases["ease-in-cubic"];aliases["easeOutCubic"]=aliases["ease-out-cubic"];aliases["easeInOutCubic"]=aliases["ease-in-out-cubic"];aliases["easeInQuad"]=aliases["ease-in-quad"];aliases["easeOutQuad"]=aliases["ease-out-quad"];aliases["easeInOutQuad"]=aliases["ease-in-out-quad"];aliases["easeInQuart"]=aliases["ease-in-quart"];aliases["easeOutQuart"]=aliases["ease-out-quart"];aliases["easeInOutQuart"]=aliases["ease-in-out-quart"];aliases["easeInQuint"]=aliases["ease-in-quint"];aliases["easeOutQuint"]=aliases["ease-out-quint"];aliases["easeInOutQuint"]=aliases["ease-in-out-quint"];aliases["easeInSine"]=aliases["ease-in-sine"];aliases["easeOutSine"]=aliases["ease-out-sine"];aliases["easeInOutSine"]=aliases["ease-in-out-sine"];aliases["easeInExpo"]=aliases["ease-in-expo"];aliases["easeOutExpo"]=aliases["ease-out-expo"];aliases["easeInOutExpo"]=aliases["ease-in-out-expo"];aliases["easeInCirc"]=aliases["ease-in-circ"];aliases["easeOutCirc"]=aliases["ease-out-circ"];aliases["easeInOutCirc"]=aliases["ease-in-out-circ"];aliases["easeInBack"]=aliases["ease-in-back"];aliases["easeOutBack"]=aliases["ease-out-back"];aliases["easeInOutBack"]=aliases["ease-in-out-back"];module.exports=aliases},{}],12:[function(require,module,exports){"use strict";var createBezier=require("../createBezier");var ease=createBezier(.25,.1,.25,1).easingFunction;var easeIn=createBezier(.42,0,1,1).easingFunction;var easeOut=createBezier(0,0,.58,1).easingFunction;var easeInOut=createBezier(.42,0,.58,1).easingFunction;var linear=function(time,begin,change,duration){return change*time/duration+begin};var easeInQuad=function(time,begin,change,duration){return change*(time/=duration)*time+begin};var easeOutQuad=function(time,begin,change,duration){return-change*(time/=duration)*(time-2)+begin};var easeInOutQuad=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time+begin}return-change/2*(--time*(time-2)-1)+begin};var easeInCubic=function(time,begin,change,duration){return change*(time/=duration)*time*time+begin};var easeOutCubic=function(time,begin,change,duration){return change*((time=time/duration-1)*time*time+1)+begin};var easeInOutCubic=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time+begin}return change/2*((time-=2)*time*time+2)+begin};var easeInQuart=function(time,begin,change,duration){return change*(time/=duration)*time*time*time+begin};var easeOutQuart=function(time,begin,change,duration){return-change*((time=time/duration-1)*time*time*time-1)+begin};var easeInOutQuart=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time*time+begin}return-change/2*((time-=2)*time*time*time-2)+begin};var easeInQuint=function(time,begin,change,duration){return change*(time/=duration)*time*time*time*time+begin};var easeOutQuint=function(time,begin,change,duration){return change*((time=time/duration-1)*time*time*time*time+1)+begin};var easeInOutQuint=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time*time*time+begin}return change/2*((time-=2)*time*time*time*time+2)+begin};var easeInSine=function(time,begin,change,duration){return-change*Math.cos(time/duration*(Math.PI/2))+change+begin};var easeOutSine=function(time,begin,change,duration){return change*Math.sin(time/duration*(Math.PI/2))+begin};var easeInOutSine=function(time,begin,change,duration){return-change/2*(Math.cos(Math.PI*time/duration)-1)+begin};var easeInExpo=function(time,begin,change,duration){return time===0?begin:change*Math.pow(2,10*(time/duration-1))+begin};var easeOutExpo=function(time,begin,change,duration){return time===duration?begin+change:change*(-Math.pow(2,-10*time/duration)+1)+begin};var easeInOutExpo=function(time,begin,change,duration){if(time===0){return begin}else if(time===duration){return begin+change}else if((time/=duration/2)<1){return change/2*Math.pow(2,10*(time-1))+begin}return change/2*(-Math.pow(2,-10*--time)+2)+begin};var easeInCirc=function(time,begin,change,duration){return-change*(Math.sqrt(1-(time/=duration)*time)-1)+begin};var easeOutCirc=function(time,begin,change,duration){return change*Math.sqrt(1-(time=time/duration-1)*time)+begin};var easeInOutCirc=function(time,begin,change,duration){if((time/=duration/2)<1){return-change/2*(Math.sqrt(1-time*time)-1)+begin}return change/2*(Math.sqrt(1-(time-=2)*time)+1)+begin};var easeInElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}else if((time/=duration)===1){return begin+change}if(!period){period=duration*.3}if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}return-(amplitude*Math.pow(2,10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period))+begin};var easeOutElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}else if((time/=duration)===1){return begin+change}if(!period){period=duration*.3}if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}return amplitude*Math.pow(2,-10*time)*Math.sin((time*duration-shootover)*(2*Math.PI)/period)+change+begin};var easeInOutElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}else if((time/=duration/2)===2){return begin+change}if(!period){period=duration*(.3*1.5)}if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}if(time<1){return-.5*(amplitude*Math.pow(2,10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period))+begin}return amplitude*Math.pow(2,-10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period)*.5+change+begin};var easeInBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}return change*(time/=duration)*time*((shootover+1)*time-shootover)+begin};var easeOutBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}return change*((time=time/duration-1)*time*((shootover+1)*time+shootover)+1)+begin};var easeInOutBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}if((time/=duration/2)<1){return change/2*(time*time*(((shootover*=1.525)+1)*time-shootover))+begin}return change/2*((time-=2)*time*(((shootover*=1.525)+1)*time+shootover)+2)+begin};var easeOutBounce=function(time,begin,change,duration){if((time/=duration)<1/2.75){return change*(7.5625*time*time)+begin}else if(time<2/2.75){return change*(7.5625*(time-=1.5/2.75)*time+.75)+begin}else if(time<2.5/2.75){return change*(7.5625*(time-=2.25/2.75)*time+.9375)+begin}return change*(7.5625*(time-=2.625/2.75)*time+.984375)+begin};var easeInBounce=function(time,begin,change,duration){return change-easeOutBounce(duration-time,0,change,duration)+begin};var easeInOutBounce=function(time,begin,change,duration){if(time<duration/2){return easeInBounce(time*2,0,change,duration)*.5+begin}return easeOutBounce(time*2-duration,0,change,duration)*.5+change*.5+begin};module.exports={linear:linear,ease:ease,easeIn:easeIn,"ease-in":easeIn,easeOut:easeOut,"ease-out":easeOut,easeInOut:easeInOut,"ease-in-out":easeInOut,easeInCubic:easeInCubic,"ease-in-cubic":easeInCubic,easeOutCubic:easeOutCubic,"ease-out-cubic":easeOutCubic,easeInOutCubic:easeInOutCubic,"ease-in-out-cubic":easeInOutCubic,easeInQuad:easeInQuad,"ease-in-quad":easeInQuad,easeOutQuad:easeOutQuad,"ease-out-quad":easeOutQuad,easeInOutQuad:easeInOutQuad,"ease-in-out-quad":easeInOutQuad,easeInQuart:easeInQuart,"ease-in-quart":easeInQuart,easeOutQuart:easeOutQuart,"ease-out-quart":easeOutQuart,easeInOutQuart:easeInOutQuart,"ease-in-out-quart":easeInOutQuart,easeInQuint:easeInQuint,"ease-in-quint":easeInQuint,easeOutQuint:easeOutQuint,"ease-out-quint":easeOutQuint,easeInOutQuint:easeInOutQuint,"ease-in-out-quint":easeInOutQuint,easeInSine:easeInSine,"ease-in-sine":easeInSine,easeOutSine:easeOutSine,"ease-out-sine":easeOutSine,easeInOutSine:easeInOutSine,"ease-in-out-sine":easeInOutSine,easeInExpo:easeInExpo,"ease-in-expo":easeInExpo,easeOutExpo:easeOutExpo,"ease-out-expo":easeOutExpo,easeInOutExpo:easeInOutExpo,"ease-in-out-expo":easeInOutExpo,easeInCirc:easeInCirc,"ease-in-circ":easeInCirc,easeOutCirc:easeOutCirc,"ease-out-circ":easeOutCirc,easeInOutCirc:easeInOutCirc,"ease-in-out-circ":easeInOutCirc,easeInBack:easeInBack,"ease-in-back":easeInBack,easeOutBack:easeOutBack,"ease-out-back":easeOutBack,easeInOutBack:easeInOutBack,"ease-in-out-back":easeInOutBack,easeInElastic:easeInElastic,"ease-in-elastic":easeInElastic,easeOutElastic:easeOutElastic,"ease-out-elastic":easeOutElastic,easeInOutElastic:easeInOutElastic,"ease-in-out-elastic":easeInOutElastic,easeInBounce:easeInBounce,"ease-in-bounce":easeInBounce,easeOutBounce:easeOutBounce,"ease-out-bounce":easeOutBounce,easeInOutBounce:easeInOutBounce,"ease-in-out-bounce":easeInOutBounce}},{"../createBezier":7}],13:[function(require,module,exports){"use strict";module.exports={EventEmitterMicro:require("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":14}],14:[function(require,module,exports){"use strict";function EventEmitterMicro(){this._events={}}var proto=EventEmitterMicro.prototype;proto.on=function(eventName,callback){this._events[eventName]=this._events[eventName]||[];this._events[eventName].unshift(callback)};proto.once=function(eventName,callback){var that=this;function fn(data){that.off(eventName,fn);if(data!==undefined)callback(data);else callback()}this.on(eventName,fn)};proto.off=function(eventName,callback){if(!this.has(eventName))return;var index=this._events[eventName].indexOf(callback);if(index===-1)return;this._events[eventName].splice(index,1)};proto.trigger=function(eventName,data){if(!this.has(eventName))return;for(var i=this._events[eventName].length-1;i>=0;i--){if(data!==undefined)this._events[eventName][i](data);else this._events[eventName][i]()}};proto.has=function(eventName){if(eventName in this._events===false||this._events[eventName].length===0){return false}return true};proto.destroy=function(){for(var eventName in this._events){this._events[eventName]=null}this._events=null};module.exports=EventEmitterMicro},{}],15:[function(require,module,exports){"use strict";module.exports={Clip:require("./ac-clip/Clip")}},{"./ac-clip/Clip":16}],16:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/isArray");var create=require("@marcom/ac-object/create");var createPredefined=require("@marcom/ac-easing").createPredefined;var Clock=require("@marcom/ac-clock");var Ease=require("@marcom/ac-easing").Ease;var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var DEFAULT_EASE="ease";function Clip(target,duration,propsTo,options){options=options||{};this._options=options;this._isYoyo=options.yoyo;this._direction=1;this._timeScale=1;this._loop=options.loop||0;this._loopCount=0;this._target=target;this.duration(duration);this._delay=(options.delay||0)*1e3;this._remainingDelay=this._delay;this._progress=0;this._clock=options.clock||Clock;this._playing=false;this._getTime=Date.now||function(){return(new Date).getTime()};this._propsTo=propsTo||{};this._propsFrom=options.propsFrom||{};this._onStart=options.onStart||null;this._onUpdate=options.onUpdate||null;this._onDraw=options.onDraw||null;this._onComplete=options.onComplete||null;var ease=options.ease||DEFAULT_EASE;this._ease=typeof ease==="function"?new Ease(ease):createPredefined(ease);this._start=this._start.bind(this);this._update=this._update.bind(this);this._draw=this._draw.bind(this);this._isPrepared=false;Clip._add(this);EventEmitterMicro.call(this)}var proto=Clip.prototype=create(EventEmitterMicro.prototype);Clip.COMPLETE="complete";Clip.PAUSE="pause";Clip.PLAY="play";proto.play=function(){if(!this._playing){this._playing=true;if(this._delay===0||this._remainingDelay===0){this._start()}else{if(!this._isPrepared){this._setDiff();this._updateProps()}this._startTimeout=setTimeout(this._start,this._remainingDelay/this._timeScale);this._delayStart=this._getTime()}}return this};proto.pause=function(){if(this._playing){if(this._startTimeout){this._remainingDelay=this._getTime()-this._delayStart;clearTimeout(this._startTimeout)}this._stop();this.trigger(Clip.PAUSE,this)}return this};proto.destroy=function(){this.pause();this._options=null;this._target=null;this._storeTarget=null;this._ease=null;this._clock=null;this._propsTo=null;this._propsFrom=null;this._storePropsTo=null;this._storePropsFrom=null;this._propsDiff=null;this._propsEase=null;this._onStart=null;this._onUpdate=null;this._onDraw=null;this._onComplete=null;Clip._remove(this);EventEmitterMicro.prototype.destroy.call(this);return this};proto.reset=function(){if(!this._isPrepared){return}this._stop();this._resetLoop(this._target,this._storeTarget);this._direction=1;this._loop=this._options.loop||0;this._loopCount=0;this._propsFrom=this._storePropsFrom;this._propsTo=this._storePropsTo;this._progress=0;this._setStartTime();if(this._onUpdate){this._onUpdate.call(this,this)}if(this._onDraw){this._onDraw.call(this,this)}return this};proto.playing=function(){return this._playing};proto.target=function(){return this._target};proto.duration=function(duration){if(duration!==undefined){this._duration=duration;this._durationMs=duration*1e3/this._timeScale;if(this._playing){this._setStartTime()}}return this._duration};proto.timeScale=function(timeScale){if(timeScale!==undefined){this._timeScale=timeScale;this.duration(this._duration)}return this._timeScale};proto.currentTime=function(time){if(time!==undefined){return this.progress(time/this._duration)*this._duration}return this.progress()*this._duration};proto.progress=function(progress){if(progress!==undefined){this._progress=Math.min(1,Math.max(0,progress));this._setStartTime();if(!this._isPrepared){this._setDiff()}if(this._playing&&progress===1){this._completeProps();if(this._onUpdate){this._onUpdate.call(this,this)}if(this._onDraw){this._onDraw.call(this,this)}this._complete()}else{this._updateProps();if(this._onUpdate){this._onUpdate.call(this,this)}if(this._onDraw){this._onDraw.call(this,this)}}}return this._progress};proto._resetLoop=function(target,stored){var prop;for(prop in stored){if(stored.hasOwnProperty(prop)){if(stored[prop]!==null){if(typeof stored[prop]==="object"){this._resetLoop(target[prop],stored[prop])}else{target[prop]=stored[prop]}}}}};proto._cloneObjects=function(){var cloneTarget={};var clonePropsTo={};var clonePropsFrom={};this._cloneObjectsLoop(this._target,this._propsTo,this._propsFrom,cloneTarget,clonePropsTo,clonePropsFrom);return{target:cloneTarget,propsTo:clonePropsTo,propsFrom:clonePropsFrom}};proto._cloneObjectsLoop=function(target,to,from,cloneTarget,clonePropsTo,clonePropsFrom){var type;var prop;for(prop in from){if(from.hasOwnProperty(prop)&&to[prop]===undefined&&target[prop]!==undefined){cloneTarget[prop]=target[prop];clonePropsTo[prop]=target[prop];clonePropsFrom[prop]=from[prop]}}for(prop in to){if(target.hasOwnProperty(prop)){type=typeof target[prop];if(target[prop]!==null&&type==="object"){if(Array.isArray(target[prop])){cloneTarget[prop]=[];clonePropsTo[prop]=[];clonePropsFrom[prop]=[]}else{cloneTarget[prop]={};clonePropsTo[prop]={};clonePropsFrom[prop]={}}this._cloneObjectsLoop(target[prop],to[prop]||{},from[prop]||{},cloneTarget[prop],clonePropsTo[prop],clonePropsFrom[prop])}else if(to[prop]!==null&&type==="number"){cloneTarget[prop]=target[prop];clonePropsTo[prop]=to[prop];if(from&&from[prop]!==undefined){clonePropsFrom[prop]=from[prop]}}}}};proto._prepareProperties=function(){if(!this._isPrepared){var clones=this._cloneObjects();this._storeTarget=clones.target;this._propsTo=clones.propsTo;this._storePropsTo=this._propsTo;this._propsFrom=clones.propsFrom;this._storePropsFrom=this._propsFrom;this._isPrepared=true}};proto._setStartTime=function(){this._startTime=this._getTime()-this.progress()*this._durationMs};proto._setDiff=function(){if(!this._isPrepared){this._prepareProperties()}this._propsDiff={};this._setDiffLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff)};proto._setDiffLoop=function(to,from,target,diff){var type;var prop;for(prop in to){if(to.hasOwnProperty(prop)){type=typeof to[prop];if(to[prop]!==null&&type==="object"){from[prop]=from[prop]||{};diff[prop]=diff[prop]||{};this._setDiffLoop(to[prop],from[prop],target[prop],diff[prop])}else if(type==="number"&&target[prop]!==undefined){if(from[prop]!==undefined){target[prop]=from[prop]}else{from[prop]=target[prop]}diff[prop]=to[prop]-target[prop]}else{to[prop]=null;from[prop]=null}}}};proto._start=function(){this._startTimeout=null;this._remainingDelay=0;this._setStartTime();this._clock.on("update",this._update);this._clock.on("draw",this._draw);if(!this._clock.isRunning()){this._clock.start()}this._setDiff();this._playing=true;this._running=true;if(this._onStart){this._onStart.call(this,this)}this.trigger(Clip.PLAY,this)};proto._stop=function(){this._playing=false;this._running=false;this._clock.off("update",this._update);this._clock.off("draw",this._draw)};proto._updateProps=function(){var eased;if(this._direction===1){eased=this._ease.getValue(this._progress)}else{eased=1-this._ease.getValue(1-this._progress)}this._updatePropsLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff,eased)};proto._updatePropsLoop=function(to,from,target,diff,eased){var prop;for(prop in to){if(to.hasOwnProperty(prop)&&to[prop]!==null){if(typeof to[prop]!=="number"){this._updatePropsLoop(to[prop],from[prop],target[prop],diff[prop],eased)}else{target[prop]=from[prop]+diff[prop]*eased}}}};proto._completeProps=function(){this._completePropsLoop(this._propsTo,this._target)};proto._completePropsLoop=function(to,target){var prop;for(prop in to){if(to.hasOwnProperty(prop)&&to[prop]!==null){if(typeof to[prop]!=="number"){this._completePropsLoop(to[prop],target[prop])}else{target[prop]=to[prop]}}}};proto._complete=function(){if(this._isYoyo&&(this._loop>0&&this._loopCount<=this._loop||this._loop===0&&this._loopCount===0)){this._propsFrom=this._direction===1?this._storePropsTo:this._storePropsFrom;this._propsTo=this._direction===1?this._storePropsFrom:this._storePropsTo;this._direction*=-1;if(this._direction===-1){++this._loopCount}this.progress(0);this._start()}else if(this._loopCount<this._loop){++this._loopCount;this.progress(0);this._start()}else{this.trigger(Clip.COMPLETE,this);if(this._onComplete){this._onComplete.call(this,this)}if(this._options&&this._options.destroyOnComplete){this.destroy()}}};proto._update=function(evt){if(this._running){this._progress=(evt.timeNow-this._startTime)/this._durationMs;if(this._progress>=1){this._progress=1;this._running=false;this._completeProps()}else{this._updateProps()}if(this._onUpdate){this._onUpdate.call(this,this)}}};proto._draw=function(evt){if(this._onDraw){this._onDraw.call(this,this)}if(!this._running){this._stop();if(this._progress===1){this._complete()}}};Clip._instantiate=function(){this._clips=[];return this};Clip._add=function(clip){this._clips.push(clip)};Clip._remove=function(clip){var index=this._clips.indexOf(clip);if(index>-1){this._clips.splice(index,1)}};Clip.getAll=function(target){if(target!==undefined){var clips=[];var i=this._clips.length;while(i--){if(this._clips[i].target()===target){clips.push(this._clips[i])}}return clips}return Array.prototype.slice.call(this._clips)};Clip.destroyAll=function(target){var clips=this.getAll(target);if(this._clips.length===clips.length){this._clips=[]}var i=clips.length;while(i--){clips[i].destroy()}return clips};Clip.to=function(target,duration,propsTo,options){options=options||{};if(options.destroyOnComplete===undefined){options.destroyOnComplete=true}return new Clip(target,duration,propsTo,options).play()};Clip.from=function(target,duration,propsFrom,options){options=options||{};options.propsFrom=propsFrom;if(options.destroyOnComplete===undefined){options.destroyOnComplete=true}return new Clip(target,duration,options.propsTo,options).play()};module.exports=Clip._instantiate()},{"@marcom/ac-clock":1,"@marcom/ac-easing":5,"@marcom/ac-event-emitter-micro":13,"@marcom/ac-object/create":28,"@marcom/ac-polyfills/Array/isArray":"@marcom/ac-polyfills/Array/isArray"}],17:[function(require,module,exports){"use strict";var getBoundingClientRect=require("./utils/getBoundingClientRect");module.exports=function getDimensions(el,rendered){var rect;if(rendered){rect=getBoundingClientRect(el);return{width:rect.width,height:rect.height}}return{width:el.offsetWidth,height:el.offsetHeight}}},{"./utils/getBoundingClientRect":19}],18:[function(require,module,exports){"use strict";var getDimensions=require("./getDimensions");var getBoundingClientRect=require("./utils/getBoundingClientRect");module.exports=function getPosition(el,rendered){var rect;var parentRect;var dimensions;if(rendered){rect=getBoundingClientRect(el);if(el.offsetParent){parentRect=getBoundingClientRect(el.offsetParent);rect.top-=parentRect.top;rect.left-=parentRect.left}}else{dimensions=getDimensions(el,rendered);rect={top:el.offsetTop,left:el.offsetLeft,width:dimensions.width,height:dimensions.height}}return{top:rect.top,right:rect.left+rect.width,bottom:rect.top+rect.height,left:rect.left}}},{"./getDimensions":17,"./utils/getBoundingClientRect":19}],19:[function(require,module,exports){"use strict";module.exports=function getBoundingClientRect(el){var rect=el.getBoundingClientRect();return{top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:rect.width||rect.right-rect.left,height:rect.height||rect.bottom-rect.top}}},{}],20:[function(require,module,exports){"use strict";var cache=require("./shared/stylePropertyCache");var getStyleTestElement=require("./shared/getStyleTestElement");var toCSS=require("./utils/toCSS");var toDOM=require("./utils/toDOM");var prefixHelper=require("./shared/prefixHelper");var memoizeStyleProperty=function(property,prefixed){var cssProperty=toCSS(property);var cssPrefixed=prefixed===false?false:toCSS(prefixed);cache[property]=cache[prefixed]=cache[cssProperty]=cache[cssPrefixed]={dom:prefixed,css:cssPrefixed};return prefixed};module.exports=function getStyleProperty(property){var properties;var ucProperty;var el;var i;property+="";if(property in cache){return cache[property].dom}el=getStyleTestElement();property=toDOM(property);ucProperty=property.charAt(0).toUpperCase()+property.substring(1);if(property==="filter"){properties=["WebkitFilter","filter"]}else{properties=(property+" "+prefixHelper.dom.join(ucProperty+" ")+ucProperty).split(" ")}for(i=0;i<properties.length;i++){if(typeof el.style[properties[i]]!=="undefined"){if(i!==0){prefixHelper.reduce(i-1)}return memoizeStyleProperty(property,properties[i])}}return memoizeStyleProperty(property,false)}},{"./shared/getStyleTestElement":21,"./shared/prefixHelper":22,"./shared/stylePropertyCache":23,"./utils/toCSS":25,"./utils/toDOM":26}],21:[function(require,module,exports){"use strict";var el;module.exports=function getStyleTestElement(){if(!el){el=document.createElement("_")}else{el.style.cssText="";el.removeAttribute("style")}return el};module.exports.resetElement=function(){el=null}},{}],22:[function(require,module,exports){"use strict";var CSS_PREFIXES=["-webkit-","-moz-","-ms-"];var DOM_PREFIXES=["Webkit","Moz","ms"];var EVT_PREFIXES=["webkit","moz","ms"];var PrefixeHelper=function(){this.initialize()};var proto=PrefixeHelper.prototype;proto.initialize=function(){this.reduced=false;this.css=CSS_PREFIXES;this.dom=DOM_PREFIXES;this.evt=EVT_PREFIXES};proto.reduce=function(index){if(!this.reduced){this.reduced=true;this.css=[this.css[index]];this.dom=[this.dom[index]];this.evt=[this.evt[index]]}};module.exports=new PrefixeHelper},{}],23:[function(require,module,exports){"use strict";module.exports={}},{}],24:[function(require,module,exports){"use strict";var RE_PREFIXES=/(-webkit-|-moz-|-ms-)|^(webkit|moz|ms)/gi;module.exports=function stripPrefixes(str){str=String.prototype.replace.call(str,RE_PREFIXES,"");return str.charAt(0).toLowerCase()+str.substring(1)}},{}],25:[function(require,module,exports){"use strict";var RE_DOM_PREFIXES=/^(webkit|moz|ms)/gi;module.exports=function toCSS(str){var i;if(str.toLowerCase()==="cssfloat"){return"float"}if(RE_DOM_PREFIXES.test(str)){str="-"+str}return str.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}},{}],26:[function(require,module,exports){"use strict";var RE_CSS_WORD=/-([a-z])/g;module.exports=function toDOM(str){var i;if(str.toLowerCase()==="float"){return"cssFloat"}str=str.replace(RE_CSS_WORD,function(str,m1){return m1.toUpperCase()});if(str.substr(0,2)==="Ms"){str="ms"+str.substring(2)}return str}},{}],27:[function(require,module,exports){"use strict";var getStyleProperty=require("@marcom/ac-prefixer/getStyleProperty");var stripPrefixes=require("@marcom/ac-prefixer/stripPrefixes");module.exports=function getStyle(){var properties=Array.prototype.slice.call(arguments);var target=properties.shift(properties);var computed=window.getComputedStyle(target);var styles={};var property;var prefixed;var value;var i;if(typeof properties[0]!=="string"){properties=properties[0]}for(i=0;i<properties.length;i++){property=properties[i];prefixed=getStyleProperty(property);if(prefixed){property=stripPrefixes(prefixed);value=computed[prefixed];if(!value||value==="auto"){value=null}if(value){value=stripPrefixes(value)}}else{value=null}styles[property]=value}return styles}},{"@marcom/ac-prefixer/getStyleProperty":20,"@marcom/ac-prefixer/stripPrefixes":24}],28:[function(require,module,exports){"use strict";var F=function(){};module.exports=function create(proto){if(arguments.length>1){throw new Error("Second argument not supported")}if(proto===null||typeof proto!=="object"){throw new TypeError("Object prototype may only be an Object.")}if(typeof Object.create==="function"){return Object.create(proto)}else{F.prototype=proto;return new F}}},{}],29:[function(require,module,exports){"use strict";var extend=require("./extend");module.exports=function defaults(defaultsObj,options){if(typeof defaultsObj!=="object"){throw new TypeError("defaults: must provide a defaults object")}options=options||{};if(typeof options!=="object"){throw new TypeError("defaults: options must be a typeof object")}return extend({},defaultsObj,options)}},{"./extend":30}],30:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.forEach");var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function extend(){var args;var dest;if(arguments.length<2){args=[{},arguments[0]]}else{args=[].slice.call(arguments)}dest=args.shift();args.forEach(function(source){if(source!=null){for(var property in source){if(hasOwnProp.call(source,property)){dest[property]=source[property]}}}});return dest}},{"@marcom/ac-polyfills/Array/prototype.forEach":"@marcom/ac-polyfills/Array/prototype.forEach"}],31:[function(require,module,exports){"use strict";var defaults=require("@marcom/ac-object/defaults");var getStyle=require("@marcom/ac-dom-styles/getStyle");var children=require("@marcom/ac-dom-traversal/children");var getPosition=require("@marcom/ac-dom-metrics/getPosition");var Clip=require("@marcom/ac-clip").Clip;var touchAvailable=require("@marcom/ac-feature/touchAvailable");var defaultOptions={itemsSelector:".chapternav-items",leftPaddleSelector:".chapternav-paddle-left",rightPaddleSelector:".chapternav-paddle-right",scrollEasing:"ease-out",scrollDuration:.4};function ChapterNav(el,options){this.el=el;this._options=defaults(defaultOptions,options||{});if(touchAvailable()){return}this._isRightToLeft=getStyle(this.el,"direction").direction==="rtl";this._inlineStart=this._isRightToLeft?"right":"left";this._inlineEnd=this._isRightToLeft?"left":"right";this._scrollType=this._scrollDirection();var paddleStartSelector=this._isRightToLeft?this._options.rightPaddleSelector:this._options.leftPaddleSelector;var paddleEndSelector=this._isRightToLeft?this._options.leftPaddleSelector:this._options.rightPaddleSelector;this._wrapper=this.el.querySelector(this._options.itemsSelector);this._paddleStart=this.el.querySelector(paddleStartSelector);this._paddleEnd=this.el.querySelector(paddleEndSelector);this._children=children(this._wrapper);this._childCount=this._children.length;this._onScrollClipUpdate=this._onScrollClipUpdate.bind(this);this._onScrollClipComplete=this._onScrollClipComplete.bind(this);this._onPaddleStartClick=this._onPaddleStartClick.bind(this);this._paddleStart.addEventListener("click",this._onPaddleStartClick);this._onPaddleEndClick=this._onPaddleEndClick.bind(this);this._paddleEnd.addEventListener("click",this._onPaddleEndClick);this._onScroll=this._onScroll.bind(this);this._wrapper.addEventListener("scroll",this._onScroll);this._updateElementMetrics=this._updateElementMetrics.bind(this);window.addEventListener("resize",this._updateElementMetrics);window.addEventListener("orientationchange",this._updateElementMetrics);this._updateElementMetrics()}var proto=ChapterNav.prototype;proto._updateElementMetrics=function(){this._scrollStart=this._wrapper.scrollLeft;this._wrapperWidth=this._wrapper.offsetWidth;this._contentWidth=this._wrapper.scrollWidth;this._paddleWidth=this._paddleStart.offsetWidth;this._updatePaddleDisplay()};proto._onScroll=function(){if(this._lockPaddles){return}this._scrollStart=this._wrapper.scrollLeft;this._updatePaddleDisplay()};proto._updatePaddleDisplay=function(){var scrollEnd=this._getNormalizedScroll(this._scrollStart)+this._wrapperWidth;var threshold=1;this._paddleStart.disabled=this._getNormalizedScroll(this._scrollStart)<=threshold;this._paddleEnd.disabled=scrollEnd>=this._contentWidth-threshold};proto._onPaddleStartClick=function(evt){this._smoothScrollTo(this._getPaddleStartScrollDestination())};proto._getPaddleStartScrollDestination=function(){var threshold=this._getNormalizedScroll(this._scrollStart);var position;var i;for(i=this._childCount-1;i>0;i--){position=this._normalizePosition(getPosition(this._children[i]));if(position[this._inlineStart]<threshold){return position[this._inlineEnd]-this._wrapperWidth}}return 0};proto._onPaddleEndClick=function(evt){this._smoothScrollTo(this._getPaddleEndScrollDestination())};proto._getPaddleEndScrollDestination=function(){var threshold=this._getNormalizedScroll(this._scrollStart)+this._wrapperWidth;var position;var i;for(i=0;i<this._childCount;i++){position=this._normalizePosition(getPosition(this._children[i]));if(position[this._inlineEnd]>threshold){return position[this._inlineStart]}}return this._contentWidth};proto._getBoundedScrollX=function(x){var max=this._contentWidth-this._wrapperWidth;return Math.max(Math.min(x,max),0)};proto._smoothScrollTo=function(x){this._updateElementMetrics();if(this._lockPaddles||x===this._scrollStart){return}this._lockPaddles=true;var props={scrollLeft:this._wrapper.scrollLeft};var propsTo={scrollLeft:this._setNormalizedScroll(this._getBoundedScrollX(x))};var options={ease:this._options.scrollEasing,onUpdate:this._onScrollClipUpdate,onComplete:this._onScrollClipComplete};Clip.to(props,this._options.scrollDuration,propsTo,options)};proto._onScrollClipUpdate=function(clip){this._scrollStart=this._wrapper.scrollLeft=Math.round(clip.target().scrollLeft)};proto._onScrollClipComplete=function(){this._updatePaddleDisplay();this._lockPaddles=false};proto._scrollDirection=function(){var scrollType="reverse";var scrollTest=document.createElement("div");scrollTest.style.cssText="width:2px; height:1px; position:absolute; top:-1000px; overflow:scroll; font-size: 14px;";scrollTest.style.direction="rtl";scrollTest.innerHTML="test";document.body.appendChild(scrollTest);if(scrollTest.scrollLeft>0){scrollType="default"}else{scrollTest.scrollLeft=1;if(scrollTest.scrollLeft===0){scrollType="negative"}}document.body.removeChild(scrollTest);return scrollType};proto._getNormalizedScroll=function(scroll){if(!this._isRightToLeft){return scroll}var normalizedScroll=Math.abs(scroll);if(this._scrollType==="default"){normalizedScroll=this._contentWidth-this._wrapperWidth-normalizedScroll}return normalizedScroll};proto._setNormalizedScroll=function(scroll){if(!this._isRightToLeft||this._scrollType==="reverse"){return scroll}if(this._scrollType==="negative"){return-scroll}return-(scroll-this._contentWidth+this._wrapperWidth)};proto._normalizePosition=function(position){if(!this._isRightToLeft){return{top:position.top,right:position.right-this._paddleWidth,bottom:position.bottom,left:position.left-this._paddleWidth}}return{top:position.top,right:this._wrapperWidth-position.right+this._paddleWidth,bottom:position.bottom,left:this._wrapperWidth-position.left+this._paddleWidth}};module.exports=ChapterNav},{"@marcom/ac-clip":15,"@marcom/ac-dom-metrics/getPosition":18,"@marcom/ac-dom-styles/getStyle":27,"@marcom/ac-dom-traversal/children":45,"@marcom/ac-feature/touchAvailable":55,"@marcom/ac-object/defaults":29}],32:[function(require,module,exports){"use strict";var ChapterNav=require("./ChapterNav");var el=document.getElementById("chapternav");if(el){module.exports=new ChapterNav(el)}},{"./ChapterNav":31}],33:[function(require,module,exports){"use strict";module.exports=8},{}],34:[function(require,module,exports){"use strict";module.exports=11},{}],35:[function(require,module,exports){"use strict";module.exports=9},{}],36:[function(require,module,exports){"use strict";module.exports=1},{}],37:[function(require,module,exports){"use strict";module.exports=3},{}],38:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");require("@marcom/ac-polyfills/Array/prototype.filter");var isNodeType=require("./internal/isNodeType");var ELEMENT_NODE=require("./ELEMENT_NODE");module.exports=function filterByNodeType(nodes,nodeType){nodeType=nodeType||ELEMENT_NODE;nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(node){return isNodeType(node,nodeType)})}},{"./ELEMENT_NODE":36,"./internal/isNodeType":39,"@marcom/ac-polyfills/Array/prototype.filter":"@marcom/ac-polyfills/Array/prototype.filter","@marcom/ac-polyfills/Array/prototype.slice":"@marcom/ac-polyfills/Array/prototype.slice"}],39:[function(require,module,exports){"use strict";var isNode=require("../isNode");module.exports=function isNodeType(node,nodeType){if(!isNode(node)){return false}if(typeof nodeType==="number"){return node.nodeType===nodeType}return nodeType.indexOf(node.nodeType)!==-1}},{"../isNode":43}],40:[function(require,module,exports){"use strict";var isNodeType=require("./isNodeType");var COMMENT_NODE=require("../COMMENT_NODE");var DOCUMENT_FRAGMENT_NODE=require("../DOCUMENT_FRAGMENT_NODE");var ELEMENT_NODE=require("../ELEMENT_NODE");var TEXT_NODE=require("../TEXT_NODE");var VALID_INSERT_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_INSERT_NODE=" must be an Element, TextNode, Comment, or Document Fragment";var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=" must be an Element, TextNode, or Comment";var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=" must be an Element, or Document Fragment";var ERR_NO_PARENT_NODE=" must have a parentNode";module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||"target";if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||"target";if(!node&&!required){return}if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_CHILD_NODE)}},insertNode:function(node,required,funcName,paramName){paramName=paramName||"node";if(!node&&!required){return}if(!isNodeType(node,VALID_INSERT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_INSERT_NODE)}},hasParentNode:function(node,funcName,paramName){paramName=paramName||"target";if(!node.parentNode){throw new TypeError(funcName+": "+paramName+ERR_NO_PARENT_NODE)}}}},{"../COMMENT_NODE":33,"../DOCUMENT_FRAGMENT_NODE":34,"../ELEMENT_NODE":36,"../TEXT_NODE":37,"./isNodeType":39}],41:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var DOCUMENT_FRAGMENT_NODE=require("./DOCUMENT_FRAGMENT_NODE");module.exports=function isDocumentFragment(obj){return isNodeType(obj,DOCUMENT_FRAGMENT_NODE)}},{"./DOCUMENT_FRAGMENT_NODE":34,"./internal/isNodeType":39}],42:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var ELEMENT_NODE=require("./ELEMENT_NODE");module.exports=function isElement(obj){return isNodeType(obj,ELEMENT_NODE)}},{"./ELEMENT_NODE":36,"./internal/isNodeType":39}],43:[function(require,module,exports){"use strict";module.exports=function isNode(obj){return!!(obj&&obj.nodeType)}},{}],44:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function remove(node){validate.childNode(node,true,"remove");if(!node.parentNode){return node}return node.parentNode.removeChild(node)}},{"./internal/validate":40}],45:[function(require,module,exports){"use strict";var filterByNodeType=require("@marcom/ac-dom-nodes/filterByNodeType");var filterBySelector=require("./filterBySelector");var validate=require("./internal/validate");module.exports=function children(node,selector){var els;validate.parentNode(node,true,"children");validate.selector(selector,false,"children");els=node.children||node.childNodes;els=filterByNodeType(els);if(selector){els=filterBySelector(els,selector)}return els}},{"./filterBySelector":46,"./internal/validate":48,"@marcom/ac-dom-nodes/filterByNodeType":38}],46:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");require("@marcom/ac-polyfills/Array/prototype.filter");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function filterBySelector(nodes,selector){validate.selector(selector,true,"filterBySelector");nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(el){return matchesSelector(el,selector)})}},{"./internal/validate":48,"./matchesSelector":49,"@marcom/ac-polyfills/Array/prototype.filter":"@marcom/ac-polyfills/Array/prototype.filter","@marcom/ac-polyfills/Array/prototype.slice":"@marcom/ac-polyfills/Array/prototype.slice"}],47:[function(require,module,exports){"use strict";module.exports=window.Element?function(proto){return proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector}(Element.prototype):null},{}],48:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");var isNode=require("@marcom/ac-dom-nodes/isNode");var COMMENT_NODE=require("@marcom/ac-dom-nodes/COMMENT_NODE");var DOCUMENT_FRAGMENT_NODE=require("@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE");var DOCUMENT_NODE=require("@marcom/ac-dom-nodes/DOCUMENT_NODE");var ELEMENT_NODE=require("@marcom/ac-dom-nodes/ELEMENT_NODE");var TEXT_NODE=require("@marcom/ac-dom-nodes/TEXT_NODE");var isNodeType=function(node,nodeType){if(!isNode(node)){return false}if(typeof nodeType==="number"){return node.nodeType===nodeType}return nodeType.indexOf(node.nodeType)!==-1};var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=" must be an Element, Document, or Document Fragment";var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=" must be an Element, TextNode, or Comment";var ERR_INVALID_SELECTOR=" must be a string";module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||"node";if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||"node";if(!node&&!required){return}if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_CHILD_NODE)}},selector:function(selector,required,funcName,paramName){paramName=paramName||"selector";if((selector||required)&&typeof selector!=="string"){throw new TypeError(funcName+": "+paramName+ERR_INVALID_SELECTOR)}}}},{"@marcom/ac-dom-nodes/COMMENT_NODE":33,"@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE":34,"@marcom/ac-dom-nodes/DOCUMENT_NODE":35,"@marcom/ac-dom-nodes/ELEMENT_NODE":36,"@marcom/ac-dom-nodes/TEXT_NODE":37,"@marcom/ac-dom-nodes/isNode":43,"@marcom/ac-polyfills/Array/prototype.indexOf":"@marcom/ac-polyfills/Array/prototype.indexOf"}],49:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var validate=require("./internal/validate");var nativeMatches=require("./internal/nativeMatches");var matchesSelectorShim=require("./shims/matchesSelector");module.exports=function matchesSelector(node,selector){validate.selector(selector,true,"matchesSelector");if(!isElement(node)){return false}if(!nativeMatches){return matchesSelectorShim(node,selector)}return nativeMatches.call(node,selector)}},{"./internal/nativeMatches":47,"./internal/validate":48,"./shims/matchesSelector":51,"@marcom/ac-dom-nodes/isElement":42}],50:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");var validate=require("./internal/validate");var querySelectorAllShim=require("./shims/querySelectorAll");var querySelectorAllAvailable="querySelectorAll"in document;module.exports=function querySelectorAll(selector,context){context=context||document;validate.parentNode(context,true,"querySelectorAll","context");validate.selector(selector,true,"querySelectorAll");if(!querySelectorAllAvailable){return querySelectorAllShim(selector,context)}return Array.prototype.slice.call(context.querySelectorAll(selector))}},{"./internal/validate":48,"./shims/querySelectorAll":52,"@marcom/ac-polyfills/Array/prototype.slice":"@marcom/ac-polyfills/Array/prototype.slice"}],51:[function(require,module,exports){"use strict";var querySelectorAll=require("../querySelectorAll");module.exports=function matchesSelector(node,selector){var context=node.parentNode||document;var nodes=querySelectorAll(selector,context);var i;for(i=0;i<nodes.length;i++){if(nodes[i]===node){return true}}return false}},{"../querySelectorAll":50}],52:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");var isElement=require("@marcom/ac-dom-nodes/isElement");var isDocumentFragment=require("@marcom/ac-dom-nodes/isDocumentFragment");var removeElement=require("@marcom/ac-dom-nodes/remove");var COLLECTION_PREFIX="_ac_qsa_";var isElementInContext=function(el,context){var parent;if(context===document){return true}parent=el;while((parent=parent.parentNode)&&isElement(parent)){if(parent===context){return true}}return false};var recalcStyles=function(context){if("recalc"in context){context.recalc(false)}else{document.recalc(false)}window.scrollBy(0,0)};module.exports=function querySelectorAll(selector,context){var style=document.createElement("style");var id=COLLECTION_PREFIX+(Math.random()+"").slice(-6);var els=[];var el;context=context||document;document[id]=[];if(isDocumentFragment(context)){context.appendChild(style)}else{document.documentElement.firstChild.appendChild(style)}style.styleSheet.cssText="*{display:recalc;}"+selector+'{ac-qsa:expression(document["'+id+'"] && document["'+id+'"].push(this));}';recalcStyles(context);while(document[id].length){el=document[id].shift();el.style.removeAttribute("ac-qsa");if(els.indexOf(el)===-1&&isElementInContext(el,context)){els.push(el)}}document[id]=null;removeElement(style);recalcStyles(context);return els}},{"@marcom/ac-dom-nodes/isDocumentFragment":41,"@marcom/ac-dom-nodes/isElement":42,"@marcom/ac-dom-nodes/remove":44,"@marcom/ac-polyfills/Array/prototype.indexOf":"@marcom/ac-polyfills/Array/prototype.indexOf"}],53:[function(require,module,exports){"use strict";module.exports=function once(func){var result;return function(){if(typeof result==="undefined"){result=func.apply(this,arguments)}return result}}},{}],54:[function(require,module,exports){"use strict";module.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],55:[function(require,module,exports){"use strict";var globalsHelper=require("./helpers/globals");var once=require("@marcom/ac-function/once");function touchAvailable(){var windowObj=globalsHelper.getWindow();var documentObj=globalsHelper.getDocument();var navigatorObj=globalsHelper.getNavigator();return!!("ontouchstart"in windowObj||windowObj.DocumentTouch&&documentObj instanceof windowObj.DocumentTouch||navigatorObj.maxTouchPoints>0||navigatorObj.msMaxTouchPoints>0)}module.exports=once(touchAvailable);module.exports.original=touchAvailable},{"./helpers/globals":54,"@marcom/ac-function/once":53}],56:[function(require,module,exports){"use strict";var chapterNav=require("@marcom/ac-chapternav");var Main=function(){return{initialize:function(){return this}}}();module.exports=Main.initialize()},{"@marcom/ac-chapternav":32}]},{},[56]);