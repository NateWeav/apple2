(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1422:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(16);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(e){return Promise.reject(e)}}}}catch(e){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n=t.history,r=t.match,o=t.i18n,a=t.sessionStorage,i=t.allLocales;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.history=n,this.match=r,this.i18n=o,this.sessionStorage=a,this.allLocales=i}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"onLocationChangedCallback",value:i(function(e,t,n,a){var i=this.history,c=this.match,l=this.i18n,u=this.sessionStorage,s=this.allLocales,f=e.selectedLocation,p=e.coordinates,d=f&&f.country,y=f&&f.store;if(p)u.updateLocationToSelectedByCoordinates(p,!0);else{var m=f.includeNearbyStores;if(!y||0===(m?y.nearbyScheduleCount:y.scheduleCount))return void a(l.value("error.no-results-for-location"));u.updateLocationToSelectedByStore({locale:s.getLocaleByStageRootPath(d.stageRootPath).id,slug:y.slug,storeNum:y.storeNum},m)}var b=this.getParamsWithUpdatedNearBy(f).toString();return function(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}(n,function(){if(t)window.location.href="".concat(window.location.origin).concat(Object(r.j)(c.path,o({},c.params,{stageRootPath:d&&d.stageRootPath||null,storeLocation:y&&y.slug||null,marketSlug:null}))).concat(b?"?"+b:"");else{var e=o({},c.params,p?{storeLocation:null,marketSlug:null}:{storeLocation:y&&y.slug||null,marketSlug:null}),n={pathname:Object(r.j)(c.path,e)};b&&(n.search="?".concat(b)),i.push(n)}})})},{key:"getParamsWithUpdatedNearBy",value:function(e){var t=new URLSearchParams(document.location.search);return e&&e.includeNearbyStores?t.set(r.k.NEAR_BY,"true"):t.delete(r.k.NEAR_BY),t}}]),e}()},1423:function(e,t,n){"use strict";var r,o,a=n(0),i=n(161),c=(n(1428),n(6)),l=n.n(c);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.regular="regular",e.inactive="inactive"}(r||(r={})),function(e){e.medium="medium",e.large="large"}(o||(o={}));var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,a["Component"]),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,c=e.size,u=e.disabled,f=e.children,p=e.ariaLabel,d=s(e,["className","style","size","disabled","children","ariaLabel"]),y=l()("pill",c===o.large&&"pill-large",n===r.inactive&&"pill-unavailable inactive",n===r.regular&&"pill-active",u&&"pill-disabled disabled",t);return a.createElement(i.a,Object.assign({ariaLabel:p,disabled:u,className:y},d),f)}}]),t}();m.defaultProps={style:r.regular,size:o.medium,disabled:!1},n.d(t,"b",function(){return o}),n.d(t,"a",function(){return m})},1424:function(e,t){},1425:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1422);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(e){return Promise.reject(e)}}}}catch(e){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var n=e.history,r=e.match,o=e.i18n,a=e.sessionStorage,i=e.allLocales;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).call(this,{history:n,match:r,i18n:o,sessionStorage:a,allLocales:i}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["a"]),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"onLocationChangedCallback",value:a(function(e,n,r,o){l(u(t.prototype),"onLocationChangedCallback",this).call(this,e,n,r,o),this.sessionStorage.removeCalendarSelectedDate()})}]),t}()},1426:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return u});var o=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(e){return Promise.reject(e)}}}}catch(e){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}}();function a(e){var t=e();if(t&&t.then)return t.then(i)}function i(){}function c(e,t,n){return n?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n=t.dataService,r=t.match,o=t.actions,a=t.i18n,i=t.sessionStorage,c=t.allLocales;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataService=n,this.match=r,this.actions=o,this.i18n=a,this.sessionStorage=i,this.allLocales=c}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"onLocationChangedCallback",value:o(function(e,t,n,o){var i=e.selectedLocation,l=e.coordinates,u=this.dataService,s=this.match,f=this.actions,p=this.i18n,d=this.sessionStorage,y=this.allLocales;return a(function(){if(l)return a(function(){if(!t){var e=l.lat,o=l.long;return c(u.getEventPage(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},s.params,{scheduleId:void 0}),{},{lat:e,long:o}),function(e){e&&e.schedule?(d.updateLocationToSelectedByCoordinates(l,!0),d.setLocationLabelInfo(e.userLocation),f.updatePageData(e),n()):alert(p.value("error.no-results-for-location"))})}alert(p.value("error.unable-change-country"))});var e=i.includeNearbyStores,m=i.store;return c(u.getEventPage(s.params,{nearby:e,selectedStore:m},null),function(t){t&&t.schedule?(d.updateLocationToSelectedByStore({storeNum:m.storeNum,slug:m.slug,locale:y.currentLocale.id},e),f.updatePageData(t),n()):o(p.value("error.no-results-for-location"))})})})}]),e}()},1427:function(e,t,n){},1428:function(e,t,n){},1429:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c});var r=n(133),o=n(93),a=function(e,t){var n=e.length,o=0;return t===r.a.CAMPS?n>2&&(o=n-2):n>4&&(o=n-4),o},i=function(e){return e===o.a.FULL||e===o.a.WAITLIST||e===o.a.RESERVED},c={FULL:"violator-full",WAITLIST:"violator-wait-list",RESERVED:"violator-reserved"}},1430:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(60),i=n(10),c=n(3),l=n(6),u=n.n(l),s=n(7),f=n(161),p=n(4),d=n(94),y=n(162);n(1427);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},O=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=b(this,h(t).apply(this,arguments))).state={isOpen:!1,width:0},e.inputRef=o.a.createRef(),e.landingTagProps={"data-analytics-title":"discover"},e.calendarTagProps={"data-analytics-title":"calendar"},e.reservationsTagProps={target:"_blank","data-analytics-title":"my reservations"},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,o.a.Component),function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(t,[{key:"updateMenuState",value:function(){this.setState({isOpen:this.inputRef.current.checked})}},{key:"closeMenu",value:function(){var e=this.inputRef.current;e&&e.checked&&(e.checked=!1,this.updateMenuState())}},{key:"render",value:function(){var e=this.props,t=e.configManager,n=e.i18n,r=this.getLink(t,p.PageName.DISCOVER),a=n.value("global.link-title-discover"),i=this.getLink(t,p.PageName.CALENDAR),c=n.value("global.link-title-calendar"),l=this.getReservationsLink(),s=n.value("global.link-title-my-reservations"),d=u()("localnav-content",this.state.isOpen&&"opened");return o.a.createElement("div",{className:"nav-wrapper theme-dark"},o.a.createElement("input",{type:"checkbox",id:"localnav-menustate",className:"localnav-menustate",ref:this.inputRef,onChange:this.updateMenuState}),o.a.createElement("nav",{id:"localnav",className:"localnav","aria-label":n.value("global.local-navigation-title"),"data-analytics-region":"local nav"},o.a.createElement("div",{className:"localnav-wrapper"},o.a.createElement("div",{className:"localnav-background"}),o.a.createElement("div",{className:d},o.a.createElement("div",{className:"localnav-title today-title"},o.a.createElement(f.a,{addLocation:!0,href:r},"Today at Apple")),o.a.createElement("div",{className:"localnav-menu"},o.a.createElement("a",{href:"#localnav-menustate",className:"localnav-menucta-anchor localnav-menucta-anchor-open",id:"localnav-menustate-open"},o.a.createElement("span",{className:"localnav-menucta-anchor-label"},n.value("global.local-nav-open"))),o.a.createElement("a",{href:"#",className:"localnav-menucta-anchor localnav-menucta-anchor-close",id:"localnav-menustate-close"},o.a.createElement("span",{className:"localnav-menucta-anchor-label"},n.value("global.local-nav-close"))),o.a.createElement("div",{className:"localnav-menu-tray"},o.a.createElement("ul",{className:"localnav-menu-items",role:"presentation"},o.a.createElement("li",{className:"localnav-menu-item",role:"presentation"},this.renderNavLink(r,a,this.landingTagProps)),o.a.createElement("li",{className:"localnav-menu-item",role:"presentation"},this.renderNavLink(i,c,this.calendarTagProps,this.resetSelectedDate)),o.a.createElement("li",{className:"localnav-menu-item",role:"presentation"},this.renderNavLink(l,s,this.reservationsTagProps)))),o.a.createElement("div",{className:"localnav-actions localnav-actions"},o.a.createElement("div",{className:"localnav-action localnav-action-menucta","aria-hidden":"true"},o.a.createElement("label",{htmlFor:"localnav-menustate",className:"localnav-menucta"},o.a.createElement("span",Object.assign({className:"localnav-menucta-chevron"},this.state.isOpen?"":{"data-analytics-click":"prop3: t@a - mobile nav open"}))))))))),o.a.createElement("label",{id:"localnav-curtain",className:"localnav-curtain",htmlFor:"localnav-menustate"}))}},{key:"componentDidMount",value:function(){this.setState({width:window.innerWidth}),window.addEventListener("resize",this.updateWidth),window.addEventListener("scroll",this.closeMenu)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWidth),window.removeEventListener("scroll",this.closeMenu)}},{key:"getReservationsLink",value:function(){var e=this.props,t=e.configManager,n=e.allLocales,r=e.i18n,o=t.getProperty("externalLinks.myReservationsRoot"),a=r.value("global.my-reservations-store-number"),i=n.currentLocale.id;return"".concat(o,"/").concat(a,"/").concat(i)}},{key:"getLink",value:function(e,t){return{pathname:e.getPageRoute(t)}}},{key:"updateWidth",value:function(){this.state.isOpen&&window.innerWidth>=Object(y.a)().DEFAULT_VIEWPORT_WIDTHS[p.ViewportSizes.LARGE]&&this.closeMenu()}},{key:"renderNavLink",value:function(e,t,n,r){return o.a.createElement(f.a,{href:e,className:"localnav-menu-link",activeClassName:"current",addLocation:!0,isNavLink:!0,tagProps:n,onClick:r},t)}},{key:"resetSelectedDate",value:function(){this.props.sessionStorage.remove(d.b.CALENDAR_SELECTED_DATE)}}]),t}();S([s.a],O.prototype,"updateMenuState",null),S([s.a],O.prototype,"closeMenu",null),S([s.a],O.prototype,"updateWidth",null),S([s.a],O.prototype,"resetSelectedDate",null),O=S([Object(i.a)(c.b.I18N,c.b.CONFIG_MANAGER,c.b.ALL_LOCALES,c.b.SESSION_STORAGE)],O);var E=n(244);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,j(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(t,[{key:"render",value:function(){var e=this.props.i18n.value("global.ip-sosumi");return e?r.createElement("div",{className:"ac-gf-sosumi"},r.createElement("ul",{dangerouslySetInnerHTML:{__html:e}})):null}}]),t}();k=L([Object(i.a)(c.b.I18N)],k);var R=n(14),T=n(1415);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":D(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,C(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),function(e,t,n){t&&A(e.prototype,t),n&&A(e,n)}(t,[{key:"renderAppleIcon",value:function(){var e=this.props,t=e.configManager,n=e.match.params.stageRootPath;return t.getProperty("app.mainSiteUrl")&&r.createElement(f.a,{href:Object(R.f)("/:stageRootPath?/",{stageRootPath:n}),className:"home ac-gf-breadcrumbs-home"},r.createElement("span",{className:"ac-gf-breadcrumbs-home-icon"}),r.createElement("span",{className:"ac-gf-breadcrumbs-home-label"},"Apple"))}},{key:"render",value:function(){var e=this.props,t=e.breadcrumbTitle,n=e.configManager;return r.createElement("nav",{className:"ac-gf-breadcrumbs","aria-label":"Breadcrumbs"},this.renderAppleIcon(),r.createElement("div",{className:"ac-gf-breadcrumbs-path"},r.createElement("ol",{className:"ac-gf-breadcrumbs-list"},t&&r.createElement(r.Fragment,null,r.createElement("li",{className:"ac-gf-breadcrumbs-item"},r.createElement(f.a,{className:"ac-gf-breadcrumbs-link",href:n.getPageRoute(p.PageName.DISCOVER)},"Today at Apple")),r.createElement("li",{className:"ac-gf-breadcrumbs-item"},t)),!t&&r.createElement("li",{className:"ac-gf-breadcrumbs-item"},"Today at Apple"))))}}]),t}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}U=x([T.a,Object(i.a)(c.b.CONFIG_MANAGER)],U);var H=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,F(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),function(e,t,n){t&&z(e.prototype,t),n&&z(e,n)}(t,[{key:"render",value:function(){return r.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}})}}]),t}(),W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.async,o=void 0!==r&&r,a=n.defer,i=void 0!==a&&a,c=document.createElement("script");c.src=e,o?c.async=o:i&&(c.defer=i),t.appendChild(c)};function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var K,Z=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":J(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},$=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Y(this,X(t).call(this,e))).ref=o.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,o.a.Component),function(e,t,n){t&&q(e.prototype,t),n&&q(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props.staticContent,t=e.globalFooterScriptSrc,n=e.localeSwitcherScriptSrc;W(t,this.ref.current),W(n,this.ref.current)}},{key:"render",value:function(){var e=this.props,t=e.allLocales,n=e.staticContent,r=e.breadcrumbTitle,a=n.directoryFooter,i=n.copyrightFooter;return o.a.createElement("footer",{id:"ac-globalfooter",className:"no-js",lang:t.currentLocale.getIETF(),"data-analytics-region":"global footer",role:"contentinfo","aria-labelledby":"ac-gf-label",ref:this.ref},o.a.createElement("div",{className:"ac-gf-content"},o.a.createElement("h2",{id:"ac-gf-label",className:"ac-gf-label"},"Apple Footer"),o.a.createElement(k,null),o.a.createElement(U,{breadcrumbTitle:r,stageRootPath:t.currentLocale.stageRootPath}),o.a.createElement(H,{content:a}),o.a.createElement(H,{content:i})))}}]),t}();$=Z([Object(i.a)(c.b.ALL_LOCALES)],$),function(e){e.label="typography-label",e.body="typography-body",e.bodyReduced="typography-body-reduced",e.headline="typography-headline",e.headlineReduced="typography-headline-reduced",e.headlineElevated="typography-headline-elevated",e.manifesto="typography-manifesto",e.tout="typography-tout",e.intro="typography-intro",e.introElevated="typography-intro-elevated",e.caption="typography-caption",e.headlineStandalone="typography-headline-standalone",e.headlineDescription="typography-headline-description",e.eyebrowReduced="typography-eyebrow-reduced"}(K||(K={}));var ee=n(243),te=n(16),ne=n(348);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return function(n){function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ae(this,ie(o).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(o,r["Component"]),function(e,t,n){t&&oe(e.prototype,t),n&&oe(e,n)}(o,[{key:"render",value:function(){var n=this.props.error;return n?e.processBffError(this.props,n):r.createElement(t,Object.assign({},this.props))}}]),o}()}};function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&se(e.prototype,t),n&&se(e,n)}(e,[{key:"processBffError",value:function(e,t){var n=e.configManager,r=e.history,o=e.match,a=e.actions,i=e.sessionStorage,c=Object(te.j)(n.getPageRoute(p.PageName.DISCOVER),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ue(e,t,n[t])})}return e}({},o.params)),l=null;return i.getNearbyFlag()&&(l="?".concat([te.k.NEAR_BY],"=true")),a&&a.setReduxStoreToEmpty&&setTimeout(function(){return a.setReduxStoreToEmpty()},0),r.push({pathname:c,search:l}),null}}]),e}());function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return we});var de=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(e){return Promise.reject(e)}}}}catch(e){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}}();function ye(e,t,n){return n?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}function me(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function be(){}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ee=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Oe(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isLocalNavSticky,n=e.stickyConnectionId,r=e.pageClassName,l=e.prioritizeSessionStorage,s=e.fallbackStrategy,f=void 0===s?fe:s,d=e.wrappedPageName;return function(e){var s=function(a){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=ge(this,ve(i).call(this,e))).fetchInitialDataPromise=new Promise(function(e){t.resolvePromise=e}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,o.a.Component),function(e,t,n){t&&he(e.prototype,t),n&&he(e,n)}(i,[{key:"componentWillMount",value:function(){d&&this.props.globalActions.setPageName(d)}},{key:"componentDidMount",value:de(function(){var e=this,t=e.props,n=t.globalState,r=n.isPreloaded,o=n.pageName,a=t.actions,i=t.match,c=t.history,l=t.location,u=i.params.scheduleId,s={},f=new URLSearchParams(decodeURIComponent(document.location.search)),d=!0,y=!1,m=void 0;try{for(var b,h=f.keys()[Symbol.iterator]();!(d=(b=h.next()).done);d=!0){var g=b.value;s[g]=f.get(g)}}catch(e){y=!0,m=e}finally{try{d||null==h.return||h.return()}finally{if(y)throw m}}return ye(e.actualizeLocation(i.params,s),function(t){var n=t.userLocation,f=t.nearby,d=t.selectedStore,y=t.marketSlug,m=t.areaSlug;return me(function(){if(!r||o===p.PageName.EVENT){var e=l.state&&l.state.preventFetchCall;return function(e){var t=e();if(t&&t.then)return t.then(be)}(function(){if(a&&a.fetchInitialData&&!e)return function(e,t){if(!t)return Promise.resolve(e).then(be)}(a.fetchInitialData({params:i.params,queryParams:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){pe(e,t,n[t])})}return e}({},s,{nearby:f,selectedStore:d,marketSlug:y,areaSlug:m}),userLocation:o!==p.PageName.EVENT||!u||c&&c.location&&c.location.key?n:null}))})}},function(){e.resolvePromise(),Object(R.d)()&&e.props.globalActions.setIsPreloaded(!1)})})})},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.allStores,r=t.sessionStorage,o=t.metaData,a=t.match;if(o&&Object.keys(o).length>0&&e.metaData!==o){var i=this.props.globalState,c=i.seoStoreTitle,l=i.seoCityName,u=o.description,s=Object(ne.a)(u,{title:c,name:l});o.description=s,this.setSEOMetaClientside(o)}var f=this.props.userLocation;if(f&&f.storeNum){a.params.courseSlug||r.setLocationLabelInfo(f);var p=r.getUserLocation(),d=r.getSelectedStoreLocation();if(!p&&!d){var y=n.getInfoByUserLocation(f).store,m=(y=void 0===y?{lat:null,long:null}:y).lat,b=y.long;r.setUserLocation({lat:m,long:b})}}}},{key:"componentWillUnmount",value:function(){this.props.globalActions.setIsPreloaded(!1)}},{key:"renderStaticLocalNav",value:function(){return o.a.createElement(O,null)}},{key:"renderStickyLocalNav",value:function(){return o.a.createElement(E.b,{releaseSiblingBottom:"#".concat(n),targetHeightOffset:{selector:"#localnav",set:E.a.SUBTRACT},zIndex:3},o.a.createElement(O,null))}},{key:"render",value:function(){var n=this.props,a=n.globalState,i=n.metaData,c=n.analyticsService,l=n.heroGallery,s=n.store,f=n.schedule,d=n.match;if(!a||!i)return null;var y=d.params.courseSlug,m=a.ssiContent,b=a.pageName,h=a.canonicalURL,g=i.description,v=i.pageName;if(!m||!v)return null;var S=u()(r,"page-wrapper",K.body),O=b===p.PageName.EVENT;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ee.c,{analyticsService:c},o.a.createElement("main",{className:S},t?this.renderStickyLocalNav():this.renderStaticLocalNav(),o.a.createElement(e,Object.assign({},this.props,{fetchInitialDataPromise:this.fetchInitialDataPromise})),o.a.createElement($,{staticContent:m,breadcrumbTitle:this.getBreadcrumbTitle()}))),O&&this.includeLinkedDataOnEventPage(v,l,g,h,y,s,f))}},{key:"actualizeLocation",value:de(function(e,t){var n=this,r=n.props,o=r.sessionStorage,a=r.allStores,i=r.allLocales,c=e.storeLocation,u=e.marketSlug;if(l){var s=o.getSelectedStoreLocation(),f=o.getSelectedMarket();if(s)return{selectedStore:s,nearby:o.getNearbyFlag()};if(f)return{marketSlug:f};var p=o.getUserLocation();return me(function(){if(!p)return ye(n.updateUserCoordinates(),function(e){p=e})},function(){return{userLocation:p}})}if(c){if(u)return o.updateLocationToSelectedByMarket(u),{marketSlug:u};var d="true"===t[te.k.NEAR_BY],y={slug:c,storeNum:a.getStoreByStoreSlug(a.stageRootPath,c).store.storeNum,locale:i.currentLocale.id};return o.updateLocationToSelectedByStore(y,d),{selectedStore:y,nearby:d}}return ye(n.updateUserCoordinates(),function(e){return{userLocation:e}})})},{key:"updateUserCoordinates",value:de(function(){var e=this.props,t=e.mapkitDataService,n=e.sessionStorage;return ye(t.getMyIpLookup(),function(){var e=n.getUserLocation();return n.updateLocationToSelectedByCoordinates(e,!1),e})})},{key:"setSEOMetaClientside",value:function(e){var t=this.props,n=t.allLocales.currentLocale,r=t.globalState,o=r.canonicalURL,a=r.seoImagePath,i=e.title,c=e.description,l=i||"Today at Apple";document.title!==l&&(document.title=l,document.head.querySelector('meta[name="description"]').setAttribute("content",c),document.head.querySelector('meta[property="og:title"]').setAttribute("content",l),document.head.querySelector('meta[property="og:description"]').setAttribute("content",c),document.head.querySelector('meta[property="og:url"]').setAttribute("content",o),document.head.querySelector('meta[property="og:locale"]').setAttribute("content",n.id),document.head.querySelector('meta[name="twitter:title"]').setAttribute("content",l),document.head.querySelector('meta[name="twitter:description"]').setAttribute("content",c),document.head.querySelector('link[rel="canonical"]').setAttribute("href",o),a&&(document.head.querySelector('meta[property="og:image"]').setAttribute("content",a),document.head.querySelector('meta[name="twitter:image"]').setAttribute("content",a)))}},{key:"includeLinkedDataOnEventPage",value:function(e,t,n,r,a,i,c){var l="";t&&t.length>0&&(l=t[0].backgroundMedia.images[0].landscape.source);var u=Object(R.c)({pageTitle:e,backgroundImage:l,description:n,canonicalURL:r,courseSlug:a,store:i,schedule:c});return o.a.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(u)}})}},{key:"getBreadcrumbTitle",value:function(){var e=this.props,t=e.globalState.pageName,n=e.metaData.pageName;return t===p.PageName.DISCOVER?null:n}}]),i}();return s.displayName="".concat(e.name,"WithBasicFunctionality"),s=Ee([Object(i.a)(c.b.ALL_LOCALES,c.b.ALL_STORES,c.b.ANALYTICS_SERVICE,c.b.APP_DATA_SERVICE,c.b.CONFIG_MANAGER,c.b.I18N,c.b.LOGGER,c.b.MAPKIT_DATA_SERVICE,c.b.SESSION_STORAGE),le(f),a.attachViewportEmitter],s)}}},1431:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(7),i=n(10),c=n(3),l=n(349);n(1436);var u=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}u.LOADING=n(1434).default,u.GEOLOCATION=n(1435).default;var m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},b=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=f(this,p(t).call(this,e))).targetedRef=n.props.forwardedRef,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.userLocation,n=e.sessionStorage,o=e.i18n,a=e.allStores,i=e.isLoading,c=void 0!==i&&i,s=e.shouldConcreteStoreBeSelected,f=e.forwardedRef,p=null,d=o.value("global.cta-change-location"),y=n.getNearbyFlag(),m=(a.getInfoByUserLocation(t)||{store:null}).store;return m?n.getUseMyLocationFlag()?(p=o.value("global.change-location-near"),d="".concat(p," - ").concat(d)):s&&!y?(p=m.address.title,d="".concat(p," - ").concat(d)):(p=o.compileValue("global.change-location-area",m.address),d="".concat(p," - ").concat(d)):p=o.value("global.cta-change-location"),p&&r.createElement("button",{"aria-label":d,id:"current-location-button",className:"discover-location-button",onClick:this.props.onClick,ref:f},r.createElement("div",{className:"location-select-text-wrapper"},!c&&r.createElement(l.a,{svgIcon:u.GEOLOCATION,className:"current-location-icon"}),c&&r.createElement(l.a,{svgIcon:u.LOADING,className:"current-location-icon wait-indicator"}),p))}}]),t}();b=m([Object(i.a)(c.b.I18N,c.b.SESSION_STORAGE,c.b.ALL_STORES)],b);var h=r.forwardRef(function(e,t){return r.createElement(b,Object.assign({},e,{forwardedRef:t}))}),g=n(163),v=n(350),S=n(16),O=n(14),E=(n(1437),function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(e){return Promise.reject(e)}}}}catch(e){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}}());function w(){}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k,R=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e[e.PERMISSION_DENIED=1]="PERMISSION_DENIED",e[e.POSITION_UNAVAILABLE=2]="POSITION_UNAVAILABLE",e[e.TIMEOUT=3]="TIMEOUT"}(k||(k={}));var T=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,P(t).call(this,e))).GEOLOCATION_TIMEOUT=7e3,n.MAXIMUM_AGE=0,n.state={isLoading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),function(e,t,n){t&&N(e.prototype,t),n&&N(e,n)}(t,[{key:"render",value:function(){var e=this.props.i18n,t=this.state.isLoading,n={name:"geolocate-button",className:"current-location-button typography-body-reduced",onClick:this.geoButtonClick,"data-analytics-click":"prop3:t@a - use my current location"};return Object(O.d)()&&(n.disabled=t||!this.canGetGeoLocation()),r.createElement("div",{className:"my-location-button-wrapper"},r.createElement("button",Object.assign({},n),r.createElement("div",{className:"my-location-icon-wrapper"},!t&&r.createElement(l.a,{svgIcon:u.GEOLOCATION,className:"current-location-icon"}),t&&r.createElement(l.a,{svgIcon:u.LOADING,className:"geo-locate-load-status wait-indicator"})),r.createElement("div",{className:"my-location-text-wrapper"},e.value("global.activate-geolocation-copy"))))}},{key:"geoButtonClick",value:E(function(){var e=this,t=e.props,n=t.configManager,r=t.onResultCallback,o=t.sessionStorage;return e.startLoadingIndication(),o.setGeoButtonClicked(),function(e){if(e&&e.then)return e.then(w)}(function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}(function(){return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return function(e,t,n){return n?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}(e.getLocation(),function(e){var t=e.coords,o=t.latitude,a=t.longitude;if(n.getProperty("geo").overrideGeo){var i=+Object(S.d)("lat"),c=+Object(S.d)("long");i&&c&&(o=i,a=c)}r({latitude:o,longitude:a})})},function(t){e.handleGeolocationError(t)})},function(t,n){return e.stopLoadingIndication(),function(e,t){if(e)throw t;return t}(t,n)}))})},{key:"getLocation",value:function(){var e=this;return new Promise(function(t,n){navigator.geolocation.getCurrentPosition(function(e){return t(e)},function(e){return n(e)},{enableHighAccuracy:!0,maximumAge:e.MAXIMUM_AGE,timeout:e.GEOLOCATION_TIMEOUT})})}},{key:"canGetGeoLocation",value:function(){return Object(O.d)()&&"geolocation"in navigator}},{key:"handleGeolocationError",value:function(e){var t=this.props.onResultCallback;switch(e.code){case k.PERMISSION_DENIED:t({error:"error.geolocation-user-permission-denied"});break;default:t({error:"error.unable-to-get-geolocation"})}}},{key:"startLoadingIndication",value:function(){this.setState({isLoading:!0}),this.props.onStartLoading()}},{key:"stopLoadingIndication",value:function(){this.setState({isLoading:!1}),this.props.onEndLoading()}}]),t}();T.defaultProps={onStartLoading:function(){},onEndLoading:function(){}},R([a.a],T.prototype,"geoButtonClick",null),T=R([Object(i.a)(c.b.I18N,c.b.CONFIG_MANAGER,c.b.SESSION_STORAGE)],T);var A=n(6),I=n.n(A),C=n(1416),M=n.n(C),D=n(60),x=n(1417);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":F(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},H={COUNTRY:"ChooseCountry",STATE:"ChooseState",STORE:"ChooseStore"},W=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=G(this,z(t).call(this,e))).DEFAULT_CONTROL_VISIBILITY={country:!0,state:!0,store:!0,includeNearbyStores:!0},n.state={selectedCountryIndex:H.COUNTRY,selectedStateIndex:H.STATE,selectedStoreIndex:H.STORE,includeNearbyStores:!1,errorMessage:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&U(e.prototype,t),n&&U(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props.currentGeoInfo;e&&this.restoreSelectedValues(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.currentGeoInfo;Object(x.isEqual)(this.props.currentGeoInfo,e.currentGeoInfo)||t&&this.restoreSelectedValues(t)}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.allStores,o=M()(this.DEFAULT_CONTROL_VISIBILITY,this.props.controlsVisibility),a=this.state,i=a.selectedCountryIndex,c=a.selectedStateIndex,l=a.selectedStoreIndex,u=a.includeNearbyStores,s=a.errorMessage,f=i!==H.COUNTRY;this.country=f&&n.countries[i];var p=this.country&&this.country.states,d=p&&c!==H.STATE;p?(this.states=this.country&&Object.values(this.country.states),this.stores=this.states&&this.states[c]?this.states[c].stores:null):(this.states=null,this.stores=this.country&&this.country.stores);var y=l!==H.STORE,m=!f||!d&&p,b=this.getSelectedStore()?this.getSelectedStore().storeNum:"",h=I()("form-row",(!f||!p)&&"form-no-display");return r.createElement("div",{id:"dropdown-selections"},o.country&&r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-cell"},r.createElement("div",{className:"form-element"},r.createElement("label",{id:"select-country-label",className:"a11y",htmlFor:"select-country"},t.value("global.change-location-country")),r.createElement("select",{className:"form-dropdown",id:"select-country","aria-invalid":"false","aria-required":"true",onChange:this.countrySelected,value:i},r.createElement("option",{className:"quote-subcredit",value:H.COUNTRY,disabled:f},t.value("global.change-location-country")),n.countries.map(function(e,n){var o=e.isoCountryCode.toLowerCase(),a=t.value("country.".concat(o));return e.isMultiLanguage&&(a=t.value("country.".concat(o))+" - "+t.value("language.".concat(e.isoLanguageCode))),r.createElement("option",{key:n,value:n},a)})),r.createElement("span",{className:"form-icon icon icon-chevrondown","aria-hidden":"true"})))),o.state&&r.createElement("div",{className:h},r.createElement("div",{className:"form-cell"},r.createElement("div",{className:"form-element"},r.createElement("label",{id:"select-state-label",className:"a11y",htmlFor:"select-state"},t.value("global.change-location-state")),r.createElement("select",{className:"form-dropdown",id:"select-state","aria-invalid":"false","aria-required":"true",onChange:this.stateSelected,value:c},r.createElement("option",{className:"quote-subcredit",value:H.STATE,disabled:d},t.value("global.change-location-state")),this.states&&this.states.map(function(e,t){return r.createElement("option",{key:t,value:t},e.name)})),r.createElement("span",{className:"form-icon icon icon-chevrondown","aria-hidden":"true"})))),o.store&&r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-cell"},r.createElement("div",{className:"form-element"},r.createElement("label",{id:"select-store-label",className:"a11y",htmlFor:"select-store"},t.value("global.change-location-store")),r.createElement("select",{className:"form-dropdown",id:"select-store","aria-invalid":"false","aria-required":"true",onChange:this.storeSelected,value:l,disabled:m},r.createElement("option",{className:"quote-subcredit",value:H.STORE,disabled:y},t.value("global.change-location-store")),this.stores&&this.stores.map(function(e,t){return r.createElement("option",{key:t,value:t},"".concat(e.address.city,", ").concat(e.address.name))})),r.createElement("span",{className:"form-icon icon icon-chevrondown","aria-hidden":"true"})))),this.stores&&this.stores[l]&&r.createElement("div",{className:"form-row location-message empty-message","aria-hidden":"false"},r.createElement("div",{className:"no-event-error"},r.createElement("div",{"aria-live":"polite",className:"form-element form-message"},s))),o.includeNearbyStores&&r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-cell"},r.createElement("div",{className:"form-element form-element--nearby-stores"},r.createElement("input",{disabled:!y,id:"nearbyStores",name:"nearby",type:"checkbox",className:"form-choice form-choice-checkbox",checked:u||!1,onChange:this.nearbyCheckboxSelected}),r.createElement("label",{htmlFor:"nearbyStores",className:"form-label"},r.createElement("span",{className:"form-choice-indicator"}),t.value("global.nearby-stores"))))),r.createElement("div",{className:"submit-row"},r.createElement("button",{onClick:this.onClick,disabled:!y||!!s,name:"location-confirm",className:"pill-large button-confirm","data-analytics-click":'{"prop3": "t@a - select locale", "eVar74": "'+b+'"}'},t.value("global.cta-apply"))))}},{key:"nearbyCheckboxSelected",value:function(e){var t=e.target;this.setState({errorMessage:null,includeNearbyStores:t.checked})}},{key:"countrySelected",value:function(e){var t=e.target;this.setState({errorMessage:null,selectedCountryIndex:t.value,selectedStateIndex:H.STATE,selectedStoreIndex:H.STORE})}},{key:"stateSelected",value:function(e){var t=e.target;this.setState({errorMessage:null,selectedStateIndex:t.value,selectedStoreIndex:H.STORE})}},{key:"storeSelected",value:function(e){var t=e.target;this.setState({errorMessage:null,selectedStoreIndex:t.value})}},{key:"getSelectedStore",value:function(){var e=this.state.selectedStoreIndex;return this.stores&&e?this.stores[e]:void 0}},{key:"onClick",value:function(){var e=this.state,t=e.selectedStateIndex,n=e.selectedStoreIndex,r=e.includeNearbyStores;this.props.onApplyButtonClick({country:this.country,state:this.states&&this.states[t],store:this.stores[n],includeNearbyStores:r},this.setErrorMessage)}},{key:"restoreSelectedValues",value:function(e){var t,n,r=this.props,o=r.allStores,a=r.shouldConcreteStoreBeSelected,i=o.countries.indexOf(e.country);-1!==i&&(e.country.states?(t=this.getStateIndex(e),n=this.getStoreIndexByState(e)):n=this.getStoreIndexByCountry(e)),this.setState({selectedCountryIndex:i,selectedStateIndex:t,selectedStoreIndex:a?n:H.STORE,includeNearbyStores:e.includeNearbyStores||!1})}},{key:"getStoreIndexByCountry",value:function(e){var t=e.country.stores.indexOf(e.store);return-1!==t?t:H.STORE}},{key:"getStoreIndexByState",value:function(e){var t;return t=e.state&&-1!==(t=e.state.stores.indexOf(e.store))?t:H.STORE}},{key:"getStateIndex",value:function(e){var t=e.country.states.indexOf(e.state);return-1!==t?t:H.STATE}},{key:"setErrorMessage",value:function(e){this.setState({errorMessage:e})}}]),t}();V([a.a],W.prototype,"nearbyCheckboxSelected",null),V([a.a],W.prototype,"countrySelected",null),V([a.a],W.prototype,"stateSelected",null),V([a.a],W.prototype,"storeSelected",null),V([a.a],W.prototype,"getSelectedStore",null),V([a.a],W.prototype,"onClick",null),V([a.a],W.prototype,"restoreSelectedValues",null),V([a.a],W.prototype,"setErrorMessage",null),W=V([D.WithViewportEmitter,Object(i.a)(c.b.I18N,c.b.ALL_STORES,c.b.SESSION_STORAGE)],W);n(1438);var q=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(e){return Promise.reject(e)}}}}catch(e){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}}();function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Z(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,J(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,o.a.Component),function(e,t,n){t&&X(e.prototype,t),n&&X(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.viewportData,r=e.controlsVisibility,a=e.shouldConcreteStoreBeSelected,i=e.onStartLoading,c=e.onEndLoading,l=e.isOpened,u=e.onClose,s=e.ariaLabel;return o.a.createElement(g.b,{classList:["location-modal"],viewport:n.viewport,isOpened:l,onClose:u,ariaLabel:s||t.value("global.cta-change-location")},o.a.createElement("div",{id:"location-modal-content"},o.a.createElement("div",{className:"geolocation-options can-use-geolocation"},o.a.createElement("fieldset",{className:"location-find-by-geolocation"},o.a.createElement("legend",{className:"location-modal-legend typography-eyebrow"},t.value("global.change-geolocation-title")),o.a.createElement(T,{onStartLoading:i,onEndLoading:c,onResultCallback:this.myLocationSelected})),o.a.createElement("hr",{className:"modal-separator"})),o.a.createElement("fieldset",{className:"location-find-by-apple-store"},o.a.createElement("legend",{className:"location-modal-legend typography-eyebrow"},t.value("global.select-apple-store-title")),o.a.createElement(W,{controlsVisibility:r,shouldConcreteStoreBeSelected:a,currentGeoInfo:this.getCurrentStoreGeoInfo(),onApplyButtonClick:this.applyButtonClick}))))}},{key:"getCurrentStoreGeoInfo",value:function(){var e=this.props,t=e.allStores,n=e.selectedLocation,r=e.sessionStorage;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Y(e,t,n[t])})}return e}({},t.getInfoByUserLocation(n),{includeNearbyStores:r.getNearbyFlag()})}},{key:"myLocationSelected",value:q(function(e){var t=this,n=t.props,r=n.allStores,o=n.onLocationChangedCallback,a=n.mapkitDataService;return function(){if(!e.error)return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){var n={lat:e.latitude,long:e.longitude};return function(e,t,n){return n?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}(a.getInfoByLocation(n,!0),function(e){var a=e.data.results;if(a&&a[0]){var i=r.countries.find(function(e){return e.isoCountryCode===a[0].countryCode});if(i)if(r.stageRootPath===i.stageRootPath)o({coordinates:n},!1,null);else{if(i.isMultiLanguage)return void t.showErrorMessage("error.multilanguage-geolocation-fallback");o({selectedLocation:{country:i,store:null,includeNearbyStores:null},coordinates:n},!0,null)}}else t.showErrorMessage()})},function(){t.showErrorMessage()});t.showErrorMessage(e.error)}()})},{key:"showErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error.unable-to-get-geolocation",t=this.props.i18n;alert(t.value(e))}},{key:"applyButtonClick",value:function(e,t){var n=this.props,r=n.allStores;(0,n.onLocationChangedCallback)({selectedLocation:e},r.stageRootPath!==e.country.stageRootPath,t)}}]),t}();$([a.a],ee.prototype,"myLocationSelected",null),$([a.a],ee.prototype,"showErrorMessage",null),$([a.a],ee.prototype,"applyButtonClick",null),ee=$([v.a,Object(i.a)(c.b.I18N,c.b.ALL_STORES,c.b.ALL_LOCALES,c.b.CONFIG_MANAGER,c.b.SESSION_STORAGE,c.b.MAPKIT_DATA_SERVICE)],ee);var te=n(1415);function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ce=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ie(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=re(this,oe(t).call(this,e))).locationSelectButton=r.createRef(),n.state={locationModalIsOpen:!1,myLocationLoading:!1,errorMessage:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&ne(e.prototype,t),n&&ne(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.userLocation,n=e.shouldConcreteStoreBeSelected,o=e.controlsVisibility,a=(e.resetAccessibilityFocus,this.state),i=a.errorMessage,c=a.locationModalIsOpen;return r.createElement(r.Fragment,null,r.createElement(h,{isLoading:this.state.myLocationLoading,shouldConcreteStoreBeSelected:n,userLocation:t,onClick:this.showModal,ref:this.locationSelectButton}),r.createElement(ee,{shouldConcreteStoreBeSelected:n,controlsVisibility:o,selectedLocation:t,errorMessage:i,onLocationChangedCallback:this.onLocationChangedCallback,type:D.ModalType.STANDARD,onClose:this.closeModal,isOpened:c,onStartLoading:this.onStartLoading,onEndLoading:this.onEndLoading}))}},{key:"showModal",value:function(){this.setState({locationModalIsOpen:!0})}},{key:"onEndLoading",value:function(){this.setState({myLocationLoading:!1})}},{key:"onStartLoading",value:function(){this.setState({myLocationLoading:!0})}},{key:"onLocationChangedCallback",value:function(e,t,n){var r=this.props,o=r.locationUpdateStrategy,a=r.resetAccessibilityFocus;o.onLocationChangedCallback(e,t,this.closeModal,n),a&&a()}},{key:"closeModal",value:function(){this.state.locationModalIsOpen&&this.setState({locationModalIsOpen:!1}),this.locationSelectButton&&this.locationSelectButton.current&&this.locationSelectButton.current.focus()}}]),t}();ce([a.a],le.prototype,"showModal",null),ce([a.a],le.prototype,"onEndLoading",null),ce([a.a],le.prototype,"onStartLoading",null),ce([a.a],le.prototype,"onLocationChangedCallback",null),ce([a.a],le.prototype,"closeModal",null),le=ce([te.a],le),n.d(t,"a",function(){return le})},1432:function(e,t,n){"use strict";n.r(t);var r=n(9),o=n(59);n.d(t,"setIsPreloaded",function(){return a}),n.d(t,"setIsMarketPage",function(){return i}),n.d(t,"setIsStorePage",function(){return c}),n.d(t,"setPageName",function(){return l}),n.d(t,"setCanonicalURL",function(){return u}),n.d(t,"setSEOImagePath",function(){return s}),n.d(t,"setSEOStoreTitle",function(){return f}),n.d(t,"setSEOCityName",function(){return p}),n.d(t,"updateSsiContent",function(){return d}),n.d(t,"checkConnection",function(){return y});var a=Object(r.a)(o.d),i=Object(r.a)(o.c),c=Object(r.a)(o.e),l=Object(r.a)(o.f),u=Object(r.a)(o.b),s=Object(r.a)(o.h),f=Object(r.a)(o.i),p=Object(r.a)(o.g),d=Object(r.a)(o.j),y=Object(r.a)(o.a,function(e){e.configManager;return new Promise(function(e){})})},1433:function(e,t,n){"use strict";var r=n(0),o=n(1418),a=n.n(o),i=n(7),c=n(10),l=n(3);function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},b=function(e){var t=function(t){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?d(e):t}(this,f(n).call(this,e))).resetFocus=a()(t.resetFocus.bind(d(d(t))),500),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r["Component"]),function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(n,[{key:"resetFocus",value:function(){var e=this.props,t=e.sessionStorage,n=e.resetFocusTargetId;t.getResetFocusStatus()&&((document&&document.querySelector(n)).focus(),t.setResetFocusStatus(null))}},{key:"onResetAccessibilityFocus",value:function(){this.props.sessionStorage.setResetFocusStatus(!0)}},{key:"render",value:function(){var t=this.props,n=t.children,o=u(t,["children"]);return this.resetFocus(),r.createElement(e,Object.assign({},o,{resetAccessibilityFocus:this.onResetAccessibilityFocus}),n)}}]),n}();return m([i.a],t.prototype,"onResetAccessibilityFocus",null),t=m([Object(c.a)(l.b.SESSION_STORAGE)],t)};n.d(t,"a",function(){return b})},1434:function(e,t,n){"use strict";n.r(t),t.default={id:"loading.icon-usage",viewBox:"0 0 72 72",url:n.p+"sprite.svg#loading.icon-usage",toString:function(){return this.url}}},1435:function(e,t,n){"use strict";n.r(t),t.default={id:"geolocation.icon-usage",viewBox:"0 0 36.17 36",url:n.p+"sprite.svg#geolocation.icon-usage",toString:function(){return this.url}}},1436:function(e,t,n){},1437:function(e,t,n){},1438:function(e,t,n){},1439:function(e,t,n){"use strict";var r=n(1424);n.o(r,"CalendarPageLocationUpdateStrategy")&&n.d(t,"CalendarPageLocationUpdateStrategy",function(){return r.CalendarPageLocationUpdateStrategy}),n.o(r,"DefaultLocationUpdateStrategy")&&n.d(t,"DefaultLocationUpdateStrategy",function(){return r.DefaultLocationUpdateStrategy}),n.o(r,"EventPageLocationUpdateStrategy")&&n.d(t,"EventPageLocationUpdateStrategy",function(){return r.EventPageLocationUpdateStrategy});var o=n(1425);n.d(t,"CalendarPageLocationUpdateStrategy",function(){return o.a});var a=n(1422);n.d(t,"DefaultLocationUpdateStrategy",function(){return a.a});var i=n(1426);n.d(t,"EventPageLocationUpdateStrategy",function(){return i.a})},1440:function(e,t,n){},1441:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n.n(a),c=n(1416),l=n.n(c),u=n(3),s=n(10),f=n(1429),p=n(16),d=n(69),y=n(4),m=n(53),b=n(162),h=n(1423),g=n(61),v=n(161);n(1440);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":N(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},P=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=O(this,E(t).call(this,e))).state={triggerEvent:!1,staticTile:null,href:n.getHref()},n.collectionTitleRef=o.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,o.a.Component),function(e,t,n){t&&S(e.prototype,t),n&&S(e,n)}(t,[{key:"componentDidMount",value:function(){this.setHref()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.schedule,r=t.displayMedia,o=t.lazyLoaded,a=n.backgroundMedia&&r&&this.state.href,i=this.collectionTitleRef.current;o&&!a&&i&&i.focus(),n.urlTitle===e.schedule.urlTitle&&n.id===e.schedule.id||this.setHref()}},{key:"getHref",value:function(){var e=this.props,t=e.schedule,n=e.configManager,r=e.allLocales,o=null;return t.urlTitle&&t.id&&(o=Object(p.a)(Object(p.j)(n.getPageRoute(y.PageName.EVENT),{stageRootPath:r.currentLocale.stageRootPath||void 0,courseSlug:t.urlTitle,scheduleId:t.id}),t.storeNum)),o}},{key:"setHref",value:function(){this.setState({href:this.getHref()})}},{key:"renderDisplayDate",value:function(){var e=this.props.displayDate,t=this.state.triggerEvent;if(!e)return null;var n=i()("schedule-list-item-date-heading",{"animation-ready":!t,"animation-finished":t});return o.a.createElement("div",{className:n},o.a.createElement("h3",{className:"typography-body-reduced"},e))}},{key:"renderMedia",value:function(e,t){var n=this.props,r=n.tagProps,a=n.lazyLoaded,i=l()(r,{tabIndex:-1}),c=a?{focus:!0}:{},u=m.a.IMAGE_DEFAULTS.SCHEDULE_LIST_ITEM_IMAGE_VIEWPORT_MAPPINGS,s=m.a.INLINE_VIDEO_DEFAULTS.SCHEDULE_LIST_ITEM_VIDEO_VIEWPORT_MAPPINGS;return o.a.createElement("div",{className:"schedule-list-item__media"},o.a.createElement(v.a,Object.assign({href:t,tagProps:l()(r,i)},c,{addLocation:!0,addNearby:!1}),o.a.createElement(g.a,{config:g.a.DEFAULTS.MEDIA},o.a.createElement(m.b,{viewportImageMappings:u,viewportInlineVideoMappings:s,viewportImageOrientationMappings:b.f,mediaData:e,loadImages:!0,ref:o.a.createRef(),loadOnDemand:!1,videoConfig:{preload:!1,autoplay:!0},forceImage:!0}))))}},{key:"getDateFormat",value:function(e){var t=this.props,n=t.schedule,r=t.displayMonthInDate;return(n&&n.displayDate?n.displayDate.length:0)>1?e.fullDate:r?e.dateTime:e.timeRange}},{key:"renderDates",value:function(){var e=this,t=this.props.schedule.displayDate;return t?t.map(function(t,n){return o.a.createElement("p",{className:"schedule-list-item__store-time typography-body-reduced",key:n},e.getDateFormat(t))}):null}},{key:"getClassNames",value:function(){var e=this.props,t=e.firstItem,n=e.displayDate,r=this.state.triggerEvent;return i()("schedule-list-item",{"first-item":t,"display-date":!!n,"animation-ready":!r,"animation-finished":r})}},{key:"renderScheduleStatus",value:function(){var e=this.props,t=e.schedule,n=e.i18n,r=t.status;return r===y.EventStatus.WAITLIST||r===y.EventStatus.FULL?o.a.createElement("span",{className:"typography-body-reduced schedule-list-item__status"},n.value("global.".concat(f.a[r]))):null}},{key:"getMultiLanguageText",value:function(){var e=this.props,t=e.schedule,n=e.i18n,r=e.allStores,o=t.lang;return o&&r.isMultiLanguage()?n.value("global.delivery-language-open-punctuation")+n.value("language.".concat(o))+n.value("global.delivery-language-close-punctuation"):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.displayMedia,r=t.i18n,a=t.index,c=t.schedule,l=t.tagProps,u=this.state.href,s=c.backgroundMedia,f=s&&n&&u,p=r.value("global.cta-details"),y=i()("column large-2 medium-12 schedule-list-item__cta",c.collectionName&&"schedule-list-item__cta--with-eyebrow");return o.a.createElement(g.a,{config:{eventName:"calendar item animation in",start:"-100vh + 130px",callback:function(){return e.setState({triggerEvent:!0})},eventType:d.a.INSTANT}},this.renderDisplayDate(),o.a.createElement("div",{className:this.getClassNames()},f&&this.renderMedia(s,u),o.a.createElement("div",{className:"row schedule-list-item__details"},o.a.createElement("div",{className:"column large-10 medium-12"},c.collectionName&&o.a.createElement("p",Object.assign({className:"typography-body-reduced schedule-list-item__collection-name"},{tabIndex:-1},{ref:this.collectionTitleRef}),c.collectionName),c.name&&u&&o.a.createElement("div",{className:"schedule-list-item__title typography-eyebrow"},o.a.createElement(v.a,{href:u,tagProps:l,addLocation:!0,addNearby:!1},c.name," ",this.getMultiLanguageText())),this.renderDates(),c.storeTitle&&o.a.createElement("p",{className:"typography-body-reduced"},c.storeTitle)),o.a.createElement("div",{className:y},u&&o.a.createElement("div",{"data-analytics-title":"details - "+c.title+" - "+a,"data-schedule-id":c.id,className:"schedule-list-item__details-link"},o.a.createElement(h.a,{href:u,tagProps:l,addNearby:!1},o.a.createElement("span",{className:"a11y"},c.name+" - "+c.displayDate[0].timeRange+" - "+c.storeTitle),p)),this.renderScheduleStatus()))))}}]),t}();P=j([Object(s.a)(u.b.I18N,u.b.CONFIG_MANAGER,u.b.ALL_LOCALES,u.b.ALL_STORES)],P),n.d(t,"a",function(){return P})},1442:function(e,t,n){},1446:function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(10),i=n(161),c=n(38);n(1442);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=new c.b,m=Object(c.c)(i.a),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,s(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.onChangeLocationClick,o=e.path;return r.createElement("section",{className:"no-session-section"},r.createElement("div",{className:"section-content"},r.createElement("hr",null),r.createElement("div",{className:"row no-session-section__content"},r.createElement("div",{className:"column large-centered large-5 small-12 text-centered"},r.createElement("div",{className:"typography-intro"},t.value(o)),r.createElement("p",{className:"no-session-section__link-wrapper"},r.createElement(m,{onClick:n,analyticsAttr:y.withProp3("t@a - change location").build()},t.value("global.cta-change-location")))))))}}]),t}();b.defaultProps={path:"error.no-results-for-location"},b=d([Object(a.a)(o.b.I18N)],b),n.d(t,"a",function(){return b})},1448:function(e,t,n){"use strict";var r=n(0),o=n(6),a=n.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,s(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=c(e,["className","children"]),i=a()("description",t);return r.createElement("p",Object.assign({className:i},o),n)}}]),t}();n.d(t,"a",function(){return p})},1455:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.i18n=t}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"getDateHeadline",value:function(e){return this.headline(e)}},{key:"headline",value:function(e){var t=new Date(e.startTime);return t.setHours(0,0,0,0),this.getResult(t,e)}},{key:"getResult",value:function(e,t){var n=new Date,r=new Date(n.getTime()+864e5);return e.toDateString()===n.toDateString()?this.i18n.value("datetime.today"):e.toDateString()===r.toDateString()?this.i18n.value("datetime.tomorrow"):t.displayDate&&t.displayDate[0]?t.displayDate[0].date:""}}]),e}();n.d(t,"a",function(){return o})},1461:function(e,t,n){},1462:function(e,t,n){},1463:function(e,t,n){},1464:function(e,t,n){},1465:function(e,t,n){},1466:function(e,t,n){},617:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(7),i=n(1430),c=n(399),l=n(54),u=Object(l.c)({areStoresAvailable:c.a}),s=r.createContext({}),f=s.Provider,p=s.Consumer,d=n(10),y=n(3);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,h(t).call(this,e))).state={scrollToElements:new Map,active:n.props.active||"",offset:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(t,[{key:"setActive",value:function(e){var t=this;return function(){var n=t.props,r=n.browserService,o=n.animationDuration,a=t.state.scrollToElements;t.setState({active:e});var i=a.get(e),c=i.el,l=i.offset;r.windowScrollToElement({element:c,duration:o,withAnimation:!0,offset:l})}}},{key:"registerScrollToComponent",value:function(e,t,n){var r=this.state.scrollToElements;r.set(e,{el:t,offset:n}),this.setState({scrollToElements:r})}},{key:"unregisterScrollToComponent",value:function(e){var t=this.state.scrollToElements;t.delete(e),this.setState({scrollToElements:t})}},{key:"render",value:function(){var e=this.props.children,t={setActive:this.setActive,registerScrollToComponent:this.registerScrollToComponent,unregisterScrollToComponent:this.unregisterScrollToComponent};return r.createElement(f,{value:t},e)}}]),t}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}S([a.a],O.prototype,"setActive",null),S([a.a],O.prototype,"registerScrollToComponent",null),S([a.a],O.prototype,"unregisterScrollToComponent",null),O=S([Object(d.a)(y.b.BROWSER_SERVICE)],O);var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,j(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["Component"]),function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.tagProps;return r.createElement(p,null,function(t){var a=t.setActive;return r.createElement("div",Object.assign({},o,{onClick:a(e.props.id),role:"link"}),n)})}}]),t}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=R(this,T(t).call(this,e))).element=r.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.registerScrollToComponent,n=e.id,r=e.offset;t(n,this.element.current,r)}},{key:"componentWillUnmount",value:function(){var e=this.props;(0,e.unregisterScrollToComponent)(e.id)}},{key:"render",value:function(){var e=this.props.children;return r.createElement("div",{ref:this.element},e)}}]),t}(),C=r.forwardRef(function(e,t){return r.createElement(p,null,function(n){var o=n.registerScrollToComponent,a=n.unregisterScrollToComponent;return r.createElement(I,Object.assign({registerScrollToComponent:o,unregisterScrollToComponent:a,ref:t},e))})});C.displayName="AutoScrollSection";var M=n(6),D=n.n(M),x=n(357),U=n(592),G=n(593),z=n(353);n(1461);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y,X,Q,J,K=Object(z.a)(_),Z=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=H(this,W(t).apply(this,arguments))).state={sectionNavVisibility:!1,sectionNavActiveItem:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,r["Component"]),function(e,t,n){t&&V(e.prototype,t),n&&V(e,n)}(t,[{key:"renderNavigationItems",value:function(){var e=this.props,t=e.passions,n=e.standaloneTag,o=this.state.sectionNavActiveItem,a=F(t);return n[0]&&n[0].schedules.length>1&&a.push(n[0]),a.map(function(e,t){if(!e.schedules.length)return null;var n=D()("section-nav-menu-item chapternav-item-name-".concat(t+1),e.collId===o&&"active");return r.createElement("li",{className:n,key:e.id},r.createElement(G.a,{id:e.collId},r.createElement(K,{id:e.id,analyticsAttr:{"data-analytics-click":"prop3:t@a - jumplink - {{collId}}","data-analytics-title":"jumplink - {{collId}}"},analyticsData:{collId:e.collId}},e.hero.title)))})}},{key:"render",value:function(){var e=this.state,t=e.sectionNavVisibility,n=e.sectionNavActiveItem,o=this.props.i18n,a=D()("section-nav",t&&"visible","typography-tout");return r.createElement(x.a,{itemsSelector:".horizontal-scroll__hide-scroll"},r.createElement("nav",{id:"chapternav",className:a,"aria-hidden":!t,"aria-label":o.value("global.a11y-section-navigation-title")},r.createElement("div",{className:"chapternav-wrapper chapternav-background"},r.createElement("ul",{className:"chapternav-items"},r.createElement(U.a,{active:n,threshold:15},this.renderNavigationItems())),r.createElement("div",{className:"chapternav-paddles"},r.createElement("button",{className:"chapternav-paddle chapternav-paddle-left","aria-hidden":"true",disabled:!0}),r.createElement("button",{className:"chapternav-paddle chapternav-paddle-right","aria-hidden":"true",disabled:!0})))))}},{key:"updateSectionNavVisibility",value:function(e){this.setState({sectionNavVisibility:e})}},{key:"setSectionNavActiveItem",value:function(e){this.setState({sectionNavActiveItem:e})}}]),t}(),$=n(1423),ee=n(1448),te=n(351),ne=(n(1462),n(222)),re=n(4);function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.STANDARD="standard",e.ALT="alt"}(J||(J={}));var ae=(oe(Q={},re.ViewportSizes.XLARGE,(oe(Y={},J.STANDARD,{fiveStaggered:[{index:1,cardSize:ne.a.MEDIUM},{index:3,cardSize:ne.a.SMALL},{index:0,cardSize:ne.a.LARGE},{index:4,cardSize:ne.a.SMALL},{index:2,cardSize:ne.a.MEDIUM}],fourStaggered:[{index:0,cardSize:ne.a.LARGE},{index:3,cardSize:ne.a.SMALL},{index:2,cardSize:ne.a.MEDIUM},{index:1,cardSize:ne.a.LARGE}],threeStaggered:[{index:0,cardSize:ne.a.LARGE},{index:1,cardSize:ne.a.MEDIUM},{index:2,cardSize:ne.a.SMALL}],twoStaggered:[{index:0,cardSize:ne.a.LARGE},{index:1,cardSize:ne.a.MEDIUM}],oneStaggered:[{index:0,cardSize:ne.a.MEDIUM}]}),oe(Y,J.ALT,{fiveStaggered:[{index:0,cardSize:ne.a.LARGE},{index:2,cardSize:ne.a.MEDIUM},{index:4,cardSize:ne.a.SMALL},{index:3,cardSize:ne.a.SMALL},{index:1,cardSize:ne.a.MEDIUM}],fourStaggered:[{index:0,cardSize:ne.a.LARGE},{index:2,cardSize:ne.a.MEDIUM},{index:3,cardSize:ne.a.SMALL},{index:1,cardSize:ne.a.LARGE}],threeStaggered:[{index:1,cardSize:ne.a.MEDIUM},{index:0,cardSize:ne.a.LARGE},{index:2,cardSize:ne.a.SMALL}],twoStaggered:[{index:1,cardSize:ne.a.MEDIUM},{index:0,cardSize:ne.a.LARGE}],oneStaggered:[{index:0,cardSize:ne.a.MEDIUM}]}),Y)),oe(Q,re.ViewportSizes.LARGE,(oe(X={},J.STANDARD,{fiveStaggered:[{index:0,cardSize:ne.a.LARGE},{index:4,cardSize:ne.a.SMALL},{index:1,cardSize:ne.a.MEDIUM},{index:3,cardSize:ne.a.SMALL},{index:2,cardSize:ne.a.MEDIUM}],fourStaggered:[{index:0,cardSize:ne.a.LARGE},{index:3,cardSize:ne.a.SMALL},{index:2,cardSize:ne.a.MEDIUM},{index:1,cardSize:ne.a.LARGE}],threeStaggered:[{index:0,cardSize:ne.a.LARGE},{index:1,cardSize:ne.a.MEDIUM},{index:2,cardSize:ne.a.SMALL}],twoStaggered:[{index:0,cardSize:ne.a.LARGE},{index:1,cardSize:ne.a.MEDIUM}],oneStaggered:[{index:0,cardSize:ne.a.MEDIUM}]}),oe(X,J.ALT,{fiveStaggered:[{index:1,cardSize:ne.a.MEDIUM},{index:3,cardSize:ne.a.SMALL},{index:2,cardSize:ne.a.MEDIUM},{index:0,cardSize:ne.a.LARGE},{index:4,cardSize:ne.a.SMALL}],fourStaggered:[{index:2,cardSize:ne.a.MEDIUM},{index:1,cardSize:ne.a.LARGE},{index:0,cardSize:ne.a.LARGE},{index:3,cardSize:ne.a.SMALL}],threeStaggered:[{index:1,cardSize:ne.a.MEDIUM},{index:2,cardSize:ne.a.SMALL},{index:0,cardSize:ne.a.LARGE}],twoStaggered:[{index:1,cardSize:ne.a.MEDIUM},{index:0,cardSize:ne.a.LARGE}],oneStaggered:[{index:0,cardSize:ne.a.MEDIUM}]}),X)),Q),ie=n(161),ce=n(133),le=n(61),ue=n(16),se=n(60),fe=n(38),pe=n(53),de=n(162),ye=n(1417);n(1463);function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Se=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ve(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Oe=Object(fe.c)(ie.a),Ee=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=be(this,he(t).call(this,e))).media=r.createRef(),n.state={tileAnim:!1,loadImages:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&me(e.prototype,t),n&&me(e,n)}(t,[{key:"render",value:function(){var e,t,n=this.props,o=n.schedule,a=n.forceImage,i=n.forceSmall,c=n.playOnHover,l=void 0===c||c,u=n.standAlone,s=n.cardSize,f=n.i18n,p=n.allLocales,d=this.props.configManager.getPageRoute(re.PageName.EVENT),y=p.currentLocale.stageRootPath||void 0,m=o.type===ce.a.SPECIAL_EVENTS?Object(ue.a)(Object(ue.j)(d,{courseSlug:o.urlTitle,scheduleId:o.id,stageRootPath:y}),o.storeNum):Object(ue.j)(d,{courseSlug:o.urlTitle,stageRootPath:y}),b=D()(this.state.tileAnim&&" active");l?(t=le.a.DEFAULTS.HERO_GALLERY,e={onMouseOver:Object(ye.throttle)(this.play,100),onMouseLeave:Object(ye.throttle)(this.pause,250)}):t=le.a.DEFAULTS.MEDIA;var h=i?"small tile".concat(b):"tile ".concat(s).concat(b),g=("".concat(f.value("global.cta-see-times-locations")," ").concat(o.prefix," ").concat(o.title),s===ne.a.LARGE?pe.a.INLINE_VIDEO_DEFAULTS.SCHEDULE_TILE_LARGE_VIDEO_MAPPINGS:pe.a.INLINE_VIDEO_DEFAULTS.SCHEDULE_TILE_MEDIUM_VIDEO_MAPPINGS),v=u?de.d:de.e;return r.createElement("div",{className:h},r.createElement(le.a,{config:[{eventName:"tile-animation-"+o.id,start:"-100vh + 85px",eventType:se.AnimSystemEventType.INSTANT,callback:this.updateTileAnim,once:!0}],className:"outer-anim-system-wrapper"},r.createElement(Oe,{href:"".concat(m),analyticsAttr:'{"prop3":"t@a - details - {{scheduleName}} - {{mediaType}}", "eVar80": "{{storeNum}}", "eVar81": "{{programName}}", "eVar82": "{{scheduleName}}", "eVar83": "{{sessionTime}}"}',analyticsData:{scheduleName:o.name,programName:o.prefix,storeNum:o.storeNum,mediaType:this.getTileType(),sessionTime:new Date(o.startTime).toUTCString()}},r.createElement("div",Object.assign({className:"tile-content-wrapper"},e),r.createElement(le.a,{config:t},r.createElement(pe.b,{cardSize:u?null:s,mediaData:o.backgroundMedia,ref:this.media,forceImage:a,loadOnDemand:!0,videoConfig:{looping:!1,autoplay:!0},imageConfig:{imageSize:950},loadImages:this.state.loadImages,viewportInlineVideoMappings:g,viewportImageOrientationMappings:v})),r.createElement("div",{className:"schedule-caption"},r.createElement("h3",{className:"schedule-caption-name"},o.prefix),r.createElement("p",{className:"schedule-caption-description"},o.title),o.type!==ce.a.SPECIAL_EVENTS||i?r.createElement("span",{className:"schedule-caption-link typography-body-reduced"},f.value("global.cta-see-times-locations")):r.createElement(r.Fragment,null,r.createElement("span",{className:"schedule-caption-date typography-body-reduced"},o.displayDate[0].dateTime),r.createElement("span",{className:"schedule-caption-store-name typography-body-reduced"},o.storeTitle)))))))}},{key:"updateTileAnim",value:function(){this.setState({tileAnim:!0,loadImages:!0})}},{key:"play",value:function(){this.media&&this.media.current&&this.media.current.play&&this.media.current.play()}},{key:"pause",value:function(){this.media&&this.media.current&&this.media.current.pause&&this.media.current.pause()}},{key:"reset",value:function(){this.media&&this.media.current&&this.media.current.reset&&this.media.current.reset()}},{key:"getTileType",value:function(){if(this.media&&this.media.current)return this.media.current.getType()}}]),t}();Se([a.a],Ee.prototype,"updateTileAnim",null),Se([a.a],Ee.prototype,"play",null),Se([a.a],Ee.prototype,"pause",null),Se([a.a],Ee.prototype,"reset",null),Se([a.a],Ee.prototype,"getTileType",null),Ee=Se([Object(d.a)(y.b.I18N,y.b.CONFIG_MANAGER,y.b.ALL_LOCALES)],Ee);var we,Ne=n(2);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_e(e,t,n[t])})}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.error="error",e.one="one",e.two="two",e.three="three",e.four="four",e.five="five"}(we||(we={}));var Ae=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ke(this,Re(t).apply(this,arguments))).MAX_STANDARD_PASSION_QUANTITY=5,e.MAX_FORCE_SMALL_PASSION_QUANTITY=4,e.passionValues=[we.error,we.one,we.two,we.three,we.four],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,r["Component"]),function(e,t,n){t&&Le(e.prototype,t),n&&Le(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.passion,n=e.forceSmall,o=e.standard,a=e.viewportData,i=t.schedules.length,c=this.convertPassionNumber(i);if(c===we.error)return null;var l=o&&!n?J.ALT:J.STANDARD,u=a.viewport!==Ne.b.XLARGE||n?Ne.b.LARGE:Ne.b.XLARGE,s=ae[u][l]["".concat(c,"Staggered")],f=this.formatSchedules({schedules:t.schedules,sizeMap:s,forceSmall:n}),p=D()("schedule-container","container-".concat(i<6?i:5,"-items"),l,n&&"force-small");return r.createElement("div",{className:p},n?this.renderStandAlone(t.schedules):this.renderSchedulesWithVideo(f,a.viewport),se.AnimSystem.initiateAnimSystemForceUpdate())}},{key:"formatSchedules",value:function(e){for(var t=e.schedules,n=e.sizeMap,r=e.forceSmall,o=0,a=[],i=0;i<t.length&&i<this.MAX_STANDARD_PASSION_QUANTITY;i++){var c=Pe({},t[n[i].index],{forceImage:!0,cardSize:n[i].cardSize});c.cardSize=r?ne.a.SMALL:c.cardSize,c.backgroundMedia.ambientVideo&&o<2&&c.cardSize!==ne.a.SMALL&&(c.forceImage=!1,o++),a.push(c)}return a}},{key:"convertPassionNumber",value:function(e){return this.passionValues[e]||we.five}},{key:"renderStandAlone",value:function(e){return(e||[]).slice(0,this.MAX_FORCE_SMALL_PASSION_QUANTITY).map(function(e){return r.createElement(Ee,{key:e.id,schedule:e,playOnHover:!1,forceImage:!0,forceSmall:!0,standAlone:!0})})}},{key:"renderSchedulesWithVideo",value:function(e,t){return e.map(function(e){return r.createElement(Ee,{key:e.id,schedule:e,cardSize:e.cardSize,forceImage:e.forceImage,playOnHover:!0,viewport:t})})}}]),t}(),Ie=Object(se.WithViewportEmitter)(Ae);n(1464);function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ge=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ue(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ze=Object(fe.c)($.a),Be=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Me(this,De(t).apply(this,arguments))).sectionClassNames=D()("tag-section",e.props.standAlone&&"stand-alone large-centered"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,r["Component"]),function(e,t,n){t&&Ce(e.prototype,t),n&&Ce(e,n)}(t,[{key:"renderA11ySpan",value:function(){var e=this.props,t=e.i18n,n=e.tagData;return r.createElement("span",{className:"a11y"},t.value("global.cta-view-calendar")+" - "+n.hero.title)}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.tagData,o=e.standAlone,a=e.index,i=e.forceImage;return r.createElement("section",{className:this.sectionClassNames,"data-analytics-activitymap-region-id":n.collId},o?r.createElement(r.Fragment,null,r.createElement("h2",{className:"typography-headline-elevated large-8 small-10 large-centered"},n.hero.title),r.createElement("p",{className:"typography-intro-elevated large-8 small-10 large-centered"},n.mediumDescription),r.createElement(Ie,{standAlone:o,passion:n,standard:a%2,forceSmall:!0}),r.createElement("div",{className:"section-content"},r.createElement("article",{className:"row tag-section__footnote"},r.createElement(ee.a,{className:"column large-8 small-10 large-centered typography-eyebrow-reduced u-font-weight-semibold"},t.compileValue("discover.see-upcoming-tagged-sessions",{tagName:n.hero.title})),r.createElement(ze,{className:"typography-body-reduced tag-section__calendar-button",analyticsAttr:'{"prop3":"t@a - view calendar: {{sectionName}}"}',href:this.getCalendarUrl()},this.renderA11ySpan(),t.value("global.cta-view-calendar"))))):r.createElement(r.Fragment,null,r.createElement(te.e,{heroData:n.hero,forceImage:i,hideCaptions:!1}),r.createElement("div",{className:"section-content"},r.createElement("article",{className:"row tag-section__description"},r.createElement("p",{className:"column large-8 small-10 large-centered typography-headline-description"},n.mediumDescription))),r.createElement(Ie,{passion:n,standard:this.props.index%2}),r.createElement("div",{className:"section-content"},r.createElement("article",{className:"row tag-section__footnote"},r.createElement(ee.a,{className:"column large-8 small-10 large-centered typography-eyebrow-reduced u-font-weight-semibold"},t.compileValue("discover.see-upcoming-tagged-sessions",{tagName:n.hero.title})),r.createElement(ze,{className:"typography-body-reduced tag-section__calendar-button",analyticsAttr:'{"prop3":"t@a - view calendar: {{sectionName}}"}',href:this.getCalendarUrl(n.collId)},this.renderA11ySpan(),t.value("global.cta-view-calendar"))))))}},{key:"getCalendarUrl",value:function(e){var t=this.props,n=t.configManager,r=t.sessionStorage,o=new URLSearchParams;return e?(o.set("topics",e),o.set("showHero","true")):o.set("topics","products-passion"),r.getNearbyFlag()?o.set(ue.k.NEAR_BY,"true"):o.delete(ue.k.NEAR_BY),{pathname:n.getPageRoute(re.PageName.CALENDAR),search:o.toString()}}}]),t}();Be=Ge([Object(d.a)(y.b.I18N,y.b.CONFIG_MANAGER,y.b.SESSION_STORAGE),Object(fe.e)(function(e){return{sectionName:e.tagData.collId}},"name: {{sectionName}}")],Be);var Fe=n(164),Ve=n(83),He=n(594),We=n(1432),qe=n(69),Ye=n(1441),Xe=n(1455);n(1465);function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var et=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$e(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},tt=new fe.b,nt=Object(fe.c)(Ye.a),rt=Object(fe.c)($.a),ot=tt.withEventDetails().build(),at=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Je(this,Ke(t).call(this,e))).dateHeadline=new Xe.a(e.i18n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,r["Component"]),function(e,t,n){t&&Qe(e.prototype,t),n&&Qe(e,n)}(t,[{key:"renderItems",value:function(){var e=this,t=null,n="";return this.props.schedules.map(function(o,a){var i=e.dateHeadline.getDateHeadline(o);return n=i!==t?i:"",t=i,r.createElement(nt,{key:a,index:a,schedule:o,displayMedia:!1,displayDate:n,analyticsAttr:{"data-analytics-click":ot,"data-analytics-activitymap-region-id":"upcoming near you"},analyticsData:{storeNum:o.storeNum,programName:o.prefix,scheduleName:o.name,sessionTime:new Date(o.startTime).toUTCString()}})})}},{key:"render",value:function(){var e=this.props.i18n,t=e.value("discover.upcoming-near-you"),n=e.value("discover.see-upcoming-sessions"),o=e.value("global.cta-view-calendar"),a="".concat(o," - ").concat(n);return r.createElement("div",{role:"group","aria-label":t},r.createElement("section",{className:"schedule-list-mini-container"},r.createElement("h2",{className:"typography-headline-elevated large-8 small-12 large-centered schedule-list-mini-headline"},t),r.createElement("div",{className:"section-content"},this.renderItems()),r.createElement("div",{className:"section-content"},r.createElement("div",{className:"schedule-list-mini"},r.createElement("article",{className:"row schedule-list-mini__footnote"},r.createElement(ee.a,{className:"column large-8 small-10 large-centered typography-eyebrow-reduced"},e.value("discover.see-upcoming-sessions")),r.createElement(rt,{addLocation:!0,className:"typography-body-reduced schedule-list-mini__calendar-button",href:this.props.configManager.getPageRoute(re.PageName.CALENDAR),analyticsAttr:'{"prop3":"t@a - view calendar: upcoming near you"}'},r.createElement("span",{className:"a11y"},a),r.createElement("span",{"aria-hidden":"true"},o)))))))}}]),t}();at=et([Object(d.a)(y.b.I18N,y.b.CONFIG_MANAGER),Object(fe.e)({sectionName:"Upcoming near you"},"name: {{sectionName}}")],at);var it=n(352),ct=n(354),lt=n(1431),ut=n(1446),st=n(1439),ft=n(94),pt=n(1433);n(1466);function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){vt(e,t,n[t])})}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ot=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":St(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Et=Object(ct.a)({sectionName:"Hero"},"name: {{sectionName}}")(te.b),wt=Object(pt.a)(lt.a),Nt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=mt(this,bt(t).call(this,e))).navigationBar=o.a.createRef(),n.locationUpdateStrategy=new st.DefaultLocationUpdateStrategy(n.props),n.state={redirectedFromUnavailableSession:!1,hiModalVisible:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,o.a.Component),function(e,t,n){t&&yt(e.prototype,t),n&&yt(e,n)}(t,[{key:"setSectionNavActiveItem",value:function(e){var t=this;return function(){t.navigationBar.current&&t.navigationBar.current.setSectionNavActiveItem(e)}}},{key:"hideNavigationBar",value:function(){this.navigationBar.current&&this.navigationBar.current.updateSectionNavVisibility(!1)}},{key:"showNavigationBar",value:function(){this.navigationBar.current&&this.navigationBar.current.updateSectionNavVisibility(!0)}},{key:"enableSectionNav",value:function(){var e=this.props,t=e.passions,n=e.standaloneTag;return t.length>1||1===t.length&&n[0].schedules.length>1}},{key:"renderSectionNav",value:function(){var e=this.props,t=e.passions,n=e.standaloneTag,r=e.i18n;if(!this.enableSectionNav())return null;var a={eventName:"session-nav-visibility",start:"-30vh",end:"100rh - 100%",relativeTo:"#section-passions"};return o.a.createElement(le.a,{config:[gt({},a,{eventType:qe.a.ENTER,callback:this.showNavigationBar}),gt({},a,{eventType:qe.a.EXIT,callback:this.hideNavigationBar})]},o.a.createElement(Z,{passions:t,standaloneTag:n,ref:this.navigationBar,i18n:r}))}},{key:"renderStandAlone",value:function(e,t){return!e||e.schedules.length<2?null:this.renderTagSection(e,0,!0)}},{key:"renderPassions",value:function(){var e=this;return this.props.passions.map(function(t,n){return t.schedules.length?e.renderTagSection(t,n):null})}},{key:"modalVideoOverrideCallback",value:function(e){return!!e.collId}},{key:"render",value:function(){var e=this.props,t=e.heroGallery,n=e.passions,r=e.standaloneTag,a=e.schedules,i=e.pageDescription,c=e.userLocation,l=e.i18n,u=!(!a||!a.length),s=!(!n||!n.length),f=l.value("error.session-not-available-more-discover");return o.a.createElement(o.a.Fragment,null,o.a.createElement(se.Modal,{type:se.ModalType.STANDARD,isOpened:this.state.redirectedFromUnavailableSession,onClose:this.resetErrorMessage,ariaLabel:f},o.a.createElement("div",{className:"text-centered signup-modal"},o.a.createElement("p",{className:"typography-label"},f),o.a.createElement("div",{className:"button-bar"},o.a.createElement("button",{className:"button pill-large",onClick:this.resetErrorMessage},l.value("global.cta-ok-got-it"))))),o.a.createElement(O,null,this.renderSectionNav(),o.a.createElement(Et,{forceImages:!1,heroGalleryIgnoreModalCallback:this.modalVideoOverrideCallback,heroGalleryData:t,id:"hero-release-sticky",showCaptions:!0}),o.a.createElement("section",{className:"".concat("discover-page","__header-container")},o.a.createElement("div",{className:"section-content"},o.a.createElement("header",{className:"row ".concat("discover-page","__header-content")},o.a.createElement("h1",{className:"visuallyhidden"},"Today at Apple"),i&&i.description&&o.a.createElement("p",{className:"".concat("discover-page","__header-description typography-headline-description column large-8 small-10 large-centered")},i.description),o.a.createElement("div",{className:"column large-8 small-10 large-centered typography-eyebrow-elevated"},o.a.createElement(wt,{resetFocusTargetId:"#current-location-button",wrappedComponentRef:this.updateLocationSelector,userLocation:c,shouldConcreteStoreBeSelected:Object(ue.f)(this.props),locationUpdateStrategy:this.locationUpdateStrategy}))))),s&&o.a.createElement("div",{id:"section-passions"},this.renderPassions(),this.renderStandAlone(r[0],n.length)),!u&&this.getNoSessionsErrorMessage(),u&&o.a.createElement(at,{schedules:a})))}},{key:"updateLocationSelector",value:function(e){this.locationSelector=e}},{key:"componentDidMount",value:function(){this.processErrorRedirect();var e=this.props,t=e.location,n=e.sessionStorage;t.state&&t.state.from===re.PageName.EVENT&&this.scrollTop(),n.remove(ft.b.CALENDAR_SELECTED_DATE)}},{key:"renderTagSection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.a.createElement(C,{id:e.id,offset:52,key:e.id},o.a.createElement(le.a,{config:{eventName:"active-session",eventType:qe.a.ENTER,start:"-30vh",end:"70%",callback:this.setSectionNavActiveItem(e.collId)}},o.a.createElement(Be,{tagData:e,index:t,standAlone:n,forceImage:!1})))}},{key:"getNoSessionsErrorMessage",value:function(){var e=this.props,t=e.derivedState,n=e.schedules,r=t.areStoresAvailable;if(n&&n.length>0)return null;var a="error.no-results-for-location";return r||(a="error.no-sessions-here-try-store"),o.a.createElement(ut.a,{path:a,onChangeLocationClick:this.showLocationModal})}},{key:"processErrorRedirect",value:function(){var e=this.props.history,t=dt(location.href.split("?"),2),n=t[0],r=t[1],o=new URLSearchParams(r);if(o.get(ue.k.ERROR)===ue.l.COURSE_NOT_FOUND){o.delete(ue.k.ERROR);var a=o.toString();window.history.replaceState({},document.title,"".concat(n).concat(a?"?"+a:"")),this.setState({redirectedFromUnavailableSession:!0})}else e.location.state&&e.location.state[ue.k.ERROR]===ue.l.COURSE_NOT_FOUND&&this.setState({redirectedFromUnavailableSession:!0})}},{key:"showLocationModal",value:function(){this.locationSelector&&this.locationSelector.showModal()}},{key:"resetErrorMessage",value:function(){this.setState({redirectedFromUnavailableSession:!1})}},{key:"scrollTop",value:function(){this.props.browserService.windowScrollToY(0,{withAnimation:!0})}}]),t}();Ot([a.a],Nt.prototype,"setSectionNavActiveItem",null),Ot([a.a],Nt.prototype,"hideNavigationBar",null),Ot([a.a],Nt.prototype,"showNavigationBar",null),Ot([a.a],Nt.prototype,"updateLocationSelector",null),Ot([a.a],Nt.prototype,"processErrorRedirect",null),Ot([a.a],Nt.prototype,"showLocationModal",null),Ot([a.a],Nt.prototype,"resetErrorMessage",null),Nt=Ot([Object(d.a)(y.b.BROWSER_SERVICE,y.b.SESSION_STORAGE),Object(Fe.b)(function(e){var t=u(e.discoverState);return gt({},e.discoverState,{globalState:e.globalState,derivedState:t})},function(e){return{actions:Object(Ve.b)(He,e),globalActions:Object(Ve.b)(We,e)}}),Object(i.a)({stickyConnectionId:"hero-release-sticky",isLocalNavSticky:!0,pageClassName:"discover-page",wrappedPageName:re.PageName.DISCOVER}),Object(it.a)({pageName:"today - discover"})],Nt),n.d(t,"DiscoverPage",function(){return Nt})}}]);